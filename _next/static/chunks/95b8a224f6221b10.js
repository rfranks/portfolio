(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,i)=>{"use strict";function n(e){let{widthInt:t,heightInt:i,blurWidth:n,blurHeight:r,blurDataURL:a,objectFit:s}=e,l=n?40*n:t,o=r?40*r:i,h=l&&o?"viewBox='0 0 "+l+" "+o+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+h+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(h?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},87690,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return r}});let n=["default","imgix","cloudinary","akamai","custom"],r={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},8927,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"getImgProps",{enumerable:!0,get:function(){return o}}),e.r(33525);let n=e.r(88143),r=e.r(87690),a=["-moz-initial","fill","none","scale-down",void 0];function s(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var i,o;let h,c,u,{src:d,sizes:p,unoptimized:f=!1,priority:g=!1,loading:m,className:b,quality:w,width:y,height:x,fill:A=!1,style:k,overrideSrc:_,onLoad:S,onLoadingComplete:E,placeholder:M="empty",blurDataURL:C,fetchPriority:T,decoding:P="async",layout:R,objectFit:I,objectPosition:L,lazyBoundary:D,lazyRoot:F,...O}=e,{imgConf:N,showAltText:W,blurComplete:j,defaultLoader:B}=t,z=N||r.imageConfigDefault;if("allSizes"in z)h=z;else{let e=[...z.deviceSizes,...z.imageSizes].sort((e,t)=>e-t),t=z.deviceSizes.sort((e,t)=>e-t),n=null==(i=z.qualities)?void 0:i.sort((e,t)=>e-t);h={...z,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===B)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let H=O.loader||B;delete O.loader,delete O.srcSet;let U="__next_img_default"in H;if(U){if("custom"===h.loader)throw Object.defineProperty(Error('Image with src "'+d+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=H;H=t=>{let{config:i,...n}=t;return e(n)}}if(R){"fill"===R&&(A=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[R];e&&(k={...k,...e});let t={responsive:"100vw",fill:"100vw"}[R];t&&!p&&(p=t)}let G="",V=l(y),q=l(x);if((o=d)&&"object"==typeof o&&(s(o)||void 0!==o.src)){let e=s(d)?d.default:d;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,u=e.blurHeight,C=C||e.blurDataURL,G=e.src,!A)if(V||q){if(V&&!q){let t=V/e.width;q=Math.round(e.height*t)}else if(!V&&q){let t=q/e.height;V=Math.round(e.width*t)}}else V=e.width,q=e.height}let X=!g&&("lazy"===m||void 0===m);(!(d="string"==typeof d?d:G)||d.startsWith("data:")||d.startsWith("blob:"))&&(f=!0,X=!1),h.unoptimized&&(f=!0),U&&!h.dangerouslyAllowSVG&&d.split("?",1)[0].endsWith(".svg")&&(f=!0);let K=l(w),Y=Object.assign(A?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:I,objectPosition:L}:{},W?{}:{color:"transparent"},k),Q=j||"empty"===M?null:"blur"===M?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:V,heightInt:q,blurWidth:c,blurHeight:u,blurDataURL:C||"",objectFit:Y.objectFit})+'")':'url("'+M+'")',J=a.includes(Y.objectFit)?"fill"===Y.objectFit?"100% 100%":"cover":Y.objectFit,Z=Q?{backgroundSize:J,backgroundPosition:Y.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Q}:{},$=function(e){let{config:t,src:i,unoptimized:n,width:r,quality:a,sizes:s,loader:l}=e;if(n)return{src:i,srcSet:void 0,sizes:void 0};let{widths:o,kind:h}=function(e,t,i){let{deviceSizes:n,allSizes:r}=e;if(i){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(i);)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,s),c=o.length-1;return{sizes:s||"w"!==h?s:"100vw",srcSet:o.map((e,n)=>l({config:t,src:i,quality:a,width:e})+" "+("w"===h?e:n+1)+h).join(", "),src:l({config:t,src:i,quality:a,width:o[c]})}}({config:h,src:d,unoptimized:f,width:V,quality:K,sizes:p,loader:H});return{props:{...O,loading:X?"lazy":m,fetchPriority:T,width:V,height:q,decoding:P,className:b,style:{...Y,...Z},sizes:$.sizes,srcSet:$.srcSet,src:_||$.src},meta:{unoptimized:f,priority:g,placeholder:M,fill:A}}}},98879,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return l}});let n=e.r(71645),r="undefined"==typeof window,a=r?()=>{}:n.useLayoutEffect,s=r?()=>{}:n.useEffect;function l(e){let{headManager:t,reduceComponentsToState:i}=e;function l(){if(t&&t.mountedInstances){let r=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(i(r,e))}}if(r){var o;null==t||null==(o=t.mountedInstances)||o.add(e.children),l()}return a(()=>{var i;return null==t||null==(i=t.mountedInstances)||i.add(e.children),()=>{var i;null==t||null==(i=t.mountedInstances)||i.delete(e.children)}}),a(()=>(t&&(t._pendingUpdate=l),()=>{t&&(t._pendingUpdate=l)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},58908,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AmpStateContext",{enumerable:!0,get:function(){return n}});let n=e.r(55682)._(e.r(71645)).default.createContext({})},15986,(e,t,i)=>{"use strict";function n(e){let{ampFirst:t=!1,hybrid:i=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||i&&n}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"isInAmpMode",{enumerable:!0,get:function(){return n}})},25633,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{default:function(){return g},defaultHead:function(){return u}});let n=e.r(55682),r=e.r(90809),a=e.r(43476),s=r._(e.r(71645)),l=n._(e.r(98879)),o=e.r(58908),h=e.r(42732),c=e.r(15986);function u(e){void 0===e&&(e=!1);let t=[(0,a.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,a.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===s.default.Fragment?e.concat(s.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let p=["name","httpEquiv","charSet","itemProp"];function f(e,t){let{inAmpMode:i}=t;return e.reduce(d,[]).reverse().concat(u(i).reverse()).filter(function(){let e=new Set,t=new Set,i=new Set,n={};return r=>{let a=!0,s=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){s=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?a=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?a=!1:t.add(r.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(r.props.hasOwnProperty(t))if("charSet"===t)i.has(t)?a=!1:i.add(t);else{let e=r.props[t],i=n[t]||new Set;("name"!==t||!s)&&i.has(e)?a=!1:(i.add(e),n[t]=i)}}}return a}}()).reverse().map((e,t)=>{let i=e.key||t;return s.default.cloneElement(e,{key:i})})}let g=function(e){let{children:t}=e,i=(0,s.useContext)(o.AmpStateContext),n=(0,s.useContext)(h.HeadManagerContext);return(0,a.jsx)(l.default,{reduceComponentsToState:f,headManager:n,inAmpMode:(0,c.isInAmpMode)(i),children:t})};("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},18556,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ImageConfigContext",{enumerable:!0,get:function(){return a}});let n=e.r(55682)._(e.r(71645)),r=e.r(87690),a=n.default.createContext(r.imageConfigDefault)},65856,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"RouterContext",{enumerable:!0,get:function(){return n}});let n=e.r(55682)._(e.r(71645)).default.createContext(null)},1948,(e,t,i)=>{"use strict";function n(e){var t;let{config:i,src:n,width:r,quality:a}=e,s=a||(null==(t=i.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return i.path+"?url="+encodeURIComponent(n)+"&w="+r+"&q="+s+(n.startsWith("/_next/static/media/"),"")}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r}}),n.__next_img_default=!0;let r=n},18581,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"useMergedRef",{enumerable:!0,get:function(){return r}});let n=e.r(71645);function r(e,t){let i=(0,n.useRef)(null),r=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=i.current;e&&(i.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(i.current=a(e,n)),t&&(r.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let i=e(t);return"function"==typeof i?i:()=>e(null)}}("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},5500,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"Image",{enumerable:!0,get:function(){return x}});let n=e.r(55682),r=e.r(90809),a=e.r(43476),s=r._(e.r(71645)),l=n._(e.r(74080)),o=n._(e.r(25633)),h=e.r(8927),c=e.r(87690),u=e.r(18556);e.r(33525);let d=e.r(65856),p=n._(e.r(1948)),f=e.r(18581),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/portfolio/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function m(e,t,i,n,r,a,s){let l=null==e?void 0:e.src;e&&e["data-loaded-src"]!==l&&(e["data-loaded-src"]=l,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),null==i?void 0:i.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,r=!1;i.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function b(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let w=(0,s.forwardRef)((e,t)=>{let{src:i,srcSet:n,sizes:r,height:l,width:o,decoding:h,className:c,style:u,fetchPriority:d,placeholder:p,loading:g,unoptimized:w,fill:y,onLoadRef:x,onLoadingCompleteRef:A,setBlurComplete:k,setShowAltText:_,sizesInput:S,onLoad:E,onError:M,...C}=e,T=(0,s.useCallback)(e=>{e&&(M&&(e.src=e.src),e.complete&&m(e,p,x,A,k,w,S))},[i,p,x,A,k,M,w,S]),P=(0,f.useMergedRef)(t,T);return(0,a.jsx)("img",{...C,...b(d),loading:g,width:o,height:l,decoding:h,"data-nimg":y?"fill":"1",className:c,style:u,sizes:r,srcSet:n,src:i,ref:P,onLoad:e=>{m(e.currentTarget,p,x,A,k,w,S)},onError:e=>{_(!0),"empty"!==p&&k(!0),M&&M(e)}})});function y(e){let{isAppRouter:t,imgAttributes:i}=e,n={as:"image",imageSrcSet:i.srcSet,imageSizes:i.sizes,crossOrigin:i.crossOrigin,referrerPolicy:i.referrerPolicy,...b(i.fetchPriority)};return t&&l.default.preload?(l.default.preload(i.src,n),null):(0,a.jsx)(o.default,{children:(0,a.jsx)("link",{rel:"preload",href:i.srcSet?void 0:i.src,...n},"__nimg-"+i.src+i.srcSet+i.sizes)})}let x=(0,s.forwardRef)((e,t)=>{let i=(0,s.useContext)(d.RouterContext),n=(0,s.useContext)(u.ImageConfigContext),r=(0,s.useMemo)(()=>{var e;let t=g||n||c.imageConfigDefault,i=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),r=t.deviceSizes.sort((e,t)=>e-t),a=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:i,deviceSizes:r,qualities:a}},[n]),{onLoad:l,onLoadingComplete:o}=e,f=(0,s.useRef)(l);(0,s.useEffect)(()=>{f.current=l},[l]);let m=(0,s.useRef)(o);(0,s.useEffect)(()=>{m.current=o},[o]);let[b,x]=(0,s.useState)(!1),[A,k]=(0,s.useState)(!1),{props:_,meta:S}=(0,h.getImgProps)(e,{defaultLoader:p.default,imgConf:r,blurComplete:b,showAltText:A});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{..._,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:f,onLoadingCompleteRef:m,setBlurComplete:x,setShowAltText:k,sizesInput:e.sizes,ref:t}),S.priority?(0,a.jsx)(y,{isAppRouter:!i,imgAttributes:_}):null]})});("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},94909,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{default:function(){return o},getImageProps:function(){return l}});let n=e.r(55682),r=e.r(8927),a=e.r(5500),s=n._(e.r(1948));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/portfolio/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let o=a.Image},57688,(e,t,i)=>{t.exports=e.r(94909)},95672,(e,t,i)=>{var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,r=/\n/g,a=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,h=/^[;\s]*/,c=/^\s+|\s+$/g;function u(e){return e?e.replace(c,""):""}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var i=1,c=1;function d(e){var t=e.match(r);t&&(i+=t.length);var n=e.lastIndexOf("\n");c=~n?e.length-n:c+e.length}function p(){var e={line:i,column:c};return function(t){return t.position=new f(e),b(a),t}}function f(e){this.start=e,this.end={line:i,column:c},this.source=t.source}f.prototype.content=e;var g=[];function m(n){var r=Error(t.source+":"+i+":"+c+": "+n);if(r.reason=n,r.filename=t.source,r.line=i,r.column=c,r.source=e,t.silent)g.push(r);else throw r}function b(t){var i=t.exec(e);if(i){var n=i[0];return d(n),e=e.slice(n.length),i}}function w(e){var t;for(e=e||[];t=y();)!1!==t&&e.push(t);return e}function y(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var i=2;""!=e.charAt(i)&&("*"!=e.charAt(i)||"/"!=e.charAt(i+1));)++i;if(i+=2,""===e.charAt(i-1))return m("End of comment missing");var n=e.slice(2,i-2);return c+=2,d(n),e=e.slice(i),c+=2,t({type:"comment",comment:n})}}b(a);var x,A=[];for(w(A);x=function(){var e=p(),t=b(s);if(t){if(y(),!b(l))return m("property missing ':'");var i=b(o),r=e({type:"declaration",property:u(t[0].replace(n,"")),value:i?u(i[0].replace(n,"")):""});return b(h),r}}();)!1!==x&&(A.push(x),w(A));return A}},70454,(e,t,i)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=null;if(!e||"string"!=typeof e)return i;var n=(0,r.default)(e),a="function"==typeof t;return n.forEach(function(e){if("declaration"===e.type){var n=e.property,r=e.value;a?t(n,r,e):r&&((i=i||{})[n]=r)}}),i};var r=n(e.r(95672))},65185,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,a=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},h=function(e,t){return"".concat(t,"-")};i.camelCase=function(e,t){var i;return(void 0===t&&(t={}),!(i=e)||a.test(i)||n.test(i))?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(l,h):e.replace(s,h)).replace(r,o))}},15511,(e,t,i)=>{"use strict";var n=(e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e.r(70454)),r=e.r(65185);function a(e,t){var i={};return e&&"string"==typeof e&&(0,n.default)(e,function(e,n){e&&n&&(i[(0,r.camelCase)(e,t)]=n)}),i}a.default=a,t.exports=a},4100,(e,t,i)=>{"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},o=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return void 0===t||n.call(e,t)},h=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;else if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,i,n,r,a,s,u=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},d=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});d<p;++d)if(t=arguments[d],null!=t)for(i in t)n=c(u,i),u!==(r=c(t,i))&&(f&&r&&(o(r)||(a=l(r)))?(a?(a=!1,s=n&&l(n)?n:[]):s=n&&o(n)?n:{},h(u,{name:i,newValue:e(f,s,r)})):void 0!==r&&h(u,{name:i,newValue:r}));return u}},1484,e=>{"use strict";let t;e.s(["default",()=>wn],1484);var i=e.i(43476),n=e.i(71645),r=e.i(62406),a=e.i(63665),s=e.i(98166),l=e.i(75756),o=e.i(84240),h=e.i(28885),c=e.i(72260),u=e.i(22030),d=e.i(54526),p=e.i(89820),f=e.i(51449),g=e.i(48251),m=e.i(31526),b=a,w=u,y=e.i(59173);let x=(0,y.default)((0,i.jsx)("path",{d:"m6.05 4.14-.39-.39c-.39-.39-1.02-.38-1.4 0l-.01.01c-.39.39-.39 1.02 0 1.4l.39.39c.39.39 1.01.39 1.4 0l.01-.01c.39-.38.39-1.02 0-1.4M3.01 10.5H1.99c-.55 0-.99.44-.99.99v.01c0 .55.44.99.99.99H3c.56.01 1-.43 1-.98v-.01c0-.56-.44-1-.99-1m9-9.95H12c-.56 0-1 .44-1 .99v.96c0 .55.44.99.99.99H12c.56.01 1-.43 1-.98v-.97c0-.55-.44-.99-.99-.99m7.74 3.21c-.39-.39-1.02-.39-1.41-.01l-.39.39c-.39.39-.39 1.02 0 1.4l.01.01c.39.39 1.02.39 1.4 0l.39-.39c.39-.39.39-1.01 0-1.4m-1.81 15.1.39.39c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-.39-.39c-.39-.39-1.02-.38-1.4 0-.4.4-.4 1.02-.01 1.41M20 11.49v.01c0 .55.44.99.99.99H22c.55 0 .99-.44.99-.99v-.01c0-.55-.44-.99-.99-.99h-1.01c-.55 0-.99.44-.99.99M12 5.5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-.01 16.95H12c.55 0 .99-.44.99-.99v-.96c0-.55-.44-.99-.99-.99h-.01c-.55 0-.99.44-.99.99v.96c0 .55.44.99.99.99m-7.74-3.21c.39.39 1.02.39 1.41 0l.39-.39c.39-.39.38-1.02 0-1.4l-.01-.01a.996.996 0 0 0-1.41 0l-.39.39c-.38.4-.38 1.02.01 1.41"}),"WbSunnyRounded"),A=(0,y.default)((0,i.jsx)("path",{d:"M11.93 2.3c-2.04-.5-4.02-.35-5.77.28-.72.26-.91 1.22-.31 1.71C8.08 6.12 9.5 8.89 9.5 12s-1.42 5.88-3.65 7.71c-.59.49-.42 1.45.31 1.7 1.04.38 2.17.59 3.34.59 6.05 0 10.85-5.38 9.87-11.6-.61-3.92-3.59-7.16-7.44-8.1"}),"ModeNightRounded"),k=function(e){let{mode:t,toggleColorMode:n}=e;return(0,i.jsx)(b.default,{sx:{maxWidth:"32px"},children:(0,i.jsx)(w.default,{variant:"text",onClick:n,size:"small","aria-label":"button to toggle theme",sx:{minWidth:"32px",height:"32px",p:"4px"},children:"dark"===t?(0,i.jsx)(x,{fontSize:"small"}):(0,i.jsx)(A,{fontSize:"small"})})})};var _=e.i(57688);let S={width:"64px",height:"auto",cursor:"pointer"},E=function(e){let{mode:t,toggleColorMode:r}=e,[l,o]=n.useState(!1),b=e=>()=>{o(e)},w=e=>{let t=document.getElementById(e);if(t){let e=t.offsetTop-128;t.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),o(!1)}};return(0,i.jsx)("div",{children:(0,i.jsx)(h.default,{position:"fixed",sx:{boxShadow:0,bgcolor:"transparent",backgroundImage:"none",mt:2},children:(0,i.jsx)(d.default,{maxWidth:"lg",children:(0,i.jsxs)(c.default,{variant:"regular",sx:e=>({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,borderRadius:"999px",bgcolor:"light"===e.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(24px)",maxHeight:40,border:"1px solid",borderColor:"divider",boxShadow:"light"===e.palette.mode?"0 0 1px rgba(85, 166, 246, 0.1), 1px 1.5px 2px -1px rgba(85, 166, 246, 0.15), 4px 4px 12px -2.5px rgba(85, 166, 246, 0.15)":"0 0 1px rgba(2, 31, 59, 0.7), 1px 1.5px 2px -1px rgba(2, 31, 59, 0.65), 4px 4px 12px -2.5px rgba(2, 31, 59, 0.65)"}),children:[(0,i.jsxs)(a.default,{sx:{flexGrow:1,display:"flex",alignItems:"center",ml:"-18px",px:0},children:[(0,i.jsx)(_.default,{src:"/logo192.png",style:S,alt:"bookworm logo",width:192,height:194}),(0,i.jsx)(p.default,{onClick:()=>w("hero"),variant:"h4",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"}},children:[(0,i.jsx)(f.default,{onClick:()=>w("highlights"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Highlights"})}),(0,i.jsx)(f.default,{onClick:()=>w("pricing"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Pricing"})}),(0,i.jsx)(f.default,{onClick:()=>w("faq"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"FAQ"})})]})]}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"},gap:.5,alignItems:"center"},children:[(0,i.jsx)(k,{mode:t,toggleColorMode:r}),(0,i.jsx)(u.default,{color:"primary",variant:"text",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",children:"Sign in"}),(0,i.jsx)(u.default,{color:"primary",variant:"contained",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",children:"Sign up"})]}),(0,i.jsxs)(a.default,{sx:{display:{sm:"",md:"none"}},children:[(0,i.jsx)(u.default,{variant:"text",color:"primary","aria-label":"menu",onClick:b(!0),sx:{minWidth:"30px",p:"4px"},children:(0,i.jsx)(m.default,{})}),(0,i.jsx)(g.default,{anchor:"right",open:l,onClose:b(!1),children:(0,i.jsxs)(a.default,{sx:{minWidth:"60dvw",p:2,backgroundColor:"background.paper",flexGrow:1},children:[(0,i.jsx)(a.default,{sx:{display:"flex",flexDirection:"column",alignItems:"end",flexGrow:1},children:(0,i.jsx)(k,{mode:t,toggleColorMode:r})}),(0,i.jsx)(f.default,{onClick:()=>w("features"),children:"Features"}),(0,i.jsx)(f.default,{onClick:()=>w("testimonials"),children:"Testimonials"}),(0,i.jsx)(f.default,{onClick:()=>w("highlights"),children:"Highlights"}),(0,i.jsx)(f.default,{onClick:()=>w("pricing"),children:"Pricing"}),(0,i.jsx)(f.default,{onClick:()=>w("faq"),children:"FAQ"}),(0,i.jsx)(s.default,{}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"contained",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",sx:{width:"100%"},children:"Sign up"})}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"outlined",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",sx:{width:"100%"},children:"Sign in"})})]})})]})]})})})})};function M(){}function C(){}RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let T=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),P=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),R={};function I(e,t){return((t||R).jsx?P:T).test(e)}let L=/[ \t\n\f\r]/g;function D(e){return""===e.replace(L,"")}class F{constructor(e,t){this.attribute=t,this.property=e}}F.prototype.attribute="",F.prototype.booleanish=!1,F.prototype.boolean=!1,F.prototype.commaOrSpaceSeparated=!1,F.prototype.commaSeparated=!1,F.prototype.defined=!1,F.prototype.mustUseProperty=!1,F.prototype.number=!1,F.prototype.overloadedBoolean=!1,F.prototype.property="",F.prototype.spaceSeparated=!1,F.prototype.space=void 0,e.s(["boolean",()=>N,"booleanish",()=>W,"commaOrSpaceSeparated",()=>U,"commaSeparated",()=>H,"number",()=>B,"overloadedBoolean",()=>j,"spaceSeparated",()=>z],744);let O=0,N=G(),W=G(),j=G(),B=G(),z=G(),H=G(),U=G();function G(){return 2**++O}var V=e.i(744);let q=Object.keys(V);class X extends F{constructor(e,t,i,n){let r=-1;if(super(e,t),function(e,t,i){i&&(e[t]=i)}(this,"space",n),"number"==typeof i)for(;++r<q.length;){let e=q[r];!function(e,t,i){i&&(e[t]=i)}(this,q[r],(i&V[e])===V[e])}}}function K(e){return e.toLowerCase()}X.prototype.defined=!0;let Y=/[A-Z]/g,Q=/-[a-z]/g,J=/^data[-\w.:]+$/i;function Z(e){return"-"+e.toLowerCase()}function $(e){return e.charAt(1).toUpperCase()}let ee={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};class et{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}function ei(e,t){let i={},n={};for(let t of e)Object.assign(i,t.property),Object.assign(n,t.normal);return new et(i,n,t)}function en(e){let t={},i={};for(let[n,r]of Object.entries(e.properties)){let a=new X(n,e.transform(e.attributes||{},n),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),t[n]=a,i[K(n)]=n,i[K(a.attribute)]=n}return new et(t,i,e.space)}et.prototype.normal={},et.prototype.property={},et.prototype.space=void 0;let er=en({properties:{ariaActiveDescendant:null,ariaAtomic:W,ariaAutoComplete:null,ariaBusy:W,ariaChecked:W,ariaColCount:B,ariaColIndex:B,ariaColSpan:B,ariaControls:z,ariaCurrent:null,ariaDescribedBy:z,ariaDetails:null,ariaDisabled:W,ariaDropEffect:z,ariaErrorMessage:null,ariaExpanded:W,ariaFlowTo:z,ariaGrabbed:W,ariaHasPopup:null,ariaHidden:W,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:z,ariaLevel:B,ariaLive:null,ariaModal:W,ariaMultiLine:W,ariaMultiSelectable:W,ariaOrientation:null,ariaOwns:z,ariaPlaceholder:null,ariaPosInSet:B,ariaPressed:W,ariaReadOnly:W,ariaRelevant:null,ariaRequired:W,ariaRoleDescription:z,ariaRowCount:B,ariaRowIndex:B,ariaRowSpan:B,ariaSelected:W,ariaSetSize:B,ariaSort:null,ariaValueMax:B,ariaValueMin:B,ariaValueNow:B,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function ea(e,t){return t in e?e[t]:t}function es(e,t){return ea(e,t.toLowerCase())}let el=en({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:H,acceptCharset:z,accessKey:z,action:null,allow:null,allowFullScreen:N,allowPaymentRequest:N,allowUserMedia:N,alt:null,as:null,async:N,autoCapitalize:null,autoComplete:z,autoFocus:N,autoPlay:N,blocking:z,capture:null,charSet:null,checked:N,cite:null,className:z,cols:B,colSpan:null,content:null,contentEditable:W,controls:N,controlsList:z,coords:B|H,crossOrigin:null,data:null,dateTime:null,decoding:null,default:N,defer:N,dir:null,dirName:null,disabled:N,download:j,draggable:W,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:N,formTarget:null,headers:z,height:B,hidden:j,high:B,href:null,hrefLang:null,htmlFor:z,httpEquiv:z,id:null,imageSizes:null,imageSrcSet:null,inert:N,inputMode:null,integrity:null,is:null,isMap:N,itemId:null,itemProp:z,itemRef:z,itemScope:N,itemType:z,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:N,low:B,manifest:null,max:null,maxLength:B,media:null,method:null,min:null,minLength:B,multiple:N,muted:N,name:null,nonce:null,noModule:N,noValidate:N,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:N,optimum:B,pattern:null,ping:z,placeholder:null,playsInline:N,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:N,referrerPolicy:null,rel:z,required:N,reversed:N,rows:B,rowSpan:B,sandbox:z,scope:null,scoped:N,seamless:N,selected:N,shadowRootClonable:N,shadowRootDelegatesFocus:N,shadowRootMode:null,shape:null,size:B,sizes:null,slot:null,span:B,spellCheck:W,src:null,srcDoc:null,srcLang:null,srcSet:null,start:B,step:null,style:null,tabIndex:B,target:null,title:null,translate:null,type:null,typeMustMatch:N,useMap:null,value:W,width:B,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:z,axis:null,background:null,bgColor:null,border:B,borderColor:null,bottomMargin:B,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:N,declare:N,event:null,face:null,frame:null,frameBorder:null,hSpace:B,leftMargin:B,link:null,longDesc:null,lowSrc:null,marginHeight:B,marginWidth:B,noResize:N,noHref:N,noShade:N,noWrap:N,object:null,profile:null,prompt:null,rev:null,rightMargin:B,rules:null,scheme:null,scrolling:W,standby:null,summary:null,text:null,topMargin:B,valueType:null,version:null,vAlign:null,vLink:null,vSpace:B,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:N,disableRemotePlayback:N,prefix:null,property:null,results:B,security:null,unselectable:null},space:"html",transform:es}),eo=en({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:U,accentHeight:B,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:B,amplitude:B,arabicForm:null,ascent:B,attributeName:null,attributeType:null,azimuth:B,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:B,by:null,calcMode:null,capHeight:B,className:z,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:B,diffuseConstant:B,direction:null,display:null,dur:null,divisor:B,dominantBaseline:null,download:N,dx:null,dy:null,edgeMode:null,editable:null,elevation:B,enableBackground:null,end:null,event:null,exponent:B,externalResourcesRequired:null,fill:null,fillOpacity:B,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:H,g2:H,glyphName:H,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:B,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:B,horizOriginX:B,horizOriginY:B,id:null,ideographic:B,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:B,k:B,k1:B,k2:B,k3:B,k4:B,kernelMatrix:U,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:B,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:B,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:B,overlineThickness:B,paintOrder:null,panose1:null,path:null,pathLength:B,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:z,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:B,pointsAtY:B,pointsAtZ:B,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:U,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:U,rev:U,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:U,requiredFeatures:U,requiredFonts:U,requiredFormats:U,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:B,specularExponent:B,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:B,strikethroughThickness:B,string:null,stroke:null,strokeDashArray:U,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:B,strokeOpacity:B,strokeWidth:null,style:null,surfaceScale:B,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:U,tabIndex:B,tableValues:null,target:null,targetX:B,targetY:B,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:U,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:B,underlineThickness:B,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:B,values:null,vAlphabetic:B,vMathematical:B,vectorEffect:null,vHanging:B,vIdeographic:B,version:null,vertAdvY:B,vertOriginX:B,vertOriginY:B,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:B,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ea}),eh=en({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),ec=en({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:es}),eu=en({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),ed=ei([er,el,eh,ec,eu],"html"),ep=ei([er,eo,eh,ec,eu],"svg");var ef=e.i(15511);let eg=ev("end"),em=ev("start");function ev(e){return function(t){let i=t&&t.position&&t.position[e]||{};if("number"==typeof i.line&&i.line>0&&"number"==typeof i.column&&i.column>0)return{line:i.line,column:i.column,offset:"number"==typeof i.offset&&i.offset>-1?i.offset:void 0}}}function eb(e){return e&&"object"==typeof e?"position"in e||"type"in e?ey(e.position):"start"in e||"end"in e?ey(e):"line"in e||"column"in e?ew(e):"":""}function ew(e){return ex(e&&e.line)+":"+ex(e&&e.column)}function ey(e){return ew(e&&e.start)+"-"+ew(e&&e.end)}function ex(e){return e&&"number"==typeof e?e:1}class eA extends Error{constructor(e,t,i){super(),"string"==typeof t&&(i=t,t=void 0);let n="",r={},a=!1;if(t&&(r="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?n=e:!r.cause&&e&&(a=!0,n=e.message,r.cause=e),!r.ruleId&&!r.source&&"string"==typeof i){let e=i.indexOf(":");-1===e?r.ruleId=i:(r.source=i.slice(0,e),r.ruleId=i.slice(e+1))}if(!r.place&&r.ancestors&&r.ancestors){let e=r.ancestors[r.ancestors.length-1];e&&(r.place=e.position)}let s=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=n,this.line=s?s.line:void 0,this.name=eb(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=a&&r.cause&&"string"==typeof r.cause.stack?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}eA.prototype.file="",eA.prototype.name="",eA.prototype.reason="",eA.prototype.message="",eA.prototype.stack="",eA.prototype.column=void 0,eA.prototype.line=void 0,eA.prototype.ancestors=void 0,eA.prototype.cause=void 0,eA.prototype.fatal=void 0,eA.prototype.place=void 0,eA.prototype.ruleId=void 0,eA.prototype.source=void 0;let ek={}.hasOwnProperty,e_=new Map,eS=/[A-Z]/g,eE=new Set(["table","tbody","thead","tfoot","tr"]),eM=new Set(["td","th"]),eC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eT(e,t,i){return"element"===t.type?function(e,t,i){let n=e.schema;"svg"===t.tagName.toLowerCase()&&"html"===n.space&&(e.schema=ep),e.ancestors.push(t);let r=eL(e,t.tagName,!1),a=function(e,t){let i,n,r={};for(n in t.properties)if("children"!==n&&ek.call(t.properties,n)){let a=function(e,t,i){let n=function(e,t){let i=K(t),n=t,r=F;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&"data"===i.slice(0,4)&&J.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(Q,$);n="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!Q.test(e)){let i=e.replace(Y,Z);"-"!==i.charAt(0)&&(i="-"+i),t="data"+i}}r=X}return new r(n,t)}(e.schema,t);if(!(null==i||"number"==typeof i&&Number.isNaN(i))){if(Array.isArray(i)&&(i=n.commaSeparated?function(e,t){let i={};return(""===e[e.length-1]?[...e,""]:e).join((i.padRight?" ":"")+","+(!1===i.padLeft?"":" ")).trim()}(i):i.join(" ").trim()),"style"===n.property){let t="object"==typeof i?i:function(e,t){try{return(0,ef.default)(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};let t=new eA("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=eC+"#cannot-parse-style-attribute",t}}(e,String(i));return"css"===e.stylePropertyNameCase&&(t=function(e){let t,i={};for(t in e)ek.call(e,t)&&(i[function(e){let t=e.replace(eS,eF);return"ms-"===t.slice(0,3)&&(t="-"+t),t}(t)]=e[t]);return i}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&n.space?ee[n.property]||n.property:n.attribute,i]}}(e,n,t.properties[n]);if(a){let[n,s]=a;e.tableCellAlignToStyle&&"align"===n&&"string"==typeof s&&eM.has(t.tagName)?i=s:r[n]=s}}return i&&((r.style||(r.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=i),r}(e,t),s=eI(e,t);return eE.has(t.tagName)&&(s=s.filter(function(e){return"string"!=typeof e||!("object"==typeof e?"text"===e.type&&D(e.value):D(e))})),eP(e,a,r,t),eR(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){let i=t.data.estree.body[0];return M("ExpressionStatement"===i.type),e.evaluater.evaluateExpression(i.expression)}eD(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,i){let n=e.schema;"svg"===t.name&&"html"===n.space&&(e.schema=ep),e.ancestors.push(t);let r=null===t.name?e.Fragment:eL(e,t.name,!0),a=function(e,t){let i={};for(let n of t.attributes)if("mdxJsxExpressionAttribute"===n.type)if(n.data&&n.data.estree&&e.evaluater){let t=n.data.estree.body[0];M("ExpressionStatement"===t.type);let r=t.expression;M("ObjectExpression"===r.type);let a=r.properties[0];M("SpreadElement"===a.type),Object.assign(i,e.evaluater.evaluateExpression(a.argument))}else eD(e,t.position);else{let r,a=n.name;if(n.value&&"object"==typeof n.value)if(n.value.data&&n.value.data.estree&&e.evaluater){let t=n.value.data.estree.body[0];M("ExpressionStatement"===t.type),r=e.evaluater.evaluateExpression(t.expression)}else eD(e,t.position);else r=null===n.value||n.value;i[a]=r}return i}(e,t),s=eI(e,t);return eP(e,a,r,t),eR(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);eD(e,t.position)}(e,t):"root"===t.type?function(e,t,i){let n={};return eR(n,eI(e,t)),e.create(t,e.Fragment,n,i)}(e,t,i):"text"===t.type?t.value:void 0}function eP(e,t,i,n){"string"!=typeof i&&i!==e.Fragment&&e.passNode&&(t.node=n)}function eR(e,t){if(t.length>0){let i=t.length>1?t:t[0];i&&(e.children=i)}}function eI(e,t){let i=[],n=-1,r=e.passKeys?new Map:e_;for(;++n<t.children.length;){let a,s=t.children[n];if(e.passKeys){let e="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(e){let t=r.get(e)||0;a=e+"-"+t,r.set(e,t+1)}}let l=eT(e,s,a);void 0!==l&&i.push(l)}return i}function eL(e,t,i){let n;if(i)if(t.includes(".")){let e,i=t.split("."),r=-1;for(;++r<i.length;){let t=I(i[r])?{type:"Identifier",name:i[r]}:{type:"Literal",value:i[r]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(r&&"Literal"===t.type),optional:!1}:t}M(e,"always a result"),n=e}else n=I(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else n={type:"Literal",value:t};if("Literal"===n.type){let t=n.value;return ek.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(n);eD(e)}function eD(e,t){let i=new eA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=eC+"#cannot-handle-mdx-estrees-without-createevaluater",i}function eF(e){return"-"+e.toLowerCase()}let eO={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eN={};function eW(e,t,i){var n;if((n=e)&&"object"==typeof n){if("value"in e)return"html"!==e.type||i?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ej(e.children,t,i)}return Array.isArray(e)?ej(e,t,i):""}function ej(e,t,i){let n=[],r=-1;for(;++r<e.length;)n[r]=eW(e[r],t,i);return n.join("")}function eB(e,t,i,n){let r,a=e.length,s=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,i=i>0?i:0,n.length<1e4)(r=Array.from(n)).unshift(t,i),e.splice(...r);else for(i&&e.splice(t,i);s<n.length;)(r=n.slice(s,s+1e4)).unshift(t,0),e.splice(...r),s+=1e4,t+=1e4}function ez(e,t){return e.length>0?(eB(e,e.length,0,t),e):t}let eH={}.hasOwnProperty,eU=e1(/[A-Za-z]/),eG=e1(/[\dA-Za-z]/),eV=e1(/[#-'*+\--9=?A-Z^-~]/);function eq(e){return null!==e&&(e<32||127===e)}let eX=e1(/\d/),eK=e1(/[\dA-Fa-f]/),eY=e1(/[!-/:-@[-`{-~]/);function eQ(e){return null!==e&&e<-2}function eJ(e){return null!==e&&(e<0||32===e)}function eZ(e){return -2===e||-1===e||32===e}let e$=e1(RegExp("\\p{P}|\\p{S}","u")),e0=e1(/\s/);function e1(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function e2(e,t,i,n){let r=n?n-1:1/0,a=0;return function(n){return eZ(n)?(e.enter(i),function n(s){return eZ(s)&&a++<r?(e.consume(s),n):(e.exit(i),t(s))}(n)):t(n)}}let e3={tokenize:function(e){let t,i=e.attempt(this.parser.constructs.contentInitial,function(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,i,"linePrefix"))},function(i){return e.enter("paragraph"),function i(n){let r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,function t(n){if(null===n){e.exit("chunkText"),e.exit("paragraph"),e.consume(n);return}return eQ(n)?(e.consume(n),e.exit("chunkText"),i):(e.consume(n),t)}(n)}(i)});return i}},e4={tokenize:function(e){let t,i,n,r=this,a=[],s=0;return l;function l(t){if(s<a.length){let i=a[s];return r.containerState=i[1],e.attempt(i[0].continuation,o,h)(t)}return h(t)}function o(e){if(s++,r.containerState._closeFlow){let i;r.containerState._closeFlow=void 0,t&&b();let n=r.events.length,a=n;for(;a--;)if("exit"===r.events[a][0]&&"chunkFlow"===r.events[a][1].type){i=r.events[a][1].end;break}m(s);let l=n;for(;l<r.events.length;)r.events[l][1].end={...i},l++;return eB(r.events,a+1,0,r.events.slice(n)),r.events.length=l,h(e)}return l(e)}function h(i){if(s===a.length){if(!t)return d(i);if(t.currentConstruct&&t.currentConstruct.concrete)return f(i);r.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(e5,c,u)(i)}function c(e){return t&&b(),m(s),d(e)}function u(e){return r.parser.lazy[r.now().line]=s!==a.length,n=r.now().offset,f(e)}function d(t){return r.containerState={},e.attempt(e5,p,f)(t)}function p(e){return s++,a.push([r.currentConstruct,r.containerState]),d(e)}function f(n){if(null===n){t&&b(),m(0),e.consume(n);return}return t=t||r.parser.flow(r.now()),e.enter("chunkFlow",{_tokenizer:t,contentType:"flow",previous:i}),function t(i){if(null===i){g(e.exit("chunkFlow"),!0),m(0),e.consume(i);return}return eQ(i)?(e.consume(i),g(e.exit("chunkFlow")),s=0,r.interrupt=void 0,l):(e.consume(i),t)}(n)}function g(e,a){let l=r.sliceStream(e);if(a&&l.push(null),e.previous=i,i&&(i.next=e),i=e,t.defineSkip(e.start),t.write(l),r.parser.lazy[e.start.line]){let e,i,a=t.events.length;for(;a--;)if(t.events[a][1].start.offset<n&&(!t.events[a][1].end||t.events[a][1].end.offset>n))return;let l=r.events.length,o=l;for(;o--;)if("exit"===r.events[o][0]&&"chunkFlow"===r.events[o][1].type){if(e){i=r.events[o][1].end;break}e=!0}for(m(s),a=l;a<r.events.length;)r.events[a][1].end={...i},a++;eB(r.events,o+1,0,r.events.slice(l)),r.events.length=a}}function m(t){let i=a.length;for(;i-- >t;){let t=a[i];r.containerState=t[1],t[0].exit.call(r,e)}a.length=t}function b(){t.write([null]),i=void 0,t=void 0,r.containerState._closeFlow=void 0}}},e5={tokenize:function(e,t,i){return e2(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},e6={partial:!0,tokenize:function(e,t,i){return function(t){return eZ(t)?e2(e,n,"linePrefix")(t):n(t)};function n(e){return null===e||eQ(e)?t(e):i(e)}}};class e9{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let i=null==t?1/0:t;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){this.setCursor(Math.trunc(e));let n=this.right.splice(this.right.length-(t||0),1/0);return i&&e8(this.left,i),n.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),e8(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),e8(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);e8(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);e8(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function e8(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function e7(e){let t,i,n,r,a,s,l,o={},h=-1,c=new e9(e);for(;++h<c.length;){for(;h in o;)h=o[h];if(t=c.get(h),h&&"chunkFlow"===t[1].type&&"listItemPrefix"===c.get(h-1)[1].type&&((n=0)<(s=t[1]._tokenizer.events).length&&"lineEndingBlank"===s[n][1].type&&(n+=2),n<s.length&&"content"===s[n][1].type))for(;++n<s.length&&"content"!==s[n][1].type;)"chunkText"===s[n][1].type&&(s[n][1]._isInFirstContentOfListItem=!0,n++);if("enter"===t[0])t[1].contentType&&(Object.assign(o,function(e,t){let i,n,r=e.get(t)[1],a=e.get(t)[2],s=t-1,l=[],o=r._tokenizer;!o&&(o=a.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let h=o.events,c=[],u={},d=-1,p=r,f=0,g=0,m=[0];for(;p;){for(;e.get(++s)[1]!==p;);l.push(s),!p._tokenizer&&(i=a.sliceStream(p),p.next||i.push(null),n&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(i),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),n=p,p=p.next}for(p=r;++d<h.length;)"exit"===h[d][0]&&"enter"===h[d-1][0]&&h[d][1].type===h[d-1][1].type&&h[d][1].start.line!==h[d][1].end.line&&(g=d+1,m.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):m.pop(),d=m.length;d--;){let t=h.slice(m[d],m[d+1]),i=l.pop();c.push([i,i+t.length-1]),e.splice(i,2,t)}for(c.reverse(),d=-1;++d<c.length;)u[f+c[d][0]]=f+c[d][1],f+=c[d][1]-c[d][0]-1;return u}(c,h)),h=o[h],l=!0);else if(t[1]._container){for(n=h,i=void 0;n--;)if("lineEnding"===(r=c.get(n))[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(i&&(c.get(i)[1].type="lineEndingBlank"),r[1].type="lineEnding",i=n);else if("linePrefix"===r[1].type||"listItemIndent"===r[1].type);else break;i&&(t[1].end={...c.get(i)[1].start},(a=c.slice(i,h)).unshift(t),c.splice(i,h-i+1,a))}}return eB(e,0,1/0,c.slice(0)),!l}let te={resolve:function(e){return e7(e),e},tokenize:function(e,t){let i;return function(t){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),n(t)};function n(t){return null===t?r(t):eQ(t)?e.check(tt,a,r)(t):(e.consume(t),n)}function r(i){return e.exit("chunkContent"),e.exit("content"),t(i)}function a(t){return e.consume(t),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,n}}},tt={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,r,"linePrefix")};function r(r){if(null===r||eQ(r))return i(r);let a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(r):e.interrupt(n.parser.constructs.flow,i,t)(r)}}},ti={tokenize:function(e){let t=this,i=e.attempt(e6,function(n){return null===n?void e.consume(n):(e.enter("lineEndingBlank"),e.consume(n),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i)},e.attempt(this.parser.constructs.flowInitial,n,e2(e,e.attempt(this.parser.constructs.flow,n,e.attempt(te,n)),"linePrefix")));return i;function n(n){return null===n?void e.consume(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),t.currentConstruct=void 0,i)}}},tn={resolveAll:tl()},tr=ts("string"),ta=ts("text");function ts(e){return{resolveAll:tl("text"===e?to:void 0),tokenize:function(t){let i=this,n=this.parser.constructs[e],r=t.attempt(n,a,s);return a;function a(e){return o(e)?r(e):s(e)}function s(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),l)}function l(e){return o(e)?(t.exit("data"),r(e)):(t.consume(e),l)}function o(e){if(null===e)return!0;let t=n[e],r=-1;if(t)for(;++r<t.length;){let e=t[r];if(!e.previous||e.previous.call(i,i.previous))return!0}return!1}}}}function tl(e){return function(t,i){let n,r=-1;for(;++r<=t.length;)void 0===n?t[r]&&"data"===t[r][1].type&&(n=r,r++):t[r]&&"data"===t[r][1].type||(r!==n+2&&(t[n][1].end=t[r-1][1].end,t.splice(n+2,r-n-2),r=n+2),n=void 0);return e?e(t,i):t}}function to(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||"lineEnding"===e[i][1].type)&&"data"===e[i-1][1].type){let n,r=e[i-1][1],a=t.sliceStream(r),s=a.length,l=-1,o=0;for(;s--;){let e=a[s];if("string"==typeof e){for(l=e.length;32===e.charCodeAt(l-1);)o++,l--;if(l)break;l=-1}else if(-2===e)n=!0,o++;else if(-1===e);else{s++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(o=0),o){let a={type:i===e.length||n||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:r.start._bufferIndex+l,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...a.start},r.start.offset===r.end.offset?Object.assign(r,a):(e.splice(i,0,["enter",a,t],["exit",a,t]),i+=2)}i++}return e}function th(e){return null===e||eJ(e)||e0(e)?1:e$(e)?2:void 0}function tc(e,t,i){let n=[],r=-1;for(;++r<e.length;){let a=e[r].resolveAll;a&&!n.includes(a)&&(t=a(t,i),n.push(a))}return t}e.s(["attentionMarkers",()=>tJ,"contentInitial",()=>tV,"disable",()=>tZ,"document",()=>tG,"flow",()=>tX,"flowInitial",()=>tq,"insideSpan",()=>tQ,"string",()=>tK,"text",()=>tY],4127);let tu={name:"attention",resolveAll:function(e,t){let i,n,r,a,s,l,o,h,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close){for(i=c;i--;)if("exit"===e[i][0]&&"attentionSequence"===e[i][1].type&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[i][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;l=e[i][1].end.offset-e[i][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;let u={...e[i][1].end},d={...e[c][1].start};td(u,-l),td(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...e[i][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[c][1].start},end:d},r={type:l>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[c][1].start}},n={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},e[i][1].end={...a.start},e[c][1].start={...s.end},o=[],e[i][1].end.offset-e[i][1].start.offset&&(o=ez(o,[["enter",e[i][1],t],["exit",e[i][1],t]])),o=ez(o,[["enter",n,t],["enter",a,t],["exit",a,t],["enter",r,t]]),o=ez(o,tc(t.parser.constructs.insideSpan.null,e.slice(i+1,c),t)),o=ez(o,[["exit",r,t],["enter",s,t],["exit",s,t],["exit",n,t]]),e[c][1].end.offset-e[c][1].start.offset?(h=2,o=ez(o,[["enter",e[c][1],t],["exit",e[c][1],t]])):h=0,eB(e,i-1,c-i+3,o),c=i+o.length-h-2;break}}for(c=-1;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e},tokenize:function(e,t){let i,n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=th(r);return function(s){return i=s,e.enter("attentionSequence"),function s(l){if(l===i)return e.consume(l),s;let o=e.exit("attentionSequence"),h=th(l),c=!h||2===h&&a||n.includes(l),u=!a||2===a&&h||n.includes(r);return o._open=!!(42===i?c:c&&(a||!u)),o._close=!!(42===i?u:u&&(h||!c)),t(l)}(s)}}};function td(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let tp={continuation:{tokenize:function(e,t,i){let n=this;return function(t){return eZ(t)?e2(e,r,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):r(t)};function r(n){return e.attempt(tp,t,i)(n)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,i){let n=this;return function(t){if(62===t){let i=n.containerState;return i.open||(e.enter("blockQuote",{_container:!0}),i.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return i(t)};function r(i){return eZ(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}},tf={name:"characterEscape",tokenize:function(e,t,i){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),n};function n(n){return eY(n)?(e.enter("characterEscapeValue"),e.consume(n),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(n)}}},tg=document.createElement("i");function tm(e){let t="&"+e+";";tg.innerHTML=t;let i=tg.textContent;return(59!==i.charCodeAt(i.length-1)||"semi"===e)&&i!==t&&i}let tv={name:"characterReference",tokenize:function(e,t,i){let n,r,a=this,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l};function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),o):(e.enter("characterReferenceValue"),n=31,r=eG,h(t))}function o(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),n=6,r=eK,h):(e.enter("characterReferenceValue"),n=7,r=eX,h(t))}function h(l){if(59===l&&s){let n=e.exit("characterReferenceValue");return r!==eG||tm(a.sliceSerialize(n))?(e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):i(l)}return r(l)&&s++<n?(e.consume(l),h):i(l)}}},tb={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return null===t?i(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tw={concrete:!0,name:"codeFenced",tokenize:function(e,t,i){let n,r=this,a={partial:!0,tokenize:function(e,t,i){let a=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(t){return e.enter("codeFencedFence"),eZ(t)?e2(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):o(t)}function o(t){return t===n?(e.enter("codeFencedFenceSequence"),function t(r){return r===n?(a++,e.consume(r),t):a>=l?(e.exit("codeFencedFenceSequence"),eZ(r)?e2(e,h,"whitespace")(r):h(r)):i(r)}(t)):i(t)}function h(n){return null===n||eQ(n)?(e.exit("codeFencedFence"),t(n)):i(n)}}},s=0,l=0;return function(t){var a=t;let h=r.events[r.events.length-1];return s=h&&"linePrefix"===h[1].type?h[2].sliceSerialize(h[1],!0).length:0,n=a,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function t(r){return r===n?(l++,e.consume(r),t):l<3?i(r):(e.exit("codeFencedFenceSequence"),eZ(r)?e2(e,o,"whitespace")(r):o(r))}(a)};function o(a){return null===a||eQ(a)?(e.exit("codeFencedFence"),r.interrupt?t(a):e.check(tb,c,f)(a)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eQ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),o(r)):eZ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),e2(e,h,"whitespace")(r)):96===r&&r===n?i(r):(e.consume(r),t)}(a))}function h(t){return null===t||eQ(t)?o(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eQ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),o(r)):96===r&&r===n?i(r):(e.consume(r),t)}(t))}function c(t){return e.attempt(a,f,u)(t)}function u(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d}function d(t){return s>0&&eZ(t)?e2(e,p,"linePrefix",s+1)(t):p(t)}function p(t){return null===t||eQ(t)?e.check(tb,c,f)(t):(e.enter("codeFlowValue"),function t(i){return null===i||eQ(i)?(e.exit("codeFlowValue"),p(i)):(e.consume(i),t)}(t))}function f(i){return e.exit("codeFenced"),t(i)}}},ty={name:"codeIndented",tokenize:function(e,t,i){let n=this;return function(t){return e.enter("codeIndented"),e2(e,r,"linePrefix",5)(t)};function r(t){let r=n.events[n.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?function t(i){return null===i?a(i):eQ(i)?e.attempt(tx,t,a)(i):(e.enter("codeFlowValue"),function i(n){return null===n||eQ(n)?(e.exit("codeFlowValue"),t(n)):(e.consume(n),i)}(i))}(t):i(t)}function a(i){return e.exit("codeIndented"),t(i)}}},tx={partial:!0,tokenize:function(e,t,i){let n=this;return r;function r(t){return n.parser.lazy[n.now().line]?i(t):eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):e2(e,a,"linePrefix",5)(t)}function a(e){let a=n.events[n.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):eQ(e)?r(e):i(e)}}};function tA(e,t,i,n,r,a,s,l,o){let h=o||1/0,c=0;return function(t){return 60===t?(e.enter(n),e.enter(r),e.enter(a),e.consume(t),e.exit(a),u):null===t||32===t||41===t||eq(t)?i(t):(e.enter(n),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),f(t))};function u(i){return 62===i?(e.enter(a),e.consume(i),e.exit(a),e.exit(r),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),d(i))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(l),u(t)):null===t||60===t||eQ(t)?i(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(r){return!c&&(null===r||41===r||eJ(r))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(n),t(r)):c<h&&40===r?(e.consume(r),c++,f):41===r?(e.consume(r),c--,f):null===r||32===r||40===r||eq(r)?i(r):(e.consume(r),92===r?g:f)}function g(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function tk(e,t,i,n,r,a){let s,l=this,o=0;return function(t){return e.enter(n),e.enter(r),e.consume(t),e.exit(r),e.enter(a),h};function h(u){return o>999||null===u||91===u||93===u&&!s||94===u&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?i(u):93===u?(e.exit(a),e.enter(r),e.consume(u),e.exit(r),e.exit(n),t):eQ(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(t){return null===t||91===t||93===t||eQ(t)||o++>999?(e.exit("chunkString"),h(t)):(e.consume(t),s||(s=!eZ(t)),92===t?u:c)}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}}function t_(e,t,i,n,r,a){let s;return function(t){return 34===t||39===t||40===t?(e.enter(n),e.enter(r),e.consume(t),e.exit(r),s=40===t?41:t,l):i(t)};function l(i){return i===s?(e.enter(r),e.consume(i),e.exit(r),e.exit(n),t):(e.enter(a),o(i))}function o(t){return t===s?(e.exit(a),l(s)):null===t?i(t):eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,o,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return t===s||null===t||eQ(t)?(e.exit("chunkString"),o(t)):(e.consume(t),92===t?c:h)}function c(t){return t===s||92===t?(e.consume(t),h):h(t)}}function tS(e,t){let i;return function n(r){return eQ(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i=!0,n):eZ(r)?e2(e,n,i?"linePrefix":"lineSuffix")(r):t(r)}}function tE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let tM={partial:!0,tokenize:function(e,t,i){return function(t){return eJ(t)?tS(e,n)(t):i(t)};function n(t){return t_(e,r,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return eZ(t)?e2(e,a,"whitespace")(t):a(t)}function a(e){return null===e||eQ(e)?t(e):i(e)}}},tC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tT=["pre","script","style","textarea"],tP={partial:!0,tokenize:function(e,t,i){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e.attempt(e6,t,i)}}},tR={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):i(t)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tI={name:"labelEnd",resolveAll:function(e){let t=-1,i=[];for(;++t<e.length;){let n=e[t][1];if(i.push(e[t]),"labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type){let e="labelImage"===n.type?4:2;n.type="data",t+=e}}return e.length!==i.length&&eB(e,0,e.length,i),e},resolveTo:function(e,t){let i,n,r,a,s=e.length,l=0;for(;s--;)if(i=e[s][1],n){if("link"===i.type||"labelLink"===i.type&&i._inactive)break;"enter"===e[s][0]&&"labelLink"===i.type&&(i._inactive=!0)}else if(r){if("enter"===e[s][0]&&("labelImage"===i.type||"labelLink"===i.type)&&!i._balanced&&(n=s,"labelLink"!==i.type)){l=2;break}}else"labelEnd"===i.type&&(r=s);let o={type:"labelLink"===e[n][1].type?"link":"image",start:{...e[n][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[n][1].start},end:{...e[r][1].end}},c={type:"labelText",start:{...e[n+l+2][1].end},end:{...e[r-2][1].start}};return a=ez(a=[["enter",o,t],["enter",h,t]],e.slice(n+1,n+l+3)),a=ez(a,[["enter",c,t]]),a=ez(a,tc(t.parser.constructs.insideSpan.null,e.slice(n+l+4,r-3),t)),a=ez(a,[["exit",c,t],e[r-2],e[r-1],["exit",h,t]]),a=ez(a,e.slice(r+1)),a=ez(a,[["exit",o,t]]),eB(e,n,e.length,a),e},tokenize:function(e,t,i){let n,r,a=this,s=a.events.length;for(;s--;)if(("labelImage"===a.events[s][1].type||"labelLink"===a.events[s][1].type)&&!a.events[s][1]._balanced){n=a.events[s][1];break}return function(t){return n?n._inactive?c(t):(r=a.parser.defined.includes(tE(a.sliceSerialize({start:n.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):i(t)};function l(t){return 40===t?e.attempt(tL,h,r?h:c)(t):91===t?e.attempt(tD,h,r?o:c)(t):r?h(t):c(t)}function o(t){return e.attempt(tF,h,c)(t)}function h(e){return t(e)}function c(e){return n._balanced=!0,i(e)}}},tL={tokenize:function(e,t,i){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),n};function n(t){return eJ(t)?tS(e,r)(t):r(t)}function r(t){return 41===t?h(t):tA(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return eJ(t)?tS(e,l)(t):h(t)}function s(e){return i(e)}function l(t){return 34===t||39===t||40===t?t_(e,o,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):h(t)}function o(t){return eJ(t)?tS(e,h)(t):h(t)}function h(n){return 41===n?(e.enter("resourceMarker"),e.consume(n),e.exit("resourceMarker"),e.exit("resource"),t):i(n)}}},tD={tokenize:function(e,t,i){let n=this;return function(t){return tk.call(n,e,r,a,"reference","referenceMarker","referenceString")(t)};function r(e){return n.parser.defined.includes(tE(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(e):i(e)}function a(e){return i(e)}}},tF={tokenize:function(e,t,i){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),n};function n(n){return 93===n?(e.enter("referenceMarker"),e.consume(n),e.exit("referenceMarker"),e.exit("reference"),t):i(n)}}},tO={name:"labelStartImage",resolveAll:tI.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):i(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tN={name:"labelStartLink",resolveAll:tI.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tW={name:"lineEnding",tokenize:function(e,t){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e2(e,t,"linePrefix")}}},tj={name:"thematicBreak",tokenize:function(e,t,i){let n,r=0;return function(a){var s;return e.enter("thematicBreak"),n=s=a,function a(s){return s===n?(e.enter("thematicBreakSequence"),function t(i){return i===n?(e.consume(i),r++,t):(e.exit("thematicBreakSequence"),eZ(i)?e2(e,a,"whitespace")(i):a(i))}(s)):r>=3&&(null===s||eQ(s))?(e.exit("thematicBreak"),t(s)):i(s)}(s)}}},tB={continuation:{tokenize:function(e,t,i){let n=this;return n.containerState._closeFlow=void 0,e.check(e6,function(i){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,e2(e,t,"listItemIndent",n.containerState.size+1)(i)},function(i){return n.containerState.furtherBlankLines||!eZ(i)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r(i)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(tH,t,r)(i))});function r(r){return n.containerState._closeFlow=!0,n.interrupt=void 0,e2(e,e.attempt(tB,t,i),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,i){let n=this,r=n.events[n.events.length-1],a=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,s=0;return function(t){let r=n.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!n.containerState.marker||t===n.containerState.marker:eX(t)){if(n.containerState.type||(n.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(tj,i,l)(t):l(t);if(!n.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(r){return eX(r)&&++s<10?(e.consume(r),t):(!n.interrupt||s<2)&&(n.containerState.marker?r===n.containerState.marker:41===r||46===r)?(e.exit("listItemValue"),l(r)):i(r)}(t)}return i(t)};function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||t,e.check(e6,n.interrupt?i:o,e.attempt(tz,c,h))}function o(e){return n.containerState.initialBlankLine=!0,a++,c(e)}function h(t){return eZ(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),c):i(t)}function c(i){return n.containerState.size=a+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(i)}}},tz={partial:!0,tokenize:function(e,t,i){let n=this;return e2(e,function(e){let r=n.events[n.events.length-1];return!eZ(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):i(e)},"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},tH={partial:!0,tokenize:function(e,t,i){let n=this;return e2(e,function(e){let r=n.events[n.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===n.containerState.size?t(e):i(e)},"listItemIndent",n.containerState.size+1)}},tU={name:"setextUnderline",resolveTo:function(e,t){let i,n,r,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){i=a;break}"paragraph"===e[a][1].type&&(n=a)}else"content"===e[a][1].type&&e.splice(a,1),r||"definition"!==e[a][1].type||(r=a);let s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[n][1].type="setextHeadingText",r?(e.splice(n,0,["enter",s,t]),e.splice(r+1,0,["exit",e[i][1],t]),e[i][1].end={...e[r][1].end}):e[i][1]=s,e.push(["exit",s,t]),e},tokenize:function(e,t,i){let n,r=this;return function(t){var s;let l,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){l="paragraph"===r.events[o][1].type;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||l)?(e.enter("setextHeadingLine"),n=t,s=t,e.enter("setextHeadingLineSequence"),function t(i){return i===n?(e.consume(i),t):(e.exit("setextHeadingLineSequence"),eZ(i)?e2(e,a,"lineSuffix")(i):a(i))}(s)):i(t)};function a(n){return null===n||eQ(n)?(e.exit("setextHeadingLine"),t(n)):i(n)}}},tG={42:tB,43:tB,45:tB,48:tB,49:tB,50:tB,51:tB,52:tB,53:tB,54:tB,55:tB,56:tB,57:tB,62:tp},tV={91:{name:"definition",tokenize:function(e,t,i){let n,r=this;return function(t){var n;return e.enter("definition"),n=t,tk.call(r,e,a,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(n)};function a(t){return(n=tE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):i(t)}function s(t){return eJ(t)?tS(e,l)(t):l(t)}function l(t){return tA(e,o,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function o(t){return e.attempt(tM,h,h)(t)}function h(t){return eZ(t)?e2(e,c,"whitespace")(t):c(t)}function c(a){return null===a||eQ(a)?(e.exit("definition"),r.parser.defined.push(n),t(a)):i(a)}}}},tq={[-2]:ty,[-1]:ty,32:ty},tX={35:{name:"headingAtx",resolve:function(e,t){let i,n,r=e.length-2,a=3;return"whitespace"===e[3][1].type&&(a+=2),r-2>a&&"whitespace"===e[r][1].type&&(r-=2),"atxHeadingSequence"===e[r][1].type&&(a===r-1||r-4>a&&"whitespace"===e[r-2][1].type)&&(r-=a+1===r?2:4),r>a&&(i={type:"atxHeadingText",start:e[a][1].start,end:e[r][1].end},n={type:"chunkText",start:e[a][1].start,end:e[r][1].end,contentType:"text"},eB(e,a,r-a+1,[["enter",i,t],["enter",n,t],["exit",n,t],["exit",i,t]])),e},tokenize:function(e,t,i){let n=0;return function(r){var a;return e.enter("atxHeading"),a=r,e.enter("atxHeadingSequence"),function r(a){return 35===a&&n++<6?(e.consume(a),r):null===a||eJ(a)?(e.exit("atxHeadingSequence"),function i(n){return 35===n?(e.enter("atxHeadingSequence"),function t(n){return 35===n?(e.consume(n),t):(e.exit("atxHeadingSequence"),i(n))}(n)):null===n||eQ(n)?(e.exit("atxHeading"),t(n)):eZ(n)?e2(e,i,"whitespace")(n):(e.enter("atxHeadingText"),function t(n){return null===n||35===n||eJ(n)?(e.exit("atxHeadingText"),i(n)):(e.consume(n),t)}(n))}(a)):i(a)}(a)}}},42:tj,45:[tU,tj],60:{concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},tokenize:function(e,t,i){let n,r,a,s,l,o=this;return function(t){var i;return i=t,e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(i),h};function h(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),r=!0,p):63===s?(e.consume(s),n=3,o.interrupt?t:L):eU(s)?(e.consume(s),a=String.fromCharCode(s),f):i(s)}function c(r){return 45===r?(e.consume(r),n=2,u):91===r?(e.consume(r),n=5,s=0,d):eU(r)?(e.consume(r),n=4,o.interrupt?t:L):i(r)}function u(n){return 45===n?(e.consume(n),o.interrupt?t:L):i(n)}function d(n){let r="CDATA[";return n===r.charCodeAt(s++)?(e.consume(n),s===r.length)?o.interrupt?t:S:d:i(n)}function p(t){return eU(t)?(e.consume(t),a=String.fromCharCode(t),f):i(t)}function f(s){if(null===s||47===s||62===s||eJ(s)){let l=47===s,h=a.toLowerCase();return!l&&!r&&tT.includes(h)?(n=1,o.interrupt?t(s):S(s)):tC.includes(a.toLowerCase())?(n=6,l)?(e.consume(s),g):o.interrupt?t(s):S(s):(n=7,o.interrupt&&!o.parser.lazy[o.now().line]?i(s):r?function t(i){return eZ(i)?(e.consume(i),t):k(i)}(s):m(s))}return 45===s||eG(s)?(e.consume(s),a+=String.fromCharCode(s),f):i(s)}function g(n){return 62===n?(e.consume(n),o.interrupt?t:S):i(n)}function m(t){return 47===t?(e.consume(t),k):58===t||95===t||eU(t)?(e.consume(t),b):eZ(t)?(e.consume(t),m):k(t)}function b(t){return 45===t||46===t||58===t||95===t||eG(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),y):eZ(t)?(e.consume(t),w):m(t)}function y(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),l=t,x):eZ(t)?(e.consume(t),y):function t(i){return null===i||34===i||39===i||47===i||60===i||61===i||62===i||96===i||eJ(i)?w(i):(e.consume(i),t)}(t)}function x(t){return t===l?(e.consume(t),l=null,A):null===t||eQ(t)?i(t):(e.consume(t),x)}function A(e){return 47===e||62===e||eZ(e)?m(e):i(e)}function k(t){return 62===t?(e.consume(t),_):i(t)}function _(t){return null===t||eQ(t)?S(t):eZ(t)?(e.consume(t),_):i(t)}function S(t){return 45===t&&2===n?(e.consume(t),T):60===t&&1===n?(e.consume(t),P):62===t&&4===n?(e.consume(t),D):63===t&&3===n?(e.consume(t),L):93===t&&5===n?(e.consume(t),I):eQ(t)&&(6===n||7===n)?(e.exit("htmlFlowData"),e.check(tP,F,E)(t)):null===t||eQ(t)?(e.exit("htmlFlowData"),E(t)):(e.consume(t),S)}function E(t){return e.check(tR,M,F)(t)}function M(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),C}function C(t){return null===t||eQ(t)?E(t):(e.enter("htmlFlowData"),S(t))}function T(t){return 45===t?(e.consume(t),L):S(t)}function P(t){return 47===t?(e.consume(t),a="",R):S(t)}function R(t){if(62===t){let i=a.toLowerCase();return tT.includes(i)?(e.consume(t),D):S(t)}return eU(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),R):S(t)}function I(t){return 93===t?(e.consume(t),L):S(t)}function L(t){return 62===t?(e.consume(t),D):45===t&&2===n?(e.consume(t),L):S(t)}function D(t){return null===t||eQ(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),D)}function F(i){return e.exit("htmlFlow"),t(i)}}},61:tU,95:tj,96:tw,126:tw},tK={38:tv,92:tf},tY={[-5]:tW,[-4]:tW,[-3]:tW,33:tO,38:tv,42:tu,60:[{name:"autolink",tokenize:function(e,t,i){let n=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return eU(t)?(e.consume(t),a):64===t?i(t):l(t)}function a(t){return 43===t||45===t||46===t||eG(t)?(n=1,function t(i){return 58===i?(e.consume(i),n=0,s):(43===i||45===i||46===i||eG(i))&&n++<32?(e.consume(i),t):(n=0,l(i))}(t)):l(t)}function s(n){return 62===n?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):null===n||32===n||60===n||eq(n)?i(n):(e.consume(n),s)}function l(t){return 64===t?(e.consume(t),o):eV(t)?(e.consume(t),l):i(t)}function o(r){return eG(r)?function r(a){return 46===a?(e.consume(a),n=0,o):62===a?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(a),e.exit("autolinkMarker"),e.exit("autolink"),t):function t(a){if((45===a||eG(a))&&n++<63){let i=45===a?t:r;return e.consume(a),i}return i(a)}(a)}(r):i(r)}}},{name:"htmlText",tokenize:function(e,t,i){let n,r,a,s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),o):47===t?(e.consume(t),x):63===t?(e.consume(t),w):eU(t)?(e.consume(t),k):i(t)}function o(t){return 45===t?(e.consume(t),h):91===t?(e.consume(t),r=0,p):eU(t)?(e.consume(t),b):i(t)}function h(t){return 45===t?(e.consume(t),d):i(t)}function c(t){return null===t?i(t):45===t?(e.consume(t),u):eQ(t)?(a=c,R(t)):(e.consume(t),c)}function u(t){return 45===t?(e.consume(t),d):c(t)}function d(e){return 62===e?P(e):45===e?u(e):c(e)}function p(t){let n="CDATA[";return t===n.charCodeAt(r++)?(e.consume(t),r===n.length?f:p):i(t)}function f(t){return null===t?i(t):93===t?(e.consume(t),g):eQ(t)?(a=f,R(t)):(e.consume(t),f)}function g(t){return 93===t?(e.consume(t),m):f(t)}function m(t){return 62===t?P(t):93===t?(e.consume(t),m):f(t)}function b(t){return null===t||62===t?P(t):eQ(t)?(a=b,R(t)):(e.consume(t),b)}function w(t){return null===t?i(t):63===t?(e.consume(t),y):eQ(t)?(a=w,R(t)):(e.consume(t),w)}function y(e){return 62===e?P(e):w(e)}function x(t){return eU(t)?(e.consume(t),A):i(t)}function A(t){return 45===t||eG(t)?(e.consume(t),A):function t(i){return eQ(i)?(a=t,R(i)):eZ(i)?(e.consume(i),t):P(i)}(t)}function k(t){return 45===t||eG(t)?(e.consume(t),k):47===t||62===t||eJ(t)?_(t):i(t)}function _(t){return 47===t?(e.consume(t),P):58===t||95===t||eU(t)?(e.consume(t),S):eQ(t)?(a=_,R(t)):eZ(t)?(e.consume(t),_):P(t)}function S(t){return 45===t||46===t||58===t||95===t||eG(t)?(e.consume(t),S):function t(i){return 61===i?(e.consume(i),E):eQ(i)?(a=t,R(i)):eZ(i)?(e.consume(i),t):_(i)}(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),n=t,M):eQ(t)?(a=E,R(t)):eZ(t)?(e.consume(t),E):(e.consume(t),C)}function M(t){return t===n?(e.consume(t),n=void 0,T):null===t?i(t):eQ(t)?(a=M,R(t)):(e.consume(t),M)}function C(t){return null===t||34===t||39===t||60===t||61===t||96===t?i(t):47===t||62===t||eJ(t)?_(t):(e.consume(t),C)}function T(e){return 47===e||62===e||eJ(e)?_(e):i(e)}function P(n){return 62===n?(e.consume(n),e.exit("htmlTextData"),e.exit("htmlText"),t):i(n)}function R(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return eZ(t)?e2(e,L,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):L(t)}function L(t){return e.enter("htmlTextData"),a(t)}}}],91:tN,92:[{name:"hardBreakEscape",tokenize:function(e,t,i){return function(t){return e.enter("hardBreakEscape"),e.consume(t),n};function n(n){return eQ(n)?(e.exit("hardBreakEscape"),t(n)):i(n)}}},tf],93:tI,95:tu,96:{name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,i,n=e.length-4,r=3;if(("lineEnding"===e[3][1].type||"space"===e[r][1].type)&&("lineEnding"===e[n][1].type||"space"===e[n][1].type)){for(t=r;++t<n;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[n][1].type="codeTextPadding",r+=2,n-=2;break}}for(t=r-1,n++;++t<=n;)void 0===i?t!==n&&"lineEnding"!==e[t][1].type&&(i=t):(t===n||"lineEnding"===e[t][1].type)&&(e[i][1].type="codeTextData",t!==i+2&&(e[i][1].end=e[t-1][1].end,e.splice(i+2,t-i-2),n-=t-i-2,t=i+2),i=void 0);return e},tokenize:function(e,t,i){let n,r,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(i){return 96===i?(e.consume(i),a++,t):(e.exit("codeTextSequence"),s(i))}(t)};function s(o){return null===o?i(o):32===o?(e.enter("space"),e.consume(o),e.exit("space"),s):96===o?(r=e.enter("codeTextSequence"),n=0,function i(s){return 96===s?(e.consume(s),n++,i):n===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(s)):(r.type="codeTextData",l(s))}(o)):eQ(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(o))}function l(t){return null===t||32===t||96===t||eQ(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}}}},tQ={null:[tu,tn]},tJ={null:[42,95]},tZ={null:[]};var t$=e.i(4127);let t0=/[\0\t\n\r]/g;function t1(e,t){let i=Number.parseInt(e,t);return i<9||11===i||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(65535&i)==65535||(65535&i)==65534||i>1114111?"":String.fromCodePoint(i)}let t2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function t3(e,t,i){if(t)return t;if(35===i.charCodeAt(0)){let e=i.charCodeAt(1),t=120===e||88===e;return t1(i.slice(t?2:1),t?16:10)}return tm(i)||e}let t4={}.hasOwnProperty;function t5(e){return{line:e.line,column:e.column,offset:e.offset}}function t6(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+eb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+eb({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+eb({start:t.start,end:t.end})+") is still open")}function t9(e){let t=this;t.parser=function(i){var n,r;let a,s,l,o;return"string"!=typeof(n={...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})&&(r=n,n=void 0),(function(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(b),autolinkProtocol:h,autolinkEmail:h,atxHeading:n(f),blockQuote:n(function(){return{type:"blockquote",children:[]}}),characterEscape:h,characterReference:h,codeFenced:n(p),codeFencedFenceInfo:r,codeFencedFenceMeta:r,codeIndented:n(p,r),codeText:n(function(){return{type:"inlineCode",value:""}},r),codeTextData:h,data:h,codeFlowValue:h,definition:n(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:r,definitionLabelString:r,definitionTitleString:r,emphasis:n(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:n(g),hardBreakTrailing:n(g),htmlFlow:n(m,r),htmlFlowData:h,htmlText:n(m,r),htmlTextData:h,image:n(function(){return{type:"image",title:null,url:"",alt:null}}),label:r,link:n(b),listItem:n(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:n(w,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:n(w),paragraph:n(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:r,resourceDestinationString:r,resourceTitleString:r,setextHeading:n(f),strong:n(function(){return{type:"strong",children:[]}}),thematicBreak:n(function(){return{type:"thematicBreak"}})},exit:{atxHeading:s(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)},autolink:s(),autolinkEmail:function(e){c.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){c.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:c,characterReferenceMarkerHexadecimal:d,characterReferenceMarkerNumeric:d,characterReferenceValue:function(e){let t,i=this.sliceSerialize(e),n=this.data.characterReferenceType;n?(t=t1(i,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):t=tm(i);let r=this.stack[this.stack.length-1];r.value+=t},characterReference:function(e){this.stack.pop().position.end=t5(e.end)},codeFenced:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){let e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:c,codeIndented:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:c,data:c,definition:s(),definitionDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tE(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(u),hardBreakTrailing:s(u),htmlFlow:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:c,htmlText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:c,image:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),i=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===i.type?i.children=e.children:i.alt=t},labelText:function(e){let t=this.sliceSerialize(e),i=this.stack[this.stack.length-2];i.label=t.replace(t2,t3),i.identifier=tE(t).toLowerCase()},lineEnding:function(e){let i=this.stack[this.stack.length-1];if(this.data.atHardBreak){i.children[i.children.length-1].position.end=t5(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(i.type)&&(h.call(this,e),c.call(this,e))},link:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tE(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};!function e(t,i){let n=-1;for(;++n<i.length;){let r=i[n];Array.isArray(r)?e(t,r):function(e,t){let i;for(i in t)if(t4.call(t,i))switch(i){case"canContainEols":{let n=t[i];n&&e[i].push(...n);break}case"transforms":{let n=t[i];n&&e[i].push(...n);break}case"enter":case"exit":{let n=t[i];n&&Object.assign(e[i],n)}}}(t,r)}}(t,(e||{}).mdastExtensions||[]);let i={};return function(e){let n={type:"root",children:[]},s={stack:[n],tokenStack:[],config:t,enter:a,exit:l,buffer:r,resume:o,data:i},h=[],c=-1;for(;++c<e.length;)("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)&&("enter"===e[c][0]?h.push(c):c=function(e,t,i){let n,r,a,s,l=t-1,o=-1,h=!1;for(;++l<=i;){let t=e[l];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?o++:o--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!n||s||o||a||(a=l),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!o&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===o&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(n){let s=l;for(r=void 0;s--;){let t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",h=!0),t[1].type="lineEnding",r=s}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!r||a<r)&&(n._spread=!0),n.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||l,0,["exit",n,t[2]]),l++,i++}if("listItemPrefix"===t[1].type){let r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};n=r,e.splice(l,0,["enter",r,t[2]]),l++,i++,a=void 0,s=!0}}}return e[t][1]._spread=h,i}(e,h.pop(),c));for(c=-1;++c<e.length;){let i=t[e[c][0]];t4.call(i,e[c][1].type)&&i[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},s),e[c][1])}if(s.tokenStack.length>0){let e=s.tokenStack[s.tokenStack.length-1];(e[1]||t6).call(s,void 0,e[0])}for(n.position={start:t5(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:t5(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<t.transforms.length;)n=t.transforms[c](n)||n;return n};function n(e,t){return function(i){a.call(this,e(i),i),t&&t.call(this,i)}}function r(){this.stack.push({type:"fragment",children:[]})}function a(e,t,i){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,i||void 0]),e.position={start:t5(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){let i=this.stack.pop(),n=this.tokenStack.pop();if(n)n[0].type!==e.type&&(t?t.call(this,e,n[0]):(n[1]||t6).call(this,e,n[0]));else throw Error("Cannot close `"+e.type+"` ("+eb({start:e.start,end:e.end})+"): its not open");i.position.end=t5(e.end)}function o(){return eW(this.stack.pop(),"boolean"!=typeof eN.includeImageAlt||eN.includeImageAlt,"boolean"!=typeof eN.includeHtml||eN.includeHtml)}function h(e){let t=this.stack[this.stack.length-1].children,i=t[t.length-1];i&&"text"===i.type||((i={type:"text",value:""}).position={start:t5(e.start),end:void 0},t.push(i)),this.stack.push(i)}function c(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=t5(e.end)}function u(){this.data.atHardBreak=!0}function d(e){this.data.characterReferenceType=e.type}function p(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function g(){return{type:"break"}}function m(){return{type:"html",value:""}}function b(){return{type:"link",title:null,url:"",children:[]}}function w(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(r)(function(e){for(;!e7(e););return e}((function(e){let t={constructs:function(e){let t={},i=-1;for(;++i<e.length;)!function(e,t){let i;for(i in t){let n,r=(eH.call(e,i)?e[i]:void 0)||(e[i]={}),a=t[i];if(a)for(n in a){eH.call(r,n)||(r[n]=[]);let e=a[n];!function(e,t){let i=-1,n=[];for(;++i<t.length;)("after"===t[i].add?e:n).push(t[i]);eB(e,0,0,n)}(r[n],Array.isArray(e)?e:e?[e]:[])}}}(t,e[i]);return t}([t$,...(e||{}).extensions||[]]),content:i(e3),defined:[],document:i(e4),flow:i(ti),lazy:{},string:i(tr),text:i(ta)};return t;function i(e){return function(i){return function(e,t,i){let n={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0},r={},a=[],s=[],l=[],o={attempt:f(function(e,t){g(e,t.from)}),check:f(p),consume:function(e){eQ(e)?(n.line++,n.column=1,n.offset+=-3===e?2:1,m()):-1!==e&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=e},enter:function(e,t){let i=t||{};return i.type=e,i.start=d(),h.events.push(["enter",i,h]),l.push(i),i},exit:function(e){let t=l.pop();return t.end=d(),h.events.push(["exit",t,h]),t},interrupt:f(p,{interrupt:!0})},h={code:null,containerState:{},defineSkip:function(e){r[e.line]=e.column,m()},events:[],now:d,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let i,n=-1,r=[];for(;++n<e.length;){let a,s=e[n];if("string"==typeof s)a=s;else switch(s){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(s)}i=-2===s,r.push(a)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){return(s=ez(s,e),function(){let e;for(;n._index<s.length;){let i=s[n._index];if("string"==typeof i)for(e=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===e&&n._bufferIndex<i.length;){var t;t=i.charCodeAt(n._bufferIndex),c=c(t)}else c=c(i)}}(),null!==s[s.length-1])?[]:(g(t,0),h.events=tc(a,h.events,h),h.events)}},c=t.tokenize.call(h,o);return t.resolveAll&&a.push(t),h;function u(e){return function(e,t){let i,n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;if(n===a)i=[e[n].slice(r,s)];else{if(i=e.slice(n,a),r>-1){let e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}s>0&&i.push(e[a].slice(0,s))}return i}(s,e)}function d(){let{_bufferIndex:e,_index:t,line:i,column:r,offset:a}=n;return{_bufferIndex:e,_index:t,line:i,column:r,offset:a}}function p(e,t){t.restore()}function f(e,t){return function(i,r,a){var s;let c,u,p,f;return Array.isArray(i)?g(i):"tokenize"in i?g([i]):(s=i,function(e){let t=null!==e&&s[e],i=null!==e&&s.null;return g([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(i)?i:i?[i]:[]])(e)});function g(e){return(c=e,u=0,0===e.length)?a:b(e[u])}function b(e){return function(i){return(f=function(){let e=d(),t=h.previous,i=h.currentConstruct,r=h.events.length,a=Array.from(l);return{from:r,restore:function(){n=e,h.previous=t,h.currentConstruct=i,h.events.length=r,l=a,m()}}}(),p=e,e.partial||(h.currentConstruct=e),e.name&&h.parser.constructs.disable.null.includes(e.name))?y(i):e.tokenize.call(t?Object.assign(Object.create(h),t):h,o,w,y)(i)}}function w(t){return e(p,f),r}function y(e){return(f.restore(),++u<c.length)?b(c[u]):a}}}function g(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&eB(h.events,t,h.events.length-t,e.resolve(h.events.slice(t),h)),e.resolveTo&&(h.events=e.resolveTo(h.events,h))}function m(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}(t,e,i)}}})(r).document().write((s=1,l="",o=!0,function(e,t,i){let n,r,h,c,u,d=[];for(e=l+("string"==typeof e?e.toString():new TextDecoder(t||void 0).decode(e)),h=0,l="",o&&(65279===e.charCodeAt(0)&&h++,o=void 0);h<e.length;){if(t0.lastIndex=h,c=(n=t0.exec(e))&&void 0!==n.index?n.index:e.length,u=e.charCodeAt(c),!n){l=e.slice(h);break}if(10===u&&h===c&&a)d.push(-3),a=void 0;else switch(a&&(d.push(-5),a=void 0),h<c&&(d.push(e.slice(h,c)),s+=c-h),u){case 0:d.push(65533),s++;break;case 9:for(r=4*Math.ceil(s/4),d.push(-2);s++<r;)d.push(-1);break;case 10:d.push(-4),s=1;break;default:a=!0,s=1}h=c+1}return i&&(a&&d.push(-5),l&&d.push(l),d.push(null)),d})(i,n,!0))))}}let t8="object"==typeof self?self:globalThis,t7=e=>((e,t)=>{let i=(t,i)=>(e.set(i,t),t),n=r=>{if(e.has(r))return e.get(r);let[a,s]=t[r];switch(a){case 0:case -1:return i(s,r);case 1:{let e=i([],r);for(let t of s)e.push(n(t));return e}case 2:{let e=i({},r);for(let[t,i]of s)e[n(t)]=n(i);return e}case 3:return i(new Date(s),r);case 4:{let{source:e,flags:t}=s;return i(new RegExp(e,t),r)}case 5:{let e=i(new Map,r);for(let[t,i]of s)e.set(n(t),n(i));return e}case 6:{let e=i(new Set,r);for(let t of s)e.add(n(t));return e}case 7:{let{name:e,message:t}=s;return i(new t8[e](t),r)}case 8:return i(BigInt(s),r);case"BigInt":return i(Object(BigInt(s)),r);case"ArrayBuffer":return i(new Uint8Array(s).buffer,s);case"DataView":{let{buffer:e}=new Uint8Array(s);return i(new DataView(e),s)}}return i(new t8[a](s),r)};return n})(new Map,e)(0),{toString:ie}={},{keys:it}=Object,ii=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let i=ie.call(e).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""];case"DataView":return[1,i]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},ir=e=>{let[t,i]=e;return 0===t&&("function"===i||"symbol"===i)},ia=function(e){let{json:t,lossy:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return((e,t,i,n)=>{let r=(e,t)=>{let r=n.push(e)-1;return i.set(t,r),r},a=n=>{if(i.has(n))return i.get(n);let[s,l]=ii(n);switch(s){case 0:{let t=n;switch(l){case"bigint":s=8,t=n.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+l);t=null;break;case"undefined":return r([-1],n)}return r([s,t],n)}case 1:{if(l){let e=n;return"DataView"===l?e=new Uint8Array(n.buffer):"ArrayBuffer"===l&&(e=new Uint8Array(n)),r([l,[...e]],n)}let e=[],t=r([s,e],n);for(let t of n)e.push(a(t));return t}case 2:{if(l)switch(l){case"BigInt":return r([l,n.toString()],n);case"Boolean":case"Number":case"String":return r([l,n.valueOf()],n)}if(t&&"toJSON"in n)return a(n.toJSON());let i=[],o=r([s,i],n);for(let t of it(n))(e||!ir(ii(n[t])))&&i.push([a(t),a(n[t])]);return o}case 3:return r([s,n.toISOString()],n);case 4:{let{source:e,flags:t}=n;return r([s,{source:e,flags:t}],n)}case 5:{let t=[],i=r([s,t],n);for(let[i,r]of n)(e||!(ir(ii(i))||ir(ii(r))))&&t.push([a(i),a(r)]);return i}case 6:{let t=[],i=r([s,t],n);for(let i of n)(e||!ir(ii(i)))&&t.push(a(i));return i}}let{message:o}=n;return r([s,{name:l,message:o}],n)};return a})(!(t||i),!!t,new Map,n)(e),n},is="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?t7(ia(e,t)):structuredClone(e):(e,t)=>t7(ia(e,t));function il(e){let t=[],i=-1,n=0,r=0;for(;++i<e.length;){let a=e.charCodeAt(i),s="";if(37===a&&eG(e.charCodeAt(i+1))&&eG(e.charCodeAt(i+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(i+1);a<56320&&t>56319&&t<57344?(s=String.fromCharCode(a,t),r=1):s=""}else s=String.fromCharCode(a);s&&(t.push(e.slice(n,i),encodeURIComponent(s)),n=i+r+1,s=""),r&&(i+=r,r=0)}return t.join("")+e.slice(n)}function io(e,t){let i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function ih(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}let ic=function(e){var t,i;if(null==e)return id;if("function"==typeof e)return iu(e);if("object"==typeof e){return Array.isArray(e)?function(e){let t=[],i=-1;for(;++i<e.length;)t[i]=ic(e[i]);return iu(function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];let r=-1;for(;++r<t.length;)if(t[r].apply(this,i))return!0;return!1})}(e):(t=e,iu(function(e){let i;for(i in t)if(e[i]!==t[i])return!1;return!0}))}if("string"==typeof e){return i=e,iu(function(e){return e&&e.type===i})}throw Error("Expected function, string, or object as test")};function iu(e){return function(t,i,n){return!!(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof i?i:void 0,n||void 0))}}function id(){return!0}let ip=[];function ig(e,t,i,n){let r,a,s,l;"function"==typeof t&&"function"!=typeof i?(a=void 0,s=t,r=i):(a=t,s=i,r=n);var o=a,h=function(e,t){let i=t[t.length-1],n=i?i.children.indexOf(e):void 0;return s(e,n,i)},c=r;"function"==typeof o&&"function"!=typeof h?(c=h,h=o):l=o;let u=ic(l),d=c?-1:1;(function e(t,i,n){let r=t&&"object"==typeof t?t:{};if("string"==typeof r.type){let e="string"==typeof r.tagName?r.tagName:"string"==typeof r.name?r.name:void 0;Object.defineProperty(a,"name",{value:"node ("+t.type+(e?"<"+e+">":"")+")"})}return a;function a(){var r;let a,s,l,p=ip;if((!o||u(t,i,n[n.length-1]||void 0))&&!1===(p=Array.isArray(r=h(t,n))?r:"number"==typeof r?[!0,r]:null==r?ip:[r])[0])return p;if("children"in t&&t.children&&t.children&&"skip"!==p[0])for(s=(c?t.children.length:-1)+d,l=n.concat(t);s>-1&&s<t.children.length;){if(!1===(a=e(t.children[s],s,l)())[0])return a;s="number"==typeof a[1]?a[1]:s+d}return p}})(e,void 0,[])()}function im(e,t){let i=t.referenceType,n="]";if("collapsed"===i?n+="[]":"full"===i&&(n+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+n}];let r=e.all(t),a=r[0];a&&"text"===a.type?a.value="["+a.value:r.unshift({type:"text",value:"["});let s=r[r.length-1];return s&&"text"===s.type?s.value+=n:r.push({type:"text",value:n}),r}function iv(e){let t=e.spread;return null==t?e.children.length>1:t}function ib(e,t,i){let n=0,r=e.length;if(t){let t=e.codePointAt(n);for(;9===t||32===t;)n++,t=e.codePointAt(n)}if(i){let t=e.codePointAt(r-1);for(;9===t||32===t;)r--,t=e.codePointAt(r-1)}return r>n?e.slice(n,r):""}let iw={blockquote:function(e,t){let i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)},break:function(e,t){let i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:"\n"}]},code:function(e,t){let i=t.value?t.value+"\n":"",n={};t.lang&&(n.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:i}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r={type:"element",tagName:"pre",properties:{},children:[r=e.applyData(t,r)]},e.patch(t,r),r},delete:function(e,t){let i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},emphasis:function(e,t){let i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},footnoteReference:function(e,t){let i,n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=il(r.toLowerCase()),s=e.footnoteOrder.indexOf(r),l=e.footnoteCounts.get(r);void 0===l?(l=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,l+=1,e.footnoteCounts.set(r,l);let o={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,o);let h={type:"element",tagName:"sup",properties:{},children:[o]};return e.patch(t,h),e.applyData(t,h)},heading:function(e,t){let i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},html:function(e,t){if(e.options.allowDangerousHtml){let i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}},imageReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return im(e,t);let r={src:il(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){let i={src:il(t.url)};null!==t.alt&&void 0!==t.alt&&(i.alt=t.alt),null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,n),e.applyData(t,n)},inlineCode:function(e,t){let i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);let n={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,n),e.applyData(t,n)},linkReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return im(e,t);let r={href:il(n.url||"")};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){let i={href:il(t.url)};null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},listItem:function(e,t,i){let n=e.all(t),r=i?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;let i=e.children,n=-1;for(;!t&&++n<i.length;)t=iv(i[n])}return t}(i):iv(t),a={},s=[];if("boolean"==typeof t.checked){let e,i=n[0];i&&"element"===i.type&&"p"===i.tagName?e=i:(e={type:"element",tagName:"p",properties:{},children:[]},n.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<n.length;){let e=n[l];(r||0!==l||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?s.push(e):s.push(...e.children)}let o=n[n.length-1];o&&(r||"element"!==o.type||"p"!==o.tagName)&&s.push({type:"text",value:"\n"});let h={type:"element",tagName:"li",properties:a,children:s};return e.patch(t,h),e.applyData(t,h)},list:function(e,t){let i={},n=e.all(t),r=-1;for("number"==typeof t.start&&1!==t.start&&(i.start=t.start);++r<n.length;){let e=n[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(n,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){let i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},root:function(e,t){let i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)},strong:function(e,t){let i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},table:function(e,t){let i=e.all(t),n=i.shift(),r=[];if(n){let i={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],i),r.push(i)}if(i.length>0){let n={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},a=em(t.children[1]),s=eg(t.children[t.children.length-1]);a&&s&&(n.position={start:a,end:s}),r.push(n)}let a={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){let i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},tableRow:function(e,t,i){let n=i?i.children:void 0,r=0===(n?n.indexOf(t):1)?"th":"td",a=i&&"table"===i.type?i.align:void 0,s=a?a.length:t.children.length,l=-1,o=[];for(;++l<s;){let i=t.children[l],n={},s=a?a[l]:void 0;s&&(n.align=s);let h={type:"element",tagName:r,properties:n,children:[]};i&&(h.children=e.all(i),e.patch(i,h),h=e.applyData(i,h)),o.push(h)}let h={type:"element",tagName:"tr",properties:{},children:e.wrap(o,!0)};return e.patch(t,h),e.applyData(t,h)},text:function(e,t){let i={type:"text",value:function(e){let t=String(e),i=/\r?\n|\r/g,n=i.exec(t),r=0,a=[];for(;n;)a.push(ib(t.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=i.exec(t);return a.push(ib(t.slice(r),r>0,!1)),a.join("")}(String(t.value))};return e.patch(t,i),e.applyData(t,i)},thematicBreak:function(e,t){let i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)},toml:iy,yaml:iy,definition:iy,footnoteDefinition:iy};function iy(){}let ix={}.hasOwnProperty,iA={};function ik(e,t){e.position&&(t.position=function(e){let t=em(e),i=eg(e);if(t&&i)return{start:t,end:i}}(e))}function i_(e,t){let i=t;if(e&&e.data){let t=e.data.hName,n=e.data.hChildren,r=e.data.hProperties;"string"==typeof t&&("element"===i.type?i.tagName=t:i={type:"element",tagName:t,properties:{},children:"children"in i?i.children:[i]}),"element"===i.type&&r&&Object.assign(i.properties,is(r)),"children"in i&&i.children&&null!=n&&(i.children=n)}return i}function iS(e,t){let i=[],n=-1;for(t&&i.push({type:"text",value:"\n"});++n<e.length;)n&&i.push({type:"text",value:"\n"}),i.push(e[n]);return t&&e.length>0&&i.push({type:"text",value:"\n"}),i}function iE(e){let t=0,i=e.charCodeAt(t);for(;9===i||32===i;)t++,i=e.charCodeAt(t);return e.slice(t)}function iM(e,t){let i=function(e,t){let i=t||iA,n=new Map,r=new Map,a={all:function(e){let t=[];if("children"in e){let i=e.children,n=-1;for(;++n<i.length;){let r=a.one(i[n],e);if(r){if(n&&"break"===i[n-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=iE(r.value)),!Array.isArray(r)&&"element"===r.type)){let e=r.children[0];e&&"text"===e.type&&(e.value=iE(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:i_,definitionById:n,footnoteById:r,footnoteCounts:new Map,footnoteOrder:[],handlers:{...iw,...i.handlers},one:function(e,t){let i=e.type,n=a.handlers[i];if(ix.call(a.handlers,i)&&n)return n(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(i)){if("children"in e){let{children:t,...i}=e,n=is(i);return n.children=a.all(e),n}return is(e)}return(a.options.unknownHandler||function(e,t){let i=t.data||{},n="value"in t&&!(ix.call(i,"hProperties")||ix.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)})(a,e,t)},options:i,patch:ik,wrap:iS};return ig(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?n:r,i=String(e.identifier).toUpperCase();t.has(i)||t.set(i,e)}}),a}(e,t),n=i.one(e,void 0),r=function(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||io,n=e.options.footnoteBackLabel||ih,r=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[],o=-1;for(;++o<e.footnoteOrder.length;){let r=e.footnoteById.get(e.footnoteOrder[o]);if(!r)continue;let a=e.all(r),s=String(r.identifier).toUpperCase(),h=il(s.toLowerCase()),c=0,u=[],d=e.footnoteCounts.get(s);for(;void 0!==d&&++c<=d;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof i?i:i(o,c);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof n?n:n(o,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let p=a[a.length-1];if(p&&"element"===p.type&&"p"===p.tagName){let e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...u)}else a.push(...u);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(a,!0)};e.patch(r,f),l.push(f)}if(0!==l.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...is(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:"\n"}]}}(i),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&(M("children"in a),a.children.push({type:"text",value:"\n"},r)),a}function iC(e,t){return e&&"run"in e?async function(i,n){let r=iM(i,{file:n,...t});await e.run(r,n)}:function(i,n){return iM(i,{file:n,...e||t})}}function iT(e){if(e)throw e}var iP=e.i(4100);function iR(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let iI={basename:function(e,t){let i;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');iL(e);let n=0,r=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,l=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else s<0&&(i=!0,s=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)},dirname:function(e){let t;if(iL(e),0===e.length)return".";let i=-1,n=e.length;for(;--n;)if(47===e.codePointAt(n)){if(t){i=n;break}}else t||(t=!0);return i<0?47===e.codePointAt(0)?"/":".":1===i&&47===e.codePointAt(0)?"//":e.slice(0,i)},extname:function(e){let t;iL(e);let i=e.length,n=-1,r=0,a=-1,s=0;for(;i--;){let l=e.codePointAt(i);if(47===l){if(t){r=i+1;break}continue}n<0&&(t=!0,n=i+1),46===l?a<0?a=i:1!==s&&(s=1):a>-1&&(s=-1)}return a<0||n<0||0===s||1===s&&a===n-1&&a===r+1?"":e.slice(a,n)},join:function(){let e;for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1;for(;++r<i.length;)iL(i[r]),i[r]&&(e=void 0===e?i[r]:e+"/"+i[r]);return void 0===e?".":function(e){iL(e);let t=47===e.codePointAt(0),i=function(e,t){let i,n,r="",a=0,s=-1,l=0,o=-1;for(;++o<=e.length;){if(o<e.length)i=e.codePointAt(o);else if(47===i)break;else i=47;if(47===i){if(s===o-1||1===l);else if(s!==o-1&&2===l){if(r.length<2||2!==a||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2)){if(r.length>2){if((n=r.lastIndexOf("/"))!==r.length-1){n<0?(r="",a=0):a=(r=r.slice(0,n)).length-1-r.lastIndexOf("/"),s=o,l=0;continue}}else if(r.length>0){r="",a=0,s=o,l=0;continue}}t&&(r=r.length>0?r+"/..":"..",a=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),a=o-s-1;s=o,l=0}else 46===i&&l>-1?l++:l=-1}return r}(e,!t);return 0!==i.length||t||(i="."),i.length>0&&47===e.codePointAt(e.length-1)&&(i+="/"),t?"/"+i:i}(e)},sep:"/"};function iL(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}let iD={cwd:function(){return"/"}};function iF(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}let iO=["history","path","basename","stem","extname","dirname"];class iN{get basename(){return"string"==typeof this.path?iI.basename(this.path):void 0}set basename(e){ij(e,"basename"),iW(e,"basename"),this.path=iI.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?iI.dirname(this.path):void 0}set dirname(e){iB(this.basename,"dirname"),this.path=iI.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?iI.extname(this.path):void 0}set extname(e){if(iW(e,"extname"),iB(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=iI.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){iF(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!iF(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,i=-1;for(;++i<t.length;)if(37===t.codePointAt(i)&&50===t.codePointAt(i+1)){let e=t.codePointAt(i+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),ij(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?iI.basename(this.path,this.extname):void 0}set stem(e){ij(e,"stem"),iW(e,"stem"),this.path=iI.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){let n=this.message(e,t,i);throw n.fatal=!0,n}info(e,t,i){let n=this.message(e,t,i);return n.fatal=void 0,n}message(e,t,i){let n=new eA(e,t,i);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,i;t=e?iF(e)?{path:e}:"string"==typeof e||function(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":iD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<iO.length;){let e=iO[n];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(i in t)iO.includes(i)||(this[i]=t[i])}}function iW(e,t){if(e&&e.includes(iI.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+iI.sep+"`")}function ij(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function iB(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}let iz=function(e){let t=this.constructor.prototype,i=t[e],n=function(){return i.apply(n,arguments)};return Object.setPrototypeOf(n,t),n},iH={}.hasOwnProperty;class iU extends iz{copy(){let e=new iU,t=-1;for(;++t<this.attachers.length;){let i=this.attachers[t];e.use(...i)}return e.data((0,iP.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(iX("data",this.frozen),this.namespace[e]=t,this):iH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(iX("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(!1===t[0])continue;!0===t[0]&&(t[0]=void 0);let i=e.call(this,...t);"function"==typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=iQ(e),i=this.parser||this.Parser;return iV("parse",i),i(String(t),t)}process(e,t){let i=this;return this.freeze(),iV("process",this.parser||this.Parser),iq("process",this.compiler||this.Compiler),t?n(void 0,t):new Promise(n);function n(n,r){let a=iQ(e),s=i.parse(a);function l(e,i){e||!i?r(e):n?n(i):(M(t,"`done` is defined if `resolve` is not"),t(void 0,i))}i.run(s,a,function(e,t,n){var r,a;if(e||!t||!n)return l(e);let s=i.stringify(t,n);"string"==typeof(r=s)||(a=r)&&"object"==typeof a&&"byteLength"in a&&"byteOffset"in a?n.value=s:n.result=s,l(e,n)})}}processSync(e){let t,i=!1;return this.freeze(),iV("processSync",this.parser||this.Parser),iq("processSync",this.compiler||this.Compiler),this.process(e,function(e,n){i=!0,iT(e),t=n}),iY("processSync","process",i),M(t,"we either bailed on an error or have a tree"),t}run(e,t,i){iK(e),this.freeze();let n=this.transformers;return i||"function"!=typeof t||(i=t,t=void 0),i?r(void 0,i):new Promise(r);function r(r,a){M("function"!=typeof t,"`file` cant be a `done` anymore, we checked");let s=iQ(t);n.run(e,s,function(t,n,s){let l=n||e;t?a(t):r?r(l):(M(i,"`done` is defined if `resolve` is not"),i(void 0,l,s))})}}runSync(e,t){let i,n=!1;return this.run(e,t,function(e,t){iT(e),i=t,n=!0}),iY("runSync","run",n),M(i,"we either bailed on an error or have a tree"),i}stringify(e,t){this.freeze();let i=iQ(t),n=this.compiler||this.Compiler;return iq("stringify",n),iK(e),n(e,i)}use(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let r=this.attachers,a=this.namespace;if(iX("use",this.frozen),null==e);else if("function"==typeof e)o(e,i);else if("object"==typeof e)Array.isArray(e)?l(e):s(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function s(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(a.settings=(0,iP.default)(!0,a.settings,e.settings))}function l(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;){var i=e[t];if("function"==typeof i)o(i,[]);else if("object"==typeof i)if(Array.isArray(i)){let[e,...t]=i;o(e,t)}else s(i);else throw TypeError("Expected usable value, not `"+i+"`")}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function o(e,t){let i=-1,n=-1;for(;++i<r.length;)if(r[i][0]===e){n=i;break}if(-1===n)r.push([e,...t]);else if(t.length>0){let[i,...a]=t,s=r[n][1];iR(s)&&iR(i)&&(i=(0,iP.default)(!0,s,i)),r[n]=[e,i,...a]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let e=[],t={run:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1,a=i.pop();if("function"!=typeof a)throw TypeError("Expected function as last argument, not "+a);!function t(n){for(var s=arguments.length,l=Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];let h=e[++r],c=-1;if(n)return void a(n);for(;++c<i.length;)(null===l[c]||void 0===l[c])&&(l[c]=i[c]);i=l,h?(function(e,t){let i;return function(){let t;for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];let o=e.length>s.length;o&&s.push(n);try{t=e.apply(this,s)}catch(e){if(o&&i)throw e;return n(e)}o||(t&&t.then&&"function"==typeof t.then?t.then(r,n):t instanceof Error?n(t):r(t))};function n(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];i||(i=!0,t(e,...r))}function r(e){n(null,e)}})(h,t)(...l):a(null,...l)}(null,...i)},use:function(i){if("function"!=typeof i)throw TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}};return t}()}}let iG=new iU().freeze();function iV(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function iq(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function iX(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function iK(e){if(!iR(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function iY(e,t,i){if(!i)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function iQ(e){var t;return(t=e)&&"object"==typeof t&&"message"in t&&"messages"in t?e:new iN(e)}let iJ=[],iZ={allowDangerousHtml:!0},i$=/^(https?|ircs?|mailto|xmpp)$/i,i0=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function i1(e){let t=function(e){let t=e.rehypePlugins||iJ,i=e.remarkPlugins||iJ,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iZ}:iZ;return iG().use(t9).use(i).use(iC,n).use(t)}(e),n=function(e){let t=e.children||"",i=new iN;return"string"==typeof t?i.value=t:C("Unexpected value `"+t+"` for `children` prop, expected `string`"),i}(e);return function(e,t){let n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,l=t.skipHtml,o=t.unwrapDisallowed,h=t.urlTransform||i2;for(let e of i0)Object.hasOwn(t,e.from)&&C("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return n&&s&&C("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),ig(e,function(e,t,i){if("raw"===e.type&&i&&"number"==typeof t)return l?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in eO)if(Object.hasOwn(eO,t)&&Object.hasOwn(e.properties,t)){let i=e.properties[t],n=eO[t];(null===n||n.includes(e.tagName))&&(e.properties[t]=h(String(i||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!s&&s.includes(e.tagName);if(!a&&r&&"number"==typeof t&&(a=!r(e,t,i)),a&&i&&"number"==typeof t)return o&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),function(e,t){var i,n,r,a;let s;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let l=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");i=l,n=t.jsxDEV,s=function(e,t,r,a){let s=Array.isArray(r.children),l=em(e);return n(t,r,a,s,{columnNumber:l?l.column-1:void 0,fileName:i,lineNumber:l?l.line:void 0},void 0)}}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");r=t.jsx,a=t.jsxs,s=function(e,t,i,n){let s=Array.isArray(i.children)?a:r;return n?s(t,i,n):s(t,i)}}let o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:l,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?ep:ed,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},h=eT(o,e,void 0);return h&&"string"!=typeof h?h:o.create(e,o.Fragment,{children:h||void 0},void 0)}(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(n),n),e)}function i2(e){let t=e.indexOf(":"),i=e.indexOf("?"),n=e.indexOf("#"),r=e.indexOf("/");return -1===t||-1!==r&&t>r||-1!==i&&t>i||-1!==n&&t>n||i$.test(e.slice(0,t))?e:""}var b=a,i3=e.i(76700),i3=i3,i4=e.i(57172),i5=e.i(48458),i5=i5,i6=e.i(4270),i6=i6,i9=e.i(21071),i9=i9,i8=e.i(27173),i8=i8,i7=e.i(7694),i7=i7,ne=p,nt=e.i(67239);let ni=(0,y.default)((0,i.jsx)("path",{d:"M14.12 10.47 12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8z"}),"DeleteForeverOutlined"),nn=(0,y.default)((0,i.jsx)("path",{d:"M5 4h14v2H5zm0 10h4v6h6v-6h4l-7-7zm8-2v6h-2v-6H9.83L12 9.83 14.17 12z"}),"PublishOutlined");var nr=e.i(47167),na=e.i(67034);function ns(e,t){return t.get?t.get.call(e):t.value}function nl(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function no(e,t){var i=nl(e,t,"get");return ns(e,i)}function nh(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function nc(e,t,i){nh(e,t),t.set(e,i)}function nu(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}function nd(e,t,i){var n=nl(e,t,"set");return nu(e,n,i),i}function np(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}function nf(e,t){var i=nl(e,t,"update");return np(e,i)}function ng(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function nm(e,t){nh(e,t),t.add(e)}function nv(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}function nb(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function nw(e,t,i){return nv(e,t),nb(i,"get"),ns(e,i)}function ny(e,t,i,n){return nv(e,t),nb(i,"set"),nu(e,i,n),n}function nx(e,t,i){return nv(e,t),nb(i,"update"),np(e,i)}var nA=e.i(99749);function nk(e,t){var i=nl(e,t,"set");if(i.set)return"__destrObj"in i||(i.__destrObj={set value(v){i.set.call(e,v)}}),i.__destrObj;if(!i.writable)throw TypeError("attempted to set read only private field");return i}let n_={get url(){return`file://${e.P("node_modules/pdfjs-dist/build/pdf.mjs")}`}};var nS={};nS.d=(e,t)=>{for(var i in t)nS.o(t,i)&&!nS.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},nS.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var nE=globalThis.pdfjsLib={};nS.d(nE,{AbortException:()=>n2,AnnotationEditorLayer:()=>vp,AnnotationEditorParamsType:()=>nL,AnnotationEditorType:()=>nI,AnnotationEditorUIManager:()=>sl,AnnotationLayer:()=>d8,AnnotationMode:()=>nR,ColorPicker:()=>fW,DOMSVGFactory:()=>uT,DrawLayer:()=>vM,FeatureTest:()=>n6,GlobalWorkerOptions:()=>hP,ImageKind:()=>nO,InvalidPDFException:()=>nZ,MissingPDFException:()=>n$,OPS:()=>nB,OutputScale:()=>rS,PDFDataRangeTransport:()=>cQ,PDFDateString:()=>rb,PDFWorker:()=>c7,PasswordResponses:()=>nz,PermissionFlag:()=>nD,PixelsPerInch:()=>rs,RenderingCancelledException:()=>rh,TextLayer:()=>cC,TouchManager:()=>s9,UnexpectedResponseException:()=>n0,Util:()=>n8,VerbosityLevel:()=>nj,XfaLayer:()=>uP,build:()=>u_,createValidAbsoluteUrl:()=>nX,fetchData:()=>rl,getDocument:()=>cq,getFilenameFromUrl:()=>rd,getPdfFilenameFromUrl:()=>rp,getXfaPageViewport:()=>ry,isDataScheme:()=>rc,isPdfFile:()=>ru,noContextMenu:()=>rm,normalizeUnicode:()=>rn,setLayerDimensions:()=>r_,shadow:()=>nK,stopEvent:()=>rv,version:()=>uk});let nM="object"==typeof nr.default&&nr.default+""=="[object process]"&&!nr.default.versions.nw&&!(nr.default.versions.electron&&nr.default.type&&"browser"!==nr.default.type),nC=[1,0,0,1,0,0],nT=[.001,0,0,.001,0,0],nP={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nR={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nI={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},nL={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},nD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nF={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nO={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},nN={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},nW={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nj={ERRORS:0,WARNINGS:1,INFOS:5},nB={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},nz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},nH=nj.WARNINGS;function nU(e){nH>=nj.INFOS&&console.log("Info: ".concat(e))}function nG(e){nH>=nj.WARNINGS&&console.log("Warning: ".concat(e))}function nV(e){throw Error(e)}function nq(e,t){e||nV(t)}function nX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){let t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e="http://".concat(e))}if(i.tryConvertEncoding)try{var n;n=e,e=decodeURIComponent(escape(n))}catch(e){}}let r=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(e){}return null}function nK(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}let nY=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=Error(),e.constructor=e,e}();class nQ extends nY{constructor(e,t){super(e,"PasswordException"),this.code=t}}class nJ extends nY{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class nZ extends nY{constructor(e){super(e,"InvalidPDFException")}}class n$ extends nY{constructor(e){super(e,"MissingPDFException")}}class n0 extends nY{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class n1 extends nY{constructor(e){super(e,"FormatError")}}class n2 extends nY{constructor(e){super(e,"AbortException")}}function n3(e){("object"!=typeof e||(null==e?void 0:e.length)===void 0)&&nV("Invalid argument for bytesToString");let t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);let i=[];for(let n=0;n<t;n+=8192){let r=Math.min(n+8192,t),a=e.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function n4(e){"string"!=typeof e&&nV("Invalid argument for stringToBytes");let t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}function n5(e){let t=Object.create(null);for(let[i,n]of e)t[i]=n;return t}class n6{static get isLittleEndian(){return nK(this,"isLittleEndian",function(){let e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return nK(this,"isEvalSupported",function(){try{return Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return nK(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return nK(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){var e,t;return"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.platform)?nK(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof(null==(t=navigator)?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):nK(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return nK(this,"isCSSRoundSupported",null==(t=globalThis.CSS)||null==(e=t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}let n9=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class n8{static makeHexColor(e,t,i){return"#".concat(n9[e]).concat(n9[t]).concat(n9[i])}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){let i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){let i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*n))/2;return[Math.sqrt(s+l||1),Math.sqrt(s-l||1)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;let r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,n,a]}static bezierBoundingBox(e,t,i,n,r,a,s,l,o){return o?(o[0]=Math.min(o[0],e,s),o[1]=Math.min(o[1],t,l),o[2]=Math.max(o[2],e,s),o[3]=Math.max(o[3],t,l)):o=[Math.min(e,s),Math.min(t,l),Math.max(e,s),Math.max(t,l)],(nv(this,n8),re).call(n8,e,i,r,s,t,n,a,l,3*(-e+3*(i-r)+s),6*(e-2*i+r),3*(i-e),o),(nv(this,n8),re).call(n8,e,i,r,s,t,n,a,l,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),o),o}}function n7(e,t,i,n,r,a,s,l,o,h){if(o<=0||o>=1)return;let c=1-o,u=o*o,d=u*o,p=c*(c*(c*e+3*o*t)+3*u*i)+d*n,f=c*(c*(c*r+3*o*a)+3*u*s)+d*l;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}function re(e,t,i,n,r,a,s,l,o,h,c,u){if(1e-12>Math.abs(o)){Math.abs(h)>=1e-12&&(nv(this,n8),n7).call(n8,e,t,i,n,r,a,s,l,-c/h,u);return}let d=h**2-4*c*o;if(d<0)return;let p=Math.sqrt(d),f=2*o;(nv(this,n8),n7).call(n8,e,t,i,n,r,a,s,l,(-h+p)/f,u),(nv(this,n8),n7).call(n8,e,t,i,n,r,a,s,l,(-h-p)/f,u)}let rt=null,ri=null;function rn(e){return rt||(rt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ri=new Map([["","t"]])),e.replaceAll(rt,(e,t,i)=>t?t.normalize("NFKC"):ri.get(i))}let rr="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new Promise(t=>{t(e(...i))})});let ra="http://www.w3.org/2000/svg";class rs{}async function rl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(rg(e,document.baseURI)){let i=await fetch(e);if(!i.ok)throw Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}n(Error(r.statusText))}},r.send(null)})}(0,nA._)(rs,"CSS",96),(0,nA._)(rs,"PDF",72),(0,nA._)(rs,"PDF_TO_CSS_UNITS",rs.CSS/rs.PDF);class ro{get rawDims(){let{userUnit:e,viewBox:t}=this,i=t.map(t=>t*e);return nK(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ro({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return n8.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=n8.applyTransform([e[0],e[1]],this.transform),i=n8.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return n8.applyInverseTransform([e,t],this.transform)}constructor({viewBox:e,userUnit:t,scale:i,rotation:n,offsetX:r=0,offsetY:a=0,dontFlip:s=!1}){let l,o,h,c,u,d,p,f;this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=n,this.offsetX=r,this.offsetY=a,i*=t;let g=(e[2]+e[0])/2,m=(e[3]+e[1])/2;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,o=0,h=0,c=1;break;case 90:l=0,o=1,h=1,c=0;break;case 270:l=0,o=-1,h=-1,c=0;break;case 0:l=1,o=0,h=0,c=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(h=-h,c=-c),0===l?(u=Math.abs(m-e[1])*i+r,d=Math.abs(g-e[0])*i+a,p=(e[3]-e[1])*i,f=(e[2]-e[0])*i):(u=Math.abs(g-e[0])*i+r,d=Math.abs(m-e[1])*i+a,p=(e[2]-e[0])*i,f=(e[3]-e[1])*i),this.transform=[l*i,o*i,h*i,c*i,u-l*i*g-h*i*m,d-o*i*g-c*i*m],this.width=p,this.height=f}}class rh extends nY{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function rc(e){let t=e.length,i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}function ru(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function rd(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function rp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(rc(e))return nG('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0]).includes("%"))try{r=i.exec(decodeURIComponent(r))[0]}catch(e){}return r||t}class rf{time(e){e in this.started&&nG("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||nG("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:i,start:n,end:r}of this.times)e.push("".concat(i.padEnd(t)," ").concat(r-n,"ms\n"));return e.join("")}constructor(){(0,nA._)(this,"started",Object.create(null)),(0,nA._)(this,"times",[])}}function rg(e,t){try{let{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i}catch(e){return!1}}function rm(e){e.preventDefault()}function rv(e){e.preventDefault(),e.stopPropagation()}class rb{static toDateObject(e){if(!e||"string"!=typeof e)return null;ny(this,rb,rw,nw(this,rb,rw)||RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=nw(this,rb,rw).exec(e);if(!t)return null;let i=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let o=t[7]||"Z",h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(t[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===o?(a+=h,s+=c):"+"===o&&(a-=h,s-=c),new Date(Date.UTC(i,n,r,a,s,l))}}var rw={writable:!0,value:void 0};function ry(e,t){let{scale:i=1,rotation:n=0}=t,{width:r,height:a}=e.attributes.style;return new ro({viewBox:[0,0,parseInt(r),parseInt(a)],userUnit:1,scale:i,rotation:n})}function rx(e){if(e.startsWith("#")){let t=parseInt(e.slice(1),16);return[(0xff0000&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(nG('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function rA(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform();return[t,i,n,r,a,s]}function rk(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform().invertSelf();return[t,i,n,r,a,s]}function r_(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t instanceof ro){let{pageWidth:n,pageHeight:r}=t.rawDims,{style:a}=e,s=n6.isCSSRoundSupported,l="var(--scale-factor) * ".concat(n,"px"),o="var(--scale-factor) * ".concat(r,"px"),h=s?"round(down, ".concat(l,", var(--scale-round-x, 1px))"):"calc(".concat(l,")"),c=s?"round(down, ".concat(o,", var(--scale-round-y, 1px))"):"calc(".concat(o,")");i&&t.rotation%180!=0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&e.setAttribute("data-main-rotation",t.rotation)}class rS{get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}}var rE=new WeakMap,rM=new WeakMap,rC=new WeakMap,rT=new WeakMap,rP=new WeakMap,rR=new WeakSet,rI=new WeakSet,rL=new WeakSet,rD=new WeakSet,rF=new WeakMap;class rO{render(){let e=nd(this,rE,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=no(this,rC)._uiManager._signal;e.addEventListener("contextmenu",rm,{signal:t}),e.addEventListener("pointerdown",(nv(rO,rO),rW),{signal:t});let i=nd(this,rT,document.createElement("div"));i.className="buttons",e.append(i);let n=no(this,rC).toolbarPosition;if(n){let{style:t}=e,i="ltr"===no(this,rC)._uiManager.direction?1-n[0]:n[0];t.insetInlineEnd="".concat(100*i,"%"),t.top="calc(".concat(100*n[1],"% + var(--editor-toolbar-vert-offset))")}return ng(this,rD,rH).call(this),e}get div(){return no(this,rE)}hide(){var e;no(this,rE).classList.add("hidden"),null==(e=no(this,rM))||e.hideDropdown()}show(){var e;no(this,rE).classList.remove("hidden"),null==(e=no(this,rP))||e.shown()}async addAltText(e){let t=await e.render();ng(this,rL,rz).call(this,t),no(this,rT).prepend(t,no(this,rF)),nd(this,rP,e)}addColorPicker(e){nd(this,rM,e);let t=e.renderButton();ng(this,rL,rz).call(this,t),no(this,rT).prepend(t,no(this,rF))}remove(){var e;no(this,rE).remove(),null==(e=no(this,rM))||e.destroy(),nd(this,rM,null)}constructor(e){nm(this,rR),nm(this,rI),nm(this,rL),nm(this,rD),nc(this,rF,{get:rU,set:void 0}),nc(this,rE,{writable:!0,value:null}),nc(this,rM,{writable:!0,value:null}),nc(this,rC,{writable:!0,value:void 0}),nc(this,rT,{writable:!0,value:null}),nc(this,rP,{writable:!0,value:null}),nd(this,rC,e),ny(rO,rO,rN,nw(rO,rO,rN)||Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}}var rN={writable:!0,value:null};function rW(e){e.stopPropagation()}function rj(e){no(this,rC)._focusEventsAllowed=!1,rv(e)}function rB(e){no(this,rC)._focusEventsAllowed=!0,rv(e)}function rz(e){let t=no(this,rC)._uiManager._signal;e.addEventListener("focusin",ng(this,rR,rj).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",ng(this,rI,rB).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",rm,{signal:t})}function rH(){let{editorType:e,_uiManager:t}=no(this,rC),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",nw(rO,rO,rN)[e]),ng(this,rL,rz).call(this,i),i.addEventListener("click",e=>{t.delete()},{signal:t._signal}),no(this,rT).append(i)}function rU(){let e=document.createElement("div");return e.className="divider",e}var rG=new WeakMap,rV=new WeakMap,rq=new WeakMap,rX=new WeakSet,rK=new WeakSet,rY=new WeakSet;class rQ{show(e,t,i){let[n,r]=ng(this,rK,rZ).call(this,t,i),{style:a}=nd(this,rV,no(this,rV)||ng(this,rX,rJ).call(this));e.append(no(this,rV)),a.insetInlineEnd="".concat(100*n,"%"),a.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){no(this,rV).remove()}constructor(e){nm(this,rX),nm(this,rK),nm(this,rY),nc(this,rG,{writable:!0,value:null}),nc(this,rV,{writable:!0,value:null}),nc(this,rq,{writable:!0,value:void 0}),nd(this,rq,e)}}function rJ(){let e=nd(this,rV,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",rm,{signal:no(this,rq)._signal});let t=nd(this,rG,document.createElement("div"));return t.className="buttons",e.append(t),ng(this,rY,r$).call(this),e}function rZ(e,t){let i=0,n=0;for(let r of e){let e=r.y+r.height;if(e<i)continue;let a=r.x+(t?r.width:0);if(e>i){n=a,i=e;continue}t?a>n&&(n=a):a<n&&(n=a)}return[t?1-n:n,i]}function r$(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=no(this,rq)._signal;e.addEventListener("contextmenu",rm,{signal:i}),e.addEventListener("click",()=>{no(this,rq).highlightSelection("floating_button")},{signal:i}),no(this,rG).append(e)}function r0(e,t,i){for(let n of i)t.addEventListener(n,e[n].bind(e))}var r1=new WeakMap;class r2{get id(){return"".concat("pdfjs_internal_editor_").concat(nf(this,r1).value++)}constructor(){nc(this,r1,{writable:!0,value:0})}}var r3=new WeakMap,r4=new WeakMap,r5=new WeakMap,r6=new WeakSet;class r9{static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',nK(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){let{lastModified:t,name:i,size:n,type:r}=e;return ng(this,r6,r8).call(this,"".concat(t,"_").concat(i,"_").concat(n,"_").concat(r),e)}async getFromUrl(e){return ng(this,r6,r8).call(this,e,e)}async getFromBlob(e,t){let i=await t;return ng(this,r6,r8).call(this,e,i)}async getFromId(e){nd(this,r5,no(this,r5)||new Map);let t=no(this,r5).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){nd(this,r5,no(this,r5)||new Map);let i=no(this,r5).get(e);if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:"image_".concat(no(this,r3),"_").concat(nf(this,r4).value++),refCounter:1,isSvg:!1},no(this,r5).set(e,i),no(this,r5).set(i.id,i),i}getSvgUrl(e){let t=no(this,r5).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){var t;nd(this,r5,no(this,r5)||new Map);let i=no(this,r5).get(e);if(!i||(i.refCounter-=1,0!==i.refCounter))return;let{bitmap:n}=i;if(!i.url&&!i.file){let e=new OffscreenCanvas(n.width,n.height);e.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=e.convertToBlob()}null==(t=n.close)||t.call(n),i.bitmap=null}isValidId(e){return e.startsWith("image_".concat(no(this,r3),"_"))}constructor(){nm(this,r6),nc(this,r3,{writable:!0,value:function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Uint8Array(32);return crypto.getRandomValues(e),n3(e)}()}),nc(this,r4,{writable:!0,value:0}),nc(this,r5,{writable:!0,value:null})}}async function r8(e,t){nd(this,r5,no(this,r5)||new Map);let i=no(this,r5).get(e);if(null===i)return null;if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;try{let e;if(i||(i={bitmap:null,id:"image_".concat(no(this,r3),"_").concat(nf(this,r4).value++),refCounter:0,isSvg:!1}),"string"==typeof t?(i.url=t,e=await rl(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){let t=r9._isSVGFittingCanvas,n=new FileReader,r=new Image,a=new Promise((e,a)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{let e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=a});n.readAsDataURL(e),await a}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(e){nG(e),i=null}return no(this,r5).set(e,i),i&&no(this,r5).set(i.id,i),i}var r7=new WeakMap,ae=new WeakMap,at=new WeakMap,ai=new WeakMap;class an{add(e){let{cmd:t,undo:i,post:n,mustExec:r,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}=e;if(r&&t(),no(this,ae))return;let o={cmd:t,undo:i,post:n,type:a};if(-1===no(this,ai)){no(this,r7).length>0&&(no(this,r7).length=0),nd(this,ai,0),no(this,r7).push(o);return}if(s&&no(this,r7)[no(this,ai)].type===a){l&&(o.undo=no(this,r7)[no(this,ai)].undo),no(this,r7)[no(this,ai)]=o;return}let h=no(this,ai)+1;h===no(this,at)?no(this,r7).splice(0,1):(nd(this,ai,h),h<no(this,r7).length&&no(this,r7).splice(h)),no(this,r7).push(o)}undo(){if(-1===no(this,ai))return;nd(this,ae,!0);let{undo:e,post:t}=no(this,r7)[no(this,ai)];e(),null==t||t(),nd(this,ae,!1),nd(this,ai,no(this,ai)-1)}redo(){if(no(this,ai)<no(this,r7).length-1){nd(this,ai,no(this,ai)+1),nd(this,ae,!0);let{cmd:e,post:t}=no(this,r7)[no(this,ai)];e(),null==t||t(),nd(this,ae,!1)}}hasSomethingToUndo(){return -1!==no(this,ai)}hasSomethingToRedo(){return no(this,ai)<no(this,r7).length-1}cleanType(e){if(-1!==no(this,ai)){for(let t=no(this,ai);t>=0;t--)if(no(this,r7)[t].type!==e){no(this,r7).splice(t+1,no(this,ai)-t),nd(this,ai,t);return}no(this,r7).length=0,nd(this,ai,-1)}}destroy(){nd(this,r7,null)}constructor(e=128){nc(this,r7,{writable:!0,value:[]}),nc(this,ae,{writable:!0,value:!1}),nc(this,at,{writable:!0,value:void 0}),nc(this,ai,{writable:!0,value:-1}),nd(this,at,e)}}var ar=new WeakSet;class aa{exec(e,t){if(!this.allKeys.has(t.key))return;let i=this.callbacks.get(ng(this,ar,as).call(this,t));if(!i)return;let{callback:n,options:{bubbles:r=!1,args:a=[],checker:s=null}}=i;(!s||s(e,t))&&(n.bind(e,...a,t)(),r||rv(t))}constructor(e){nm(this,ar),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=n6.platform;for(let[i,n,r={}]of e)for(let e of i){let i=e.startsWith("mac+");t&&i?(this.callbacks.set(e.slice(4),{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1))):t||i||(this.callbacks.set(e,{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1)))}}}function as(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}class al{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]),t=document.createElement("span");for(let i of(t.style.visibility="hidden",document.body.append(t),e.keys())){t.style.color=i;let n=window.getComputedStyle(t).color;e.set(i,rx(n))}return t.remove(),nK(this,"_colors",e)}convert(e){let t=rx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[e,i]of this._colors)if(i.every((e,i)=>e===t[i]))return al._colorsMapping.get(e);return t}getHexCode(e){let t=this._colors.get(e);return t?n8.makeHexColor(...t):e}}(0,nA._)(al,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var ao=new WeakMap,ah=new WeakMap,ac=new WeakMap,au=new WeakMap,ad=new WeakMap,ap=new WeakMap,af=new WeakMap,ag=new WeakMap,am=new WeakMap,av=new WeakMap,ab=new WeakMap,aw=new WeakMap,ay=new WeakMap,ax=new WeakMap,aA=new WeakMap,ak=new WeakMap,a_=new WeakMap,aS=new WeakMap,aE=new WeakMap,aM=new WeakMap,aC=new WeakMap,aT=new WeakMap,aP=new WeakMap,aR=new WeakMap,aI=new WeakMap,aL=new WeakMap,aD=new WeakMap,aF=new WeakMap,aO=new WeakMap,aN=new WeakMap,aW=new WeakMap,aj=new WeakMap,aB=new WeakMap,az=new WeakMap,aH=new WeakMap,aU=new WeakMap,aG=new WeakMap,aV=new WeakMap,aq=new WeakMap,aX=new WeakMap,aK=new WeakMap,aY=new WeakMap,aQ=new WeakSet,aJ=new WeakSet,aZ=new WeakSet,a$=new WeakSet,a0=new WeakSet,a1=new WeakSet,a2=new WeakSet,a3=new WeakSet,a4=new WeakSet,a5=new WeakSet,a6=new WeakSet,a9=new WeakSet,a8=new WeakSet,a7=new WeakSet,se=new WeakSet,st=new WeakSet,si=new WeakSet,sn=new WeakSet,sr=new WeakMap,sa=new WeakSet,ss=new WeakSet;class sl{static get _keyboardManager(){let e=sl.prototype,t=e=>no(e,aX).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),i=(e,t)=>{let{target:i}=t;if(i instanceof HTMLInputElement){let{type:e}=i;return"text"!==e&&"number"!==e}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return nK(this,"_keyboardManager",new aa([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&no(e,aX).contains(i)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&no(e,aX).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,n,r;for(let i of(null==(e=no(this,aY))||e.resolve(),nd(this,aY,null),null==(t=no(this,ao))||t.abort(),nd(this,ao,null),this._signal=null,no(this,au).values()))i.destroy();no(this,au).clear(),no(this,ac).clear(),no(this,aA).clear(),nd(this,ah,null),no(this,aB).clear(),no(this,ag).destroy(),null==(i=no(this,ad))||i.destroy(),null==(n=no(this,aR))||n.hide(),nd(this,aR,null),no(this,aM)&&(clearTimeout(no(this,aM)),nd(this,aM,null)),no(this,aq)&&(clearTimeout(no(this,aq)),nd(this,aq,null)),null==(r=this._editorUndoBar)||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return no(this,aW)}get useNewAltTextFlow(){return no(this,a_)}get useNewAltTextWhenAddingImage(){return no(this,aS)}get hcmFilter(){return nK(this,"hcmFilter",no(this,aH)?no(this,aE).addHCMFilter(no(this,aH).foreground,no(this,aH).background):"none")}get direction(){return nK(this,"direction",getComputedStyle(no(this,aX)).direction)}get highlightColors(){return nK(this,"highlightColors",no(this,aT)?new Map(no(this,aT).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return nK(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),nd(this,av,e)}setMainHighlightColorPicker(e){nd(this,aN,e)}editAltText(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==(t=no(this,ad))||t.editAltText(this,e,i)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:i}=e;"enableNewAltTextWhenAddingImage"===t&&nd(this,aS,i)}onPageChanging(e){let{pageNumber:t}=e;nd(this,ab,t-1)}focusMainContainer(){no(this,aX).focus()}findParent(e,t){for(let i of no(this,au).values()){let{x:n,y:r,width:a,height:s}=i.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+s)return i}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];no(this,aK).classList.toggle("noUserSelect",e)}addShouldRescale(e){no(this,aA).add(e)}removeShouldRescale(e){no(this,aA).delete(e)}onScaleChanging(e){var t;let{scale:i}=e;for(let e of(this.commitOrRemove(),this.viewParameters.realScale=i*rs.PDF_TO_CSS_UNITS,no(this,aA)))e.onScaleChanging();null==(t=no(this,av))||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getSelection();if(!t||t.isCollapsed)return;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a}=t,s=t.toString(),l=ng(this,aQ,so).call(this,t).closest(".textLayer"),o=this.getSelectionBoxes(l);if(!o)return;t.empty();let h=ng(this,aJ,sh).call(this,l),c=no(this,aj)===nI.NONE,u=()=>{null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:o,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a,text:s}),c&&this.showAllEditors("highlight",!0,!0)};if(c)return void this.switchToMode(nI.HIGHLIGHT,u);u()}addToAnnotationStorage(e){!e.isEmpty()&&no(this,ap)&&!no(this,ap).has(e.id)&&no(this,ap).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,no(this,aP)&&(nd(this,aP,!1),ng(this,a0,sd).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of no(this,aB))if(t.div.contains(e)){nd(this,aO,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!no(this,aO))return;let[e,t]=no(this,aO);nd(this,aO,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){ng(this,a4,sm).call(this),ng(this,a6,sb).call(this)}removeEditListeners(){ng(this,a5,sv).call(this),ng(this,a9,sw).call(this)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let i of no(this,ax))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let i of no(this,ax))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var t;if(e.preventDefault(),null==(t=no(this,ah))||t.commitOrRemove(),!this.hasSelection)return;let i=[];for(let e of no(this,aB)){let t=e.serialize(!0);t&&i.push(t)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of no(this,ax))if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(e){nG('paste: "'.concat(e.message,'".'));return}if(!Array.isArray(i))return;this.unselectAll();let n=this.currentLayer;try{let e=[];for(let t of i){let i=await n.deserialize(t);if(!i)return;e.push(i)}let t=()=>{for(let t of e)ng(this,sn,sS).call(this,t);ng(this,ss,sC).call(this,e)};this.addCommands({cmd:t,undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){nG('paste: "'.concat(e.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),no(this,aj)===nI.NONE||this.isEditorHandlingKeyboard||sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,no(this,aP)&&(nd(this,aP,!1),ng(this,a0,sd).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(ng(this,a2,sf).call(this),ng(this,a6,sb).call(this),ng(this,a7,sx).call(this,{isEditing:no(this,aj)!==nI.NONE,isEmpty:ng(this,sa,sM).call(this),hasSomethingToUndo:no(this,ag).hasSomethingToUndo(),hasSomethingToRedo:no(this,ag).hasSomethingToRedo(),hasSelectedEditor:!1})):(ng(this,a3,sg).call(this),ng(this,a9,sw).call(this),ng(this,a7,sx).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!no(this,ax))for(let t of(nd(this,ax,e),no(this,ax)))ng(this,se,sA).call(this,t.defaultPropertiesToUpdate)}getId(){return no(this,aI).id}get currentLayer(){return no(this,au).get(no(this,ab))}getLayer(e){return no(this,au).get(e)}get currentPageIndex(){return no(this,ab)}addLayer(e){no(this,au).set(e.pageIndex,e),no(this,aL)?e.enable():e.disable()}removeLayer(e){no(this,au).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(no(this,aj)!==e){if(no(this,aY)&&(await no(this,aY).promise,!no(this,aY)))return;if(nd(this,aY,Promise.withResolvers()),nd(this,aj,e),e===nI.NONE){var n;this.setEditingState(!1),ng(this,si,s_).call(this),null==(n=this._editorUndoBar)||n.hide(),no(this,aY).resolve();return}for(let t of(this.setEditingState(!0),await ng(this,st,sk).call(this),this.unselectAll(),no(this,au).values()))t.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),no(this,aY).resolve();return}for(let e of no(this,ac).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();no(this,aY).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==no(this,aj)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(no(this,ax)){switch(e){case nL.CREATE:this.currentLayer.addNewEditor();return;case nL.HIGHLIGHT_DEFAULT_COLOR:var i;null==(i=no(this,aN))||i.updateColor(t);break;case nL.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),nd(this,aU,no(this,aU)||new Map).set(e,t),this.showAllEditors("highlight",t)}for(let i of no(this,aB))i.updateParams(e,t);for(let i of no(this,ax))i.updateDefaultParams(e,t)}}showAllEditors(e,t){var i,n;for(let i of(arguments.length>2&&void 0!==arguments[2]&&arguments[2],no(this,ac).values()))i.editorType===e&&i.show(t);(null==(n=null==(i=no(this,aU))?void 0:i.get(nL.HIGHLIGHT_SHOW_ALL))||n)!==t&&ng(this,se,sA).call(this,[[nL.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(no(this,aD)!==e)for(let t of(nd(this,aD,e),no(this,au).values()))e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}getEditors(e){let t=[];for(let i of no(this,ac).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return no(this,ac).get(e)}addEditor(e){no(this,ac).set(e.id,e)}removeEditor(e){if(e.div.contains(document.activeElement)&&(no(this,aM)&&clearTimeout(no(this,aM)),nd(this,aM,setTimeout(()=>{this.focusMainContainer(),nd(this,aM,null)},0))),no(this,ac).delete(e.id),this.unselect(e),!e.annotationElementId||!no(this,aw).has(e.annotationElementId)){var t;null==(t=no(this,ap))||t.remove(e.id)}}addDeletedAnnotationElement(e){no(this,aw).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return no(this,aw).has(e)}removeDeletedAnnotationElement(e){no(this,aw).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){no(this,ah)!==e&&(nd(this,ah,e),e&&ng(this,se,sA).call(this,e.propertiesToUpdate))}updateUI(e){no(this,sr)===e&&ng(this,se,sA).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){ng(this,se,sA).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(no(this,aB).has(e)){no(this,aB).delete(e),e.unselect(),ng(this,a7,sx).call(this,{hasSelectedEditor:this.hasSelection});return}no(this,aB).add(e),e.select(),ng(this,se,sA).call(this,e.propertiesToUpdate),ng(this,a7,sx).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;for(let i of(null==(t=no(this,av))||t.commitOrRemove(),no(this,aB)))i!==e&&i.unselect();no(this,aB).clear(),no(this,aB).add(e),e.select(),ng(this,se,sA).call(this,e.propertiesToUpdate),ng(this,a7,sx).call(this,{hasSelectedEditor:!0})}isSelected(e){return no(this,aB).has(e)}get firstSelectedEditor(){return no(this,aB).values().next().value}unselect(e){e.unselect(),no(this,aB).delete(e),ng(this,a7,sx).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==no(this,aB).size}get isEnterHandled(){return 1===no(this,aB).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;no(this,ag).undo(),ng(this,a7,sx).call(this,{hasSomethingToUndo:no(this,ag).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ng(this,sa,sM).call(this)}),null==(e=this._editorUndoBar)||e.hide()}redo(){no(this,ag).redo(),ng(this,a7,sx).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:no(this,ag).hasSomethingToRedo(),isEmpty:ng(this,sa,sM).call(this)})}addCommands(e){no(this,ag).add(e),ng(this,a7,sx).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ng(this,sa,sM).call(this)})}cleanUndoStack(e){no(this,ag).cleanType(e)}delete(){var e;this.commitOrRemove();let t=null==(e=this.currentLayer)?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let i=t?[t]:[...no(this,aB)],n=()=>{var e;for(let t of(null==(e=this._editorUndoBar)||e.show(r,1===i.length?i[0].editorType:i.length),i))t.remove()},r=()=>{for(let e of i)ng(this,sn,sS).call(this,e)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;null==(e=no(this,ah))||e.commitOrRemove()}hasSomethingToControl(){return no(this,ah)||this.hasSelection}selectAll(){for(let e of no(this,aB))e.commit();ng(this,ss,sC).call(this,no(this,ac).values())}unselectAll(){var e;if(!no(this,ah)||(no(this,ah).commitOrRemove(),no(this,aj)===nI.NONE)){if((null==(e=no(this,av))||!e.commitOrRemove())&&this.hasSelection){for(let e of no(this,aB))e.unselect();no(this,aB).clear(),ng(this,a7,sx).call(this,{hasSelectedEditor:!1})}}}translateSelectedEditors(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i||this.commitOrRemove(),!this.hasSelection)return;no(this,aV)[0]+=e,no(this,aV)[1]+=t;let[n,r]=no(this,aV),a=[...no(this,aB)];for(let i of(no(this,aq)&&clearTimeout(no(this,aq)),nd(this,aq,setTimeout(()=>{nd(this,aq,null),no(this,aV)[0]=no(this,aV)[1]=0,this.addCommands({cmd:()=>{for(let e of a)no(this,ac).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(let e of a)no(this,ac).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})},1e3)),a))i.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection)for(let e of(this.disableUserSelect(!0),nd(this,ay,new Map),no(this,aB)))no(this,ay).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!no(this,ay))return!1;this.disableUserSelect(!1);let e=no(this,ay);nd(this,ay,null);let t=!1;for(let[{x:i,y:n,pageIndex:r},a]of e)a.newX=i,a.newY=n,a.newPageIndex=r,t||(t=i!==a.savedX||n!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;let i=(e,t,i,n)=>{if(no(this,ac).has(e.id)){let r=no(this,au).get(n);r?e._setParentAndPosition(r,t,i):(e.pageIndex=n,e.x=t,e.y=i)}};return this.addCommands({cmd:()=>{for(let[t,{newX:n,newY:r,newPageIndex:a}]of e)i(t,n,r,a)},undo:()=>{for(let[t,{savedX:n,savedY:r,savedPageIndex:a}]of e)i(t,n,r,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(no(this,ay))for(let i of no(this,ay).keys())i.drag(e,t)}rebuild(e){if(null===e.parent){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===no(this,aB).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return no(this,ah)===e}getActive(){return no(this,ah)}getMode(){return no(this,aj)}get imageManager(){return nK(this,"imageManager",new r9)}getSelectionBoxes(e){let t;if(!e)return null;let i=document.getSelection();for(let t=0,n=i.rangeCount;t<n;t++)if(!e.contains(i.getRangeAt(t).commonAncestorContainer))return null;let{x:n,y:r,width:a,height:s}=e.getBoundingClientRect();switch(e.getAttribute("data-main-rotation")){case"90":t=(e,t,i,l)=>({x:(t-r)/s,y:1-(e+i-n)/a,width:l/s,height:i/a});break;case"180":t=(e,t,i,l)=>({x:1-(e+i-n)/a,y:1-(t+l-r)/s,width:i/a,height:l/s});break;case"270":t=(e,t,i,l)=>({x:1-(t+l-r)/s,y:(e-n)/a,width:l/s,height:i/a});break;default:t=(e,t,i,l)=>({x:(e-n)/a,y:(t-r)/s,width:i/a,height:l/s})}let l=[];for(let e=0,n=i.rangeCount;e<n;e++){let n=i.getRangeAt(e);if(!n.collapsed)for(let{x:e,y:i,width:r,height:a}of n.getClientRects())0!==r&&0!==a&&l.push(t(e,i,r,a))}return 0===l.length?null:l}addChangedExistingAnnotation(e){let{annotationElementId:t,id:i}=e;nd(this,af,no(this,af)||new Map).set(t,i)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:i}=e;null==(t=no(this,af))||t.delete(i)}renderAnnotationElement(e){var t;let i=null==(t=no(this,af))?void 0:t.get(e.data.id);if(!i)return;let n=no(this,ap).getRawValue(i);n&&(no(this,aj)!==nI.NONE||n.hasBeenModified)&&n.renderAnnotationElement(e)}constructor(e,t,i,n,r,a,s,l,o,h,c,u,d){nm(this,aQ),nm(this,aJ),nm(this,aZ),nm(this,a$),nm(this,a0),nm(this,a1),nm(this,a2),nm(this,a3),nm(this,a4),nm(this,a5),nm(this,a6),nm(this,a9),nm(this,a8),nm(this,a7),nm(this,se),nm(this,st),nm(this,si),nm(this,sn),nc(this,sr,{get:sE,set:void 0}),nm(this,sa),nm(this,ss),nc(this,ao,{writable:!0,value:new AbortController}),nc(this,ah,{writable:!0,value:null}),nc(this,ac,{writable:!0,value:new Map}),nc(this,au,{writable:!0,value:new Map}),nc(this,ad,{writable:!0,value:null}),nc(this,ap,{writable:!0,value:null}),nc(this,af,{writable:!0,value:null}),nc(this,ag,{writable:!0,value:new an}),nc(this,am,{writable:!0,value:null}),nc(this,av,{writable:!0,value:null}),nc(this,ab,{writable:!0,value:0}),nc(this,aw,{writable:!0,value:new Set}),nc(this,ay,{writable:!0,value:null}),nc(this,ax,{writable:!0,value:null}),nc(this,aA,{writable:!0,value:new Set}),(0,nA._)(this,"_editorUndoBar",null),nc(this,ak,{writable:!0,value:!1}),nc(this,a_,{writable:!0,value:!1}),nc(this,aS,{writable:!0,value:!1}),nc(this,aE,{writable:!0,value:null}),nc(this,aM,{writable:!0,value:null}),nc(this,aC,{writable:!0,value:null}),nc(this,aT,{writable:!0,value:null}),nc(this,aP,{writable:!0,value:!1}),nc(this,aR,{writable:!0,value:null}),nc(this,aI,{writable:!0,value:new r2}),nc(this,aL,{writable:!0,value:!1}),nc(this,aD,{writable:!0,value:!1}),nc(this,aF,{writable:!0,value:null}),nc(this,aO,{writable:!0,value:null}),nc(this,aN,{writable:!0,value:null}),nc(this,aW,{writable:!0,value:null}),nc(this,aj,{writable:!0,value:nI.NONE}),nc(this,aB,{writable:!0,value:new Set}),nc(this,az,{writable:!0,value:null}),nc(this,aH,{writable:!0,value:null}),nc(this,aU,{writable:!0,value:null}),nc(this,aG,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}}),nc(this,aV,{writable:!0,value:[0,0]}),nc(this,aq,{writable:!0,value:null}),nc(this,aX,{writable:!0,value:null}),nc(this,aK,{writable:!0,value:null}),nc(this,aY,{writable:!0,value:null});let p=this._signal=no(this,ao).signal;nd(this,aX,e),nd(this,aK,t),nd(this,ad,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:p}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),n._on("setpreference",this.onSetPreference.bind(this),{signal:p}),n._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:p}),ng(this,a1,sp).call(this),ng(this,a8,sy).call(this),ng(this,a4,sm).call(this),nd(this,ap,r.annotationStorage),nd(this,aE,r.filterFactory),nd(this,aH,a),nd(this,aT,s||null),nd(this,ak,l),nd(this,a_,o),nd(this,aS,h),nd(this,aW,c||null),this.viewParameters={realScale:rs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=u||null,this._supportsPinchToZoom=!1!==d}}function so(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function sh(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let t of no(this,au).values())if(t.hasTextLayer(e))return t;return null}function sc(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=ng(this,aQ,so).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(t);i&&(nd(this,aR,no(this,aR)||new rQ(this)),no(this,aR).show(t,i,"ltr"===this.direction))}function su(){var e,t,i;let n=document.getSelection();if(!n||n.isCollapsed){no(this,az)&&(null==(t=no(this,aR))||t.hide(),nd(this,az,null),ng(this,a7,sx).call(this,{hasSelectedText:!1}));return}let{anchorNode:r}=n;if(r===no(this,az))return;let a=ng(this,aQ,so).call(this,n).closest(".textLayer");if(!a){no(this,az)&&(null==(i=no(this,aR))||i.hide(),nd(this,az,null),ng(this,a7,sx).call(this,{hasSelectedText:!1}));return}if(null==(e=no(this,aR))||e.hide(),nd(this,az,r),ng(this,a7,sx).call(this,{hasSelectedText:!0}),(no(this,aj)===nI.HIGHLIGHT||no(this,aj)===nI.NONE)&&(no(this,aj)===nI.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),nd(this,aP,this.isShiftKeyDown),!this.isShiftKeyDown)){let e=no(this,aj)===nI.HIGHLIGHT?ng(this,aJ,sh).call(this,a):null;null==e||e.toggleDrawing();let t=new AbortController,i=this.combinedSignal(t),n=i=>{("pointerup"!==i.type||0===i.button)&&(t.abort(),null==e||e.toggleDrawing(!0),"pointerup"===i.type&&ng(this,a0,sd).call(this,"main_toolbar"))};window.addEventListener("pointerup",n,{signal:i}),window.addEventListener("blur",n,{signal:i})}}function sd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";no(this,aj)===nI.HIGHLIGHT?this.highlightSelection(e):no(this,ak)&&ng(this,aZ,sc).call(this)}function sp(){document.addEventListener("selectionchange",ng(this,a$,su).bind(this),{signal:this._signal})}function sf(){if(no(this,aC))return;nd(this,aC,new AbortController);let e=this.combinedSignal(no(this,aC));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function sg(){var e;null==(e=no(this,aC))||e.abort(),nd(this,aC,null)}function sm(){if(no(this,aF))return;nd(this,aF,new AbortController);let e=this.combinedSignal(no(this,aF));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function sv(){var e;null==(e=no(this,aF))||e.abort(),nd(this,aF,null)}function sb(){if(no(this,am))return;nd(this,am,new AbortController);let e=this.combinedSignal(no(this,am));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function sw(){var e;null==(e=no(this,am))||e.abort(),nd(this,am,null)}function sy(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function sx(e){Object.entries(e).some(e=>{let[t,i]=e;return no(this,aG)[t]!==i})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(no(this,aG),e)}),no(this,aj)===nI.HIGHLIGHT&&!1===e.hasSelectedEditor&&ng(this,se,sA).call(this,[[nL.HIGHLIGHT_FREE,!0]]))}function sA(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function sk(){if(!no(this,aL)){nd(this,aL,!0);let e=[];for(let t of no(this,au).values())e.push(t.enable());for(let t of(await Promise.all(e),no(this,ac).values()))t.enable()}}function s_(){if(this.unselectAll(),no(this,aL)){for(let e of(nd(this,aL,!1),no(this,au).values()))e.disable();for(let e of no(this,ac).values())e.disable()}}function sS(e){let t=no(this,au).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function sE(){let e=null;for(e of no(this,aB));return e}function sM(){if(0===no(this,ac).size)return!0;if(1===no(this,ac).size)for(let e of no(this,ac).values())return e.isEmpty();return!1}function sC(e){for(let e of no(this,aB))e.unselect();for(let t of(no(this,aB).clear(),e))t.isEmpty()||(no(this,aB).add(t),t.select());ng(this,a7,sx).call(this,{hasSelectedEditor:this.hasSelection})}(0,nA._)(sl,"TRANSLATE_SMALL",1),(0,nA._)(sl,"TRANSLATE_BIG",10);var sT=new WeakMap,sP=new WeakMap,sR=new WeakMap,sI=new WeakMap,sL=new WeakMap,sD=new WeakMap,sF=new WeakMap,sO=new WeakMap,sN=new WeakMap,sW=new WeakMap,sj=new WeakMap,sB=new WeakMap,sz=new WeakMap,sH=new WeakSet;class sU{static initialize(e){null!=sU._l10n||(sU._l10n=e)}async render(){let e=nd(this,sR,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=nd(this,sI,document.createElement("span"));e.append(t),no(this,sB)?(e.classList.add("new"),e.setAttribute("data-l10n-id",nw(sU,sU,sG).missing),t.setAttribute("data-l10n-id",nw(sU,sU,sG)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=no(this,sN)._uiManager._signal;e.addEventListener("contextmenu",rm,{signal:i}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:i});let n=e=>{e.preventDefault(),no(this,sN)._uiManager.editAltText(no(this,sN)),no(this,sB)&&no(this,sN)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:no(this,sz)}})};return e.addEventListener("click",n,{capture:!0,signal:i}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(nd(this,sF,!0),n(t))},{signal:i}),await ng(this,sH,sq).call(this),e}finish(){no(this,sR)&&(no(this,sR).focus({focusVisible:no(this,sF)}),nd(this,sF,!1))}isEmpty(){return no(this,sB)?null===no(this,sT):!no(this,sT)&&!no(this,sP)}hasData(){return no(this,sB)?null!==no(this,sT)||!!no(this,sW):this.isEmpty()}get guessedText(){return no(this,sW)}async setGuessedText(e){null===no(this,sT)&&(nd(this,sW,e),nd(this,sj,await sU._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),ng(this,sH,sq).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!no(this,sB)||no(this,sT)){var t;null==(t=no(this,sO))||t.remove(),nd(this,sO,null);return}if(!no(this,sO)){let e=nd(this,sO,document.createElement("div"));e.className="noAltTextBadge",no(this,sN).div.append(e)}no(this,sO).classList.toggle("hidden",!e)}serialize(e){let t=no(this,sT);return e||no(this,sW)!==t||(t=no(this,sj)),{altText:t,decorative:no(this,sP),guessedText:no(this,sW),textWithDisclaimer:no(this,sj)}}get data(){return{altText:no(this,sT),decorative:no(this,sP)}}set data(e){let{altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:a=!1}=e;n&&(nd(this,sW,n),nd(this,sj,r)),(no(this,sT)!==t||no(this,sP)!==i)&&(a||(nd(this,sT,t),nd(this,sP,i)),ng(this,sH,sq).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];no(this,sR)&&(!e&&no(this,sD)&&(clearTimeout(no(this,sD)),nd(this,sD,null)),no(this,sR).disabled=!e)}shown(){no(this,sN)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:no(this,sz)}})}destroy(){var e,t;null==(e=no(this,sR))||e.remove(),nd(this,sR,null),nd(this,sI,null),nd(this,sL,null),null==(t=no(this,sO))||t.remove(),nd(this,sO,null)}constructor(e){nc(this,sz,{get:sV,set:void 0}),nm(this,sH),nc(this,sT,{writable:!0,value:null}),nc(this,sP,{writable:!0,value:!1}),nc(this,sR,{writable:!0,value:null}),nc(this,sI,{writable:!0,value:null}),nc(this,sL,{writable:!0,value:null}),nc(this,sD,{writable:!0,value:null}),nc(this,sF,{writable:!0,value:!1}),nc(this,sO,{writable:!0,value:null}),nc(this,sN,{writable:!0,value:null}),nc(this,sW,{writable:!0,value:null}),nc(this,sj,{writable:!0,value:null}),nc(this,sB,{writable:!0,value:!1}),nd(this,sN,e),nd(this,sB,e._uiManager.useNewAltTextFlow),ny(sU,sU,sG,nw(sU,sU,sG)||Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}}var sG={writable:!0,value:null};function sV(){return no(this,sT)&&"added"||null===no(this,sT)&&this.guessedText&&"review"||"missing"}async function sq(){var e,t,i;let n=no(this,sR);if(!n)return;if(no(this,sB)){if(n.classList.toggle("done",!!no(this,sT)),n.setAttribute("data-l10n-id",nw(sU,sU,sG)[no(this,sz)]),null==(e=no(this,sI))||e.setAttribute("data-l10n-id",nw(sU,sU,sG)["".concat(no(this,sz),"-label")]),!no(this,sT)){null==(t=no(this,sL))||t.remove();return}}else{if(!no(this,sT)&&!no(this,sP)){n.classList.remove("done"),null==(i=no(this,sL))||i.remove();return}n.classList.add("done"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=no(this,sL);if(!r){nd(this,sL,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(no(this,sN).id);let e=no(this,sN)._uiManager._signal;e.addEventListener("abort",()=>{clearTimeout(no(this,sD)),nd(this,sD,null)},{once:!0}),n.addEventListener("mouseenter",()=>{nd(this,sD,setTimeout(()=>{nd(this,sD,null),no(this,sL).classList.add("show"),no(this,sN)._reportTelemetry({action:"alt_text_tooltip"})},100))},{signal:e}),n.addEventListener("mouseleave",()=>{var e;no(this,sD)&&(clearTimeout(no(this,sD)),nd(this,sD,null)),null==(e=no(this,sL))||e.classList.remove("show")},{signal:e})}no(this,sP)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=no(this,sT)),r.parentNode||n.append(r);let a=no(this,sN).getImageForAltText();null==a||a.setAttribute("aria-describedby",r.id)}(0,nA._)(sU,"_l10n",null);var sX=new WeakMap,sK=new WeakMap,sY=new WeakMap,sQ=new WeakMap,sJ=new WeakMap,sZ=new WeakMap,s$=new WeakMap,s0=new WeakMap,s1=new WeakMap,s2=new WeakMap,s3=new WeakMap,s4=new WeakSet,s5=new WeakSet,s6=new WeakSet;class s9{get MIN_TOUCH_DISTANCE_TO_PINCH(){return nK(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;null==(e=no(this,s2))||e.abort(),nd(this,s2,null)}constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:a=null,signal:s}){nm(this,s4),nm(this,s5),nm(this,s6),nc(this,sX,{writable:!0,value:void 0}),nc(this,sK,{writable:!0,value:!1}),nc(this,sY,{writable:!0,value:null}),nc(this,sQ,{writable:!0,value:void 0}),nc(this,sJ,{writable:!0,value:void 0}),nc(this,sZ,{writable:!0,value:void 0}),nc(this,s$,{writable:!0,value:void 0}),nc(this,s0,{writable:!0,value:void 0}),nc(this,s1,{writable:!0,value:null}),nc(this,s2,{writable:!0,value:void 0}),nc(this,s3,{writable:!0,value:null}),nd(this,sX,e),nd(this,sY,i),nd(this,sQ,t),nd(this,sJ,n),nd(this,sZ,r),nd(this,s$,a),nd(this,s2,new AbortController),nd(this,s0,AbortSignal.any([s,no(this,s2).signal])),e.addEventListener("touchstart",ng(this,s4,s8).bind(this),{passive:!1,signal:no(this,s0)})}}function s8(e){var t,i,n;if((null==(t=no(this,sQ))?void 0:t.call(this))||e.touches.length<2)return;if(!no(this,s3)){nd(this,s3,new AbortController);let e=AbortSignal.any([no(this,s0),no(this,s3).signal]),t=no(this,sX),n={signal:e,passive:!1};t.addEventListener("touchmove",ng(this,s5,s7).bind(this),n),t.addEventListener("touchend",ng(this,s6,le).bind(this),n),t.addEventListener("touchcancel",ng(this,s6,le).bind(this),n),null==(i=no(this,sJ))||i.call(this)}if(rv(e),2!==e.touches.length||(null==(n=no(this,sY))?void 0:n.call(this)))return void nd(this,s1,null);let[r,a]=e.touches;r.identifier>a.identifier&&([r,a]=[a,r]),nd(this,s1,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:a.screenX,touch1Y:a.screenY})}function s7(e){var t;if(!no(this,s1)||2!==e.touches.length)return;let[i,n]=e.touches;i.identifier>n.identifier&&([i,n]=[n,i]);let{screenX:r,screenY:a}=i,{screenX:s,screenY:l}=n,o=no(this,s1),{touch0X:h,touch0Y:c,touch1X:u,touch1Y:d}=o,p=Math.hypot(s-r,l-a)||1,f=Math.hypot(u-h,d-c)||1;if(!no(this,sK)&&Math.abs(f-p)<=s9.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=r,o.touch0Y=a,o.touch1X=s,o.touch1Y=l,e.preventDefault(),!no(this,sK))return void nd(this,sK,!0);let g=[(r+s)/2,(a+l)/2];null==(t=no(this,sZ))||t.call(this,g,f,p)}function le(e){var t;no(this,s3).abort(),nd(this,s3,null),null==(t=no(this,s$))||t.call(this),no(this,s1)&&(e.preventDefault(),nd(this,s1,null),nd(this,sK,!1))}var lt=new WeakMap,li=new WeakMap,ln=new WeakMap,lr=new WeakMap,la=new WeakMap,ls=new WeakMap,ll=new WeakMap,lo=new WeakMap,lh=new WeakMap,lc=new WeakMap,lu=new WeakMap,ld=new WeakMap,lp=new WeakMap,lf=new WeakMap,lg=new WeakMap,lm=new WeakMap,lv=new WeakMap,lb=new WeakMap,lw=new WeakMap,ly=new WeakMap,lx=new WeakMap,lA=new WeakMap,lk=new WeakMap,l_=new WeakMap,lS=new WeakSet,lE=new WeakSet,lM=new WeakSet,lC=new WeakSet,lT=new WeakSet,lP=new WeakSet,lR=new WeakSet,lI=new WeakSet,lL=new WeakSet,lD=new WeakSet,lF=new WeakSet,lO=new WeakSet,lN=new WeakSet,lW=new WeakSet,lj=new WeakSet,lB=new WeakSet,lz=new WeakSet,lH=new WeakSet;class lU{static get _resizerKeyboardManager(){let e=lU.prototype._resizeWithKeyboard,t=sl.TRANSLATE_SMALL,i=sl.TRANSLATE_BIG;return nK(this,"_resizerKeyboardManager",new aa([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],lU.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return nK(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new l7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(null!=lU._l10n||(lU._l10n=e),lU._l10nResizer||(lU._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==lU._borderLineWidth)return;let i=getComputedStyle(document.documentElement);lU._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nV("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return no(this,lk)}set _isDraggable(e){var t;nd(this,lk,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=no(this,l_)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):ng(this,lH,l8).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(no(this,lp)?nd(this,lp,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let i=e.relatedTarget;(null==i||!i.closest("#".concat(this.id)))&&(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){let[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/r,this.y=(t+n)/a,this.fixAndSetPosition()}translate(e,t){ng(this,lS,lG).call(this,this.parentDimensions,e,t)}translateInPage(e,t){nd(this,lf,no(this,lf)||[this.x,this.y,this.width,this.height]),ng(this,lS,lG).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){nd(this,lf,no(this,lf)||[this.x,this.y,this.width,this.height]);let{div:i,parentDimensions:[n,r]}=this;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:s}=this,[l,o]=this.getBaseTranslation();a+=l,s+=o;let{style:h}=i;h.left="".concat((100*a).toFixed(2),"%"),h.top="".concat((100*s).toFixed(2),"%"),this._onTranslating(a,s),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!no(this,lf)&&(no(this,lf)[0]!==this.x||no(this,lf)[1]!==this.y)}get _hasBeenResized(){return!!no(this,lf)&&(no(this,lf)[2]!==this.width||no(this,lf)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:i}=lU,n=i/e,r=i/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,{div:{style:t},pageDimensions:[i,n]}=this,{x:r,y:a,width:s,height:l}=this;if(s*=i,l*=n,r*=i,a*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-s,r)),a=Math.max(0,Math.min(n-l,a));break;case 90:r=Math.max(0,Math.min(i-l,r)),a=Math.min(n,Math.max(s,a));break;case 180:r=Math.min(i,Math.max(s,r)),a=Math.min(n,Math.max(l,a));break;case 270:r=Math.min(i,Math.max(l,r)),a=Math.max(0,Math.min(n-s,a))}this.x=r/=i,this.y=a/=n;let[o,h]=this.getBaseTranslation();r+=o,a+=h,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*a).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return(nv(lU,lU),lV).call(lU,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return(nv(lU,lU),lV).call(lU,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){let[i,n]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*e/i).toFixed(2),"%"),no(this,ll)||(r.height="".concat((100*t/n).toFixed(2),"%"))}fixDims(){let{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),r=!no(this,ll)&&t.endsWith("%");if(n&&r)return;let[a,s]=this.parentDimensions;n||(e.width="".concat((100*parseFloat(i)/a).toFixed(2),"%")),no(this,ll)||r||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null==(e=no(this,ln))||e.finish()}async addEditToolbar(){return this._editToolbar||no(this,lm)||(this._editToolbar=new rO(this),this.div.append(this._editToolbar.render()),no(this,ln)&&await this._editToolbar.addAltText(no(this,ln))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null==(e=no(this,ln))||e.destroy())}addContainer(e){var t;let i=null==(t=this._editToolbar)?void 0:t.div;i?i.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){no(this,ln)||(sU.initialize(lU._l10n),nd(this,ln,new sU(this)),no(this,lt)&&(no(this,ln).data=no(this,lt),nd(this,lt,null)),await this.addEditToolbar())}get altTextData(){var e;return null==(e=no(this,ln))?void 0:e.data}set altTextData(e){no(this,ln)&&(no(this,ln).data=e)}get guessedAltText(){var e;return null==(e=no(this,ln))?void 0:e.guessedText}async setGuessedAltText(e){var t;await (null==(t=no(this,ln))?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null==(t=no(this,ln))?void 0:t.serialize(e)}hasAltText(){return!!no(this,ln)&&!no(this,ln).isEmpty()}hasAltTextData(){var e,t;return null!=(t=null==(e=no(this,ln))?void 0:e.hasData())&&t}render(){var e;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=no(this,lr)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),ng(this,lN,l3).call(this);let[t,i]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*i/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/i).toFixed(2),"%"));let[n,r]=this.getInitialTranslation();return this.translate(n,r),r0(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&nd(this,lA,no(this,lA)||new s9({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ng(this,lI,lZ).bind(this),onPinching:ng(this,lL,l$).bind(this),onPinchEnd:ng(this,lD,l0).bind(this),signal:this._uiManager._signal})),null==(e=this._uiManager._editorUndoBar)||e.hide(),this.div}pointerdown(e){let{isMac:t}=n6.platform;return 0!==e.button||e.ctrlKey&&t?void e.preventDefault():(nd(this,lp,!0),this._isDraggable)?void ng(this,lO,l2).call(this,e):void ng(this,lF,l1).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){no(this,lb)&&clearTimeout(no(this,lb)),nd(this,lb,setTimeout(()=>{var e;nd(this,lb,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,n=this.parentScale,[r,a]=this.pageDimensions,[s,l]=this.pageTranslation,o=e/n,h=t/n,c=this.x*r,u=this.y*a,d=this.width*r,p=this.height*a;switch(i){case 0:return[c+o+s,a-u-h-p+l,c+o+d+s,a-u-h+l];case 90:return[c+h+s,a-u+o+l,c+h+p+s,a-u+o+d+l];case 180:return[c-o-d+s,a-u+h+l,c-o+s,a-u+h+p+l];case 270:return[c-h-p+s,a-u-o-d+l,c-h+s,a-u-o+l];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[i,n,r,a]=e,s=r-i,l=a-n;switch(this.rotation){case 0:return[i,t-a,s,l];case 90:return[i,t-n,l,s];case 180:return[r,t-n,s,l];case 270:return[r,t-a,l,s];default:throw Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){nd(this,lm,!0)}disableEditMode(){nd(this,lm,!1)}isInEditMode(){return no(this,lm)}shouldGetKeyboardEvents(){return no(this,lv)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&n>0&&e<r&&i>0}rebuild(){ng(this,lN,l3).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(e=this._initialData)?void 0:e.popupRef)||""}}serialize(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],nV("An editor must be serializable")}static async deserialize(e,t,i){let n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,nd(n,lt,e.accessibilityData);let[r,a]=n.pageDimensions,[s,l,o,h]=n.getRectInCurrentCoords(e.rect,a);return n.x=s/r,n.y=l/a,n.width=o/r,n.height=h/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null==(e=no(this,lu))||e.abort(),nd(this,lu,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),no(this,lb)&&(clearTimeout(no(this,lb)),nd(this,lb,null)),ng(this,lH,l8).call(this),this.removeEditToolbar(),no(this,lx)){for(let e of no(this,lx).values())clearTimeout(e);nd(this,lx,null)}this.parent=null,null==(t=no(this,lA))||t.destroy(),nd(this,lA,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ng(this,lM,lX).call(this),no(this,lo).classList.remove("hidden"),r0(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),nd(this,lc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=no(this,lo).children;if(!no(this,li)){nd(this,li,Array.from(t));let e=ng(this,lW,l4).bind(this),i=ng(this,lj,l5).bind(this),n=this._uiManager._signal;for(let t of no(this,li)){let r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:n}),t.addEventListener("blur",i,{signal:n}),t.addEventListener("focus",ng(this,lB,l6).bind(this,r),{signal:n}),t.setAttribute("data-l10n-id",lU._l10nResizer[r])}}let i=no(this,li)[0],n=0;for(let e of t){if(e===i)break;n++}let r=(360-this.rotation+this.parentRotation)%360/90*(no(this,li).length/4);if(r!==n){if(r<n)for(let e=0;e<n-r;e++)no(this,lo).append(no(this,lo).firstChild);else if(r>n)for(let e=0;e<r-n;e++)no(this,lo).firstChild.before(no(this,lo).lastChild);let e=0;for(let i of t){let t=no(this,li)[e++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",lU._l10nResizer[t])}}ng(this,lz,l9).call(this,0),nd(this,lv,!0),no(this,lo).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){no(this,lv)&&ng(this,lR,lJ).call(this,no(this,ld),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){ng(this,lH,l8).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),!this._editToolbar)return void this.addEditToolbar().then(()=>{var e,t;(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))&&(null==(t=this._editToolbar)||t.show())});null==(t=this._editToolbar)||t.show(),null==(i=no(this,ln))||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,n,r;null==(e=no(this,lo))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(i=this.div)?void 0:i.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(n=this._editToolbar)||n.hide(),null==(r=no(this,ln))||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return no(this,lg)}set isEditing(e){nd(this,lg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){nd(this,ll,!0);let{style:i}=this.div;i.aspectRatio=e/t,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){nd(this,lx,no(this,lx)||new Map);let{action:t}=e,i=no(this,lx).get(t);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),no(this,lx).delete(t),0===no(this,lx).size&&nd(this,lx,null)},lU._telemetryTimeout),no(this,lx).set(t,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),nd(this,lr,!1)}disable(){this.div&&(this.div.tabIndex=-1),nd(this,lr,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){let e=t;(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.before(t)}}else(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){let{firstChild:t}=e.container;(null==t?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}constructor(e){nm(this,lS),nm(this,lE),nm(this,lM),nm(this,lC),nm(this,lT),nm(this,lP),nm(this,lR),nm(this,lI),nm(this,lL),nm(this,lD),nm(this,lF),nm(this,lO),nm(this,lN),nm(this,lW),nm(this,lj),nm(this,lB),nm(this,lz),nm(this,lH),nc(this,lt,{writable:!0,value:null}),nc(this,li,{writable:!0,value:null}),nc(this,ln,{writable:!0,value:null}),nc(this,lr,{writable:!0,value:!1}),nc(this,la,{writable:!0,value:null}),nc(this,ls,{writable:!0,value:""}),nc(this,ll,{writable:!0,value:!1}),nc(this,lo,{writable:!0,value:null}),nc(this,lh,{writable:!0,value:null}),nc(this,lc,{writable:!0,value:null}),nc(this,lu,{writable:!0,value:null}),nc(this,ld,{writable:!0,value:""}),nc(this,lp,{writable:!0,value:!1}),nc(this,lf,{writable:!0,value:null}),nc(this,lg,{writable:!0,value:!1}),nc(this,lm,{writable:!0,value:!1}),nc(this,lv,{writable:!0,value:!1}),nc(this,lb,{writable:!0,value:null}),nc(this,lw,{writable:!0,value:0}),nc(this,ly,{writable:!0,value:0}),nc(this,lx,{writable:!0,value:null}),nc(this,lA,{writable:!0,value:null}),(0,nA._)(this,"_editToolbar",null),(0,nA._)(this,"_initialOptions",Object.create(null)),(0,nA._)(this,"_initialData",null),(0,nA._)(this,"_isVisible",!0),(0,nA._)(this,"_uiManager",null),(0,nA._)(this,"_focusEventsAllowed",!0),nc(this,lk,{writable:!0,value:!1}),nc(this,l_,{writable:!0,value:lU._zIndex++}),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];let[s,l]=this.parentDimensions;this.x=e.x/s,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}}function lG(e,t,i){let[n,r]=e;[t,i]=this.screenToPageTranslation(t,i),this.x+=t/n,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function lV(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function lq(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function lX(){if(no(this,lo))return;nd(this,lo,document.createElement("div")),no(this,lo).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let i of e){let e=document.createElement("div");no(this,lo).append(e),e.classList.add("resizer",i),e.setAttribute("data-resizer-name",i),e.addEventListener("pointerdown",ng(this,lC,lK).bind(this,i),{signal:t}),e.addEventListener("contextmenu",rm,{signal:t}),e.tabIndex=-1}this.div.prepend(no(this,lo))}function lK(e,t){var i;t.preventDefault();let{isMac:n}=n6.platform;if(0!==t.button||t.ctrlKey&&n)return;null==(i=no(this,ln))||i.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,nd(this,lh,[t.screenX,t.screenY]);let a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ng(this,lR,lJ).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",rv,{passive:!1,signal:s}),window.addEventListener("contextmenu",rm,{signal:s}),nd(this,lc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let l=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let h=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null==(e=no(this,ln))||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=o,ng(this,lP,lQ).call(this)};window.addEventListener("pointerup",h,{signal:s}),window.addEventListener("blur",h,{signal:s})}function lY(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;let[r,a]=this.parentDimensions;this.setDims(r*i,a*n),this.fixAndSetPosition(),this._onResized()}function lQ(){if(!no(this,lc))return;let{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=no(this,lc);nd(this,lc,null);let r=this.x,a=this.y,s=this.width,l=this.height;(r!==e||a!==t||s!==i||l!==n)&&this.addCommands({cmd:ng(this,lT,lY).bind(this,r,a,s,l),undo:ng(this,lT,lY).bind(this,e,t,i,n),mustExec:!0})}function lJ(e,t){let i,n,r,a,s,l,[o,h]=this.parentDimensions,c=this.x,u=this.y,d=this.width,p=this.height,f=lU.MIN_SIZE/o,g=lU.MIN_SIZE/h,m=ng(this,lE,lq).call(this,this.rotation),b=(e,t)=>[m[0]*e+m[2]*t,m[1]*e+m[3]*t],w=ng(this,lE,lq).call(this,360-this.rotation),y=!1,x=!1;switch(e){case"topLeft":y=!0,i=(e,t)=>[0,0],n=(e,t)=>[e,t];break;case"topMiddle":i=(e,t)=>[e/2,0],n=(e,t)=>[e/2,t];break;case"topRight":y=!0,i=(e,t)=>[e,0],n=(e,t)=>[0,t];break;case"middleRight":x=!0,i=(e,t)=>[e,t/2],n=(e,t)=>[0,t/2];break;case"bottomRight":y=!0,i=(e,t)=>[e,t],n=(e,t)=>[0,0];break;case"bottomMiddle":i=(e,t)=>[e/2,t],n=(e,t)=>[e/2,0];break;case"bottomLeft":y=!0,i=(e,t)=>[0,t],n=(e,t)=>[e,0];break;case"middleLeft":x=!0,i=(e,t)=>[0,t/2],n=(e,t)=>[e,t/2]}let A=i(d,p),k=n(d,p),_=b(...k),S=lU._round(c+_[0]),E=lU._round(u+_[1]),M=1,C=1;if(t.fromKeyboard)({deltaX:r,deltaY:a}=t);else{let{screenX:e,screenY:i}=t,[n,s]=no(this,lh);[r,a]=this.screenToPageTranslation(e-n,i-s),no(this,lh)[0]=e,no(this,lh)[1]=i}if([r,a]=(s=r/o,l=a/h,[w[0]*s+w[2]*l,w[1]*s+w[3]*l]),y){let e=Math.hypot(d,p);M=C=Math.max(Math.min(Math.hypot(k[0]-A[0]-r,k[1]-A[1]-a)/e,1/d,1/p),f/d,g/p)}else x?M=Math.max(f,Math.min(1,Math.abs(k[0]-A[0]-r)))/d:C=Math.max(g,Math.min(1,Math.abs(k[1]-A[1]-a)))/p;let T=lU._round(d*M),P=lU._round(p*C),R=S-(_=b(...n(T,P)))[0],I=E-_[1];nd(this,lf,no(this,lf)||[this.x,this.y,this.width,this.height]),this.width=T,this.height=P,this.x=R,this.y=I,this.setDims(o*T,h*P),this.fixAndSetPosition(),this._onResizing()}function lZ(){var e;nd(this,lc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(e=no(this,ln))||e.toggle(!1),this.parent.togglePointerEvents(!1)}function l$(e,t,i){let n=i/t*.7+1-.7;if(1===n)return;let r=ng(this,lE,lq).call(this,this.rotation),a=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[s,l]=this.parentDimensions,o=this.x,h=this.y,c=this.width,u=this.height;n=Math.max(Math.min(n,1/c,1/u),lU.MIN_SIZE/s/c,lU.MIN_SIZE/l/u);let d=lU._round(c*n),p=lU._round(u*n);if(d===c&&p===u)return;nd(this,lf,no(this,lf)||[o,h,c,u]);let f=a(c/2,u/2),g=lU._round(o+f[0]),m=lU._round(h+f[1]),b=a(d/2,p/2);this.x=g-b[0],this.y=m-b[1],this.width=d,this.height=p,this.setDims(s*d,l*p),this.fixAndSetPosition(),this._onResizing()}function l0(){var e;null==(e=no(this,ln))||e.toggle(!0),this.parent.togglePointerEvents(!0),ng(this,lP,lQ).call(this)}function l1(e){let{isMac:t}=n6.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function l2(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1,n=new AbortController,r=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:r},s=e=>{n.abort(),nd(this,la,null),nd(this,lp,!1),this._uiManager.endDragSession()||ng(this,lF,l1).call(this,e),i&&this._onStopDragging()};t&&(nd(this,lw,e.clientX),nd(this,ly,e.clientY),nd(this,la,e.pointerId),nd(this,ls,e.pointerType),window.addEventListener("pointermove",e=>{i||(i=!0,this._onStartDragging());let{clientX:t,clientY:n,pointerId:r}=e;if(r!==no(this,la))return void rv(e);let[a,s]=this.screenToPageTranslation(t-no(this,lw),n-no(this,ly));nd(this,lw,t),nd(this,ly,n),this._uiManager.dragSelectedEditors(a,s)},a),window.addEventListener("touchmove",rv,a),window.addEventListener("pointerdown",e=>{e.pointerType===no(this,ls)&&(no(this,lA)||e.isPrimary)&&s(e),rv(e)},a));let l=e=>{if(!no(this,la)||no(this,la)===e.pointerId)return void s(e);rv(e)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}function l3(){if(no(this,lu)||!this.div)return;nd(this,lu,new AbortController);let e=this._uiManager.combinedSignal(no(this,lu));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function l4(e){lU._resizerKeyboardManager.exec(this,e)}function l5(e){var t;no(this,lv)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==no(this,lo)&&ng(this,lH,l8).call(this)}function l6(e){nd(this,ld,no(this,lv)?e:"")}function l9(e){if(no(this,li))for(let t of no(this,li))t.tabIndex=e}function l8(){nd(this,lv,!1),ng(this,lz,l9).call(this,-1),ng(this,lP,lQ).call(this)}(0,nA._)(lU,"_l10n",null),(0,nA._)(lU,"_l10nResizer",null),(0,nA._)(lU,"_borderLineWidth",-1),(0,nA._)(lU,"_colorManager",new al),(0,nA._)(lU,"_zIndex",1),(0,nA._)(lU,"_telemetryTimeout",1e3);class l7 extends lU{serialize(){return this.serializeDeleted()}constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}}class oe{update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<=255?t[i++]=r:(t[i++]=r>>>8,t[i++]=255&r)}}else if(ArrayBuffer.isView(e))i=(t=e.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,r=i-4*n,a=new Uint32Array(t.buffer,0,n),s=0,l=0,o=this.h1,h=this.h2;for(let e=0;e<n;e++)1&e?(o^=s=0x1b873593*(s=(s=0xcc9e2d51*(s=a[e])&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,o=5*(o=o<<13|o>>>19)+0xe6546b64):(h^=l=0x1b873593*(l=(l=0xcc9e2d51*(l=a[e])&0xffff0000|11601*l&65535)<<15|l>>>17)&0xffff0000|13715*l&65535,h=5*(h=h<<13|h>>>19)+0xe6546b64);switch(s=0,r){case 3:s^=t[4*n+2]<<16;case 2:s^=t[4*n+1]<<8;case 1:s^=t[4*n],s=0x1b873593*(s=(s=0xcc9e2d51*s&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,1&n?o^=s:h^=s}this.h1=o,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,t=0xff51afd7*t&0xffff0000|((t<<16|(e=0xed558ccd*e&0xffff0000|36045*e&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,e^=t>>>1,t=0xc4ceb9fe*t&0xffff0000|((t<<16|(e=0x1a85ec53*e&0xffff0000|60499*e&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((e^=t>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}constructor(e){this.h1=e?0|e:0xc3d2e1f0,this.h2=e?0|e:0xc3d2e1f0}}let ot=Object.freeze({map:null,hash:"",transfer:void 0});var oi=new WeakMap,on=new WeakMap,or=new WeakMap,oa=new WeakSet;class os{getValue(e,t){let i=no(this,or).get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return no(this,or).get(e)}remove(e){if(no(this,or).delete(e),0===no(this,or).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let e of no(this,or).values())if(e instanceof lU)return;this.onAnnotationEditor(null)}}setValue(e,t){let i=no(this,or).get(e),n=!1;if(void 0!==i)for(let[e,r]of Object.entries(t))i[e]!==r&&(n=!0,i[e]=r);else n=!0,no(this,or).set(e,t);n&&ng(this,oa,ol).call(this),t instanceof lU&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return no(this,or).has(e)}getAll(){return no(this,or).size>0?n5(no(this,or)):null}setAll(e){for(let[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return no(this,or).size}resetModified(){no(this,oi)&&(nd(this,oi,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new oh(this)}get serializable(){if(0===no(this,or).size)return ot;let e=new Map,t=new oe,i=[],n=Object.create(null),r=!1;for(let[i,a]of no(this,or)){let s=a instanceof lU?a.serialize(!1,n):a;s&&(e.set(i,s),t.update("".concat(i,":").concat(JSON.stringify(s))),r||(r=!!s.bitmap))}if(r)for(let t of e.values())t.bitmap&&i.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:ot}get editorStats(){let e=null,t=new Map;for(let r of no(this,or).values()){var i,n;if(!(r instanceof lU))continue;let a=r.telemetryFinalData;if(!a)continue;let{type:s}=a;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));let l=(i=e)[s]||(i[s]=new Map);for(let[e,t]of Object.entries(a)){if("type"===e)continue;let i=l.get(e);i||(i=new Map,l.set(e,i));let r=null!=(n=i.get(t))?n:0;i.set(t,r+1)}}for(let[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){nd(this,on,null)}get modifiedIds(){if(no(this,on))return no(this,on);let e=[];for(let t of no(this,or).values())t instanceof lU&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return nd(this,on,{ids:new Set(e),hash:e.join(",")})}constructor(){nm(this,oa),nc(this,oi,{writable:!0,value:!1}),nc(this,on,{writable:!0,value:null}),nc(this,or,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}}function ol(){no(this,oi)||(nd(this,oi,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var oo=new WeakMap;class oh extends os{get print(){nV("Should not call PrintAnnotationStorage.print")}get serializable(){return no(this,oo)}get modifiedIds(){return nK(this,"modifiedIds",{ids:new Set,hash:""})}constructor(e){super(),nc(this,oo,{writable:!0,value:void 0});let{map:t,hash:i,transfer:n}=e.serializable;nd(this,oo,{map:structuredClone(t,n?{transfer:n}:null),hash:i,transfer:n})}}var oc=new WeakMap;class ou{addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),no(this,oc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:i}=e;if(!(!t||no(this,oc).has(t.loadedName))){if(nq(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),no(this,oc).add(e),null==i||i(t)}catch(e){nG("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}nV("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){throw nG("Failed to load font '".concat(t.family,"': '").concat(i,"'.")),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let i=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var e;return nK(this,"isFontLoadingAPISupported",!!(null==(e=this._document)?void 0:e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return nM?t=!0:"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(t=!0),nK(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){let{loadingRequests:t}=this,i={done:!1,complete:function(){for(nq(!i.done,"completeRequest() cannot be called twice."),i.done=!0;t.length>0&&t[0].done;)setTimeout(t.shift().callback,0)},callback:e};return t.push(i),i}get _loadTestFont(){return nK(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){var i;let n,r;function a(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,i,n){return e.substring(0,t)+n+e.substring(t+i)}let l=this._document.createElement("canvas");l.width=1,l.height=1;let o=l.getContext("2d"),h=0,c="lt".concat(Date.now()).concat(this.loadTestFontId++),u=this._loadTestFont,d=a(u=s(u,976,c.length,c),16);for(n=0,r=c.length-3;n<r;n+=4)d=d-0x58585858+a(c,n)|0;n<c.length&&(d=d-0x58585858+a(c+"XXX",n)|0),u=s(u,16,4,String.fromCharCode((i=d)>>24&255,i>>16&255,i>>8&255,255&i));let p="url(data:font/opentype;base64,".concat(btoa(u),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);let g=this._document.createElement("div");for(let t of(g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px",[e.loadedName,c])){let e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,g.append(e)}this._document.body.append(g),function e(t,i){if(++h>30){nG("Load test font never loaded."),i();return}if(o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0)return void i();setTimeout(e.bind(null,t,i))}(c,()=>{g.remove(),t.complete()})}constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){nc(this,oc,{writable:!0,value:new Set}),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}}class od{createNativeFontFace(){var e;let t;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e,t;let i;if(!this.data||this.disableFontFace)return null;let n="url(data:".concat(this.mimetype,";base64,").concat((t=this.data,Uint8Array.prototype.toBase64?t.toBase64():btoa(n3(t))),");");if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null==(e=this._inspectFont)||e.call(this,this,n),i}getPathGenerator(e,t){let i;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t;try{i=e.get(n)}catch(e){nG('getPathGenerator - ignoring character: "'.concat(e,'".'))}let r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:n=null}){for(let t in this.compiledGlyphs=Object.create(null),e)this[t]=e[t];this.disableFontFace=!0===t,this.fontExtraProperties=!0===i,this._inspectFont=n}}let op={DATA:1,ERROR:2},of={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function og(){}function om(e){if(e instanceof n2||e instanceof nZ||e instanceof n$||e instanceof nQ||e instanceof n0||e instanceof nJ)return e;switch(!(e instanceof Error||"object"==typeof e&&null!==e)&&nV('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new n2(e.message);case"InvalidPDFException":return new nZ(e.message);case"MissingPDFException":return new n$(e.message);case"PasswordException":return new nQ(e.message,e.code);case"UnexpectedResponseException":return new n0(e.message,e.status);case"UnknownErrorException":return new nJ(e.message,e.details)}return new nJ(e.message,e.toString())}var ov=new WeakMap,ob=new WeakSet,ow=new WeakSet,oy=new WeakSet,ox=new WeakSet;class oA{on(e,t){let i=this.actionHandler;if(i[e])throw Error('There is already an actionName called "'.concat(e,'"'));i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){let n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(e){r.reject(e)}return r.promise}sendWithStream(e,t,i,n){let r=this.streamId++,a=this.sourceName,s=this.targetName,l=this.comObj;return new ReadableStream({start:i=>{let o=Promise.withResolvers();return this.streamControllers[r]={controller:i,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:s,action:e,streamId:r,data:t,desiredSize:i.desiredSize},n),o.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,l.postMessage({sourceName:a,targetName:s,stream:of.PULL,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{nq(e instanceof Error,"cancel must have a valid reason");let t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:s,stream:of.CANCEL,streamId:r,reason:om(e)}),t.promise}},i)}destroy(){var e;null==(e=no(this,ov))||e.abort(),nd(this,ov,null)}constructor(e,t,i){nm(this,ob),nm(this,ow),nm(this,oy),nm(this,ox),nc(this,ov,{writable:!0,value:new AbortController}),this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",ng(this,ob,ok).bind(this),{signal:no(this,ov).signal})}}function ok(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void ng(this,oy,oS).call(this,t);if(t.callback){let e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===op.DATA)i.resolve(t.data);else if(t.callback===op.ERROR)i.reject(om(t.reason));else throw Error("Unexpected callback case");return}let i=this.actionHandler[t.action];if(!i)throw Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){let e=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(i,t.data).then(function(i){r.postMessage({sourceName:e,targetName:n,callback:op.DATA,callbackId:t.callbackId,data:i})},function(i){r.postMessage({sourceName:e,targetName:n,callback:op.ERROR,callbackId:t.callbackId,reason:om(i)})});return}if(t.streamId)return void ng(this,ow,o_).call(this,t);i(t.data)}function o_(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this,s=this.actionHandler[e.action],l={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;let l=this.desiredSize;this.desiredSize-=a,l>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:of.ENQUEUE,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:of.CLOSE,streamId:t}),delete a.streamSinks[t])},error(e){nq(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:of.ERROR,streamId:t,reason:om(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(s,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:of.START_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:of.START_COMPLETE,streamId:t,reason:om(e)})})}function oS(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case of.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(om(e.reason));break;case of.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(om(e.reason));break;case of.PULL:if(!s){r.postMessage({sourceName:i,targetName:n,stream:of.PULL_COMPLETE,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||og).then(function(){r.postMessage({sourceName:i,targetName:n,stream:of.PULL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:of.PULL_COMPLETE,streamId:t,reason:om(e)})});break;case of.ENQUEUE:if(nq(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case of.CLOSE:if(nq(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),ng(this,ox,oE).call(this,a,t);break;case of.ERROR:nq(a,"error should have stream controller"),a.controller.error(om(e.reason)),ng(this,ox,oE).call(this,a,t);break;case of.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(om(e.reason)),ng(this,ox,oE).call(this,a,t);break;case of.CANCEL:if(!s)break;let l=om(e.reason);Promise.try(s.onCancel||og,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:of.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:of.CANCEL_COMPLETE,streamId:t,reason:om(e)})}),s.sinkCapability.reject(l),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error("Unexpected stream case")}}async function oE(e,t){var i,n,r;await Promise.allSettled([null==(i=e.startCall)?void 0:i.promise,null==(n=e.pullCall)?void 0:n.promise,null==(r=e.cancelCall)?void 0:r.promise]),delete this.streamControllers[t]}var oM=new WeakMap;class oC{create(e,t){if(e<=0||t<=0)throw Error("Invalid canvas size");let i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!no(this,oM)})}}reset(e,t,i){if(!e.canvas)throw Error("Canvas is not specified");if(t<=0||i<=0)throw Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nV("Abstract method `_createCanvas` called.")}constructor({enableHWA:e=!1}){nc(this,oM,{writable:!0,value:!1}),nd(this,oM,e)}}class oT{async fetch(e){let{name:t}=e;if(!this.baseUrl)throw Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(i))})}async _fetch(e){nV("Abstract method `_fetch` called.")}constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}}class oP extends oT{async _fetch(e){let t=await rl(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):n4(t)}}class oR{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,r){return"none"}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}var oI=new WeakMap,oL=new WeakMap,oD=new WeakMap,oF=new WeakMap,oO=new WeakMap,oN=new WeakMap,oW=new WeakMap,oj=new WeakMap,oB=new WeakMap,oz=new WeakMap,oH=new WeakSet,oU=new WeakSet,oG=new WeakSet,oV=new WeakSet,oq=new WeakSet,oX=new WeakSet,oK=new WeakSet,oY=new WeakSet,oQ=new WeakSet;function oJ(){return nd(this,oL,no(this,oL)||new Map)}function oZ(){return nd(this,oN,no(this,oN)||new Map)}function o$(){if(!no(this,oD)){let e=no(this,oO).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let i=no(this,oO).createElementNS(ra,"svg");i.setAttribute("width",0),i.setAttribute("height",0),nd(this,oD,no(this,oO).createElementNS(ra,"defs")),e.append(i),i.append(no(this,oD)),no(this,oO).body.append(e)}return no(this,oD)}function o0(e){if(1===e.length){let t=e[0],i=Array(256);for(let e=0;e<256;e++)i[e]=t[e]/255;let n=i.join(",");return[n,n,n]}let[t,i,n]=e,r=Array(256),a=Array(256),s=Array(256);for(let e=0;e<256;e++)r[e]=t[e]/255,a[e]=i[e]/255,s[e]=n[e]/255;return[r.join(","),a.join(","),s.join(",")]}function o1(e){if(void 0===no(this,oI)){nd(this,oI,"");let e=no(this,oO).URL;e!==no(this,oO).baseURI&&(rc(e)?nG('#createUrl: ignore "data:"-URL for performance reasons.'):nd(this,oI,e.split("#",1)[0]))}return"url(".concat(no(this,oI),"#").concat(e,")")}function o2(e){let t=no(this,oO).createElementNS(ra,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function o3(e){let t=no(this,oO).createElementNS(ra,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function o4(e){let t=no(this,oO).createElementNS(ra,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),no(this,oz).append(t),t}function o5(e,t,i){let n=no(this,oO).createElementNS(ra,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),e.append(n)}function o6(e,t,i,n){let r=no(this,oO).createElementNS(ra,"feComponentTransfer");n.append(r),ng(this,oX,o5).call(this,r,"feFuncR",e),ng(this,oX,o5).call(this,r,"feFuncG",t),ng(this,oX,o5).call(this,r,"feFuncB",i)}function o9(e,t){let i=no(this,oO).createElementNS(ra,"feComponentTransfer");t.append(i),ng(this,oX,o5).call(this,i,"feFuncA",e)}function o8(e){return no(this,oz).style.color=e,rx(getComputedStyle(no(this,oz)).getPropertyValue("color"))}class o7{async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw Error("Font filename must be specified.");let i="".concat(this.baseUrl).concat(t);return this._fetch(i).catch(e=>{throw Error("Unable to load font data at: ".concat(i))})}async _fetch(e){nV("Abstract method `_fetch` called.")}constructor({baseUrl:e=null}){this.baseUrl=e}}class he extends o7{async _fetch(e){return new Uint8Array(await rl(e,"arraybuffer"))}}async function ht(e){let t=nr.default.getBuiltinModule("fs");return new Uint8Array(await t.promises.readFile(e))}nM&&nG("Please use the `legacy` build in Node.js environments.");let hi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hn(e,t){if(!t)return;let i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),e.clip(r)}class hr{getPattern(){nV("Abstract method `getPattern` called.")}}class ha extends hr{_createGradient(e){let t;for(let i of("axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let r;if(n===hi.STROKE||n===hi.FILL){let a=t.current.getClippedPathBoundingBox(n,rA(e))||[0,0,0,0],s=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,o=t.cachedCanvases.getCanvas("pattern",s,l),h=o.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=n8.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),hn(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(o.canvas,"no-repeat");let c=new DOMMatrix(i);r.setTransform(c)}else hn(e,this._bbox),r=this._createGradient(e);return r}constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}}function hs(e,t,i,n,r,a,s,l){let o,h,c,u,d,p,f,g,m,b=t.coords,w=t.colors,y=e.data,x=4*e.width;b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o),b[n+1]>b[r+1]&&(o=n,n=r,r=o,o=s,s=l,l=o),b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o);let A=(b[i]+t.offsetX)*t.scaleX,k=(b[i+1]+t.offsetY)*t.scaleY,_=(b[n]+t.offsetX)*t.scaleX,S=(b[n+1]+t.offsetY)*t.scaleY,E=(b[r]+t.offsetX)*t.scaleX,M=(b[r+1]+t.offsetY)*t.scaleY;if(k>=M)return;let C=w[a],T=w[a+1],P=w[a+2],R=w[s],I=w[s+1],L=w[s+2],D=w[l],F=w[l+1],O=w[l+2],N=Math.round(k),W=Math.round(M);for(let e=N;e<=W;e++){let t;if(e<S){let t=e<k?0:(k-e)/(k-S);h=A-(A-_)*t,c=C-(C-R)*t,u=T-(T-I)*t,d=P-(P-L)*t}else{let t;h=_-(_-E)*(t=e>M?1:S===M?0:(S-e)/(S-M)),c=R-(R-D)*t,u=I-(I-F)*t,d=L-(L-O)*t}p=A-(A-E)*(t=e<k?0:e>M?1:(k-e)/(k-M)),f=C-(C-D)*t,g=T-(T-F)*t,m=P-(P-O)*t;let i=Math.round(Math.min(h,p)),n=Math.round(Math.max(h,p)),r=x*e+4*i;for(let e=i;e<=n;e++)(t=(h-e)/(h-p))<0?t=0:t>1&&(t=1),y[r++]=c-(c-f)*t|0,y[r++]=u-(u-g)*t|0,y[r++]=d-(d-m)*t|0,y[r++]=255}}class hl extends hr{_createMeshCanvas(e,t,i){let n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-r,l=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),o=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),h=a/l,c=s/o,u={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/h,scaleY:1/c},d=l+4,p=o+4,f=i.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(l,o);if(t){let e=m.data;for(let i=0,n=e.length;i<n;i+=4)e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=255}for(let e of this._figures)!function(e,t,i){let n,r,a=t.coords,s=t.colors;switch(t.type){case"lattice":let l=t.verticesPerRow,o=Math.floor(a.length/l)-1,h=l-1;for(n=0;n<o;n++){let t=n*l;for(let n=0;n<h;n++,t++)hs(e,i,a[t],a[t+1],a[t+l],s[t],s[t+1],s[t+l]),hs(e,i,a[t+l+1],a[t+1],a[t+l],s[t+l+1],s[t+1],s[t+l])}break;case"triangles":for(n=0,r=a.length;n<r;n+=3)hs(e,i,a[n],a[n+1],a[n+2],s[n],s[n+1],s[n+2]);break;default:throw Error("illegal figure")}}(m,e,u);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:n-2*h,offsetY:r-2*c,scaleX:h,scaleY:c}}getPattern(e,t,i,n){let r;if(hn(e,this._bbox),n===hi.SHADING)r=n8.singularValueDecompose2dScale(rA(e));else if(r=n8.singularValueDecompose2dScale(t.baseTransform),this.matrix){let e=n8.singularValueDecompose2dScale(this.matrix);r=[r[0]*e[0],r[1]*e[1]]}let a=this._createMeshCanvas(r,n===hi.SHADING?null:this._background,t.cachedCanvases);return n!==hi.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}}class ho extends hr{getPattern(){return"hotpink"}}let hh={COLORED:1,UNCOLORED:2};class hc{createPatternCanvas(e){let{bbox:t,operatorList:i,paintType:n,tilingType:r,color:a,canvasGraphicsFactory:s}=this,{xstep:l,ystep:o}=this;l=Math.abs(l),o=Math.abs(o),nU("TilingType: "+r);let h=t[0],c=t[1],u=t[2],d=t[3],p=u-h,f=d-c,g=n8.singularValueDecompose2dScale(this.matrix),m=n8.singularValueDecompose2dScale(this.baseTransform),b=g[0]*m[0],w=g[1]*m[1],y=p,x=f,A=!1,k=!1,_=Math.ceil(o*w),S=Math.ceil(f*w);Math.ceil(l*b)>=Math.ceil(p*b)?y=l:A=!0,_>=S?x=o:k=!0;let E=this.getSizeAndScale(y,this.ctx.canvas.width,b),M=this.getSizeAndScale(x,this.ctx.canvas.height,w),C=e.cachedCanvases.getCanvas("pattern",E.size,M.size),T=C.context,P=s.createCanvasGraphics(T);if(P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,n,a),T.translate(-E.scale*h,-M.scale*c),P.transform(E.scale,0,0,M.scale,0,0),T.save(),this.clipBbox(P,h,c,u,d),P.baseTransform=rA(P.ctx),P.executeOperatorList(i),P.endDrawing(),T.restore(),A||k){let t=C.canvas;A&&(y=l),k&&(x=o);let i=this.getSizeAndScale(y,this.ctx.canvas.width,b),n=this.getSizeAndScale(x,this.ctx.canvas.height,w),r=i.size,a=n.size,s=e.cachedCanvases.getCanvas("pattern-workaround",r,a),u=s.context,d=A?Math.floor(p/l):0,g=k?Math.floor(f/o):0;for(let e=0;e<=d;e++)for(let i=0;i<=g;i++)u.drawImage(t,r*e,a*i,r,a,0,0,r,a);return{canvas:s.canvas,scaleX:i.scale,scaleY:n.scale,offsetX:h,offsetY:c}}return{canvas:C.canvas,scaleX:E.scale,scaleY:M.scale,offsetX:h,offsetY:c}}getSizeAndScale(e,t,i){let n=Math.max(hc.MAX_PATTERN_SIZE,t),r=Math.ceil(e*i);return r>=n?r=n:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,n,r){let a=n-t,s=r-i;e.ctx.rect(t,i,a,s),e.current.updateRectMinMax(rA(e.ctx),[t,i,n,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){let n=e.ctx,r=e.current;switch(t){case hh.COLORED:let a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case hh.UNCOLORED:let s=n8.makeHexColor(i[0],i[1],i[2]);n.fillStyle=s,n.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new n1("Unsupported paint type: ".concat(t))}}getPattern(e,t,i,n){let r=i;n!==hi.SHADING&&(r=n8.transform(r,t.baseTransform),this.matrix&&(r=n8.transform(r,this.matrix)));let a=this.createPatternCanvas(t),s=new DOMMatrix(r);s=(s=s.translate(a.offsetX,a.offsetY)).scale(1/a.scaleX,1/a.scaleY);let l=e.createPattern(a.canvas,"repeat");return l.setTransform(s),l}constructor(e,t,i,n,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}}(0,nA._)(hc,"MAX_PATTERN_SIZE",3e3);class hu{getCanvas(e,t,i){let n;return void 0!==this.cache[e]?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}}function hd(e,t,i,n,r,a,s,l,o,h){let[c,u,d,p,f,g]=rA(e);if(0===u&&0===d){let m=Math.round(s*c+f),b=Math.round(l*p+g),w=Math.abs(Math.round((s+o)*c+f)-m)||1,y=Math.abs(Math.round((l+h)*p+g)-b)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),m,b),e.drawImage(t,i,n,r,a,0,0,w,y),e.setTransform(c,u,d,p,f,g),[w,y]}if(0===c&&0===p){let m=Math.round(l*d+f),b=Math.round(s*u+g),w=Math.abs(Math.round((l+h)*d+f)-m)||1,y=Math.abs(Math.round((s+o)*u+g)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(d),0,m,b),e.drawImage(t,i,n,r,a,0,0,y,w),e.setTransform(c,u,d,p,f,g),[y,w]}return e.drawImage(t,i,n,r,a,s,l,o,h),[Math.hypot(c,u)*o,Math.hypot(d,p)*h]}class hp{clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=n8.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){let i=n8.applyTransform(t,e),n=n8.applyTransform(t.slice(2),e),r=n8.applyTransform([t[0],t[3]],e),a=n8.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(e,t){n8.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,r,a,s,l,o,h){let c=n8.bezierBoundingBox(t,i,n,r,a,s,l,o,h);h||this.updateRectMinMax(e,c)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(e===hi.STROKE){t||nV("Stroke bounding box must include transform.");let e=n8.singularValueDecompose2dScale(t),n=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;i[0]-=n,i[1]-=r,i[2]+=n,i[3]+=r}return i}updateClipFromPath(){let e=n8.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n8.intersect(this.clipBox,this.getPathBoundingBox(e,t))}constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nC,this.textMatrixScale=1,this.fontMatrix=nT,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nF.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}}function hf(e,t){let i,n,r,a;if(t instanceof ImageData)return void e.putImageData(t,0,0);let s=t.height,l=t.width,o=s%16,h=(s-o)/16,c=0===o?h:h+1,u=e.createImageData(l,16),d=0,p,f=t.data,g=u.data;if(t.kind===nO.GRAYSCALE_1BPP){let t=f.byteLength,a=new Uint32Array(g.buffer,0,g.byteLength>>2),s=a.length,m=l+7>>3,b=n6.isLittleEndian?0xff000000:255;for(i=0;i<c;i++){for(n=0,r=i<h?16:o,p=0;n<r;n++){let e=t-d,i=0,n=e>m?l:8*e-7,r=-8&n,s=0,o=0;for(;i<r;i+=8)o=f[d++],a[p++]=128&o?0xffffffff:b,a[p++]=64&o?0xffffffff:b,a[p++]=32&o?0xffffffff:b,a[p++]=16&o?0xffffffff:b,a[p++]=8&o?0xffffffff:b,a[p++]=4&o?0xffffffff:b,a[p++]=2&o?0xffffffff:b,a[p++]=1&o?0xffffffff:b;for(;i<n;i++)0===s&&(o=f[d++],s=128),a[p++]=o&s?0xffffffff:b,s>>=1}for(;p<s;)a[p++]=0;e.putImageData(u,0,16*i)}}else if(t.kind===nO.RGBA_32BPP){for(i=0,n=0,a=16*l*4;i<h;i++)g.set(f.subarray(d,d+a)),d+=a,e.putImageData(u,0,n),n+=16;i<c&&(a=l*o*4,g.set(f.subarray(d,d+a)),e.putImageData(u,0,n))}else if(t.kind===nO.RGB_24BPP)for(i=0,a=l*(r=16);i<c;i++){for(i>=h&&(a=l*(r=o)),p=0,n=a;n--;)g[p++]=f[d++],g[p++]=f[d++],g[p++]=f[d++],g[p++]=255;e.putImageData(u,0,16*i)}else throw Error("bad image kind: ".concat(t.kind))}function hg(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);let i=t.height,n=t.width,r=i%16,a=(i-r)/16,s=0===r?a:a+1,l=e.createImageData(n,16),o=0,h=t.data,c=l.data;for(let t=0;t<s;t++){let i=t<a?16:r;({srcPos:o}=function(e){let{src:t,srcPos:i=0,dest:n,width:r,height:a,nonBlackColor:s=0xffffffff,inverseDecode:l=!1}=e,o=n6.isLittleEndian?0xff000000:255,[h,c]=l?[s,o]:[o,s],u=r>>3,d=7&r,p=t.length;n=new Uint32Array(n.buffer);let f=0;for(let e=0;e<a;e++){for(let e=i+u;i<e;i++){let e=i<p?t[i]:255;n[f++]=128&e?c:h,n[f++]=64&e?c:h,n[f++]=32&e?c:h,n[f++]=16&e?c:h,n[f++]=8&e?c:h,n[f++]=4&e?c:h,n[f++]=2&e?c:h,n[f++]=1&e?c:h}if(0===d)continue;let e=i<p?t[i++]:255;for(let t=0;t<d;t++)n[f++]=e&1<<7-t?c:h}return{srcPos:i,destPos:f}}({src:h,srcPos:o,dest:c,width:n,height:i,nonBlackColor:0})),e.putImageData(l,0,16*t)}}function hm(e,t){for(let i of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function hv(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!nM){let{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function hb(e,t){if(t)return!0;let i=n8.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*rs.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}let hw=["butt","round","square"],hy=["miter","round","bevel"],hx={},hA={};var hk=new WeakSet,h_=new WeakSet,hS=new WeakSet;class hE{getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:i,transparency:n=!1,background:r=null}=e,a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,n){let e=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...rA(this.compositeCtx))}this.ctx.save(),hv(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=rA(this.ctx)}executeOperatorList(e,t,i,n){let r,a=e.argsArray,s=e.fnArray,l=t||0,o=a.length;if(o===l)return l;let h=o-l>10&&"function"==typeof i,c=h?Date.now()+15:0,u=0,d=this.commonObjs,p=this.objs;for(;;){if(void 0!==n&&l===n.nextBreakPoint)return n.breakIt(l,i),l;if((r=s[l])!==nB.dependency)this[r].apply(this,a[l]);else for(let e of a[l]){let t=e.startsWith("g_")?d:p;if(!t.has(e))return t.get(e,i),l}if(++l===o)return l;if(h&&++u>10){if(Date.now()>c)return i(),l;u=0}}}endDrawing(){for(let e of(ng(this,hk,hM).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),ng(this,h_,hC).call(this)}_scaleImage(e,t){var i,n;let r,a,s=null!=(i=e.width)?i:e.displayWidth,l=null!=(n=e.height)?n:e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),h=Math.max(Math.hypot(t[2],t[3]),1),c=s,u=l,d="prescale1";for(;o>2&&c>1||h>2&&u>1;){let t=c,i=u;o>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/t),h>2&&u>1&&(i=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,h/=u/i),(a=(r=this.cachedCanvases.getCanvas(d,t,i)).context).clearRect(0,0,t,i),a.drawImage(e,0,0,c,u,0,0,t,i),e=r.canvas,c=t,u=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e){let t,i,n,r,a=this.ctx,{width:s,height:l}=e,o=this.current.fillColor,h=this.current.patternFill,c=rA(a);if((e.bitmap||e.data)&&e.count>1){let r=e.bitmap||e.data.buffer;i=JSON.stringify(h?c:[c.slice(0,4),o]),(t=this._cachedBitmapsMap.get(r))||(t=new Map,this._cachedBitmapsMap.set(r,t));let a=t.get(i);if(a&&!h)return{canvas:a,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};n=a}n||hg((r=this.cachedCanvases.getCanvas("maskCanvas",s,l)).context,e);let u=n8.transform(c,[1/s,0,0,-1/l,0,0]);u=n8.transform(u,[1,0,0,1,0,-l]);let[d,p,f,g]=n8.getAxialAlignedBoundingBox([0,0,s,l],u),m=Math.round(f-d)||1,b=Math.round(g-p)||1,w=this.cachedCanvases.getCanvas("fillCanvas",m,b),y=w.context;y.translate(-d,-p),y.transform(...u),!n&&(n=(n=this._scaleImage(r.canvas,rk(y))).img,t&&h&&t.set(i,n)),y.imageSmoothingEnabled=hb(rA(y),e.interpolate),hd(y,n,0,0,n.width,n.height,0,0,s,l),y.globalCompositeOperation="source-in";let x=n8.transform(rk(y),[1,0,0,1,-d,-p]);return y.fillStyle=h?o.getPattern(a,this,x,hi.FILL):o,y.fillRect(0,0,s,l),t&&!h&&(this.cachedCanvases.delete("fillCanvas"),t.set(i,w.canvas)),{canvas:w.canvas,offsetX:Math.round(d),offsetY:Math.round(p)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=hw[e]}setLineJoin(e){this.ctx.lineJoin=hy[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;let r=this.ctx;r.setTransform(...rA(this.suspendedCtx)),hm(this.suspendedCtx,r);var a=this.suspendedCtx;if(r._removeMirroring)throw Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){a.save(),this.__originalSave()},r.restore=function(){a.restore(),this.__originalRestore()},r.translate=function(e,t){a.translate(e,t),this.__originalTranslate(e,t)},r.scale=function(e,t){a.scale(e,t),this.__originalScale(e,t)},r.transform=function(e,t,i,n,r,s){a.transform(e,t,i,n,r,s),this.__originalTransform(e,t,i,n,r,s)},r.setTransform=function(e,t,i,n,r,s){a.setTransform(e,t,i,n,r,s),this.__originalSetTransform(e,t,i,n,r,s)},r.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){a.rotate(e),this.__originalRotate(e)},r.clip=function(e){a.clip(e),this.__originalClip(e)},r.moveTo=function(e,t){a.moveTo(e,t),this.__originalMoveTo(e,t)},r.lineTo=function(e,t){a.lineTo(e,t),this.__originalLineTo(e,t)},r.bezierCurveTo=function(e,t,i,n,r,s){a.bezierCurveTo(e,t,i,n,r,s),this.__originalBezierCurveTo(e,t,i,n,r,s)},r.rect=function(e,t,i,n){a.rect(e,t,i,n),this.__originalRect(e,t,i,n)},r.closePath=function(){a.closePath(),this.__originalClosePath()},r.beginPath=function(){a.beginPath(),this.__originalBeginPath()},this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){let r=n[0],a=n[1],s=n[2]-r,l=n[3]-a;0!==s&&0!==l&&(this.genericComposeSMask(t.context,i,s,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,r,a,s,l,o,h,c){let u=e.canvas,d=l-h,p=o-c;if(a){let t=n8.makeHexColor(...a);if(d<0||p<0||d+i>u.width||p+n>u.height){let e=this.cachedCanvases.getCanvas("maskExtension",i,n),r=e.context;r.drawImage(u,-d,-p),r.globalCompositeOperation="destination-atop",r.fillStyle=t,r.fillRect(0,0,i,n),r.globalCompositeOperation="source-over",u=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let r=new Path2D;r.rect(d,p,i,n),e.clip(r),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(d,p,i,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&s?t.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(s));let f=new Path2D;f.rect(l,o,i,n),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,d,p,i,n,l,o,i,n),t.restore()}save(){this.inSMaskMode?(hm(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hm(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,r,a){this.ctx.transform(e,t,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let n,r,a=this.ctx,s=this.current,l=s.x,o=s.y,h=rA(a),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],u=c?i.slice(0):null;for(let i=0,d=0,p=e.length;i<p;i++)switch(0|e[i]){case nB.rectangle:l=t[d++],o=t[d++];let p=t[d++],f=t[d++],g=l+p,m=o+f;a.moveTo(l,o),0===p||0===f?a.lineTo(g,m):(a.lineTo(g,o),a.lineTo(g,m),a.lineTo(l,m)),c||s.updateRectMinMax(h,[l,o,g,m]),a.closePath();break;case nB.moveTo:l=t[d++],o=t[d++],a.moveTo(l,o),c||s.updatePathMinMax(h,l,o);break;case nB.lineTo:l=t[d++],o=t[d++],a.lineTo(l,o),c||s.updatePathMinMax(h,l,o);break;case nB.curveTo:n=l,r=o,l=t[d+4],o=t[d+5],a.bezierCurveTo(t[d],t[d+1],t[d+2],t[d+3],l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],t[d+2],t[d+3],l,o,u),d+=6;break;case nB.curveTo2:n=l,r=o,a.bezierCurveTo(l,o,t[d],t[d+1],t[d+2],t[d+3]),s.updateCurvePathMinMax(h,n,r,l,o,t[d],t[d+1],t[d+2],t[d+3],u),l=t[d+2],o=t[d+3],d+=4;break;case nB.curveTo3:n=l,r=o,l=t[d+2],o=t[d+3],a.bezierCurveTo(t[d],t[d+1],l,o,l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],l,o,l,o,u),d+=4;break;case nB.closePath:a.closePath()}c&&s.updateScalingPathMinMax(h,u),s.setCurrentPoint(l,o)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&(null==i?void 0:i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,rk(t),hi.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.fillColor,n=this.current.patternFill,r=!1;n&&(t.save(),t.fillStyle=i.getPattern(t,this,rk(t),hi.FILL),r=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=hx}eoClip(){this.pendingClip=hA}beginText(){this.current.textMatrix=nC,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();let i=new Path2D,n=t.getTransform().invertSelf();for(let{transform:t,x:r,y:a,fontSize:s,path:l}of e)i.addPath(l,new DOMMatrix(t).preMultiplySelf(n).translate(r,a).scale(s,-s));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var i;let n=this.commonObjs.get(e),r=this.current;if(!n)throw Error("Can't find font for ".concat(e));if(r.fontMatrix=n.fontMatrix||nT,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&nG("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let a=n.loadedName||"sans-serif",s=(null==(i=n.systemFontInfo)?void 0:i.css)||'"'.concat(a,'", ').concat(n.fallbackName),l="normal";n.black?l="900":n.bold&&(l="bold");let o=n.italic?"italic":"normal",h=t;t<16?h=16:t>100&&(h=100),this.current.fontSizeScale=t/h,this.ctx.font="".concat(o," ").concat(l," ").concat(h,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,r,a){this.current.textMatrix=[e,t,i,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,r){let a,s=this.ctx,l=this.current,o=l.font,h=l.textRenderingMode,c=l.fontSize/l.fontSizeScale,u=h&nF.FILL_STROKE_MASK,d=!!(h&nF.ADD_TO_PATH_FLAG),p=l.patternFill&&!o.missingFile,f=l.patternStroke&&!o.missingFile;if((o.disableFontFace||d||p||f)&&(a=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||p||f){if(s.save(),s.translate(t,i),s.scale(c,-c),u===nF.FILL||u===nF.FILL_STROKE)if(n){let e=s.getTransform();s.setTransform(...n),s.fill(ng(this,hS,hT).call(this,a,e,n))}else s.fill(a);if(u===nF.STROKE||u===nF.FILL_STROKE)if(r){let e=s.getTransform();s.setTransform(...r),s.stroke(ng(this,hS,hT).call(this,a,e,r))}else s.lineWidth/=c,s.stroke(a);s.restore()}else(u===nF.FILL||u===nF.FILL_STROKE)&&s.fillText(e,t,i),(u===nF.STROKE||u===nF.FILL_STROKE)&&s.strokeText(e,t,i);d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:rA(s),x:t,y:i,fontSize:c,path:a})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,i=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){i=!0;break}return nK(this,"isFontSubpixelAAEnabled",i)}showText(e){let t,i,n=this.current,r=n.font;if(r.isType3Font)return this.showType3Text(e);let a=n.fontSize;if(0===a)return;let s=this.ctx,l=n.fontSizeScale,o=n.charSpacing,h=n.wordSpacing,c=n.fontDirection,u=n.textHScale*c,d=e.length,p=r.vertical,f=p?1:-1,g=r.defaultVMetrics,m=a*n.fontMatrix[0],b=n.textRenderingMode===nF.FILL&&!r.disableFontFace&&!n.patternFill;if(s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(u,-1):s.scale(u,1),n.patternFill){s.save();let e=n.fillColor.getPattern(s,this,rk(s),hi.FILL);t=rA(s),s.restore(),s.fillStyle=e}if(n.patternStroke){s.save();let e=n.strokeColor.getPattern(s,this,rk(s),hi.STROKE);i=rA(s),s.restore(),s.strokeStyle=e}let w=n.lineWidth,y=n.textMatrixScale;if(0===y||0===w){let e=n.textRenderingMode&nF.FILL_STROKE_MASK;(e===nF.STROKE||e===nF.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=y;if(1!==l&&(s.scale(l,l),w/=l),s.lineWidth=w,r.isInvalidPDFjsFont){let t=[],i=0;for(let n of e)t.push(n.unicode),i+=n.width;s.fillText(t.join(""),0,0),n.x+=i*m*u,s.restore(),this.compose();return}let x=0,A;for(A=0;A<d;++A){let n,u,d=e[A];if("number"==typeof d){x+=f*d*a/1e3;continue}let w=!1,y=(d.isSpace?h:0)+o,k=d.fontChar,_=d.accent,S=d.width;if(p){let e=d.vmetric||g,t=-(d.vmetric?e[1]:.5*S)*m,i=e[2]*m;S=e?-e[0]:S,n=t/l,u=(x+i)/l}else n=x/l,u=0;if(r.remeasure&&S>0){let e=1e3*s.measureText(k).width/a*l;if(S<e&&this.isFontSubpixelAAEnabled){let t=S/e;w=!0,s.save(),s.scale(t,1),n/=t}else S!==e&&(n+=(S-e)/2e3*a/l)}if(this.contentVisible&&(d.isInFont||r.missingFile)){if(b&&!_)s.fillText(k,n,u);else if(this.paintChar(k,n,u,t,i),_){let e=n+a*_.offset.x/l,r=u-a*_.offset.y/l;this.paintChar(_.fontChar,e,r,t,i)}}x+=p?S*m-y*c:S*m+y*c,w&&s.restore()}p?n.y-=x:n.x+=x*u,s.restore(),this.compose()}showType3Text(e){let t,i,n,r,a=this.ctx,s=this.current,l=s.font,o=s.fontSize,h=s.fontDirection,c=l.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,p=s.textHScale*h,f=s.fontMatrix||nT,g=e.length;if(s.textRenderingMode!==nF.INVISIBLE&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...s.textMatrix),a.translate(s.x,s.y),a.scale(p,h),t=0;t<g;++t){if("number"==typeof(i=e[t])){r=c*i*o/1e3,this.ctx.translate(r,0),s.x+=r*p;continue}let h=(i.isSpace?d:0)+u,g=l.charProcOperatorList[i.operatorListId];if(!g){nG('Type3 character "'.concat(i.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=i,this.save(),a.scale(o,o),a.transform(...f),this.executeOperatorList(g),this.restore()),n=n8.applyTransform([i.width,0],f)[0]*o+h,a.translate(n,0),s.x+=n*p}a.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){let i=e[1],n=this.baseTransform||rA(this.ctx);t=new hc(e,i,this.ctx,{createCanvasGraphics:e=>new hE(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=n8.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=n8.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new ha(e);case"Mesh":return new hl(e);case"Dummy":return new ho}throw Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),i&&(t.matrix=i),t}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save(),t.fillStyle=this._getPattern(e).getPattern(t,this,rk(t),hi.SHADING);let i=rk(t);{let{width:e,height:n}=t.canvas,[r,a,s,l]=n8.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(r,a,s-r,l-a)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nV("Should not call beginInlineImage")}beginImageData(){nV("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=rA(this.ctx),t)){let e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i),this.current.updateRectMinMax(rA(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||nU("TODO: Support non-isolated groups."),e.knockout&&nG("Knockout groups not supported.");let i=rA(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw Error("Bounding box is required.");let n=n8.getAxialAlignedBoundingBox(e.bbox,rA(t)),r=[0,0,t.canvas.width,t.canvas.height],a=Math.floor((n=n8.intersect(n,r)||[0,0,0,0])[0]),s=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),o=Math.max(Math.ceil(n[3])-s,1);this.current.startNewPathAndClipBox([0,0,l,o]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);let c=this.cachedCanvases.getCanvas(h,l,o),u=c.context;u.translate(-a,-s),u.transform(...i),e.smask?this.smaskStack.push({canvas:c.canvas,context:u,offsetX:a,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,s),t.save()),hm(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let e=rA(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);let i=n8.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,i,n,r){if(ng(this,hk,hM).call(this),hv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let n=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=n,t[3]=a;let[r,s]=n8.singularValueDecompose2dScale(rA(this.ctx)),{viewportScale:l}=this,o=Math.ceil(n*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(o,h);let{canvas:c,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(r,0,0,-s,0,a*s),hv(this.ctx)}else hv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],n,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new hp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ng(this,h_,hC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;(e=this.getObject(e.data,e)).count=t;let i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(e){let t,i,n,{width:r,height:a}=e;if(r>1e3||a>1e3)return null;let s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=r+1,o=new Uint8Array(l*(a+1)),h=r+7&-8,c=new Uint8Array(h*a),u=0;for(let t of e.data){let e=128;for(;e>0;)c[u++]=t&e?0:255,e>>=1}let d=0;for(0!==c[u=0]&&(o[0]=1,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[i]=c[u]?2:1,++d),u++;for(0!==c[u]&&(o[i]=2,++d),t=1;t<a;t++){u=t*h,n=t*l,c[u-h]!==c[u]&&(o[n]=c[u]?1:8,++d);let e=4*!!c[u]+8*!!c[u-h];for(i=1;i<r;i++)s[e=(e>>2)+4*!!c[u+1]+8*!!c[u-h+1]]&&(o[n+i]=s[e],++d),u++;if(c[u-h]!==c[u]&&(o[n+i]=c[u]?2:4,++d),d>1e3)return null}for(u=h*(a-1),n=t*l,0!==c[u]&&(o[n]=8,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[n+i]=c[u]?4:8,++d),u++;if(0!==c[u]&&(o[n+i]=4,++d),d>1e3)return null;let p=new Int32Array([0,l,-1,0,-l,0,0,0,1]),f=new Path2D;for(t=0;d&&t<=a;t++){let e=t*l,i=e+r;for(;e<i&&!o[e];)e++;if(e===i)continue;f.moveTo(e%l,t);let n=e,a=o[e];do{let t=p[a];do e+=t;while(!o[e])let i=o[e];5!==i&&10!==i?(a=i,o[e]=0):(a=i&51*a>>4,o[e]&=a>>2|a<<2),f.lineTo(e%l,e/l|0),!o[e]&&--d}while(n!==e)--t}return c=null,o=null,function(e){e.save(),e.scale(1/r,-1/a),e.translate(0,-a),e.fill(f),e.beginPath(),e.restore()}}(e)),n.compiled))return void n.compiled(i);let r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);let s=this.ctx;s.save();let l=rA(s);s.transform(t,i,n,r,0,0);let o=this._createMaskCanvas(e);s.setTransform(1,0,0,1,o.offsetX-l[4],o.offsetY-l[5]);for(let e=0,h=a.length;e<h;e+=2){let h=n8.transform(l,[t,i,n,r,a[e],a[e+1]]),[c,u]=n8.applyTransform([0,0],h);s.drawImage(o.canvas,c,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let r of e){let{data:e,width:a,height:s,transform:l}=r,o=this.cachedCanvases.getCanvas("maskCanvas",a,s),h=o.context;h.save(),hg(h,this.getObject(e,r)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,rk(t),hi.FILL):i,h.fillRect(0,0,a,s),h.restore(),t.save(),t.transform(...l),t.scale(1,-1),hd(t,o.canvas,0,0,a,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t)return void nG("Dependent image isn't ready yet");this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;let r=this.getObject(e);if(!r)return void nG("Dependent image isn't ready yet");let a=r.width,s=r.height,l=[];for(let e=0,r=n.length;e<r;e+=2)l.push({transform:[t,0,0,i,n[e],n[e+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;let{bitmap:t,width:i,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){let t;if(!this.contentVisible)return;let i=e.width,n=e.height,r=this.ctx;if(this.save(),!nM){let{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}if(r.scale(1/i,-1/n),e.bitmap)t=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{let r=this.cachedCanvases.getCanvas("inlineImage",i,n).context;hf(r,e),t=this.applyTransferMapsToCanvas(r)}let a=this._scaleImage(t,rk(r));r.imageSmoothingEnabled=hb(rA(r),e.interpolate),hd(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){let i;if(!this.contentVisible)return;let n=this.ctx;if(e.bitmap)i=e.bitmap;else{let t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;hf(r,e),i=this.applyTransferMapsToCanvas(r)}for(let e of t)n.save(),n.transform(...e.transform),n.scale(1,-1),hd(n,i,e.x,e.y,e.w,e.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let i=this.ctx;this.pendingClip&&(t||(this.pendingClip===hA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=rA(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let e,t,{lineWidth:i}=this.current,{a:n,b:r,c:a,d:s}=this.ctx.getTransform();if(0===r&&0===a){let r=Math.abs(n),a=Math.abs(s);if(r===a)if(0===i)e=t=1/r;else{let n=r*i;e=t=n<1?1/n:1}else if(0===i)e=1/r,t=1/a;else{let n=r*i,s=a*i;e=n<1?1/n:1,t=s<1?1/s:1}}else{let l=Math.abs(n*s-r*a),o=Math.hypot(n,r),h=Math.hypot(a,s);if(0===i)e=h/l,t=o/l;else{let n=i*l;e=h>n?h/n:1,t=o>n?o/n:1}}this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=i||1,1===n&&1===r)return void t.stroke();let a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){let e=Math.max(n,r);t.setLineDash(a.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}constructor(e,t,i,n,r,{optionalContentConfig:a,markedContentStack:s=null},l,o){nm(this,hk),nm(this,h_),nm(this,hS),this.ctx=e,this.current=new hp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=a,this.cachedCanvases=new hu(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}}function hM(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function hC(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function hT(e,t,i){let n=new Path2D;return n.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),n}for(let e in nB)void 0!==hE.prototype[e]&&(hE.prototype[nB[e]]=hE.prototype[e]);class hP{static get workerPort(){return nw(this,hP,hR)}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw Error("Invalid `workerPort` type.");ny(this,hP,hR,e)}static get workerSrc(){return nw(this,hP,hI)}static set workerSrc(e){if("string"!=typeof e)throw Error("Invalid `workerSrc` type.");ny(this,hP,hI,e)}}var hR={writable:!0,value:null},hI={writable:!0,value:""},hL=new WeakMap,hD=new WeakMap;class hF{getRaw(){return no(this,hD)}get(e){var t;return null!=(t=no(this,hL).get(e))?t:null}getAll(){return n5(no(this,hL))}has(e){return no(this,hL).has(e)}constructor({parsedData:e,rawData:t}){nc(this,hL,{writable:!0,value:void 0}),nc(this,hD,{writable:!0,value:void 0}),nd(this,hL,e),nd(this,hD,t)}}let hO=Symbol("INTERNAL");var hN=new WeakMap,hW=new WeakMap,hj=new WeakMap,hB=new WeakMap;class hz{get visible(){if(no(this,hj))return no(this,hB);if(!no(this,hB))return!1;let{print:e,view:t}=this.usage;return no(this,hN)?(null==t?void 0:t.viewState)!=="OFF":!no(this,hW)||(null==e?void 0:e.printState)!=="OFF"}_setVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==hO&&nV("Internal method `_setVisible` called."),nd(this,hj,i),nd(this,hB,t)}constructor(e,{name:t,intent:i,usage:n,rbGroups:r}){nc(this,hN,{writable:!0,value:!1}),nc(this,hW,{writable:!0,value:!1}),nc(this,hj,{writable:!0,value:!1}),nc(this,hB,{writable:!0,value:!0}),nd(this,hN,!!(e&nP.DISPLAY)),nd(this,hW,!!(e&nP.PRINT)),this.name=t,this.intent=i,this.usage=n,this.rbGroups=r}}var hH=new WeakMap,hU=new WeakMap,hG=new WeakMap,hV=new WeakMap,hq=new WeakSet;class hX{isVisible(e){if(0===no(this,hU).size)return!0;if(!e)return nU("Optional content group not defined."),!0;if("OCG"===e.type)return no(this,hU).has(e.id)?no(this,hU).get(e.id).visible:(nG("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return ng(this,hq,hK).call(this,e.expression);if(e.policy&&"AnyOn"!==e.policy){if("AllOn"===e.policy){for(let t of e.ids){if(!no(this,hU).has(t)){nG("Optional content group not found: ".concat(t));break}if(!no(this,hU).get(t).visible)return!1}return!0}else if("AnyOff"===e.policy){for(let t of e.ids){if(!no(this,hU).has(t))return nG("Optional content group not found: ".concat(t)),!0;if(!no(this,hU).get(t).visible)return!0}return!1}else if("AllOff"===e.policy){for(let t of e.ids){if(!no(this,hU).has(t)){nG("Optional content group not found: ".concat(t));break}if(no(this,hU).get(t).visible)return!1}return!0}}else{for(let t of e.ids){if(!no(this,hU).has(t))return nG("Optional content group not found: ".concat(t)),!0;if(no(this,hU).get(t).visible)return!0}return!1}return nG("Unknown optional content policy ".concat(e.policy,".")),!0}return nG("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=no(this,hU).get(e);if(!n)return void nG("Optional content group not found: ".concat(e));if(i&&t&&n.rbGroups.length){for(let t of n.rbGroups)for(let i of t)if(i!==e){var r;null==(r=no(this,hU).get(i))||r._setVisible(hO,!1,!0)}}n._setVisible(hO,!!t,!0),nd(this,hH,null)}setOCGState(e){let t,{state:i,preserveRB:n}=e;for(let e of i){switch(e){case"ON":case"OFF":case"Toggle":t=e;continue}let i=no(this,hU).get(e);if(i)switch(t){case"ON":this.setVisibility(e,!0,n);break;case"OFF":this.setVisibility(e,!1,n);break;case"Toggle":this.setVisibility(e,!i.visible,n)}}nd(this,hH,null)}get hasInitialVisibility(){return null===no(this,hG)||this.getHash()===no(this,hG)}getOrder(){return no(this,hU).size?no(this,hV)?no(this,hV).slice():[...no(this,hU).keys()]:null}getGroups(){return no(this,hU).size>0?n5(no(this,hU)):null}getGroup(e){return no(this,hU).get(e)||null}getHash(){if(null!==no(this,hH))return no(this,hH);let e=new oe;for(let[t,i]of no(this,hU))e.update("".concat(t,":").concat(i.visible));return nd(this,hH,e.hexdigest())}constructor(e,t=nP.DISPLAY){if(nm(this,hq),nc(this,hH,{writable:!0,value:null}),nc(this,hU,{writable:!0,value:new Map}),nc(this,hG,{writable:!0,value:null}),nc(this,hV,{writable:!0,value:null}),this.renderingIntent=t,this.name=null,this.creator=null,null===e)return;for(let i of(this.name=e.name,this.creator=e.creator,nd(this,hV,e.order),e.groups))no(this,hU).set(i.id,new hz(t,i));if("OFF"===e.baseState)for(let e of no(this,hU).values())e._setVisible(hO,!1);for(let t of e.on)no(this,hU).get(t)._setVisible(hO,!0);for(let t of e.off)no(this,hU).get(t)._setVisible(hO,!1);nd(this,hG,this.getHash())}}function hK(e){let t=e.length;if(t<2)return!0;let i=e[0];for(let n=1;n<t;n++){let t,r=e[n];if(Array.isArray(r))t=ng(this,hq,hK).call(this,r);else{if(!no(this,hU).has(r))return nG("Optional content group not found: ".concat(r)),!0;t=no(this,hU).get(r).visible}switch(i){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===i}class hY{_onReceiveData(e){let{begin:t,chunk:i}=e,n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):nq(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}_onProgress(e){var t,i,n,r;void 0===e.total?null==(i=this._rangeReaders[0])||null==(t=i.onProgress)||t.call(i,{loaded:e.loaded}):null==(r=this._fullRequestReader)||null==(n=r.onProgress)||n.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){nq(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new hQ(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new hJ(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeReaders.slice(0)))i.cancel(e);this._pdfDataRangeTransport.abort()}constructor(e,{disableRange:t=!1,disableStream:i=!1}){nq(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:s}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=s,(null==r?void 0:r.length)>0){let e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}}class hQ{_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}constructor(e,t,i=!1,n=null){for(let r of(this._stream=e,this._done=i||!1,this._filename=ru(n)?n:null,this._queuedChunks=t||[],this._loaded=0,this._queuedChunks))this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}}class hJ{_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{for(let t of(this._requests.shift().resolve({value:e,done:!1}),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}}function hZ(e,t){let i=new Headers;if(!e||!t||"object"!=typeof t)return i;for(let e in t){let n=t[e];void 0!==n&&i.append(e,n)}return i}function h$(e){try{return new URL(e).origin}catch(e){}return null}function h0(e){let{responseHeaders:t,isHttp:i,rangeChunkSize:n,disableRange:r}=e,a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return Number.isInteger(s)&&(a.suggestedLength=s,s<=2*n||r||!i||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0)),a}function h1(e){let t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,i=n("filename\\*","i").exec(e);if(i){let e=s(i=i[1]);return a(e=o(e=l(e=unescape(e))))}if(i=function(e){let t,i=[],r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=r.exec(e));){let[,e,n,r]=t;if((e=parseInt(e,10))in i){if(0===e)break;continue}i[e]=[n,r]}let a=[];for(let e=0;e<i.length&&e in i;++e){let[t,n]=i[e];n=s(n),t&&(n=unescape(n),0===e&&(n=l(n))),a.push(n)}return a.join("")}(e))return a(o(i));if(i=n("filename","i").exec(e)){let e=s(i=i[1]);return a(e=o(e))}function n(e,t){return RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{let n=new TextDecoder(e,{fatal:!0}),r=n4(i);i=n.decode(r),t=!1}catch(e){}}return i}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){let t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){let i=t[e].indexOf('"');-1!==i&&(t[e]=t[e].slice(0,i),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){let t=e.indexOf("'");return -1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function o(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,i,n){if("q"===i||"Q"===i)return r(t,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{n=atob(n)}catch(e){}return r(t,n)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(ru(e))return e}return null}function h2(e,t){return 404===e||0===e&&t.startsWith("file:")?new n$('Missing PDF "'+t+'".'):new n0("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function h3(e){return 200===e||206===e}function h4(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function h5(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(nG("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class h6{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return nq(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h9(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new h8(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){(0,nA._)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=hZ(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class h9{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h5(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let i=new Headers(e.headers),n=t.url;fetch(n,h4(i,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=h$(t.url),!h3(t.status))throw h2(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();let i=t.headers,{allowRangeRequests:r,suggestedLength:a}=h0({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=h1(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n2("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}}class h8{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:h5(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;let n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(i-1));let a=n.url;fetch(a,h4(r,this._withCredentials,this._abortController)).then(t=>{let i=h$(t.url);if(i!==e._responseOrigin)throw Error('Expected range response-origin "'.concat(i,'" to match "').concat(e._responseOrigin,'".'));if(!h3(t.status))throw h2(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}}class h7{request(e){let t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};for(let[e,i]of(t.open("GET",this.url),t.withCredentials=this.withCredentials,this.headers))t.setRequestHeader(e,i);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),n.expectedStatus=206):n.expectedStatus=200,t.responseType="arraybuffer",nq(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var i;let n=this.pendingRequests[e];n&&(null==(i=n.onProgress)||i.call(n,t))}onStateChange(e,t){let i=this.pendingRequests[e];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===n.status&&this.isHttp)return void i.onError(n.status);let r=n.status||200;if((200!==r||206!==i.expectedStatus)&&r!==i.expectedStatus)return void i.onError(n.status);let a=function(e){let t=e.response;return"string"!=typeof t?t:n4(t).buffer}(n);if(206===r){let e=n.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?i.onDone({begin:parseInt(t[1],10),chunk:a}):(nG('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}constructor({url:e,httpHeaders:t,withCredentials:i}){(0,nA._)(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=hZ(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}}class ce{_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return nq(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ct(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let i=new ci(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this._source=e,this._manager=new h7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}}class ct{_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=h$(t.responseURL);let i=t.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{let[t,...i]=e.split(": ");return[t,i.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=h0({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=h1(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){for(let t of(this._storedError=h2(e,this._url),this._headersCapability.reject(this._storedError),this._requests))t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let t of(this._done=!0,this._headersCapability.reject(e),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}}class ci{_onHeadersReceived(){var e;let t=h$(null==(e=this._manager.getRequestXhr(this._requestId))?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){let t=e.chunk;for(let e of(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){for(let t of(null!=this._storedError||(this._storedError=h2(e,this._url)),this._requests))t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){if(!this.isStreamingSupported){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}}let cn=/^[a-z][a-z0-9\-+.]+:/i;class cr{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return nq(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ca(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new cs(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this.source=e,this.url=function(e){return new URL(cn.test(e)?e:nr.default.getBuiltinModule("url").pathToFileURL(e))}(e.url),nq("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class ca{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n2("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=nr.default.getBuiltinModule("fs");i.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new n$('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)})}}class cs{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let n=e.source;this._isStreamingSupported=!n.disableStream;let r=nr.default.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}var cl=new WeakMap,co=new WeakMap,ch=new WeakMap,cc=new WeakMap,cu=new WeakMap,cd=new WeakMap,cp=new WeakMap,cf=new WeakMap,cg=new WeakMap,cm=new WeakMap,cv=new WeakMap,cb=new WeakMap,cw=new WeakMap,cy=new WeakMap,cx=new WeakMap,cA=new WeakMap,ck=new WeakMap,c_=new WeakMap,cS=new WeakSet,cE=new WeakSet,cM=new WeakSet;class cC{static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=n6.platform;return nK(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){let e=()=>{no(this,cg).read().then(t=>{var i;let{value:n,done:r}=t;if(r)return void no(this,cl).resolve();nd(this,cu,null!=(i=no(this,cu))?i:n.lang),Object.assign(no(this,cw),n.styles),ng(this,cS,cD).call(this,n.items),e()},no(this,cl).reject)};return nd(this,cg,no(this,cx).getReader()),nw(cC,cC,cL).add(this),e(),no(this,cl).promise}update(e){let{viewport:t,onBefore:i=null}=e,n=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==no(this,cv)&&(null==i||i(),nd(this,cv,r),r_(no(this,cm),{rotation:r})),n!==no(this,cb)){null==i||i(),nd(this,cb,n);let e={div:null,properties:null,ctx:(nv(cC,cC),cN).call(cC,no(this,cu))};for(let t of no(this,cA))e.properties=no(this,ck).get(t),e.div=t,ng(this,cM,cO).call(this,e)}}cancel(){var e;let t=new n2("TextLayer task cancelled.");null==(e=no(this,cg))||e.cancel(t).catch(()=>{}),nd(this,cg,null),no(this,cl).reject(t)}get textDivs(){return no(this,cA)}get textContentItemsStr(){return no(this,cy)}static cleanup(){if(!(nw(this,cC,cL).size>0)){for(let{canvas:e}of(nw(this,cC,cT).clear(),nw(this,cC,cP).values()))e.remove();nw(this,cC,cP).clear()}}constructor({textContentSource:e,container:t,viewport:i}){var n;if(nm(this,cS),nm(this,cE),nm(this,cM),nc(this,cl,{writable:!0,value:Promise.withResolvers()}),nc(this,co,{writable:!0,value:null}),nc(this,ch,{writable:!0,value:!1}),nc(this,cc,{writable:!0,value:!!(null==(n=globalThis.FontInspector)?void 0:n.enabled)}),nc(this,cu,{writable:!0,value:null}),nc(this,cd,{writable:!0,value:null}),nc(this,cp,{writable:!0,value:0}),nc(this,cf,{writable:!0,value:0}),nc(this,cg,{writable:!0,value:null}),nc(this,cm,{writable:!0,value:null}),nc(this,cv,{writable:!0,value:0}),nc(this,cb,{writable:!0,value:0}),nc(this,cw,{writable:!0,value:Object.create(null)}),nc(this,cy,{writable:!0,value:[]}),nc(this,cx,{writable:!0,value:null}),nc(this,cA,{writable:!0,value:[]}),nc(this,ck,{writable:!0,value:new WeakMap}),nc(this,c_,{writable:!0,value:null}),e instanceof ReadableStream)nd(this,cx,e);else if("object"==typeof e)nd(this,cx,new ReadableStream({start(t){t.enqueue(e),t.close()}}));else throw Error('No "textContentSource" parameter specified.');nd(this,co,nd(this,cm,t)),nd(this,cb,i.scale*(globalThis.devicePixelRatio||1)),nd(this,cv,i.rotation),nd(this,cd,{div:null,properties:null,ctx:null});let{pageWidth:r,pageHeight:a,pageX:s,pageY:l}=i.rawDims;nd(this,c_,[1,0,0,-1,-s,l+a]),nd(this,cf,r),nd(this,cp,a),(nv(cC,cC),cj).call(cC),r_(t,i),no(this,cl).promise.finally(()=>{nw(cC,cC,cL).delete(this),nd(this,cd,null),nd(this,cw,null)}).catch(()=>{})}}var cT={writable:!0,value:new Map},cP={writable:!0,value:new Map},cR={writable:!0,value:new WeakMap},cI={writable:!0,value:null},cL={writable:!0,value:new Set};function cD(e){var t;if(no(this,ch))return;null!=(t=no(this,cd)).ctx||(t.ctx=(nv(cC,cC),cN).call(cC,no(this,cu)));let i=no(this,cA),n=no(this,cy);for(let t of e){if(i.length>1e5){nG("Ignoring additional textDivs for performance reasons."),nd(this,ch,!0);return}if(void 0===t.str){if("beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type){let e=no(this,co);nd(this,co,document.createElement("span")),no(this,co).classList.add("markedContent"),null!==t.id&&no(this,co).setAttribute("id","".concat(t.id)),e.append(no(this,co))}else"endMarkedContent"===t.type&&nd(this,co,no(this,co).parentNode);continue}n.push(t.str),ng(this,cE,cF).call(this,t)}}function cF(e){let t,i,n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};no(this,cA).push(n);let a=n8.transform(no(this,c_),e.transform),s=Math.atan2(a[1],a[0]),l=no(this,cw)[e.fontName];l.vertical&&(s+=Math.PI/2);let o=no(this,cc)&&l.fontSubstitution||l.fontFamily;o=cC.fontFamilyMap.get(o)||o;let h=Math.hypot(a[2],a[3]),c=h*(nv(cC,cC),cB).call(cC,o,no(this,cu));0===s?(t=a[4],i=a[5]-c):(t=a[4]+c*Math.sin(s),i=a[5]-c*Math.cos(s));let u="calc(var(--scale-factor)*",d=n.style;no(this,co)===no(this,cm)?(d.left="".concat((100*t/no(this,cf)).toFixed(2),"%"),d.top="".concat((100*i/no(this,cp)).toFixed(2),"%")):(d.left="".concat(u).concat(t.toFixed(2),"px)"),d.top="".concat(u).concat(i.toFixed(2),"px)")),d.fontSize="".concat(u).concat((nw(cC,cC,cI)*h).toFixed(2),"px)"),d.fontFamily=o,r.fontSize=h,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,no(this,cc)&&(n.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),0!==s&&(r.angle=180/Math.PI*s);let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(p=!0)}if(p&&(r.canvasWidth=l.vertical?e.height:e.width),no(this,ck).set(n,r),no(this,cd).div=n,no(this,cd).properties=r,ng(this,cM,cO).call(this,no(this,cd)),r.hasText&&no(this,co).append(n),r.hasEOL){let e=document.createElement("br");e.setAttribute("role","presentation"),no(this,co).append(e)}}function cO(e){let{div:t,properties:i,ctx:n}=e,{style:r}=t,a="";if(nw(cC,cC,cI)>1&&(a="scale(".concat(1/nw(cC,cC,cI),")")),0!==i.canvasWidth&&i.hasText){let{fontFamily:e}=r,{canvasWidth:s,fontSize:l}=i;(nv(cC,cC),cW).call(cC,n,l*no(this,cb),e);let{width:o}=n.measureText(t.textContent);o>0&&(a="scaleX(".concat(s*no(this,cb)/o,") ").concat(a))}0!==i.angle&&(a="rotate(".concat(i.angle,"deg) ").concat(a)),a.length>0&&(r.transform=a)}function cN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=nw(this,cC,cP).get(e||(e=""));if(!t){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),nw(this,cC,cP).set(e,t),nw(this,cC,cR).set(t,{size:0,family:""})}return t}function cW(e,t,i){let n=nw(this,cC,cR).get(e);(t!==n.size||i!==n.family)&&(e.font="".concat(t,"px ").concat(i),n.size=t,n.family=i)}function cj(){if(null!==nw(this,cC,cI))return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),ny(this,cC,cI,e.getBoundingClientRect().height),e.remove()}function cB(e,t){let i=nw(this,cC,cT).get(e);if(i)return i;let n=(nv(this,cC),cN).call(cC,t);n.canvas.width=n.canvas.height=30,(nv(this,cC),cW).call(cC,n,30,e);let r=n.measureText(""),a=r.fontBoundingBoxAscent,s=Math.abs(r.fontBoundingBoxDescent);if(a){let t=a/(a+s);return nw(this,cC,cT).set(e,t),n.canvas.width=n.canvas.height=0,t}n.strokeStyle="red",n.clearRect(0,0,30,30),n.strokeText("g",0,0);let l=n.getImageData(0,0,30,30).data;s=0;for(let e=l.length-1-3;e>=0;e-=4)if(l[e]>0){s=Math.ceil(e/4/30);break}n.clearRect(0,0,30,30),n.strokeText("A",0,30),l=n.getImageData(0,0,30,30).data,a=0;for(let e=0,t=l.length;e<t;e+=4)if(l[e]>0){a=30-Math.floor(e/4/30);break}n.canvas.width=n.canvas.height=0;let o=a?a/(a+s):.8;return nw(this,cC,cT).set(e,o),o}class cz{static textContent(e){let t=[],i={items:t,styles:Object.create(null)};return!function e(i){var n;if(!i)return;let r=null,a=i.name;if("#text"===a)r=i.value;else{if(!cz.shouldBuildText(a))return;(null==i||null==(n=i.attributes)?void 0:n.textContent)?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&t.push({str:r}),i.children)for(let t of i.children)e(t)}(e),i}static shouldBuildText(e){return"textarea"!==e&&"input"!==e&&"option"!==e&&"select"!==e}}let cH=nM?class extends oC{_createCanvas(e,t){return nr.default.getBuiltinModule("module").createRequire(n_.url)("@napi-rs/canvas").createCanvas(e,t)}}:class extends oC{_createCanvas(e,t){let i=this._document.createElement("canvas");return i.width=e,i.height=t,i}constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}},cU=nM?class extends oT{async _fetch(e){return ht(e)}}:oP,cG=nM?class extends oR{}:class extends oR{addFilter(e){if(!e)return"none";let t=no(this,oj).get(e);if(t)return t;let[i,n,r]=ng(this,oH,o0).call(this,e),a=1===e.length?i:"".concat(i).concat(n).concat(r);if(t=no(this,oj).get(a))return no(this,oj).set(e,t),t;let s="g_".concat(no(this,oF),"_transfer_map_").concat(nf(this,oW).value++),l=ng(this,oU,o1).call(this,s);no(this,oj).set(e,l),no(this,oj).set(a,l);let o=ng(this,oq,o4).call(this,s);return ng(this,oK,o6).call(this,i,n,r,o),l}addHCMFilter(e,t){let i="".concat(e,"-").concat(t),n="base",r=no(this,oB).get(n);if((null==r?void 0:r.key)===i)return r.url;if(r){var a;null==(a=r.filter)||a.remove(),r.key=i,r.url="none",r.filter=null}else r={key:i,url:"none",filter:null},no(this,oB).set(n,r);if(!e||!t)return r.url;let s=ng(this,oQ,o8).call(this,e);e=n8.makeHexColor(...s);let l=ng(this,oQ,o8).call(this,t);if(t=n8.makeHexColor(...l),no(this,oz).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;let o=Array(256);for(let e=0;e<=255;e++){let t=e/255;o[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let h=o.join(","),c="g_".concat(no(this,oF),"_hcm_filter"),u=r.filter=ng(this,oq,o4).call(this,c);ng(this,oK,o6).call(this,h,h,h,u),ng(this,oV,o3).call(this,u);let d=(e,t)=>{let i=s[e]/255,n=l[e]/255,r=Array(t+1);for(let e=0;e<=t;e++)r[e]=i+e/t*(n-i);return r.join(",")};return ng(this,oK,o6).call(this,d(0,5),d(1,5),d(2,5),u),r.url=ng(this,oU,o1).call(this,c),r.url}addAlphaFilter(e){let t=no(this,oj).get(e);if(t)return t;let[i]=ng(this,oH,o0).call(this,[e]),n="alpha_".concat(i);if(t=no(this,oj).get(n))return no(this,oj).set(e,t),t;let r="g_".concat(no(this,oF),"_alpha_map_").concat(nf(this,oW).value++),a=ng(this,oU,o1).call(this,r);no(this,oj).set(e,a),no(this,oj).set(n,a);let s=ng(this,oq,o4).call(this,r);return ng(this,oY,o9).call(this,i,s),a}addLuminosityFilter(e){let t,i,n=no(this,oj).get(e||"luminosity");if(n)return n;if(e?([t]=ng(this,oH,o0).call(this,[e]),i="luminosity_".concat(t)):i="luminosity",n=no(this,oj).get(i))return no(this,oj).set(e,n),n;let r="g_".concat(no(this,oF),"_luminosity_map_").concat(nf(this,oW).value++),a=ng(this,oU,o1).call(this,r);no(this,oj).set(e,a),no(this,oj).set(i,a);let s=ng(this,oq,o4).call(this,r);return ng(this,oG,o2).call(this,s),e&&ng(this,oY,o9).call(this,t,s),a}addHighlightHCMFilter(e,t,i,n,r){let a="".concat(t,"-").concat(i,"-").concat(n,"-").concat(r),s=no(this,oB).get(e);if((null==s?void 0:s.key)===a)return s.url;if(s){var l;null==(l=s.filter)||l.remove(),s.key=a,s.url="none",s.filter=null}else s={key:a,url:"none",filter:null},no(this,oB).set(e,s);if(!t||!i)return s.url;let[o,h]=[t,i].map(ng(this,oQ,o8).bind(this)),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,p]=[n,r].map(ng(this,oQ,o8).bind(this));u<c&&([c,u,d,p]=[u,c,p,d]),no(this,oz).style.color="";let f=(e,t,i)=>{let n=Array(256),r=(u-c)/i,a=e/255,s=(t-e)/(255*i),l=0;for(let e=0;e<=i;e++){let t=Math.round(c+e*r),i=a+e*s;for(let e=l;e<=t;e++)n[e]=i;l=t+1}for(let e=l;e<256;e++)n[e]=n[l-1];return n.join(",")},g="g_".concat(no(this,oF),"_hcm_").concat(e,"_filter"),m=s.filter=ng(this,oq,o4).call(this,g);return ng(this,oV,o3).call(this,m),ng(this,oK,o6).call(this,f(d[0],p[0],5),f(d[1],p[1],5),f(d[2],p[2],5),m),s.url=ng(this,oU,o1).call(this,g),s.url}destroy(){var e,t,i,n;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r&&null!=(e=no(this,oN))&&e.size||(null==(t=no(this,oD))||t.parentNode.parentNode.remove(),nd(this,oD,null),null==(i=no(this,oL))||i.clear(),nd(this,oL,null),null==(n=no(this,oN))||n.clear(),nd(this,oN,null),nd(this,oW,0))}constructor({docId:e,ownerDocument:t=globalThis.document}){super(),nc(this,oj,{get:oJ,set:void 0}),nc(this,oB,{get:oZ,set:void 0}),nc(this,oz,{get:o$,set:void 0}),nm(this,oH),nm(this,oU),nm(this,oG),nm(this,oV),nm(this,oq),nm(this,oX),nm(this,oK),nm(this,oY),nm(this,oQ),nc(this,oI,{writable:!0,value:void 0}),nc(this,oL,{writable:!0,value:void 0}),nc(this,oD,{writable:!0,value:void 0}),nc(this,oF,{writable:!0,value:void 0}),nc(this,oO,{writable:!0,value:void 0}),nc(this,oN,{writable:!0,value:void 0}),nc(this,oW,{writable:!0,value:0}),nd(this,oF,e),nd(this,oO,t)}},cV=nM?class extends o7{async _fetch(e){return ht(e)}}:he;function cq(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof i||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let n=new cK,{docId:r}=n,a=i.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(nM&&"string"==typeof e)return e}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(i.url):null,s=i.data?function(e){if(nM&&void 0!==na.Buffer&&e instanceof na.Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return n4(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(i.data):null,l=i.httpHeaders||null,o=!0===i.withCredentials,h=null!=(e=i.password)?e:null,c=i.range instanceof cQ?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:65536,d=i.worker instanceof c7?i.worker:null,p=i.verbosity,f="string"!=typeof i.docBaseUrl||rc(i.docBaseUrl)?null:i.docBaseUrl,g="string"==typeof i.cMapUrl?i.cMapUrl:null,m=!1!==i.cMapPacked,b=i.CMapReaderFactory||cU,w="string"==typeof i.standardFontDataUrl?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||cV,x=!0!==i.stopAtErrors,A=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=!1!==i.isEvalSupported,_="boolean"==typeof i.isOffscreenCanvasSupported?i.isOffscreenCanvasSupported:!nM,S="boolean"==typeof i.isImageDecoderSupported?i.isImageDecoderSupported:!nM&&(n6.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M="boolean"==typeof i.disableFontFace?i.disableFontFace:nM,C=!0===i.fontExtraProperties,T=!0===i.enableXfa,P=i.ownerDocument||globalThis.document,R=!0===i.disableRange,I=!0===i.disableStream,L=!0===i.disableAutoFetch,D=!0===i.pdfBug,F=i.CanvasFactory||cH,O=i.FilterFactory||cG,N=!0===i.enableHWA,W=c?c.length:null!=(t=i.length)?t:NaN,j="boolean"==typeof i.useSystemFonts?i.useSystemFonts:!nM&&!M,B="boolean"==typeof i.useWorkerFetch?i.useWorkerFetch:b===oP&&y===he&&g&&w&&rg(g,document.baseURI)&&rg(w,document.baseURI);Number.isInteger(p)&&(nH=p);let z={canvasFactory:new F({ownerDocument:P,enableHWA:N}),filterFactory:new O({docId:r,ownerDocument:P}),cMapReaderFactory:B?null:new b({baseUrl:g,isCompressed:m}),standardFontDataFactory:B?null:new y({baseUrl:w})};if(!d){let e={verbosity:p,port:hP.workerPort};n._worker=d=e.port?c7.fromPort(e):new c7(e)}let H={docId:r,apiVersion:"4.10.38",data:s,password:h,disableAutoFetch:L,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:T,evaluatorOptions:{maxImageSize:A,disableFontFace:M,ignoreErrors:x,isEvalSupported:k,isOffscreenCanvasSupported:_,isImageDecoderSupported:S,canvasMaxAreaInBytes:E,fontExtraProperties:C,useSystemFonts:j,cMapUrl:B?g:null,standardFontDataUrl:B?w:null}},U={disableFontFace:M,fontExtraProperties:C,ownerDocument:P,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:L,enableXfa:T}};return d.promise.then(function(){let e;if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let t=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);if(c)e=new hY(c,{disableRange:R,disableStream:I});else if(!s){let t;if(!a)throw Error("getDocument - no `url` parameter provided.");if(nM)if(rg(a)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");t=h6}else t=cr;else t=rg(a)?h6:ce;e=new t({url:a,length:W,httpHeaders:l,withCredentials:o,rangeChunkSize:u,disableRange:R,disableStream:I})}return t.then(t=>{if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let i=new oA(r,t,d.port),a=new uu(i,n,e,U,z);n._transport=a,i.send("Ready",null)})}).catch(n._capability.reject),n}function cX(e){return"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0}class cK{get promise(){return this._capability.promise}async destroy(){var e,t,i,n;this.destroyed=!0;try{(null==(t=this._worker)?void 0:t.port)&&(this._worker._pendingDestroy=!0),await (null==(i=this._transport)?void 0:i.destroy())}catch(e){throw(null==(n=this._worker)?void 0:n.port)&&delete this._worker._pendingDestroy,e}this._transport=null,null==(e=this._worker)||e.destroy(),this._worker=null}constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat(nx(cK,cK,cY).value++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}}var cY={writable:!0,value:0};class cQ{addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nV("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}}class cJ{get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return nK(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}constructor(e,t){this._pdfInfo=e,this._transport=t}}var cZ=new WeakMap,c$=new WeakMap,c0=new WeakSet,c1=new WeakSet;class c2{get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ro({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return nK(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render(e){var t,i,n;let{canvasContext:r,viewport:a,intent:s="display",annotationMode:l=nR.ENABLE,transform:o=null,background:h=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:p=null,isEditing:f=!1}=e;null==(t=this._stats)||t.time("Overall");let g=this._transport.getRenderingIntent(s,l,p,f),{renderingIntent:m,cacheKey:b}=g;nd(this,c$,!1),ng(this,c1,c4).call(this),c||(c=this._transport.getOptionalContentConfig(m));let w=this._intentStates.get(b);w||(w=Object.create(null),this._intentStates.set(b,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);let y=!!(m&nP.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(n=this._stats)||n.time("Page Request"),this._pumpOperatorList(g));let x=e=>{if(w.renderTasks.delete(A),(this._maybeCleanupAfterRender||y)&&nd(this,c$,!0),ng(this,c0,c3).call(this,!y),e?(A.capability.reject(e),this._abortOperatorList({intentState:w,reason:e instanceof Error?e:Error(e)})):A.capability.resolve(),this._stats){var t;this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(t=globalThis.Stats)?void 0:t.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats)}},A=new ux({callback:x,params:{canvasContext:r,viewport:a,transform:o,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d});((i=w).renderTasks||(i.renderTasks=new Set)).add(A);let k=A.task;return Promise.all([w.displayReadyCapability.promise,c]).then(e=>{var t;let[i,n]=e;if(this.destroyed)return void x();if(null==(t=this._stats)||t.time("Rendering"),!(n.renderingIntent&m))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:i,optionalContentConfig:n}),A.operatorListChanged()}).catch(x),k}getOperatorList(){let e,{intent:t="display",annotationMode:i=nR.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this._transport.getRenderingIntent(t,i,n,r,!0),s=this._intentStates.get(a.cacheKey);if(s||(s=Object.create(null),this._intentStates.set(a.cacheKey,s)),!s.opListReadCapability){var l,o;(e=Object.create(null)).operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(e))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(e),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(l=this._stats)||l.time("Page Request"),this._pumpOperatorList(a)}return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>cz.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,i){let n=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){n.read().then(function(i){let{value:n,done:a}=i;if(a)return void e(r);null!=r.lang||(r.lang=n.lang),Object.assign(r.styles,n.styles),r.items.push(...n.items),t()},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),nd(this,c$,!1),ng(this,c1,c4).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nd(this,c$,!0);let t=ng(this,c0,c3).call(this,!1);return e&&t&&this._stats&&(this._stats=new rf),t}_startRenderPage(e,t){var i,n;let r=this._intentStates.get(t);r&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(n=r.displayReadyCapability)||n.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);for(let i of(t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots,t.renderTasks))i.operatorListChanged();e.lastChunk&&ng(this,c0,c3).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:r}=e,{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:a,modifiedIds:r},s).getReader(),o=this._intentStates.get(i);o.streamReader=l;let h=()=>{l.read().then(e=>{let{value:t,done:i}=e;if(i){o.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,o),h())},e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){for(let e of(o.operatorList.lastChunk=!0,o.renderTasks))e.operatorListChanged();ng(this,c0,c3).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else if(o.opListReadCapability)o.opListReadCapability.reject(e);else throw e}})};h()}_abortOperatorList(e){let{intentState:t,reason:i,force:n=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof rh){let e=100;i.extraDelay>0&&i.extraDelay<1e3&&(e+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},e);return}}if(t.streamReader.cancel(new n2(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}constructor(e,t,i,n=!1){nm(this,c0),nm(this,c1),nc(this,cZ,{writable:!0,value:null}),nc(this,c$,{writable:!0,value:!1}),this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new rf:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new um,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}}function c3(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ng(this,c1,c4).call(this),!no(this,c$)||this.destroyed)return!1;if(e)return nd(this,cZ,setTimeout(()=>{nd(this,cZ,null),ng(this,c0,c3).call(this,!1)},5e3)),!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),nd(this,c$,!1),!0}function c4(){no(this,cZ)&&(clearTimeout(no(this,cZ)),nd(this,cZ,null))}var c5=new WeakMap,c6=new WeakMap;class c9{postMessage(e,t){let i={data:structuredClone(e,t?{transfer:t}:null)};no(this,c6).then(()=>{for(let[e]of no(this,c5))e.call(this,i)})}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;if((null==i?void 0:i.signal)instanceof AbortSignal){let{signal:r}=i;if(r.aborted)return void nG("LoopbackPort - cannot use an `aborted` signal.");let a=()=>this.removeEventListener(e,t);n=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}no(this,c5).set(t,n)}removeEventListener(e,t){let i=no(this,c5).get(t);null==i||i(),no(this,c5).delete(t)}terminate(){for(let[,e]of no(this,c5))null==e||e();no(this,c5).clear()}constructor(){nc(this,c5,{writable:!0,value:new Map}),nc(this,c6,{writable:!0,value:Promise.resolve()})}}var c8=new WeakSet;class c7{get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new oA("main","worker",e),this._messageHandler.on("ready",function(){}),ng(this,c8,ur).call(this)}_initialize(){if(nw(c7,c7,ui)||nw(c7,c7,ue))return void this._setupFakeWorker();let{workerSrc:e}=c7;try{c7._isSameOrigin(window.location.href,e)||(e=c7._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),i=new oA("main","worker",t),n=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",e=>{if(r.abort(),this.destroyed||!e)return void n();this._messageHandler=i,this._port=t,this._webWorker=t,ng(this,c8,ur).call(this)}),i.on("ready",e=>{if(r.abort(),this.destroyed)return void n();try{a()}catch(e){this._setupFakeWorker()}});let a=()=>{let e=new Uint8Array;i.send("test",e,[e.buffer])};a();return}catch(e){nU("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){nw(c7,c7,ui)||(nG("Setting up fake worker."),ny(c7,c7,ui,!0)),c7._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let t=new c9;this._port=t;let i="fake".concat(nx(c7,c7,ut).value++),n=new oA(i+"_worker",i,t);e.setup(n,t),this._messageHandler=new oA(i,i+"_worker",t),ng(this,c8,ur).call(this)}).catch(e=>{this._readyCapability.reject(Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}destroy(){var e,t,i;this.destroyed=!0,null==(e=this._webWorker)||e.terminate(),this._webWorker=null,null==(t=nw(c7,c7,un))||t.delete(this._port),this._port=null,null==(i=this._messageHandler)||i.destroy(),this._messageHandler=null}static fromPort(e){var t;if(!(null==e?void 0:e.port))throw Error("PDFWorker.fromPort - invalid method signature.");let i=null==(t=nw(this,c7,un))?void 0:t.get(e.port);if(i){if(i._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new c7(e)}static get workerSrc(){if(hP.workerSrc)return hP.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return nK(this,"_setupFakeWorkerGlobal",(async()=>nw(this,c7,ue)?nw(this,c7,ue):(await import(this.workerSrc)).WorkerMessageHandler)())}constructor({name:e=null,port:t=null,verbosity:i=nH}={}){if(nm(this,c8),this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var n;if(null==(n=nw(c7,c7,un))?void 0:n.has(t))throw Error("Cannot use more than one PDFWorker per port.");ny(c7,c7,un,nw(c7,c7,un)||new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}}var ue={get:function(){try{var e;return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(e){return null}},set:void 0},ut={writable:!0,value:0},ui={writable:!0,value:!1},un={writable:!0,value:void 0};function ur(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}nM&&(ny(c7,c7,ui,!0),hP.workerSrc||(hP.workerSrc="./pdf.worker.mjs")),c7._isSameOrigin=(e,t)=>{let i;try{if(!(i=new URL(e)).origin||"null"===i.origin)return!1}catch(e){return!1}let n=new URL(t,i);return i.origin===n.origin},c7._createCDNWrapper=e=>URL.createObjectURL(new Blob(['await import("'.concat(e,'");')],{type:"text/javascript"}));var ua=new WeakMap,us=new WeakMap,ul=new WeakMap,uo=new WeakMap,uh=new WeakMap,uc=new WeakSet;class uu{get annotationStorage(){return nK(this,"annotationStorage",new os)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nR.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=nP.DISPLAY,s=ot;switch(e){case"any":a=nP.ANY;break;case"display":break;case"print":a=nP.PRINT;break;default:nG("getRenderingIntent - invalid intent: ".concat(e))}let l=a&nP.PRINT&&i instanceof oh?i:this.annotationStorage;switch(t){case nR.DISABLE:a+=nP.ANNOTATIONS_DISABLE;break;case nR.ENABLE:break;case nR.ENABLE_FORMS:a+=nP.ANNOTATIONS_FORMS;break;case nR.ENABLE_STORAGE:a+=nP.ANNOTATIONS_STORAGE,s=l.serializable;break;default:nG("getRenderingIntent - invalid annotationMode: ".concat(t))}n&&(a+=nP.IS_EDITING),r&&(a+=nP.OPLIST);let{ids:o,hash:h}=l.modifiedIds,c=[a,s.hash,h];return{renderingIntent:a,cacheKey:c.join("_"),annotationStorageSerializable:s,modifiedIds:o}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=no(this,uh))||e.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of no(this,us).values())t.push(e._destroy());no(this,us).clear(),no(this,ul).clear(),no(this,uo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),no(this,ua).clear(),this.filterFactory.destroy(),cC.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new n2("Worker was terminated.")),null==(t=this.messageHandler)||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{nq(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();nq(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:n,contentLength:r}=this._fullReader;if(!i||!n){if(this._lastProgress){var a;null==(a=t.onProgress)||a.call(t,this._lastProgress)}this._fullReader.onProgress=e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:i,isRangeSupported:n,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{nq(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let i=this._networkStream.getRangeReader(e.begin,e.end);if(!i)return void t.close();t.onPull=()=>{i.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();nq(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{i.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("GetDoc",e=>{let{pdfInfo:i}=e;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new cJ(i,this))}),e.on("DocException",e=>{t._capability.reject(om(e))}),e.on("PasswordRequest",e=>{nd(this,uh,Promise.withResolvers());try{if(!t.onPassword)throw om(e);let i=e=>{e instanceof Error?no(this,uh).reject(e):no(this,uh).resolve({password:e})};t.onPassword(i,e.code)}catch(e){no(this,uh).reject(e)}return no(this,uh).promise}),e.on("DataLoaded",e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||no(this,us).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{let[i,n,r]=t;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":var a;let{disableFontFace:s,fontExtraProperties:l,pdfBug:o}=this._params;if("error"in r){let e=r.error;nG("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}let h=new od(r,{disableFontFace:s,fontExtraProperties:l,inspectFont:o&&(null==(a=globalThis.FontInspector)?void 0:a.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":let{imageRef:c}=r;for(let e of(nq(c,"The imageRef must be defined."),no(this,us).values()))for(let[,t]of e.objs)if((null==t?void 0:t.ref)===c){if(!t.dataLen)return null;return this.commonObjs.resolve(i,structuredClone(t)),t.dataLen}break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw Error("Got unknown common object type ".concat(n))}return null}),e.on("obj",e=>{let[t,i,n,r]=e;if(this.destroyed)return;let a=no(this,us).get(i);if(!a.objs.has(t)){if(0===a._intentStates.size){var s;null==r||null==(s=r.bitmap)||s.close();return}switch(n){case"Image":a.objs.resolve(t,r),(null==r?void 0:r.dataLen)>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(t,r);break;default:throw Error("Got unknown object type ".concat(n))}}}),e.on("DocProgress",e=>{var i;this.destroyed||null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)}),e.on("FetchStandardFontData",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&nG("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:i,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:i,filename:null!=(t=null==(e=this._fullReader)?void 0:e.filename)?t:null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error("Invalid page request."));let t=e-1,i=no(this,ul).get(t);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw Error("Transport destroyed");i.refStr&&no(this,uo).set(i.refStr,e);let n=new c2(t,i,this,this._params.pdfBug);return no(this,us).set(t,n),n});return no(this,ul).set(t,n),n}getPageIndex(e){return cX(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return ng(this,uc,ud).call(this,"GetFieldObjects")}hasJSActions(){return ng(this,uc,ud).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ng(this,uc,ud).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return ng(this,uc,ud).call(this,"GetOptionalContentConfig").then(t=>new hX(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=no(this,ua).get(e);if(t)return t;let i=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,i,n,r;return{info:e[0],metadata:e[1]?new hF(e[1]):null,contentDispositionFilename:null!=(n=null==(t=this._fullReader)?void 0:t.filename)?n:null,contentLength:null!=(r=null==(i=this._fullReader)?void 0:i.contentLength)?r:null}});return no(this,ua).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){for(let e of(await this.messageHandler.sendWithPromise("Cleanup",null),no(this,us).values()))if(!e.cleanup())throw Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),no(this,ua).clear(),this.filterFactory.destroy(!0),cC.cleanup()}}cachedPageNumber(e){var t;if(!cX(e))return null;let i=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!=(t=no(this,uo).get(i))?t:null}constructor(e,t,i,n,r){nm(this,uc),nc(this,ua,{writable:!0,value:new Map}),nc(this,us,{writable:!0,value:new Map}),nc(this,ul,{writable:!0,value:new Map}),nc(this,uo,{writable:!0,value:new Map}),nc(this,uh,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new um,this.fontLoader=new ou({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}}function ud(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=no(this,ua).get(e);if(i)return i;let n=this.messageHandler.sendWithPromise(e,t);return no(this,ua).set(e,n),n}let up=Symbol("INITIAL_DATA");var uf=new WeakMap,ug=new WeakSet;class um{get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){let i=ng(this,ug,uv).call(this,e);return i.promise.then(()=>t(i.data)),null}let i=no(this,uf)[e];if(!i||i.data===up)throw Error("Requesting object that isn't resolved yet ".concat(e,"."));return i.data}has(e){let t=no(this,uf)[e];return!!t&&t.data!==up}delete(e){let t=no(this,uf)[e];return!!t&&t.data!==up&&(delete no(this,uf)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=ng(this,ug,uv).call(this,e);i.data=t,i.resolve()}clear(){for(let t in no(this,uf)){var e;let{data:i}=no(this,uf)[t];null==i||null==(e=i.bitmap)||e.close()}nd(this,uf,Object.create(null))}*[Symbol.iterator](){for(let e in no(this,uf)){let{data:t}=no(this,uf)[e];t!==up&&(yield[e,t])}}constructor(){nm(this,ug),nc(this,uf,{writable:!0,value:Object.create(null)})}}function uv(e){var t;return(t=no(this,uf))[e]||(t[e]={...Promise.withResolvers(),data:up})}var ub=new WeakMap;class uw{get promise(){return no(this,ub).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;no(this,ub).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=no(this,ub).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=no(this,ub);return e.form||e.canvas&&(null==t?void 0:t.size)>0}constructor(e){nc(this,ub,{writable:!0,value:null}),nd(this,ub,e),this.onContinue=null}}var uy=new WeakMap;class ux{get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,i;let{transparency:n=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(nw(ux,ux,uA).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");nw(ux,ux,uA).add(this._canvas)}this._pdfBug&&(null==(t=globalThis.StepperManager)?void 0:t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:a,viewport:s,transform:l,background:o}=this.params;this.gfx=new hE(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:s,transparency:n,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null==(i=this.graphicsReadyCallback)||i.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null==(e=this.gfx)||e.endDrawing(),no(this,uy)&&(window.cancelAnimationFrame(no(this,uy)),nd(this,uy,null)),nw(ux,ux,uA).delete(this._canvas),this.callback(t||new rh("Rendering cancelled, page ".concat(this._pageIndex+1),i))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?nd(this,uy,window.requestAnimationFrame(()=>{nd(this,uy,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),nw(ux,ux,uA).delete(this._canvas),this.callback())))}constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:s,canvasFactory:l,filterFactory:o,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:u=null}){nc(this,uy,{writable:!0,value:null}),this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=s,this.canvasFactory=l,this.filterFactory=o,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}}var uA={writable:!0,value:new WeakSet};let uk="4.10.38",u_="f9bea397f";function uS(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function uE(e){return Math.max(0,Math.min(255,255*e))}class uM{static CMYK_G(e){let[t,i,n,r]=e;return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return[t=uE(t),t,t]}static G_HTML(e){let[t]=e,i=uS(t);return"#".concat(i).concat(i).concat(i)}static RGB_G(e){let[t,i,n]=e;return["G",.3*t+.59*i+.11*n]}static RGB_rgb(e){return e.map(uE)}static RGB_HTML(e){return"#".concat(e.map(uS).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,i,n,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_rgb(e){let[t,i,n,r]=e;return[uE(1-Math.min(1,t+r)),uE(1-Math.min(1,n+r)),uE(1-Math.min(1,i+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,i,n]=e,r=1-t,a=1-i,s=1-n,l=Math.min(r,a,s);return["CMYK",r,a,s,l]}}class uC{create(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width","".concat(e,"px")),n.setAttribute("height","".concat(t,"px"))),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),n}createElement(e){if("string"!=typeof e)throw Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nV("Abstract method `_createSVG` called.")}}class uT extends uC{_createSVG(e){return document.createElementNS(ra,e)}}class uP{static setupStorage(e,t,i,n,r){let a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value)for(let t of(e.setAttribute("value",a.value),i.children))t.attributes.value===a.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected;e.addEventListener("input",e=>{let i=e.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:i,storage:n=null,intent:r,linkService:a}=e,{attributes:s}=i,l=t instanceof HTMLAnchorElement;for(let[e,i]of("radio"===s.type&&(s.name="".concat(s.name,"-").concat(r)),Object.entries(s)))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:l&&("href"===e||"newWindow"===e)||t.setAttribute(e,i)}l&&a.addLinkAttributes(t,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(t,s.dataId,i,n)}static render(e){let t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});let s="richText"!==r,l=e.div;if(l.append(a),e.viewport){let t="matrix(".concat(e.viewport.transform.join(","),")");l.style.transform=t}s&&l.setAttribute("class","xfaLayer xfaFont");let o=[];if(0===n.children.length){if(n.value){let e=document.createTextNode(n.value);a.append(e),s&&cz.shouldBuildText(n.name)&&o.push(e)}return{textDivs:o}}let h=[[n,-1,a]];for(;h.length>0;){var c,u;let[e,n,a]=h.at(-1);if(n+1===e.children.length){h.pop();continue}let l=e.children[++h.at(-1)[1]];if(null===l)continue;let{name:d}=l;if("#text"===d){let e=document.createTextNode(l.value);o.push(e),a.append(e);continue}let p=(null==l||null==(c=l.attributes)?void 0:c.xmlns)?document.createElementNS(l.attributes.xmlns,d):document.createElement(d);if(a.append(p),l.attributes&&this.setAttributes({html:p,element:l,storage:t,intent:r,linkService:i}),(null==(u=l.children)?void 0:u.length)>0)h.push([l,-1,p]);else if(l.value){let e=document.createTextNode(l.value);s&&cz.shouldBuildText(d)&&o.push(e),p.append(e)}}for(let e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:o}}static update(e){let t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}let uR=new WeakSet;function uI(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class uL{static create(e){switch(e.data.annotationType){case nN.LINK:return new uU(e);case nN.TEXT:return new uX(e);case nN.WIDGET:switch(e.data.fieldType){case"Tx":return new uY(e);case"Btn":if(e.data.radioButton)return new uZ(e);if(e.data.checkBox)return new uJ(e);return new u$(e);case"Ch":return new u0(e);case"Sig":return new uQ(e)}return new uK(e);case nN.POPUP:return new u1(e);case nN.FREETEXT:return new dR(e);case nN.LINE:return new dL(e);case nN.SQUARE:return new dF(e);case nN.CIRCLE:return new dN(e);case nN.POLYLINE:return new dj(e);case nN.CARET:return new dz(e);case nN.INK:return new dV(e);case nN.POLYGON:return new dB(e);case nN.HIGHLIGHT:return new dX(e);case nN.UNDERLINE:return new dK(e);case nN.SQUIGGLY:return new dY(e);case nN.STRIKEOUT:return new dQ(e);case nN.STAMP:return new dJ(e);case nN.FILEATTACHMENT:return new d0(e);default:return new uW(e)}}}var uD=new WeakMap,uF=new WeakMap,uO=new WeakMap,uN=new WeakSet;class uW{static _hasPopupData(e){let{titleObj:t,contentsObj:i,richText:n}=e;return!!((null==t?void 0:t.str)||(null==i?void 0:i.str)||(null==n?void 0:n.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return uW._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;nd(this,uD,no(this,uD)||{rect:this.data.rect.slice(0)});let{rect:i}=e;i&&ng(this,uN,uj).call(this,i),null==(t=no(this,uO))||t.popup.updateEdited(e)}resetEdited(){var e;no(this,uD)&&(ng(this,uN,uj).call(this,no(this,uD).rect),null==(e=no(this,uO))||e.popup.resetEdited(),nd(this,uD,null))}_createContainer(e){let{data:t,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof uK||(r.tabIndex=1e3);let{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof u1){let{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}let{width:s,height:l}=uI(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth="".concat(t.borderStyle.width,"px");let e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;switch(e>0||i>0?a.borderRadius="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(i,"px * var(--scale-factor))"):this instanceof uZ&&(a.borderRadius="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(l,"px * var(--scale-factor))")),t.borderStyle.style){case nW.SOLID:a.borderStyle="solid";break;case nW.DASHED:a.borderStyle="dashed";break;case nW.BEVELED:nG("Unimplemented border style: beveled");break;case nW.INSET:nG("Unimplemented border style: inset");break;case nW.UNDERLINE:a.borderBottomStyle="solid"}let n=t.borderColor||null;n?(nd(this,uF,!0),a.borderColor=n8.makeHexColor(0|n[0],0|n[1],0|n[2])):a.borderWidth=0}let o=n8.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:u,pageY:d}=n.rawDims;a.left="".concat(100*(o[0]-u)/h,"%"),a.top="".concat(100*(o[1]-d)/c,"%");let{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width="".concat(100*s/h,"%"),a.height="".concat(100*l/c,"%")):this.setRotation(p,r),r}setRotation(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;let{pageWidth:r,pageHeight:a}=this.parent.viewport.rawDims,{width:s,height:l}=uI(this.data.rect);e%180==0?(t=100*s/r,i=100*l/a):(t=100*l/r,i=100*s/a),n.style.width="".concat(t,"%"),n.style.height="".concat(i,"%"),n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(e,t,i)=>{let n=i.detail[e],r=n[0],a=n.slice(1);i.target.style[t]=uM["".concat(r,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:uM["".concat(r,"_rgb")](a)})};return nK(this,"_commonActions",{display:e=>{let{display:t}=e.detail,i=t%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let i=this._commonActions;for(let n of Object.keys(t.detail)){let r=e[n]||i[n];null==r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let i=this._commonActions;for(let[n,r]of Object.entries(t)){let a=i[n];a&&(a({detail:{[n]:r},target:e}),delete t[n])}}_createQuadrilaterals(){let e;if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[i,n,r,a]=this.data.rect.map(e=>Math.fround(e));if(8===t.length){let[e,s,l,o]=t.subarray(2,6);if(r===e&&a===s&&i===l&&n===o)return}let{style:s}=this.container;if(no(this,uF)){let{borderColor:t,borderWidth:i}=s;s.borderWidth=0,e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(i,'">')],this.container.classList.add("hasBorder")}let l=r-i,o=a-n,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);let u=h.createElement("defs");c.append(u);let d=h.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(let n=2,r=t.length;n<r;n+=8){let r=t[n],s=t[n+1],c=t[n+2],u=t[n+3],p=h.createElement("rect"),f=(c-i)/l,g=(a-s)/o,m=(r-c)/l,b=(s-u)/o;p.setAttribute("x",f),p.setAttribute("y",g),p.setAttribute("width",m),p.setAttribute("height",b),d.append(p),null==e||e.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(g,'" width="').concat(m,'" height="').concat(b,'"/>'))}no(this,uF)&&(e.push("</g></svg>')"),s.backgroundImage=e.join("")),this.container.append(c),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let{data:e}=this,t=nd(this,uO,new u1({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nV("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){let n=this._fieldObjects[e];if(n)for(let{page:e,id:r,exportValues:a}of n){if(-1===e||r===t)continue;let n="string"==typeof a?a:null,s=document.querySelector('[data-element-id="'.concat(r,'"]'));if(s&&!uR.has(s)){nG("_getElementsByName - element not allowed: ".concat(r));continue}i.push({id:r,exportValue:n,domElement:s})}return i}for(let n of document.getElementsByName(e)){let{exportValue:e}=n,r=n.getAttribute("data-element-id");r!==t&&uR.has(n)&&i.push({id:r,exportValue:e,domElement:n})}return i}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){nm(this,uN),nc(this,uD,{writable:!0,value:null}),nc(this,uF,{writable:!0,value:!1}),nc(this,uO,{writable:!0,value:null}),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}}function uj(e){let{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:s,pageY:l}}}}=this;null==i||i.splice(0,4,...e);let{width:o,height:h}=uI(e);t.left="".concat(100*(e[0]-s)/r,"%"),t.top="".concat(100*(a-e[3]+l)/a,"%"),0===n?(t.width="".concat(100*o/r,"%"),t.height="".concat(100*h/a,"%")):this.setRotation(n)}var uB=new WeakSet,uz=new WeakSet,uH=new WeakSet;class uU extends uW{render(){let{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(i,e.action),n=!0):e.attachment?(ng(this,uz,uV).call(this,i,e.attachment,e.attachmentDest),n=!0):e.setOCGState?(ng(this,uH,uq).call(this,i,e.setOCGState),n=!0):e.dest?(this._bindLink(i,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),n=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&ng(this,uB,uG).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),ng(this,uB,uG).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(t.actions)){let r=i.get(n);r&&(e[r]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1})}e.onclick||(e.onclick=()=>!1),ng(this,uB,uG).call(this)}_bindResetFormAction(e,t){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),ng(this,uB,uG).call(this),!this._fieldObjects){nG('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{null==i||i();let{fields:e,refs:n,include:r}=t,a=[];if(0!==e.length||0!==n.length){let t=new Set(n);for(let i of e)for(let{id:e}of this._fieldObjects[i]||[])t.add(e);for(let e of Object.values(this._fieldObjects))for(let i of e)t.has(i.id)===r&&a.push(i)}else for(let e of Object.values(this._fieldObjects))a.push(...e);let s=this.annotationStorage,l=[];for(let e of a){let{id:t}=e;switch(l.push(t),e.type){case"text":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{let i=e.defaultValue===e.exportValues;s.setValue(t,{value:i});break}case"combobox":case"listbox":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}default:continue}let i=document.querySelector('[data-element-id="'.concat(t,'"]'));if(i){if(!uR.has(i)){nG("_bindResetFormAction - element not allowed: ".concat(t));continue}i.dispatchEvent(new Event("resetform"))}}if(this.enableScripting){var o;null==(o=this.linkService.eventBus)||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})}return!1}}constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),nm(this,uB),nm(this,uz),nm(this,uH),this.isTooltipOnly=e.data.isTooltipOnly}}function uG(){this.container.setAttribute("data-internal-link","")}function uV(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,i),!1},ng(this,uB,uG).call(this)}function uq(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),ng(this,uB,uG).call(this)}class uX extends uW{render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}constructor(e){super(e,{isRenderable:!0})}}class uK extends uW{render(){return this.container}showElementAndHideCanvas(e){if(this.data.hasOwnCanvas){var t;(null==(t=e.previousSibling)?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1}}_getKeyModifier(e){return n6.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,r){i.includes("mouse")?e.addEventListener(i,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(i,e=>{var a;if("blur"===i){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}r&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e)}}))})}_setEventListeners(e,t,i,n){for(let[l,o]of i){var r,a,s;("Action"===o||(null==(r=this.data.actions)?void 0:r[o]))&&(("Focus"===o||"Blur"===o)&&(t||(t={focused:!1})),this._setEventListener(e,t,l,o,n),"Focus"!==o||(null==(a=this.data.actions)?void 0:a.Blur)?"Blur"!==o||(null==(s=this.data.actions)?void 0:s.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":n8.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t,{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,r=e.style,a=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),i=Math.round(e/(1.35*n))||1;t=Math.min(n,a(e/i/1.35))}else t=Math.min(n,a(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));r.fontSize="calc(".concat(t,"px * var(--scale-factor))"),r.color=n8.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class uY extends uK{setPropertyOnSiblings(e,t,i,n){let r=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[n]:i})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var n,r;let a=e.getValue(t,{value:this.data.fieldValue}),s=a.value||"",l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&s.length>l&&(s=s.slice(0,l));let o=a.formattedValue||(null==(n=this.data.textContent)?void 0:n.join("\n"))||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let h={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=null!=o?o:s,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",null!=o?o:s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),uR.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=1e3,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",n=>{e.setValue(t,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",e=>{var t;let n=null!=(t=this.data.defaultFieldValue)?t:"";i.value=h.userValue=n,h.formattedValue=null});let c=e=>{let{formattedValue:t}=h;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",e=>{var t;if(h.focused)return;let{target:i}=e;h.userValue&&(i.value=h.userValue),h.lastCommittedValue=i.value,h.commitKey=1,(null==(t=this.data.actions)?void 0:t.Focus)||(h.focused=!0)}),i.addEventListener("updatefromsandbox",i=>{this.showElementAndHideCanvas(i.target),this._dispatchEventFromSandbox({value(i){var n;h.userValue=null!=(n=i.detail.value)?n:"",e.setValue(t,{value:h.userValue.toString()}),i.target.value=h.userValue},formattedValue(i){let{formattedValue:n}=i.detail;h.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),e.setValue(t,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:i=>{var n;let{charLimit:r}=i.detail,{target:a}=i;if(0===r)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",r);let s=h.userValue;s&&!(s.length<=r)&&(a.value=h.userValue=s=s.slice(0,r),e.setValue(t,{value:s}),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}},i)}),i.addEventListener("keydown",e=>{var i;h.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(h.commitKey=3):n=2,-1===n)return;let{value:r}=e.target;h.lastCommittedValue!==r&&(h.lastCommittedValue=r,h.userValue=r,null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let n=c;c=null,i.addEventListener("blur",e=>{var i,r;if(!h.focused||!e.relatedTarget)return;(null==(i=this.data.actions)?void 0:i.Blur)||(h.focused=!1);let{value:a}=e.target;h.userValue=a,h.lastCommittedValue!==a&&(null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:h.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),n(e)}),(null==(r=this.data.actions)?void 0:r.Keystroke)&&i.addEventListener("beforeinput",e=>{var i;h.lastCommittedValue=null;let{data:n,target:r}=e,{value:a,selectionStart:s,selectionEnd:l}=r,o=s,c=l;switch(e.inputType){case"deleteWordBackward":{let e=a.substring(0,s).match(/\w*[^\w]*$/);e&&(o-=e[0].length);break}case"deleteWordForward":{let e=a.substring(s).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":s===l&&(o-=1);break;case"deleteContentForward":s===l&&(c+=1)}e.preventDefault(),null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:n||"",willCommit:!1,selStart:o,selEnd:c}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}}class uQ extends uK{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class uJ extends uK{render(){let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let r=document.createElement("input");return uR.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=1e3,r.addEventListener("change",n=>{let{name:r,checked:a}=n.target;for(let n of this._getElementsByName(r,i)){let i=a&&n.exportValue===t.exportValue;n.domElement&&(n.domElement.checked=i),e.setValue(n.id,{value:i})}e.setValue(i,{value:a})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class uZ extends uK{render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof n&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(let n of this._getElementsByName(t.fieldName,i))e.setValue(n.id,{value:!1});let r=document.createElement("input");if(uR.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=1e3,r.addEventListener("change",t=>{let{name:n,checked:r}=t.target;for(let t of this._getElementsByName(n,i))e.setValue(t.id,{value:!1});e.setValue(i,{value:r})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue}),this.enableScripting&&this.hasJSActions){let n=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value:t=>{let r=n===t.detail.value;for(let n of this._getElementsByName(t.target.name)){let t=r&&n.id===i;n.domElement&&(n.domElement.checked=t),e.setValue(n.id,{value:t})}}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class u$ extends uU{render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}}class u0 extends uK{render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");uR.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=1e3;let r=this.data.combo&&this.data.options.length>0;for(let e of(!this.data.combo&&(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue;for(let e of n.options)e.selected=e.value===t}),this.data.options)){let t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,i.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),r=!1),n.append(t)}let a=null;if(r){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),n.prepend(e),a=()=>{e.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}let s=e=>{let t=e?"value":"textContent",{options:i,multiple:r}=n;return r?Array.prototype.filter.call(i,e=>e.selected).map(e=>e[t]):-1===i.selectedIndex?null:i[i.selectedIndex][t]},l=s(!1),o=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({value(i){null==a||a();let r=i.detail.value,o=new Set(Array.isArray(r)?r:[r]);for(let e of n.options)e.selected=o.has(e.value);e.setValue(t,{value:s(!0)}),l=s(!1)},multipleSelection(e){n.multiple=!0},remove(i){let r=n.options,a=i.detail.remove;r[a].selected=!1,n.remove(a),r.length>0&&-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},clear(i){for(;0!==n.length;)n.remove(0);e.setValue(t,{value:null,items:[]}),l=s(!1)},insert(i){let{index:r,displayValue:a,exportValue:h}=i.detail.insert,c=n.children[r],u=document.createElement("option");u.textContent=a,u.value=h,c?c.before(u):n.append(u),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},items(i){let{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(let e of r){let{displayValue:t,exportValue:i}=e,r=document.createElement("option");r.textContent=t,r.value=i,n.append(r)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},indices(i){let n=new Set(i.detail.indices);for(let e of i.target.options)e.selected=n.has(e.index);e.setValue(t,{value:s(!0)}),l=s(!1)},editable(e){e.target.disabled=!e.detail.editable}},i)}),n.addEventListener("input",i=>{var n;let r=s(!0),a=s(!1);e.setValue(t,{value:r}),i.preventDefault(),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:a,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):n.addEventListener("input",function(i){e.setValue(t,{value:s(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class u1 extends uW{render(){this.container.classList.add("popupAnnotation");let e=this.popup=new dx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(rr).concat(e)).join(",")),this.container}constructor(e){let{data:t,elements:i}=e;super(e,{isRenderable:uW._hasPopupData(t)}),this.elements=i,this.popup=null}}var u2=new WeakMap,u3=new WeakMap,u4=new WeakMap,u5=new WeakMap,u6=new WeakMap,u9=new WeakMap,u8=new WeakMap,u7=new WeakMap,de=new WeakMap,dt=new WeakMap,di=new WeakMap,dn=new WeakMap,dr=new WeakMap,da=new WeakMap,ds=new WeakMap,dl=new WeakMap,dh=new WeakMap,dc=new WeakMap,du=new WeakMap,dd=new WeakMap,dp=new WeakMap,df=new WeakMap,dg=new WeakSet,dm=new WeakSet,dv=new WeakSet,db=new WeakSet,dw=new WeakSet,dy=new WeakSet;class dx{render(){if(no(this,dr))return;let e=nd(this,dr,document.createElement("div"));if(e.className="popup",no(this,u6)){let t=e.style.outlineColor=n8.makeHexColor(...no(this,u6));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)"):e.style.backgroundColor=n8.makeHexColor(...no(this,u6).map(e=>Math.floor(.7*(255-e)+e)))}let t=document.createElement("span");t.className="header";let i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=no(this,dh),e.append(t),no(this,u7)){let e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:no(this,u7).valueOf()})),t.append(e)}let n=no(this,dd);if(n)uP.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let t=this._formatContents(no(this,u8));e.append(t)}no(this,u9).append(e)}_formatContents(e){let{str:t,dir:i}=e,n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;let r=t.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){let i=r[e];n.append(document.createTextNode(i)),e<t-1&&n.append(document.createElement("br"))}return n}updateEdited(e){var t;let{rect:i,popupContent:n}=e;nd(this,dc,no(this,dc)||{contentsObj:no(this,u8),richText:no(this,dl)}),i&&nd(this,da,null),n&&(nd(this,dl,ng(this,dg,dS).call(this,n)),nd(this,u8,null)),null==(t=no(this,dr))||t.remove(),nd(this,dr,null)}resetEdited(){var e;no(this,dc)&&({contentsObj:nk(this,u8).value,richText:nk(this,dl).value}=no(this,dc),nd(this,dc,null),null==(e=no(this,dr))||e.remove(),nd(this,dr,null),nd(this,da,null))}forceHide(){nd(this,du,this.isVisible),no(this,du)&&(no(this,u9).hidden=!0)}maybeShow(){no(this,du)&&(no(this,dr)||ng(this,dw,dT).call(this),nd(this,du,!1),no(this,u9).hidden=!1)}get isVisible(){return!1===no(this,u9).hidden}constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:s,parent:l,rect:o,parentRect:h,open:c}){for(let c of(nc(this,dd,{get:dA,set:void 0}),nc(this,dp,{get:dk,set:void 0}),nc(this,df,{get:d_,set:void 0}),nm(this,dg),nm(this,dm),nm(this,dv),nm(this,db),nm(this,dw),nm(this,dy),nc(this,u2,{writable:!0,value:ng(this,dm,dE).bind(this)}),nc(this,u3,{writable:!0,value:ng(this,dy,dP).bind(this)}),nc(this,u4,{writable:!0,value:ng(this,dw,dT).bind(this)}),nc(this,u5,{writable:!0,value:ng(this,db,dC).bind(this)}),nc(this,u6,{writable:!0,value:null}),nc(this,u9,{writable:!0,value:null}),nc(this,u8,{writable:!0,value:null}),nc(this,u7,{writable:!0,value:null}),nc(this,de,{writable:!0,value:null}),nc(this,dt,{writable:!0,value:null}),nc(this,di,{writable:!0,value:null}),nc(this,dn,{writable:!0,value:!1}),nc(this,dr,{writable:!0,value:null}),nc(this,da,{writable:!0,value:null}),nc(this,ds,{writable:!0,value:null}),nc(this,dl,{writable:!0,value:null}),nc(this,dh,{writable:!0,value:null}),nc(this,dc,{writable:!0,value:null}),nc(this,du,{writable:!0,value:!1}),nd(this,u9,e),nd(this,dh,n),nd(this,u8,a),nd(this,dl,s),nd(this,dt,l),nd(this,u6,t),nd(this,ds,o),nd(this,di,h),nd(this,de,i),nd(this,u7,rb.toDateObject(r)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),this.trigger))c.addEventListener("click",no(this,u5)),c.addEventListener("mouseenter",no(this,u4)),c.addEventListener("mouseleave",no(this,u3)),c.classList.add("popupTriggerArea");for(let e of i){var u;null==(u=e.container)||u.addEventListener("keydown",no(this,u2))}no(this,u9).hidden=!0,c&&ng(this,db,dC).call(this)}}function dA(){let e=no(this,dl),t=no(this,u8);return(null==e?void 0:e.str)&&(!(null==t?void 0:t.str)||t.str===e.str)&&no(this,dl).html||null}function dk(){var e,t,i;return(null==(i=no(this,dd))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.fontSize)||0}function d_(){var e,t,i;return(null==(i=no(this,dd))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.color)||null}function dS(e){let t=[],i={style:{color:no(this,df),fontSize:no(this,dp)?"calc(".concat(no(this,dp),"px * var(--scale-factor))"):""}};for(let n of e.split("\n"))t.push({name:"span",value:n,attributes:i});return{str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}}}function dE(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&no(this,dn))&&ng(this,db,dC).call(this)}function dM(){if(null!==no(this,da))return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:r}}}=no(this,dt),a=!!no(this,di),s=a?no(this,di):no(this,ds);for(let e of no(this,de))if(!s||null!==n8.intersect(e.data.rect,s)){s=e.data.rect,a=!0;break}let l=n8.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),o=a?s[2]-s[0]+5:0;nd(this,da,[100*(l[0]+o-n)/t,100*(l[1]-r)/i]);let{style:h}=no(this,u9);h.left="".concat(no(this,da)[0],"%"),h.top="".concat(no(this,da)[1],"%")}function dC(){nd(this,dn,!no(this,dn)),no(this,dn)?(ng(this,dw,dT).call(this),no(this,u9).addEventListener("click",no(this,u5)),no(this,u9).addEventListener("keydown",no(this,u2))):(ng(this,dy,dP).call(this),no(this,u9).removeEventListener("click",no(this,u5)),no(this,u9).removeEventListener("keydown",no(this,u2)))}function dT(){no(this,dr)||this.render(),this.isVisible?no(this,dn)&&no(this,u9).classList.add("focused"):(ng(this,dv,dM).call(this),no(this,u9).hidden=!1,no(this,u9).style.zIndex=parseInt(no(this,u9).style.zIndex)+1e3)}function dP(){no(this,u9).classList.remove("focused"),!no(this,dn)&&this.isVisible&&(no(this,u9).hidden=!0,no(this,u9).style.zIndex=parseInt(no(this,u9).style.zIndex)-1e3)}class dR extends uW{render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");for(let t of(e.classList.add("annotationTextContent"),e.setAttribute("role","comment"),this.textContent)){let i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=nI.FREETEXT}}var dI=new WeakMap;class dL extends uW{render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:i}=uI(e.rect),n=this.svgFactory.create(t,i,!0),r=nd(this,dI,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return no(this,dI)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nc(this,dI,{writable:!0,value:null})}}var dD=new WeakMap;class dF extends uW{render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:i}=uI(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nd(this,dD,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return no(this,dD)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nc(this,dD,{writable:!0,value:null})}}var dO=new WeakMap;class dN extends uW{render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:i}=uI(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nd(this,dO,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return no(this,dO)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nc(this,dO,{writable:!0,value:null})}}var dW=new WeakMap;class dj extends uW{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:i,popupRef:n}}=this;if(!t)return this.container;let{width:r,height:a}=uI(e),s=this.svgFactory.create(r,a,!0),l=[];for(let i=0,n=t.length;i<n;i+=2){let n=t[i]-e[0],r=e[3]-t[i+1];l.push("".concat(n,",").concat(r))}l=l.join(" ");let o=nd(this,dW,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",l),o.setAttribute("stroke-width",i.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return no(this,dW)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nc(this,dW,{writable:!0,value:null}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}}class dB extends dj{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dz extends uW{render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}}var dH=new WeakMap,dU=new WeakMap,dG=new WeakSet;class dV extends uW{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:i,borderStyle:n,popupRef:r}}=this,{transform:a,width:s,height:l}=ng(this,dG,dq).call(this,t,e),o=this.svgFactory.create(s,l,!0),h=nd(this,dH,this.svgFactory.createElement("svg:g"));o.append(h),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let e=0,t=i.length;e<t;e++){let t=this.svgFactory.createElement(this.svgElementName);no(this,dU).push(t),t.setAttribute("points",i[e].join(",")),h.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:i,rect:n}=e,r=no(this,dH);if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let e=0,t=no(this,dU).length;e<t;e++)no(this,dU)[e].setAttribute("points",i[e].join(","));if(n){let{transform:e,width:t,height:i}=ng(this,dG,dq).call(this,this.data.rotation,n);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(i)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return no(this,dU)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nm(this,dG),nc(this,dH,{writable:!0,value:null}),nc(this,dU,{writable:!0,value:[]}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?nI.HIGHLIGHT:nI.INK}}function dq(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class dX extends uW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=nI.HIGHLIGHT}}class dK extends uW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dY extends uW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dQ extends uW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dJ extends uW{render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=nI.STAMP}}var dZ=new WeakMap,d$=new WeakSet;class d0 extends uW{render(){let e;this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:i}=this;i.hasAppearance||0===i.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*i.fillAlpha),"%);"))),e.addEventListener("dblclick",ng(this,d$,d1).bind(this)),nd(this,dZ,e);let{isMac:n}=n6.platform;return t.addEventListener("keydown",e=>{"Enter"===e.key&&(n?e.metaKey:e.ctrlKey)&&ng(this,d$,d1).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),t.append(e),t}getElementsToTriggerPopup(){return no(this,dZ)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){var t;super(e,{isRenderable:!0}),nm(this,d$),nc(this,dZ,{writable:!0,value:null});let{file:i}=this.data;this.filename=i.filename,this.content=i.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...i})}}function d1(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)}var d2=new WeakMap,d3=new WeakMap,d4=new WeakMap,d5=new WeakMap,d6=new WeakSet,d9=new WeakSet;class d8{hasEditableAnnotations(){return no(this,d4).size>0}async render(e){let{annotations:t}=e,i=this.div;r_(i,this.viewport);let n=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new uT,annotationStorage:e.annotationStorage||new os,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of t){if(e.noHTML)continue;let t=e.annotationType===nN.POPUP;if(t){let t=n.get(e.id);if(!t)continue;r.elements=t}else{let{width:t,height:i}=uI(e.rect);if(t<=0||i<=0)continue}r.data=e;let i=uL.create(r);if(!i.isRenderable)continue;if(!t&&e.popupRef){let t=n.get(e.popupRef);t?t.push(i):n.set(e.popupRef,[i])}let s=i.render();if(e.hidden&&(s.style.visibility="hidden"),await ng(this,d6,d7).call(this,s,e.id),i._isEditable){var a;no(this,d4).set(i.data.id,i),null==(a=this._annotationEditorUIManager)||a.renderAnnotationElement(i)}}ng(this,d9,pe).call(this)}update(e){let{viewport:t}=e,i=this.div;this.viewport=t,r_(i,{rotation:t.rotation}),ng(this,d9,pe).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(no(this,d4).values())}getEditableAnnotation(e){return no(this,d4).get(e)}constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:s}){nm(this,d6),nm(this,d9),nc(this,d2,{writable:!0,value:null}),nc(this,d3,{writable:!0,value:null}),nc(this,d4,{writable:!0,value:new Map}),nc(this,d5,{writable:!0,value:null}),this.div=e,nd(this,d2,t),nd(this,d3,i),nd(this,d5,s||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}}async function d7(e,t){var i,n;let r=e.firstChild||e,a=r.id="".concat(rr).concat(t),s=await (null==(i=no(this,d5))?void 0:i.getAriaAttributes(a));if(s)for(let[e,t]of s)r.setAttribute(e,t);this.div.append(e),null==(n=no(this,d2))||n.moveElementInDOM(this.div,e,r,!1)}function pe(){if(!no(this,d3))return;let e=this.div;for(let[t,i]of no(this,d3)){let n=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!n)continue;i.className="annotationContent";let{firstChild:r}=n;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}no(this,d3).clear()}let pt=/\r\n?|\n/g;var pi=new WeakMap,pn=new WeakMap,pr=new WeakMap,pa=new WeakMap,ps=new WeakMap,pl=new WeakSet,po=new WeakSet,ph=new WeakSet,pc=new WeakSet,pu=new WeakSet,pd=new WeakSet,pp=new WeakSet;class pf extends lU{static get _keyboardManager(){let e=pf.prototype,t=e=>e.isEmpty(),i=sl.TRANSLATE_SMALL,n=sl.TRANSLATE_BIG;return nK(this,"_keyboardManager",new aa([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}]]))}static initialize(e,t){lU.initialize(e,t);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case nL.FREETEXT_SIZE:pf._defaultFontSize=t;break;case nL.FREETEXT_COLOR:pf._defaultColor=t}}updateParams(e,t){switch(e){case nL.FREETEXT_SIZE:ng(this,pl,pg).call(this,t);break;case nL.FREETEXT_COLOR:ng(this,po,pm).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nL.FREETEXT_SIZE,pf._defaultFontSize],[nL.FREETEXT_COLOR,pf._defaultColor||lU._defaultLineColor]]}get propertiesToUpdate(){return[[nL.FREETEXT_SIZE,no(this,ps)],[nL.FREETEXT_COLOR,no(this,pi)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-pf._internalPadding*e,-(pf._internalPadding+no(this,ps))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(nI.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),nd(this,pa,new AbortController);let e=this._uiManager.combinedSignal(no(this,pa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",no(this,pr)),this._isDraggable=!0,null==(e=no(this,pa))||e.abort(),nd(this,pa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(null==(t=this._initialOptions)?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=no(this,pn),t=nd(this,pn,ng(this,ph,pv).call(this).trimEnd());if(e===t)return;let i=e=>{if(nd(this,pn,e),!e)return void this.remove();ng(this,pu,py).call(this),this._uiManager.rebuild(this),ng(this,pc,pb).call(this)};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),ng(this,pc,pb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pf._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",no(this,pr)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize="calc(".concat(no(this,ps),"px * var(--scale-factor))"),i.color=no(this,pi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),r0(this,this.div,["dblclick","keydown"]),this.width){let[i,n]=this.parentDimensions;if(this.annotationElementId){let r,a,{position:s}=this._initialData,[l,o]=this.getInitialTranslation();[l,o]=this.pageTranslationToScreen(l,o);let[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;switch(this.rotation){case 0:r=e+(s[0]-u)/h,a=t+this.height-(s[1]-d)/c;break;case 90:r=e+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[o,-l];break;case 180:r=e-this.width+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[-l,-o];break;case 270:r=e+(s[0]-u-this.height*c)/h,a=t+(s[1]-d-this.width*h)/c,[l,o]=[-o,l]}this.setAt(r*i,a*n,l,o)}else this.setAt(e*i,t*n,this.width*i,this.height*n);ng(this,pu,py).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();let n=(nv(pf,pf),pA).call(pf,t.getData("text")||"").replaceAll(pt,"\n");if(!n)return;let r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();let a=r.getRangeAt(0);if(!n.includes("\n")){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}let{startContainer:s,startOffset:l}=a,o=[],h=[];if(s.nodeType===Node.TEXT_NODE){let e=s.parentElement;if(h.push(s.nodeValue.slice(l).replaceAll(pt,"")),e!==this.editorDiv){let t=o;for(let i of this.editorDiv.childNodes){if(i===e){t=h;continue}t.push((nv(pf,pf),pw).call(pf,i))}}o.push(s.nodeValue.slice(0,l).replaceAll(pt,""))}else if(s===this.editorDiv){let e=o,t=0;for(let i of this.editorDiv.childNodes)t++===l&&(e=h),e.push((nv(pf,pf),pw).call(pf,i))}nd(this,pn,"".concat(o.join("\n")).concat(n).concat(h.join("\n"))),ng(this,pu,py).call(this);let c=new Range,u=o.reduce((e,t)=>e+t.length,0);for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(u<=t){c.setStart(e,u),c.setEnd(e,u);break}u-=t}r.removeAllRanges(),r.addRange(c)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,i){let n=null;if(e instanceof dR){let{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:r,rotation:a,id:s,popupRef:l},textContent:o,textPosition:h,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;n=e={annotationType:nI.FREETEXT,color:Array.from(i),fontSize:t,value:o.join("\n"),position:h,pageIndex:c-1,rect:r.slice(0),rotation:a,id:s,deleted:!1,popupRef:l}}let r=await super.deserialize(e,t,i);return nd(r,ps,e.fontSize),nd(r,pi,n8.makeHexColor(...e.color)),nd(r,pn,(nv(pf,pf),pA).call(pf,e.value)),r.annotationElementId=e.id||null,r._initialData=n,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=pf._internalPadding*this.parentScale,i=this.getRect(t,t),n=lU._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:no(this,pi)),r={annotationType:nI.FREETEXT,color:n,fontSize:no(this,ps),value:ng(this,pd,px).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!ng(this,pp,pk).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:i}=t;for(let e of(i.fontSize="calc(".concat(no(this,ps),"px * var(--scale-factor))"),i.color=no(this,pi),t.replaceChildren(),no(this,pn).split("\n"))){let i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),t.append(i)}let n=pf._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:no(this,pn)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}constructor(e){super({...e,name:"freeTextEditor"}),nm(this,pl),nm(this,po),nm(this,ph),nm(this,pc),nm(this,pu),nm(this,pd),nm(this,pp),nc(this,pi,{writable:!0,value:void 0}),nc(this,pn,{writable:!0,value:""}),nc(this,pr,{writable:!0,value:"".concat(this.id,"-editor")}),nc(this,pa,{writable:!0,value:null}),nc(this,ps,{writable:!0,value:void 0}),nd(this,pi,e.color||pf._defaultColor||lU._defaultLineColor),nd(this,ps,e.fontSize||pf._defaultFontSize)}}function pg(e){let t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-no(this,ps))*this.parentScale),nd(this,ps,e),ng(this,pc,pb).call(this)},i=no(this,ps);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nL.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function pm(e){let t=e=>{nd(this,pi,this.editorDiv.style.color=e)},i=no(this,pi);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nL.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function pv(){let e=[];this.editorDiv.normalize();let t=null;for(let i of this.editorDiv.childNodes)((null==t?void 0:t.nodeType)!==Node.TEXT_NODE||"BR"!==i.nodeName)&&(e.push((nv(pf,pf),pw).call(pf,i)),t=i);return e.join("\n")}function pb(){let e,[t,i]=this.parentDimensions;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{let{currentLayer:t,div:i}=this,n=i.style.display,r=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",t.div.append(this.div),e=i.getBoundingClientRect(),i.remove(),i.style.display=n,i.classList.toggle("hidden",r)}this.rotation%180==this.parentRotation%180?(this.width=e.width/t,this.height=e.height/i):(this.width=e.height/t,this.height=e.width/i),this.fixAndSetPosition()}function pw(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(pt,"")}function py(){if(this.editorDiv.replaceChildren(),no(this,pn))for(let e of no(this,pn).split("\n")){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function px(){return no(this,pn).replaceAll(""," ")}function pA(e){return e.replaceAll(" ","")}function pk(e){let{value:t,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((e,t)=>e!==n[t])||e.pageIndex!==r}(0,nA._)(pf,"_freeTextDefaultContent",""),(0,nA._)(pf,"_internalPadding",0),(0,nA._)(pf,"_defaultColor",null),(0,nA._)(pf,"_defaultFontSize",10),(0,nA._)(pf,"_type","freetext"),(0,nA._)(pf,"_editorType",nI.FREETEXT);class p_{toSVGPath(){nV("Abstract method `toSVGPath` must be implemented.")}get box(){nV("Abstract getter `box` must be implemented.")}serialize(e,t){nV("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s]*n,a[s+1]=i+e[s+1]*r;return a}static _rescaleAndSwap(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s+1]*n,a[s+1]=i+e[s]*r;return a}static _translate(e,t,i,n){n||(n=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)n[r]=t+e[r],n[r+1]=i+e[r+1];return n}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,i,n,r){switch(r){case 90:return[1-t/i,e/n];case 180:return[1-e/i,1-t/n];case 270:return[t/i,1-e/n];default:return[e/i,t/n]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,n,r,a){return[(e+5*i)/6,(t+5*n)/6,(5*i+r)/6,(5*n+a)/6,(i+r)/2,(n+a)/2]}}(0,nA._)(p_,"PRECISION",1e-4);var pS=new WeakMap,pE=new WeakMap,pM=new WeakMap,pC=new WeakMap,pT=new WeakMap,pP=new WeakMap,pR=new WeakMap,pI=new WeakMap,pL=new WeakMap,pD=new WeakMap,pF=new WeakMap,pO=new WeakMap,pN=new WeakMap,pW=new WeakSet,pj=new WeakSet,pB=new WeakSet,pz=new WeakSet,pH=new WeakSet,pU=new WeakSet,pG=new WeakSet;class pV{isEmpty(){return isNaN(no(this,pP)[8])}add(e){var t;let{x:i,y:n}=e;nd(this,pR,i),nd(this,pI,n);let[r,a,s,l]=no(this,pS),[o,h,c,u]=no(this,pP).subarray(8,12),d=i-c,p=n-u,f=Math.hypot(d,p);if(f<no(this,pL))return!1;let g=f-no(this,pD),m=g/f,b=m*d,w=m*p,y=o,x=h;o=c,h=u,c+=b,u+=w,null==(t=no(this,pN))||t.push(i,n);let A=-w/g*no(this,pO),k=b/g*no(this,pO);return(no(this,pP).set(no(this,pP).subarray(2,8),0),no(this,pP).set([c+A,u+k],4),no(this,pP).set(no(this,pP).subarray(14,18),12),no(this,pP).set([c-A,u-k],16),isNaN(no(this,pP)[6]))?(0===no(this,pT).length&&(no(this,pP).set([o+A,h+k],2),no(this,pT).push(NaN,NaN,NaN,NaN,(o+A-r)/s,(h+k-a)/l),no(this,pP).set([o-A,h-k],14),no(this,pE).push(NaN,NaN,NaN,NaN,(o-A-r)/s,(h-k-a)/l)),no(this,pP).set([y,x,o,h,c,u],6),!this.isEmpty()):((no(this,pP).set([y,x,o,h,c,u],6),Math.abs(Math.atan2(x-h,y-o)-Math.atan2(w,b))<Math.PI/2)?([o,h,c,u]=no(this,pP).subarray(2,6),no(this,pT).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((h+u)/2-a)/l),[o,h,y,x]=no(this,pP).subarray(14,18),no(this,pE).push(NaN,NaN,NaN,NaN,((y+o)/2-r)/s,((x+h)/2-a)/l)):([y,x,o,h,c,u]=no(this,pP).subarray(0,6),no(this,pT).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l),[c,u,o,h,y,x]=no(this,pP).subarray(12,18),no(this,pE).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l)),!0)}toSVGPath(){if(this.isEmpty())return"";let e=no(this,pT),t=no(this,pE);if(isNaN(no(this,pP)[6])&&!this.isEmpty())return ng(this,pj,pY).call(this);let i=[];i.push("M".concat(e[4]," ").concat(e[5]));for(let t=6;t<e.length;t+=6)isNaN(e[t])?i.push("L".concat(e[t+4]," ").concat(e[t+5])):i.push("C".concat(e[t]," ").concat(e[t+1]," ").concat(e[t+2]," ").concat(e[t+3]," ").concat(e[t+4]," ").concat(e[t+5]));ng(this,pz,pJ).call(this,i);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?i.push("L".concat(t[e+4]," ").concat(t[e+5])):i.push("C".concat(t[e]," ").concat(t[e+1]," ").concat(t[e+2]," ").concat(t[e+3]," ").concat(t[e+4]," ").concat(t[e+5]));return ng(this,pB,pQ).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,n,r,a){return new p7(e,t,i,n,r,a)}getOutlines(){var e,t;let i=no(this,pT),n=no(this,pE),r=no(this,pP),[a,s,l,o]=no(this,pS),h=new Float32Array((null!=(t=null==(e=no(this,pN))?void 0:e.length)?t:0)+2);for(let e=0,t=h.length-2;e<t;e+=2)h[e]=(no(this,pN)[e]-a)/l,h[e+1]=(no(this,pN)[e+1]-s)/o;if(h[h.length-2]=(no(this,pR)-a)/l,h[h.length-1]=(no(this,pI)-s)/o,isNaN(r[6])&&!this.isEmpty())return ng(this,pH,pZ).call(this,h);let c=new Float32Array(no(this,pT).length+24+no(this,pE).length),u=i.length;for(let e=0;e<u;e+=2){if(isNaN(i[e])){c[e]=c[e+1]=NaN;continue}c[e]=i[e],c[e+1]=i[e+1]}u=ng(this,pG,p0).call(this,c,u);for(let e=n.length-6;e>=6;e-=6)for(let t=0;t<6;t+=2){if(isNaN(n[e+t])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[e+t],c[u+1]=n[e+t+1],u+=2}return ng(this,pU,p$).call(this,c,u),this.newFreeDrawOutline(c,h,no(this,pS),no(this,pF),no(this,pM),no(this,pC))}constructor({x:e,y:t},i,n,r,a,s=0){nm(this,pW),nm(this,pj),nm(this,pB),nm(this,pz),nm(this,pH),nm(this,pU),nm(this,pG),nc(this,pS,{writable:!0,value:void 0}),nc(this,pE,{writable:!0,value:[]}),nc(this,pM,{writable:!0,value:void 0}),nc(this,pC,{writable:!0,value:void 0}),nc(this,pT,{writable:!0,value:[]}),nc(this,pP,{writable:!0,value:new Float32Array(18)}),nc(this,pR,{writable:!0,value:void 0}),nc(this,pI,{writable:!0,value:void 0}),nc(this,pL,{writable:!0,value:void 0}),nc(this,pD,{writable:!0,value:void 0}),nc(this,pF,{writable:!0,value:void 0}),nc(this,pO,{writable:!0,value:void 0}),nc(this,pN,{writable:!0,value:[]}),nd(this,pS,i),nd(this,pO,r*n),nd(this,pC,a),no(this,pP).set([NaN,NaN,NaN,NaN,e,t],6),nd(this,pM,s),nd(this,pD,nw(pV,pV,pq)*n),nd(this,pL,nw(pV,pV,pX)*n),nd(this,pF,n),no(this,pN).push(e,t)}}var pq={writable:!0,value:8},pX={writable:!0,value:nw(pV,pV,pq)+nw(pV,pV,{writable:!0,value:2})};function pK(){let e=no(this,pP).subarray(4,6),t=no(this,pP).subarray(16,18),[i,n,r,a]=no(this,pS);return[(no(this,pR)+(e[0]-t[0])/2-i)/r,(no(this,pI)+(e[1]-t[1])/2-n)/a,(no(this,pR)+(t[0]-e[0])/2-i)/r,(no(this,pI)+(t[1]-e[1])/2-n)/a]}function pY(){let[e,t,i,n]=no(this,pS),[r,a,s,l]=ng(this,pW,pK).call(this);return"M".concat((no(this,pP)[2]-e)/i," ").concat((no(this,pP)[3]-t)/n," L").concat((no(this,pP)[4]-e)/i," ").concat((no(this,pP)[5]-t)/n," L").concat(r," ").concat(a," L").concat(s," ").concat(l," L").concat((no(this,pP)[16]-e)/i," ").concat((no(this,pP)[17]-t)/n," L").concat((no(this,pP)[14]-e)/i," ").concat((no(this,pP)[15]-t)/n," Z")}function pQ(e){let t=no(this,pE);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function pJ(e){let[t,i,n,r]=no(this,pS),a=no(this,pP).subarray(4,6),s=no(this,pP).subarray(16,18),[l,o,h,c]=ng(this,pW,pK).call(this);e.push("L".concat((a[0]-t)/n," ").concat((a[1]-i)/r," L").concat(l," ").concat(o," L").concat(h," ").concat(c," L").concat((s[0]-t)/n," ").concat((s[1]-i)/r))}function pZ(e){let t=no(this,pP),[i,n,r,a]=no(this,pS),[s,l,o,h]=ng(this,pW,pK).call(this),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-n)/a,NaN,NaN,NaN,NaN,s,l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-n)/a],0),this.newFreeDrawOutline(c,e,no(this,pS),no(this,pF),no(this,pM),no(this,pC))}function p$(e,t){let i=no(this,pE);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+6}function p0(e,t){let i=no(this,pP).subarray(4,6),n=no(this,pP).subarray(16,18),[r,a,s,l]=no(this,pS),[o,h,c,u]=ng(this,pW,pK).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/s,(i[1]-a)/l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[0]-r)/s,(n[1]-a)/l],t),t+24}var p1=new WeakMap,p2=new WeakMap,p3=new WeakMap,p4=new WeakMap,p5=new WeakMap,p6=new WeakMap,p9=new WeakMap,p8=new WeakSet;class p7 extends p_{toSVGPath(){let e=["M".concat(no(this,p9)[4]," ").concat(no(this,p9)[5])];for(let t=6,i=no(this,p9).length;t<i;t+=6){if(isNaN(no(this,p9)[t])){e.push("L".concat(no(this,p9)[t+4]," ").concat(no(this,p9)[t+5]));continue}e.push("C".concat(no(this,p9)[t]," ").concat(no(this,p9)[t+1]," ").concat(no(this,p9)[t+2]," ").concat(no(this,p9)[t+3]," ").concat(no(this,p9)[t+4]," ").concat(no(this,p9)[t+5]))}return e.push("Z"),e.join(" ")}serialize(e,t){let i,n,[r,a,s,l]=e,o=s-r,h=l-a;switch(t){case 0:i=p_._rescale(no(this,p9),r,l,o,-h),n=p_._rescale(no(this,p5),r,l,o,-h);break;case 90:i=p_._rescaleAndSwap(no(this,p9),r,a,o,h),n=p_._rescaleAndSwap(no(this,p5),r,a,o,h);break;case 180:i=p_._rescale(no(this,p9),s,a,-o,h),n=p_._rescale(no(this,p5),s,a,-o,h);break;case 270:i=p_._rescaleAndSwap(no(this,p9),s,l,-o,-h),n=p_._rescaleAndSwap(no(this,p5),s,l,-o,-h)}return{outline:Array.from(i),points:[Array.from(n)]}}get box(){return no(this,p2)}newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new pV(e,t,i,n,r,a)}getNewOutline(e,t){let[i,n,r,a]=no(this,p2),[s,l,o,h]=no(this,p1),c=r*o,u=a*h,d=i*o+s,p=n*h+l,f=this.newOutliner({x:no(this,p5)[0]*c+d,y:no(this,p5)[1]*u+p},no(this,p1),no(this,p6),e,no(this,p4),null!=t?t:no(this,p3));for(let e=2;e<no(this,p5).length;e+=2)f.add({x:no(this,p5)[e]*c+d,y:no(this,p5)[e+1]*u+p});return f.getOutlines()}constructor(e,t,i,n,r,a){super(),nm(this,p8),nc(this,p1,{writable:!0,value:void 0}),nc(this,p2,{writable:!0,value:new Float32Array(4)}),nc(this,p3,{writable:!0,value:void 0}),nc(this,p4,{writable:!0,value:void 0}),nc(this,p5,{writable:!0,value:void 0}),nc(this,p6,{writable:!0,value:void 0}),nc(this,p9,{writable:!0,value:void 0}),nd(this,p9,e),nd(this,p5,t),nd(this,p1,i),nd(this,p6,n),nd(this,p3,r),nd(this,p4,a),this.lastPoint=[NaN,NaN],ng(this,p8,fe).call(this,a);let[s,l,o,h]=no(this,p2);for(let t=0,i=e.length;t<i;t+=2)e[t]=(e[t]-s)/o,e[t+1]=(e[t+1]-l)/h;for(let e=0,i=t.length;e<i;e+=2)t[e]=(t[e]-s)/o,t[e+1]=(t[e+1]-l)/h}}function fe(e){let t=no(this,p9),i=t[4],n=t[5],r=i,a=n,s=i,l=n,o=i,h=n,c=e?Math.max:Math.min;for(let e=6,u=t.length;e<u;e+=6){if(isNaN(t[e]))r=Math.min(r,t[e+4]),a=Math.min(a,t[e+5]),s=Math.max(s,t[e+4]),l=Math.max(l,t[e+5]),h<t[e+5]?(o=t[e+4],h=t[e+5]):h===t[e+5]&&(o=c(o,t[e+4]));else{let u=n8.bezierBoundingBox(i,n,...t.slice(e,e+6));r=Math.min(r,u[0]),a=Math.min(a,u[1]),s=Math.max(s,u[2]),l=Math.max(l,u[3]),h<u[3]?(o=u[2],h=u[3]):h===u[3]&&(o=c(o,u[2]))}i=t[e+4],n=t[e+5]}let u=no(this,p2);u[0]=r-no(this,p3),u[1]=a-no(this,p3),u[2]=s-r+2*no(this,p3),u[3]=l-a+2*no(this,p3),this.lastPoint=[o,h]}var ft=new WeakMap,fi=new WeakMap,fn=new WeakMap,fr=new WeakMap,fa=new WeakSet,fs=new WeakSet,fl=new WeakSet,fo=new WeakSet,fh=new WeakSet;class fc{getOutlines(){no(this,fn).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of no(this,fn))t[3]?(e.push(...ng(this,fh,fg).call(this,t)),ng(this,fl,fp).call(this,t)):(ng(this,fo,ff).call(this,t),e.push(...ng(this,fh,fg).call(this,t)));return ng(this,fa,fu).call(this,e)}constructor(e,t=0,i=0,n=!0){nm(this,fa),nm(this,fs),nm(this,fl),nm(this,fo),nm(this,fh),nc(this,ft,{writable:!0,value:void 0}),nc(this,fi,{writable:!0,value:void 0}),nc(this,fn,{writable:!0,value:[]}),nc(this,fr,{writable:!0,value:[]});let r=1/0,a=-1/0,s=1/0,l=-1/0;for(let{x:i,y:n,width:o,height:h}of e){let e=1e-4*Math.floor((i-t)/1e-4),c=1e-4*Math.ceil((i+o+t)/1e-4),u=1e-4*Math.floor((n-t)/1e-4),d=1e-4*Math.ceil((n+h+t)/1e-4),p=[e,u,d,!0],f=[c,u,d,!1];no(this,fn).push(p,f),r=Math.min(r,e),a=Math.max(a,c),s=Math.min(s,u),l=Math.max(l,d)}let o=a-r+2*i,h=l-s+2*i,c=r-i,u=s-i,d=no(this,fn).at(n?-1:-2),p=[d[0],d[2]];for(let e of no(this,fn)){let[t,i,n]=e;e[0]=(t-c)/o,e[1]=(i-u)/h,e[2]=(n-u)/h}nd(this,ft,new Float32Array([c,u,o,h])),nd(this,fi,p)}}function fu(e){let t,i=[],n=new Set;for(let t of e){let[e,n,r]=t;i.push([e,n,t],[e,r,t])}i.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=i.length;e<t;e+=2){let t=i[e][2],r=i[e+1][2];t.push(r),r.push(t),n.add(t),n.add(r)}let r=[];for(;n.size>0;){let e=n.values().next().value,[i,a,s,l,o]=e;n.delete(e);let h=i,c=a;for(t=[i,s],r.push(t);;){let e;if(n.has(l))e=l;else if(n.has(o))e=o;else break;n.delete(e),[i,a,s,l,o]=e,h!==i&&(t.push(h,c,i,c===a?a:s),h=i),c=c===a?s:a}t.push(h,c)}return new fb(r,no(this,ft),no(this,fi))}function fd(e){let t=no(this,fr),i=0,n=t.length-1;for(;i<=n;){let r=i+n>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:n=r-1}return n+1}function fp(e){let[,t,i]=e,n=ng(this,fs,fd).call(this,t);no(this,fr).splice(n,0,[t,i])}function ff(e){let[,t,i]=e,n=ng(this,fs,fd).call(this,t);for(let e=n;e<no(this,fr).length;e++){let[n,r]=no(this,fr)[e];if(n!==t)break;if(n===t&&r===i)return void no(this,fr).splice(e,1)}for(let e=n-1;e>=0;e--){let[n,r]=no(this,fr)[e];if(n!==t)break;if(n===t&&r===i)return void no(this,fr).splice(e,1)}}function fg(e){let[t,i,n]=e,r=[[t,i,n]],a=ng(this,fs,fd).call(this,n);for(let e=0;e<a;e++){let[i,n]=no(this,fr)[e];for(let e=0,a=r.length;e<a;e++){let[,s,l]=r[e];if(!(n<=s)&&!(l<=i)){if(s>=i){if(l>n)r[e][1]=n;else{if(1===a)return[];r.splice(e,1),e--,a--}continue}r[e][2]=i,l>n&&r.push([t,n,l])}}}return r}var fm=new WeakMap,fv=new WeakMap;class fb extends p_{toSVGPath(){let e=[];for(let t of no(this,fv)){let[i,n]=t;e.push("M".concat(i," ").concat(n));for(let r=2;r<t.length;r+=2){let a=t[r],s=t[r+1];a===i?(e.push("V".concat(s)),n=s):s===n&&(e.push("H".concat(a)),i=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[i,n,r,a]=e,s=[],l=r-i,o=a-n;for(let e of no(this,fv)){let t=Array(e.length);for(let n=0;n<e.length;n+=2)t[n]=i+e[n]*l,t[n+1]=a-e[n+1]*o;s.push(t)}return s}get box(){return no(this,fm)}get classNamesForOutlining(){return["highlightOutline"]}constructor(e,t,i){super(),nc(this,fm,{writable:!0,value:void 0}),nc(this,fv,{writable:!0,value:void 0}),nd(this,fv,e),nd(this,fm,t),this.lastPoint=i}}class fw extends pV{newFreeDrawOutline(e,t,i,n,r,a){return new fy(e,t,i,n,r,a)}}class fy extends p7{newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new fw(e,t,i,n,r,a)}}var fx=new WeakMap,fA=new WeakMap,fk=new WeakMap,f_=new WeakMap,fS=new WeakMap,fE=new WeakMap,fM=new WeakMap,fC=new WeakMap,fT=new WeakMap,fP=new WeakMap,fR=new WeakMap,fI=new WeakSet,fL=new WeakSet,fD=new WeakSet,fF=new WeakSet,fO=new WeakSet,fN=new WeakMap;class fW{static get _keyboardManager(){return nK(this,"_keyboardManager",new aa([[["Escape","mac+Escape"],fW.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fW.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fW.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fW.prototype._moveToPrevious],[["Home","mac+Home"],fW.prototype._moveToBeginning],[["End","mac+End"],fW.prototype._moveToEnd]]))}renderButton(){let e=nd(this,fx,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=no(this,fP)._signal;e.addEventListener("click",ng(this,fF,fU).bind(this),{signal:t}),e.addEventListener("keydown",ng(this,fD,fH).bind(this),{signal:t});let i=nd(this,fA,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=no(this,fk),e.append(i),e}renderMainDropdown(){let e=nd(this,f_,ng(this,fI,fB).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===no(this,fx))return void ng(this,fF,fU).call(this,e);let t=e.target.getAttribute("data-color");t&&ng(this,fL,fz).call(this,t,e)}_moveToNext(e){var t,i;if(!no(this,fN))return void ng(this,fF,fU).call(this,e);if(e.target===no(this,fx)){null==(i=no(this,f_).firstChild)||i.focus();return}null==(t=e.target.nextSibling)||t.focus()}_moveToPrevious(e){var t,i;if(e.target===(null==(t=no(this,f_))?void 0:t.firstChild)||e.target===no(this,fx)){no(this,fN)&&this._hideDropdownFromKeyboard();return}no(this,fN)||ng(this,fF,fU).call(this,e),null==(i=e.target.previousSibling)||i.focus()}_moveToBeginning(e){var t;if(!no(this,fN))return void ng(this,fF,fU).call(this,e);null==(t=no(this,f_).firstChild)||t.focus()}_moveToEnd(e){var t;if(!no(this,fN))return void ng(this,fF,fU).call(this,e);null==(t=no(this,f_).lastChild)||t.focus()}hideDropdown(){var e,t;null==(e=no(this,f_))||e.classList.add("hidden"),null==(t=no(this,fT))||t.abort(),nd(this,fT,null)}_hideDropdownFromKeyboard(){if(!no(this,fE)){if(!no(this,fN)){var e;null==(e=no(this,fM))||e.unselect();return}this.hideDropdown(),no(this,fx).focus({preventScroll:!0,focusVisible:no(this,fS)})}}updateColor(e){if(no(this,fA)&&(no(this,fA).style.backgroundColor=e),!no(this,f_))return;let t=no(this,fP).highlightColors.values();for(let i of no(this,f_).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null==(e=no(this,fx))||e.remove(),nd(this,fx,null),nd(this,fA,null),null==(t=no(this,f_))||t.remove(),nd(this,f_,null)}constructor({editor:e=null,uiManager:t=null}){var i;nm(this,fI),nm(this,fL),nm(this,fD),nm(this,fF),nm(this,fO),nc(this,fN,{get:fV,set:void 0}),nc(this,fx,{writable:!0,value:null}),nc(this,fA,{writable:!0,value:null}),nc(this,fk,{writable:!0,value:void 0}),nc(this,f_,{writable:!0,value:null}),nc(this,fS,{writable:!0,value:!1}),nc(this,fE,{writable:!0,value:!1}),nc(this,fM,{writable:!0,value:null}),nc(this,fC,{writable:!0,value:void 0}),nc(this,fT,{writable:!0,value:null}),nc(this,fP,{writable:!0,value:null}),nc(this,fR,{writable:!0,value:void 0}),e?(nd(this,fE,!1),nd(this,fR,nL.HIGHLIGHT_COLOR),nd(this,fM,e)):(nd(this,fE,!0),nd(this,fR,nL.HIGHLIGHT_DEFAULT_COLOR)),nd(this,fP,(null==e?void 0:e._uiManager)||t),nd(this,fC,no(this,fP)._eventBus),nd(this,fk,(null==e?void 0:e.color)||(null==(i=no(this,fP))?void 0:i.highlightColors.values().next().value)||"#FFFF98"),ny(fW,fW,fj,nw(fW,fW,fj)||Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}}var fj={writable:!0,value:null};function fB(){let e=document.createElement("div"),t=no(this,fP)._signal;for(let[i,n]of(e.addEventListener("contextmenu",rm,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),no(this,fP).highlightColors)){let r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",nw(fW,fW,fj)[i]);let a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===no(this,fk)),r.addEventListener("click",ng(this,fL,fz).bind(this,n),{signal:t}),e.append(r)}return e.addEventListener("keydown",ng(this,fD,fH).bind(this),{signal:t}),e}function fz(e,t){t.stopPropagation(),no(this,fC).dispatch("switchannotationeditorparams",{source:this,type:no(this,fR),value:e})}function fH(e){fW._keyboardManager.exec(this,e)}function fU(e){if(no(this,fN))return void this.hideDropdown();if(nd(this,fS,0===e.detail),no(this,fT)||(nd(this,fT,new AbortController),window.addEventListener("pointerdown",ng(this,fO,fG).bind(this),{signal:no(this,fP).combinedSignal(no(this,fT))})),no(this,f_))return void no(this,f_).classList.remove("hidden");let t=nd(this,f_,ng(this,fI,fB).call(this));no(this,fx).append(t)}function fG(e){var t;null!=(t=no(this,f_))&&t.contains(e.target)||this.hideDropdown()}function fV(){return no(this,f_)&&!no(this,f_).classList.contains("hidden")}var fq=new WeakMap,fX=new WeakMap,fK=new WeakMap,fY=new WeakMap,fQ=new WeakMap,fJ=new WeakMap,fZ=new WeakMap,f$=new WeakMap,f0=new WeakMap,f1=new WeakMap,f2=new WeakMap,f3=new WeakMap,f4=new WeakMap,f5=new WeakMap,f6=new WeakMap,f9=new WeakMap,f8=new WeakMap,f7=new WeakMap,ge=new WeakSet,gt=new WeakSet,gi=new WeakSet,gn=new WeakSet,gr=new WeakSet,ga=new WeakSet,gs=new WeakSet,gl=new WeakSet,go=new WeakSet,gh=new WeakSet,gc=new WeakSet,gu=new WeakSet,gd=new WeakSet;class gp extends lU{static get _keyboardManager(){let e=gp.prototype;return nK(this,"_keyboardManager",new aa([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:no(this,f3)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:no(this,f8),methodOfCreation:no(this,f7)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var i;lU.initialize(e,t),gp._defaultColor||(gp._defaultColor=(null==(i=t.highlightColors)?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case nL.HIGHLIGHT_DEFAULT_COLOR:gp._defaultColor=t;break;case nL.HIGHLIGHT_THICKNESS:gp._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return no(this,f4)}updateParams(e,t){switch(e){case nL.HIGHLIGHT_COLOR:ng(this,gi,gm).call(this,t);break;case nL.HIGHLIGHT_THICKNESS:ng(this,gn,gv).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nL.HIGHLIGHT_DEFAULT_COLOR,gp._defaultColor],[nL.HIGHLIGHT_THICKNESS,gp._defaultThickness]]}get propertiesToUpdate(){return[[nL.HIGHLIGHT_COLOR,this.color||gp._defaultColor],[nL.HIGHLIGHT_THICKNESS,no(this,f8)||gp._defaultThickness],[nL.HIGHLIGHT_FREE,no(this,f3)]]}async addEditToolbar(){let e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(nd(this,fQ,new fW({editor:this})),e.addColorPicker(no(this,fQ))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ng(this,gh,g_).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,ng(this,gh,g_).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){ng(this,ga,gw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ng(this,gs,gy).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)ng(this,ga,gw).call(this);else if(e){var i;ng(this,gs,gy).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){let t,{drawLayer:i}=this.parent;no(this,f3)?(e=(e-this.rotation+360)%360,t=(nv(gp,gp),gx).call(gp,no(this,f1).box,e)):t=(nv(gp,gp),gx).call(gp,[this.x,this.y,this.width,this.height],e),i.updateProperties(no(this,f2),{bbox:t,root:{"data-main-rotation":e}}),i.updateProperties(no(this,f6),{bbox:(nv(gp,gp),gx).call(gp,no(this,fJ).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();no(this,f9)&&(e.setAttribute("aria-label",no(this,f9)),e.setAttribute("role","mark")),no(this,f3)?e.classList.add("free"):this.div.addEventListener("keydown",ng(this,gl,gA).bind(this),{signal:this._uiManager._signal});let t=nd(this,f0,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=no(this,fY);let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),r0(this,no(this,f0),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(no(this,f6),{rootClass:{hovered:!0}})}}pointerleave(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(no(this,f6),{rootClass:{hovered:!1}})}}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:ng(this,go,gk).call(this,!0);break;case 1:case 3:ng(this,go,gk).call(this,!1)}}select(){var e;super.select(),no(this,f6)&&(null==(e=this.parent)||e.drawLayer.updateProperties(no(this,f6),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),no(this,f6)&&(null==(e=this.parent)||e.drawLayer.updateProperties(no(this,f6),{rootClass:{selected:!1}}),no(this,f3)||ng(this,go,gk).call(this,!1))}get _mustFixPosition(){return!no(this,f3)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(no(this,f2),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(no(this,f6),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,i){let{target:n,x:r,y:a}=i,{x:s,y:l,width:o,height:h}=n.getBoundingClientRect(),c=new AbortController,u=e.combinedSignal(c),d=t=>{c.abort(),(nv(this,gp),gC).call(gp,e,t)};window.addEventListener("blur",d,{signal:u}),window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("pointerdown",rv,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",rm,{signal:u}),n.addEventListener("pointermove",(nv(this,gp),gM).bind(this,e),{signal:u}),this._freeHighlight=new fw({x:r,y:a},[s,l,o,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,t,i){let n=null;if(e instanceof dX){let{data:{quadPoints:t,rect:i,rotation:r,id:a,color:s,opacity:l,popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nI.HIGHLIGHT,color:Array.from(s),opacity:l,quadPoints:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}else if(e instanceof dV){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,borderStyle:{rawWidth:l},popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nI.HIGHLIGHT,color:Array.from(s),thickness:l,inkLists:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}let{color:r,quadPoints:a,inkLists:s,opacity:l}=e,o=await super.deserialize(e,t,i);o.color=n8.makeHexColor(...r),nd(o,f5,l||1),s&&nd(o,f8,e.thickness),o.annotationElementId=e.id||null,o._initialData=n;let[h,c]=o.pageDimensions,[u,d]=o.pageTranslation;if(a){let e=nd(o,fK,[]);for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-u)/h,y:1-(a[t+1]-d)/c,width:(a[t+2]-a[t])/h,height:(a[t+1]-a[t+5])/c});ng(o,ge,gf).call(o),ng(o,gs,gy).call(o),o.rotate(o.rotation)}else if(s){nd(o,f3,!0);let e=s[0],i={x:e[0]-u,y:c-(e[1]-d)},n=new fw(i,[0,0,h,c],1,no(o,f8)/2,!0,.001);for(let t=0,r=e.length;t<r;t+=2)i.x=e[t]-u,i.y=c-(e[t+1]-d),n.add(i);let{id:r,clipPathId:a}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:o.color,"fill-opacity":o._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:n.toSVGPath()}},!0,!0);ng(o,gt,gg).call(o,{highlightOutlines:n.getOutlines(),highlightId:r,clipPathId:a}),ng(o,gs,gy).call(o)}return o}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),i=lU._colorManager.convert(this.color),n={annotationType:nI.HIGHLIGHT,color:i,opacity:no(this,f5),thickness:no(this,f8),quadPoints:ng(this,gc,gS).call(this),outlines:ng(this,gu,gE).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:ng(this,gh,g_).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!ng(this,gd,gT).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super({...e,name:"highlightEditor"}),nm(this,ge),nm(this,gt),nm(this,gi),nm(this,gn),nm(this,gr),nm(this,ga),nm(this,gs),nm(this,gl),nm(this,go),nm(this,gh),nm(this,gc),nm(this,gu),nm(this,gd),nc(this,fq,{writable:!0,value:null}),nc(this,fX,{writable:!0,value:0}),nc(this,fK,{writable:!0,value:void 0}),nc(this,fY,{writable:!0,value:null}),nc(this,fQ,{writable:!0,value:null}),nc(this,fJ,{writable:!0,value:null}),nc(this,fZ,{writable:!0,value:null}),nc(this,f$,{writable:!0,value:0}),nc(this,f0,{writable:!0,value:null}),nc(this,f1,{writable:!0,value:null}),nc(this,f2,{writable:!0,value:null}),nc(this,f3,{writable:!0,value:!1}),nc(this,f4,{writable:!0,value:null}),nc(this,f5,{writable:!0,value:void 0}),nc(this,f6,{writable:!0,value:null}),nc(this,f9,{writable:!0,value:""}),nc(this,f8,{writable:!0,value:void 0}),nc(this,f7,{writable:!0,value:""}),this.color=e.color||gp._defaultColor,nd(this,f8,e.thickness||gp._defaultThickness),nd(this,f5,e.opacity||gp._defaultOpacity),nd(this,fK,e.boxes||null),nd(this,f7,e.methodOfCreation||""),nd(this,f9,e.text||""),this._isDraggable=!1,e.highlightId>-1?(nd(this,f3,!0),ng(this,gt,gg).call(this,e),ng(this,gs,gy).call(this)):no(this,fK)&&(nd(this,fq,e.anchorNode),nd(this,fX,e.anchorOffset),nd(this,fZ,e.focusNode),nd(this,f$,e.focusOffset),ng(this,ge,gf).call(this),ng(this,gs,gy).call(this),this.rotate(this.rotation))}}function gf(){nd(this,f1,new fc(no(this,fK),.001).getOutlines()),[this.x,this.y,this.width,this.height]=no(this,f1).box,nd(this,fJ,new fc(no(this,fK),.0025,.001,"ltr"===this._uiManager.direction).getOutlines());let{lastPoint:e}=no(this,fJ);nd(this,f4,[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height])}function gg(e){let{highlightOutlines:t,highlightId:i,clipPathId:n}=e;if(nd(this,f1,t),nd(this,fJ,t.getNewOutline(no(this,f8)/2+1.5,.0025)),i>=0)nd(this,f2,i),nd(this,fY,n),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),nd(this,f6,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:no(this,fJ).box,path:{d:no(this,fJ).toSVGPath()}},!0));else if(this.parent){let e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(no(this,f2),{bbox:(nv(gp,gp),gx).call(gp,no(this,f1).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(no(this,f6),{bbox:(nv(gp,gp),gx).call(gp,no(this,fJ).box,e),path:{d:no(this,fJ).toSVGPath()}})}let[r,a,s,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=s,this.height=l;break;case 90:{let[e,t]=this.parentDimensions;this.x=a,this.y=1-r,this.width=s*t/e,this.height=l*e/t;break}case 180:this.x=1-r,this.y=1-a,this.width=s,this.height=l;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-a,this.y=r,this.width=s*t/e,this.height=l*e/t}}let{lastPoint:o}=no(this,fJ);nd(this,f4,[(o[0]-r)/s,(o[1]-a)/l])}function gm(e){let t=(e,t)=>{var i,n;this.color=e,nd(this,f5,t),null==(i=this.parent)||i.drawLayer.updateProperties(no(this,f2),{root:{fill:e,"fill-opacity":t}}),null==(n=no(this,fQ))||n.updateColor(e)},i=this.color,n=no(this,f5);this.addCommands({cmd:t.bind(this,e,gp._defaultOpacity),undo:t.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nL.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function gv(e){let t=no(this,f8),i=e=>{nd(this,f8,e),ng(this,gr,gb).call(this,e)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nL.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function gb(e){if(!no(this,f3))return;ng(this,gt,gg).call(this,{highlightOutlines:no(this,f1).getNewOutline(e/2)}),this.fixAndSetPosition();let[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}function gw(){null!==no(this,f2)&&this.parent&&(this.parent.drawLayer.remove(no(this,f2)),nd(this,f2,null),this.parent.drawLayer.remove(no(this,f6)),nd(this,f6,null))}function gy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===no(this,f2)&&({id:nk(this,f2).value,clipPathId:nk(this,fY).value}=e.drawLayer.draw({bbox:no(this,f1).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":no(this,f5)},rootClass:{highlight:!0,free:no(this,f3)},path:{d:no(this,f1).toSVGPath()}},!1,!0),nd(this,f6,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:no(this,f3)},bbox:no(this,fJ).box,path:{d:no(this,fJ).toSVGPath()}},no(this,f3))),no(this,f0)&&(no(this,f0).style.clipPath=no(this,fY)))}function gx(e,t){let[i,n,r,a]=e;switch(t){case 90:return[1-n-a,i,a,r];case 180:return[1-i-r,1-n-a,r,a];case 270:return[n,1-i-r,a,r]}return[i,n,r,a]}function gA(e){gp._keyboardManager.exec(this,e)}function gk(e){if(!no(this,fq))return;let t=window.getSelection();e?t.setPosition(no(this,fq),no(this,fX)):t.setPosition(no(this,fZ),no(this,f$))}function g_(){return no(this,f3)?this.rotation:0}function gS(){if(no(this,f3))return null;let[e,t]=this.pageDimensions,[i,n]=this.pageTranslation,r=no(this,fK),a=new Float32Array(8*r.length),s=0;for(let{x:l,y:o,width:h,height:c}of r){let r=l*e+i,u=(1-o)*t+n;a[s]=a[s+4]=r,a[s+1]=a[s+3]=u,a[s+2]=a[s+6]=r+h*e,a[s+5]=a[s+7]=u-c*t,s+=8}return a}function gE(e){return no(this,f1).serialize(e,ng(this,gh,g_).call(this))}function gM(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function gC(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function gT(e){let{color:t}=this._initialData;return e.color.some((e,i)=>e!==t[i])}(0,nA._)(gp,"_defaultColor",null),(0,nA._)(gp,"_defaultOpacity",1),(0,nA._)(gp,"_defaultThickness",12),(0,nA._)(gp,"_type","highlight"),(0,nA._)(gp,"_editorType",nI.HIGHLIGHT),(0,nA._)(gp,"_freeHighlightId",-1),(0,nA._)(gp,"_freeHighlight",null),(0,nA._)(gp,"_freeHighlightClipId","");var gP=new WeakMap;class gR{updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){no(this,gP)[e]=t}toSVGProperties(){let e=no(this,gP);return nd(this,gP,Object.create(null)),{root:e}}reset(){nd(this,gP,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){nV("Not implemented")}constructor(){nc(this,gP,{writable:!0,value:Object.create(null)})}}var gI=new WeakMap,gL=new WeakMap,gD=new WeakSet,gF=new WeakSet,gO=new WeakSet,gN=new WeakSet,gW=new WeakSet,gj=new WeakSet,gB=new WeakSet,gz=new WeakSet;class gH extends lU{static _mergeSVGProperties(e,t){let i=new Set(Object.keys(e));for(let[n,r]of Object.entries(t))i.has(n)?Object.assign(e[n],r):e[n]=r;return e}static getDefaultDrawingOptions(e){nV("Not implemented")}static get typesMap(){nV("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(nw(gH,gH,gU).updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){let e=[],t=this._defaultDrawingOptions;for(let[i,n]of this.typesMap)e.push([i,t[n]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:t}=this;for(let[i,n]of this.constructor.typesMap)e.push([i,t[n]]);return e}_updateProperty(e,t,i){let n=this._drawingOptions,r=n[t],a=e=>{var i;n.updateProperty(t,e);let r=no(this,gI).updateProperty(t,e);r&&ng(this,gB,g2).call(this,r),null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,n.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gH._mergeSVGProperties(no(this,gI).getPathResizingSVGProperties(ng(this,gj,g1).call(this)),{bbox:ng(this,gz,g3).call(this)}))}_onResized(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gH._mergeSVGProperties(no(this,gI).getPathResizedSVGProperties(ng(this,gj,g1).call(this)),{bbox:ng(this,gz,g3).call(this)}))}_onTranslating(e,t){var i;null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,{bbox:ng(this,gz,g3).call(this,e,t)})}_onTranslated(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gH._mergeSVGProperties(no(this,gI).getPathTranslatedSVGProperties(ng(this,gj,g1).call(this),this.parentDimensions),{bbox:ng(this,gz,g3).call(this)}))}_onStartDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,no(this,gL)&&(nd(this,gL,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){ng(this,gO,gZ).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ng(this,gN,g$).call(this),ng(this,gB,g2).call(this,no(this,gI).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),ng(this,gO,gZ).call(this);else if(e){var i;this._uiManager.addShouldRescale(this),ng(this,gN,g$).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gH._mergeSVGProperties({bbox:ng(this,gz,g3).call(this)},no(this,gI).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ng(this,gB,g2).call(this,no(this,gI).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e=super.render();e.classList.add("draw");let t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,i,n,r){nV("Not implemented")}static startDrawing(e,t,i,n){var r,a;let{target:s,offsetX:l,offsetY:o,pointerId:h,pointerType:c}=n;if(nw(gH,gH,gX)&&nw(gH,gH,gX)!==c)return;let{viewport:{rotation:u}}=e,{width:d,height:p}=s.getBoundingClientRect(),f=ny(gH,gH,gG,new AbortController),g=e.combinedSignal(f);if(ny(gH,gH,gq,nw(gH,gH,gq)||h),ny(gH,gH,gX,null!=(a=nw(gH,gH,gX))?a:c),window.addEventListener("pointerup",e=>{if(nw(gH,gH,gq)===e.pointerId)this._endDraw(e);else{var t;null==(t=nw(gH,gH,gK))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointercancel",e=>{if(nw(gH,gH,gq)===e.pointerId)this._currentParent.endDrawingSession();else{var t;null==(t=nw(gH,gH,gK))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointerdown",e=>{nw(gH,gH,gX)===e.pointerType&&(ny(gH,gH,gK,nw(gH,gH,gK)||new Set).add(e.pointerId),nw(gH,gH,gU).isCancellable()&&(nw(gH,gH,gU).removeLastElement(),nw(gH,gH,gU).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",rm,{signal:g}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),s.addEventListener("touchmove",e=>{e.timeStamp===nw(gH,gH,gY)&&rv(e)},{signal:g}),e.toggleDrawing(),null==(r=t._editorUndoBar)||r.hide(),nw(gH,gH,gU))return void e.drawLayer.updateProperties(this._currentDrawId,nw(gH,gH,gU).startNew(l,o,d,p,u));t.updateUIForDefaultProperties(this),ny(gH,gH,gU,this.createDrawerInstance(l,o,d,p,u)),ny(gH,gH,gV,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(nw(gH,gH,gV).toSVGProperties(),nw(gH,gH,gU).defaultSVGProperties),!0,!1)}static _drawMove(e){var t;if(ny(gH,gH,gY,-1),!nw(gH,gH,gU))return;let{offsetX:i,offsetY:n,pointerId:r}=e;if(nw(gH,gH,gq)===r){if((null==(t=nw(gH,gH,gK))?void 0:t.size)>=1)return void this._endDraw(e);this._currentParent.drawLayer.updateProperties(this._currentDrawId,nw(gH,gH,gU).add(i,n)),ny(gH,gH,gY,e.timeStamp),rv(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ny(gH,gH,gU,null),ny(gH,gH,gV,null),ny(gH,gH,gX,null),ny(gH,gH,gY,NaN)),nw(gH,gH,gG)&&(nw(gH,gH,gG).abort(),ny(gH,gH,gG,null),ny(gH,gH,gq,NaN),ny(gH,gH,gK,null))}static _endDraw(e){let t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,nw(gH,gH,gU).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let e=nw(gH,gH,gU),i=this._currentDrawId,n=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,e.setLastElement(n))},undo:()=>{t.drawLayer.updateProperties(i,e.removeLastElement())},mustExec:!1,type:nL.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(nL.DRAW_STEP),!nw(gH,gH,gU).isEmpty()){let{pageDimensions:[i,n],scale:r}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:nw(gH,gH,gU).getOutlines(i*r,n*r,r,this._INNER_MARGIN),drawingOptions:nw(gH,gH,gV),mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,n,r,a){nV("Not implemented")}static async deserialize(e,t,i){let{rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:s}}=t.viewport,l=this.deserializeDraw(a,s,n,r,this._INNER_MARGIN,e),o=await super.deserialize(e,t,i);return o.createDrawingOptions(e),ng(o,gD,gQ).call(o,{drawOutlines:l}),ng(o,gN,g$).call(o),o.onScaleChanging(),o.rotate(),o}serializeDraw(e){let[t,i]=this.pageTranslation,[n,r]=this.pageDimensions;return no(this,gI).serialize([t,i,n,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super(e),nm(this,gD),nm(this,gF),nm(this,gO),nm(this,gN),nm(this,gW),nm(this,gj),nm(this,gB),nm(this,gz),nc(this,gI,{writable:!0,value:null}),nc(this,gL,{writable:!0,value:void 0}),(0,nA._)(this,"_drawId",null),nd(this,gL,e.mustBeCommitted||!1),e.drawOutlines&&(ng(this,gD,gQ).call(this,e),ng(this,gN,g$).call(this))}}(0,nA._)(gH,"_currentDrawId",-1),(0,nA._)(gH,"_currentParent",null);var gU={writable:!0,value:null},gG={writable:!0,value:null},gV={writable:!0,value:null},gq={writable:!0,value:NaN},gX={writable:!0,value:null},gK={writable:!0,value:null},gY={writable:!0,value:NaN};function gQ(e){let{drawOutlines:t,drawId:i,drawingOptions:n}=e;nd(this,gI,t),this._drawingOptions||(this._drawingOptions=n),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=ng(this,gF,gJ).call(this,t,this.parent),ng(this,gB,g2).call(this,t.box)}function gJ(e,t){let{id:i}=t.drawLayer.draw(gH._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}function gZ(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function g$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===this._drawId||this.parent!==e){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);this._drawingOptions.updateAll(),this._drawId=ng(this,gF,gJ).call(this,no(this,gI),e)}}function g0(e){let[t,i,n,r]=e,{parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[i,1-t,s/a*n,a/s*r];case 180:return[1-t,1-i,n,r];case 270:return[1-i,t,s/a*n,a/s*r];default:return[t,i,n,r]}}function g1(){let{x:e,y:t,width:i,height:n,parentDimensions:[r,a],rotation:s}=this;switch(s){case 90:return[1-t,e,r/a*i,a/r*n];case 180:return[1-e,1-t,i,n];case 270:return[t,1-e,r/a*i,a/r*n];default:return[e,t,i,n]}}function g2(e){if([this.x,this.y,this.width,this.height]=ng(this,gW,g0).call(this,e),this.div){this.fixAndSetPosition();let[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function g3(){let{x:e,y:t,width:i,height:n,rotation:r,parentRotation:a,parentDimensions:[s,l]}=this;switch((4*r+a)/90){case 1:return[1-t-n,e,n,i];case 2:return[1-e-i,1-t-n,i,n];case 3:return[t,1-e-i,n,i];case 4:return[e,t-s/l*i,l/s*n,s/l*i];case 5:return[1-t,e,s/l*i,l/s*n];case 6:return[1-e-l/s*n,1-t,l/s*n,s/l*i];case 7:return[t-s/l*i,1-e-l/s*n,s/l*i,l/s*n];case 8:return[e-i,t-n,i,n];case 9:return[1-t,e-i,n,i];case 10:return[1-e,1-t,i,n];case 11:return[t-n,1-e,n,i];case 12:return[e-l/s*n,t,l/s*n,s/l*i];case 13:return[1-t-s/l*i,e-l/s*n,s/l*i,l/s*n];case 14:return[1-e,1-t-s/l*i,l/s*n,s/l*i];case 15:return[t,1-e,s/l*i,l/s*n];default:return[e,t,i,n]}}(0,nA._)(gH,"_INNER_MARGIN",3);var g4=new WeakMap,g5=new WeakMap,g6=new WeakMap,g9=new WeakMap,g8=new WeakMap,g7=new WeakMap,me=new WeakMap,mt=new WeakMap,mi=new WeakMap,mn=new WeakMap,mr=new WeakMap,ma=new WeakSet;class ms{updateProperty(e,t){"stroke-width"===e&&nd(this,g8,t)}isEmpty(){return!no(this,g6)||0===no(this,g6).length}isCancellable(){return no(this,g7).length<=10}add(e,t){[e,t]=ng(this,ma,ml).call(this,e,t);let[i,n,r,a]=no(this,g4).subarray(2,6),s=e-r,l=t-a;return 2>=Math.hypot(no(this,mn)*s,no(this,mr)*l)?null:((no(this,g7).push(e,t),isNaN(i))?(no(this,g4).set([r,a,e,t],2),no(this,g5).push(NaN,NaN,NaN,NaN,e,t)):(isNaN(no(this,g4)[0])&&no(this,g5).splice(6,6),no(this,g4).set([i,n,r,a,e,t],0),no(this,g5).push(...p_.createBezierPoints(i,n,r,a,e,t))),{path:{d:this.toSVGPath()}})}end(e,t){let i=this.add(e,t);return i||(2===no(this,g7).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,r){nd(this,mn,i),nd(this,mr,n),nd(this,g9,r),[e,t]=ng(this,ma,ml).call(this,e,t);let a=nd(this,g5,[NaN,NaN,NaN,NaN,e,t]);nd(this,g7,[e,t]);let s=no(this,g6).at(-1);return s&&(s.line=new Float32Array(s.line),s.points=new Float32Array(s.points)),no(this,g6).push({line:a,points:no(this,g7)}),no(this,g4).set(a,0),nd(this,mt,0),this.toSVGPath(),null}getLastElement(){return no(this,g6).at(-1)}setLastElement(e){return no(this,g6)?(no(this,g6).push(e),nd(this,g5,e.line),nd(this,g7,e.points),nd(this,mt,0),{path:{d:this.toSVGPath()}}):no(this,mi).setLastElement(e)}removeLastElement(){if(!no(this,g6))return no(this,mi).removeLastElement();no(this,g6).pop(),nd(this,me,"");for(let e=0,t=no(this,g6).length;e<t;e++){let{line:t,points:i}=no(this,g6)[e];nd(this,g5,t),nd(this,g7,i),nd(this,mt,0),this.toSVGPath()}return{path:{d:no(this,me)}}}toSVGPath(){let e=p_.svgRound(no(this,g5)[4]),t=p_.svgRound(no(this,g5)[5]);if(2===no(this,g7).length)return nd(this,me,"".concat(no(this,me)," M ").concat(e," ").concat(t," Z")),no(this,me);if(no(this,g7).length<=6){let i=no(this,me).lastIndexOf("M");nd(this,me,"".concat(no(this,me).slice(0,i)," M ").concat(e," ").concat(t)),nd(this,mt,6)}if(4===no(this,g7).length){let e=p_.svgRound(no(this,g5)[10]),t=p_.svgRound(no(this,g5)[11]);return nd(this,me,"".concat(no(this,me)," L ").concat(e," ").concat(t)),nd(this,mt,12),no(this,me)}let i=[];0===no(this,mt)&&(i.push("M ".concat(e," ").concat(t)),nd(this,mt,6));for(let e=no(this,mt),t=no(this,g5).length;e<t;e+=6){let[t,n,r,a,s,l]=no(this,g5).slice(e,e+6).map(p_.svgRound);i.push("C".concat(t," ").concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l))}return nd(this,me,no(this,me)+i.join(" ")),nd(this,mt,no(this,g5).length),no(this,me)}getOutlines(e,t,i,n){let r=no(this,g6).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),no(this,mi).build(no(this,g6),e,t,i,no(this,g9),no(this,g8),n),nd(this,g4,null),nd(this,g5,null),nd(this,g6,null),nd(this,me,null),no(this,mi)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}constructor(e,t,i,n,r,a){nm(this,ma),nc(this,g4,{writable:!0,value:new Float64Array(6)}),nc(this,g5,{writable:!0,value:void 0}),nc(this,g6,{writable:!0,value:void 0}),nc(this,g9,{writable:!0,value:void 0}),nc(this,g8,{writable:!0,value:void 0}),nc(this,g7,{writable:!0,value:void 0}),nc(this,me,{writable:!0,value:""}),nc(this,mt,{writable:!0,value:0}),nc(this,mi,{writable:!0,value:new mx}),nc(this,mn,{writable:!0,value:void 0}),nc(this,mr,{writable:!0,value:void 0}),nd(this,mn,i),nd(this,mr,n),nd(this,g9,r),nd(this,g8,a),[e,t]=ng(this,ma,ml).call(this,e,t);let s=nd(this,g5,[NaN,NaN,NaN,NaN,e,t]);nd(this,g7,[e,t]),nd(this,g6,[{line:s,points:no(this,g7)}]),no(this,g4).set(s,0)}}function ml(e,t){return p_._normalizePoint(e,t,no(this,mn),no(this,mr),no(this,g9))}var mo=new WeakMap,mh=new WeakMap,mc=new WeakMap,mu=new WeakMap,md=new WeakMap,mp=new WeakMap,mf=new WeakMap,mg=new WeakMap,mm=new WeakMap,mv=new WeakSet,mb=new WeakSet,mw=new WeakSet,my=new WeakSet;class mx extends p_{build(e,t,i,n,r,a,s){nd(this,md,t),nd(this,mp,i),nd(this,mf,n),nd(this,mg,r),nd(this,mm,a),nd(this,mc,null!=s?s:0),nd(this,mu,e),ng(this,mw,m_).call(this)}setLastElement(e){return no(this,mu).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return no(this,mu).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of no(this,mu)){if(e.push("M".concat(p_.svgRound(t[4])," ").concat(p_.svgRound(t[5]))),6===t.length){e.push("Z");continue}if(12===t.length){e.push("L".concat(p_.svgRound(t[10])," ").concat(p_.svgRound(t[11])));continue}for(let i=6,n=t.length;i<n;i+=6){let[n,r,a,s,l,o]=t.subarray(i,i+6).map(p_.svgRound);e.push("C".concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l," ").concat(o))}}return e.join("")}serialize(e,t){let i,n,r,a,s,l,o,h,c,[u,d,p,f]=e,g=[],m=[],[b,w,y,x]=ng(this,mb,mk).call(this);switch(no(this,mg)){case 0:c=p_._rescale,i=u,n=d+f,r=p,a=-f,s=u+b*p,l=d+(1-w-x)*f,o=u+(b+y)*p,h=d+(1-w)*f;break;case 90:c=p_._rescaleAndSwap,i=u,n=d,r=p,a=f,s=u+w*p,l=d+b*f,o=u+(w+x)*p,h=d+(b+y)*f;break;case 180:c=p_._rescale,i=u+p,n=d,r=-p,a=f,s=u+(1-b-y)*p,l=d+w*f,o=u+(1-b)*p,h=d+(w+x)*f;break;case 270:c=p_._rescaleAndSwap,i=u+p,n=d+f,r=-p,a=-f,s=u+(1-w-x)*p,l=d+(1-b-y)*f,o=u+(1-w)*p,h=d+(1-b)*f}for(let{line:e,points:s}of no(this,mu))g.push(c(e,i,n,r,a,t?Array(e.length):null)),m.push(c(s,i,n,r,a,t?Array(s.length):null));return{lines:g,points:m,rect:[s,l,o,h]}}static deserialize(e,t,i,n,r,a){let s,l,o,h,c,{paths:{lines:u,points:d},rotation:p,thickness:f}=a,g=[];switch(p){case 0:c=p_._rescale,s=-e/i,l=t/n+1,o=1/i,h=-1/n;break;case 90:c=p_._rescaleAndSwap,s=-t/n,l=-e/i,o=1/n,h=1/i;break;case 180:c=p_._rescale,s=e/i+1,l=-t/n,o=-1/i,h=1/n;break;case 270:c=p_._rescaleAndSwap,s=t/n+1,l=e/i+1,o=-1/n,h=-1/i}if(!u)for(let e of(u=[],d)){let t=e.length;if(2===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}let i=new Float32Array(3*(t-2));u.push(i);let[n,r,a,s]=e.subarray(0,4);i.set([NaN,NaN,NaN,NaN,n,r],0);for(let l=4;l<t;l+=2){let t=e[l],o=e[l+1];i.set(p_.createBezierPoints(n,r,a,s,t,o),(l-2)*3),[n,r,a,s]=[a,s,t,o]}}for(let e=0,t=u.length;e<t;e++)g.push({line:c(u[e].map(e=>null!=e?e:NaN),s,l,o,h),points:c(d[e].map(e=>null!=e?e:NaN),s,l,o,h)});let m=new mx;return m.build(g,i,n,1,p,f,r),m}get box(){return no(this,mo)}updateProperty(e,t){return"stroke-width"===e?ng(this,my,mS).call(this,t):null}updateParentDimensions(e,t){let[i,n]=e,[r,a]=ng(this,mv,mA).call(this);nd(this,md,i),nd(this,mp,n),nd(this,mf,t);let[s,l]=ng(this,mv,mA).call(this),o=s-r,h=l-a,c=no(this,mo);return c[0]-=o,c[1]-=h,c[2]+=2*o,c[3]+=2*h,c}updateRotation(e){return nd(this,mh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return no(this,mo).map(p_.svgRound).join(" ")}get defaultProperties(){let[e,t]=no(this,mo);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(p_.svgRound(e)," ").concat(p_.svgRound(t))}}}get rotationTransform(){let[,,e,t]=no(this,mo),i=0,n=0,r=0,a=0,s=0,l=0;switch(no(this,mh)){case 90:n=t/e,r=-e/t,s=e;break;case 180:i=-1,a=-1,s=e,l=t;break;case 270:n=-t/e,r=e/t,l=t;break;default:return""}return"matrix(".concat(i," ").concat(n," ").concat(r," ").concat(a," ").concat(p_.svgRound(s)," ").concat(p_.svgRound(l),")")}getPathResizingSVGProperties(e){let[t,i,n,r]=e,[a,s]=ng(this,mv,mA).call(this),[l,o,h,c]=no(this,mo);return Math.abs(h-a)<=p_.PRECISION||Math.abs(c-s)<=p_.PRECISION?{path:{"transform-origin":"".concat(p_.svgRound(t)," ").concat(p_.svgRound(i)),transform:"".concat(this.rotationTransform," translate(").concat(t+n/2-(l+h/2)," ").concat(i+r/2-(o+c/2),")")}}:{path:{"transform-origin":"".concat(p_.svgRound(l)," ").concat(p_.svgRound(o)),transform:"".concat(this.rotationTransform," scale(").concat(h/n," ").concat(c/r,") ")+"translate(".concat(p_.svgRound(a)," ").concat(p_.svgRound(s),") scale(").concat((n-2*a)/(h-2*a)," ").concat((r-2*s)/(c-2*s),") ")+"translate(".concat(p_.svgRound(-a)," ").concat(p_.svgRound(-s),")")}}}getPathResizedSVGProperties(e){let[t,i,n,r]=e,[a,s]=ng(this,mv,mA).call(this),l=no(this,mo),[o,h,c,u]=l;if(l[0]=t,l[1]=i,l[2]=n,l[3]=r,Math.abs(c-a)<=p_.PRECISION||Math.abs(u-s)<=p_.PRECISION){let e=t+n/2-(o+c/2),a=i+r/2-(h+u/2);for(let{line:t,points:i}of no(this,mu))p_._translate(t,e,a,t),p_._translate(i,e,a,i);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(p_.svgRound(t)," ").concat(p_.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(n-2*a)/(c-2*a),p=(r-2*s)/(u-2*s),f=-d*(o+a)+t+a,g=-p*(h+s)+i+s;if(1!==d||1!==p||0!==f||0!==g)for(let{line:e,points:t}of no(this,mu))p_._rescale(e,f,g,d,p,e),p_._rescale(t,f,g,d,p,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(p_.svgRound(t)," ").concat(p_.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[i,n]=e,[r,a]=t,s=no(this,mo),l=i-s[0],o=n-s[1];if(no(this,md)===r&&no(this,mp)===a)for(let{line:e,points:t}of no(this,mu))p_._translate(e,l,o,e),p_._translate(t,l,o,t);else{let e=no(this,md)/r,t=no(this,mp)/a;for(let{line:i,points:n}of(nd(this,md,r),nd(this,mp,a),no(this,mu)))p_._rescale(i,l,o,e,t,i),p_._rescale(n,l,o,e,t,n);s[2]*=e,s[3]*=t}return s[0]=i,s[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(p_.svgRound(i)," ").concat(p_.svgRound(n))}}}get defaultSVGProperties(){let e=no(this,mo);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(p_.svgRound(e[0])," ").concat(p_.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}constructor(...e){super(...e),nm(this,mv),nm(this,mb),nm(this,mw),nm(this,my),nc(this,mo,{writable:!0,value:void 0}),nc(this,mh,{writable:!0,value:0}),nc(this,mc,{writable:!0,value:void 0}),nc(this,mu,{writable:!0,value:void 0}),nc(this,md,{writable:!0,value:void 0}),nc(this,mp,{writable:!0,value:void 0}),nc(this,mf,{writable:!0,value:void 0}),nc(this,mg,{writable:!0,value:void 0}),nc(this,mm,{writable:!0,value:void 0})}}function mA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no(this,mm),t=no(this,mc)+e/2*no(this,mf);return no(this,mg)%180==0?[t/no(this,md),t/no(this,mp)]:[t/no(this,mp),t/no(this,md)]}function mk(){let[e,t,i,n]=no(this,mo),[r,a]=ng(this,mv,mA).call(this,0);return[e+r,t+a,i-2*r,n-2*a]}function m_(){let e=nd(this,mo,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:t}of no(this,mu)){if(t.length<=12){for(let i=4,n=t.length;i<n;i+=6){let[n,r]=t.subarray(i,i+2);e[0]=Math.min(e[0],n),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],n),e[3]=Math.max(e[3],r)}continue}let i=t[4],n=t[5];for(let r=6,a=t.length;r<a;r+=6){let[a,s,l,o,h,c]=t.subarray(r,r+6);n8.bezierBoundingBox(i,n,a,s,l,o,h,c,e),i=h,n=c}}let[t,i]=ng(this,mv,mA).call(this);e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}function mS(e){let[t,i]=ng(this,mv,mA).call(this);nd(this,mm,e);let[n,r]=ng(this,mv,mA).call(this),[a,s]=[n-t,r-i],l=no(this,mo);return l[0]-=a,l[1]-=s,l[2]+=2*a,l[3]+=2*s,l}var mE=new WeakMap;class mM extends gR{updateSVGProperty(e,t){"stroke-width"===e&&(null!=t||(t=this["stroke-width"]),t*=no(this,mE).realScale),super.updateSVGProperty(e,t)}clone(){let e=new mM(no(this,mE));return e.updateAll(this),e}constructor(e){super(),nc(this,mE,{writable:!0,value:void 0}),nd(this,mE,e),super.updateProperties({fill:"none",stroke:lU._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}}var mC=new WeakSet;class mT extends gH{static initialize(e,t){lU.initialize(e,t),this._defaultDrawingOptions=new mM(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return nK(this,"typesMap",new Map([[nL.INK_THICKNESS,"stroke-width"],[nL.INK_COLOR,"stroke"],[nL.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,n,r){return new ms(e,t,i,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,n,r,a){return mx.deserialize(e,t,i,n,r,a)}static async deserialize(e,t,i){let n=null;if(e instanceof dV){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,opacity:l,borderStyle:{rawWidth:o},popupRef:h},parent:{page:{pageNumber:c}}}=e;n=e={annotationType:nI.INK,color:Array.from(s),thickness:o,opacity:l,paths:{points:t},boxes:null,pageIndex:c-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:h}}let r=await super.deserialize(e,t,i);return r.annotationElementId=e.id||null,r._initialData=n,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:i,opacity:n}=e;this._drawingOptions=mT.getDefaultDrawingOptions({stroke:n8.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:i,rect:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":s}}=this,l={annotationType:nI.INK,color:lU._colorManager.convert(r),opacity:a,thickness:s,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!ng(this,mC,mP).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){let{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}constructor(e){super({...e,name:"inkEditor"}),nm(this,mC),this._willKeepAspectRatio=!0}}function mP(e){let{color:t,thickness:i,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,i)=>e!==t[i])||e.thickness!==i||e.opacity!==n||e.pageIndex!==r}(0,nA._)(mT,"_type","ink"),(0,nA._)(mT,"_editorType",nI.INK),(0,nA._)(mT,"_defaultDrawingOptions",null);var mR=new WeakMap,mI=new WeakMap,mL=new WeakMap,mD=new WeakMap,mF=new WeakMap,mO=new WeakMap,mN=new WeakMap,mW=new WeakMap,mj=new WeakMap,mB=new WeakMap,mz=new WeakSet,mH=new WeakSet,mU=new WeakSet,mG=new WeakSet,mV=new WeakSet,mq=new WeakSet,mX=new WeakSet,mK=new WeakSet;class mY extends lU{static initialize(e,t){lU.initialize(e,t)}static get supportedTypes(){return nK(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/".concat(e)))}static get supportedTypesStr(){return nK(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(nI.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!(null==(e=this.altTextData)?void 0:e.altText)}}static computeTelemetryFinalData(e){var t,i;let n=e.get("hasAltText");return{hasAltText:null!=(t=n.get(!0))?t:0,hasNoAltText:null!=(i=n.get(!1))?i:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw Error("No ML.");if(!await i.isEnabledFor("altText"))throw Error("ML isn't enabled for alt text.");let{data:n,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,s=await i.guess({name:"altText",request:{data:n,width:r,height:a,channels:n.length/(r*a)}});if(!s)throw Error("No response from the AI service.");if(s.error)throw Error("Error from the AI service.");if(s.cancel)return null;if(!s.output)throw Error("No valid response from the AI service.");let l=s.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){if(no(this,mI)){var e;nd(this,mR,null),this._uiManager.imageManager.deleteId(no(this,mI)),null==(e=no(this,mN))||e.remove(),nd(this,mN,null),no(this,mW)&&(clearTimeout(no(this,mW)),nd(this,mW,null))}super.remove()}rebuild(){if(!this.parent){no(this,mI)&&ng(this,mU,mZ).call(this);return}super.rebuild(),null!==this.div&&(no(this,mI)&&null===no(this,mN)&&ng(this,mU,mZ).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(no(this,mL)||no(this,mR)||no(this,mD)||no(this,mF)||no(this,mI))}get isResizable(){return!0}render(){let e,t;if(this.div)return this.div;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),no(this,mR)?ng(this,mG,m$).call(this):ng(this,mU,mZ).call(this),this.width&&!this.annotationElementId){let[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==no(this,mW)&&clearTimeout(no(this,mW)),nd(this,mW,setTimeout(()=>{nd(this,mW,null),ng(this,mq,m1).call(this)},200)))}copyCanvas(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);let{width:n,height:r}=no(this,mR),a=new rS,s=no(this,mR),l=n,o=r,h=null;if(t){var c,u;if(n>t||r>t){let e=Math.min(t/n,t/r);l=Math.floor(n*e),o=Math.floor(r*e)}let e=(h=document.createElement("canvas")).width=Math.ceil(l*a.sx),i=h.height=Math.ceil(o*a.sy);no(this,mj)||(s=ng(this,mV,m0).call(this,e,i));let d=h.getContext("2d");d.filter=this._uiManager.hcmFilter;let p="white",f="#cfcfd8";"none"!==this._uiManager.hcmFilter?f="black":(null==(c=(u=window).matchMedia)?void 0:c.call(u,"(prefers-color-scheme: dark)").matches)&&(p="#8f8f9d",f="#42414d");let g=15*a.sx,m=15*a.sy,b=new OffscreenCanvas(2*g,2*m),w=b.getContext("2d");w.fillStyle=p,w.fillRect(0,0,2*g,2*m),w.fillStyle=f,w.fillRect(0,0,g,m),w.fillRect(g,m,g,m),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,e,i),d.drawImage(s,0,0,s.width,s.height,0,0,e,i)}let d=null;if(i){let t,i;if(a.symmetric&&s.width<e&&s.height<e)t=s.width,i=s.height;else if(s=no(this,mR),n>e||r>e){let a=Math.min(e/n,e/r);t=Math.floor(n*a),i=Math.floor(r*a),no(this,mj)||(s=ng(this,mV,m0).call(this,t,i))}let l=new OffscreenCanvas(t,i).getContext("2d",{willReadFrequently:!0});l.drawImage(s,0,0,s.width,s.height,0,0,t,i),d={width:t,height:i,data:l.getImageData(0,0,t,i).data}}return{canvas:h,width:l,height:o,imageData:d}}getImageForAltText(){return no(this,mN)}static async deserialize(e,t,i){let n=null;if(e instanceof dJ){var r;let{data:{rect:a,rotation:s,id:l,structParent:o,popupRef:h},container:c,parent:{page:{pageNumber:u}}}=e,d=c.querySelector("canvas"),p=i.imageManager.getFromCanvas(c.id,d);d.remove();let f=(null==(r=await t._structTree.getAriaAttributes("".concat(rr).concat(l)))?void 0:r.get("aria-label"))||"";n=e={annotationType:nI.STAMP,bitmapId:p.id,bitmap:p.bitmap,pageIndex:u-1,rect:a.slice(0),rotation:s,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:f},isSvg:!1,structParent:o,popupRef:h}}let a=await super.deserialize(e,t,i),{rect:s,bitmap:l,bitmapUrl:o,bitmapId:h,isSvg:c,accessibilityData:u}=e;h&&i.imageManager.isValidId(h)?(nd(a,mI,h),l&&nd(a,mR,l)):nd(a,mD,o),nd(a,mj,c);let[d,p]=a.pageDimensions;return a.width=(s[2]-s[0])/d,a.height=(s[3]-s[1])/p,a.annotationElementId=e.id||null,u&&(a.altTextData=u),a._initialData=n,nd(a,mB,!!n),a}serialize(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:nI.STAMP,bitmapId:no(this,mI),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:no(this,mj),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=ng(this,mX,m2).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let t=ng(this,mK,m3).call(this,n);if(t.isSame)return null;t.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=null!=(e=this._initialData.structParent)?e:-1}if(n.id=this.annotationElementId,null===i)return n;i.stamps||(i.stamps=new Map);let s=no(this,mj)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(i.stamps.has(no(this,mI))){if(no(this,mj)){let e=i.stamps.get(no(this,mI));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=ng(this,mX,m2).call(this,!1))}}else i.stamps.set(no(this,mI),{area:s,serialized:n}),n.bitmap=ng(this,mX,m2).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}constructor(e){super({...e,name:"stampEditor"}),nm(this,mz),nm(this,mH),nm(this,mU),nm(this,mG),nm(this,mV),nm(this,mq),nm(this,mX),nm(this,mK),nc(this,mR,{writable:!0,value:null}),nc(this,mI,{writable:!0,value:null}),nc(this,mL,{writable:!0,value:null}),nc(this,mD,{writable:!0,value:null}),nc(this,mF,{writable:!0,value:null}),nc(this,mO,{writable:!0,value:""}),nc(this,mN,{writable:!0,value:null}),nc(this,mW,{writable:!0,value:null}),nc(this,mj,{writable:!0,value:!1}),nc(this,mB,{writable:!0,value:!1}),nd(this,mD,e.bitmapUrl),nd(this,mF,e.bitmapFile)}}function mQ(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void this.remove();nd(this,mR,e.bitmap),t||(nd(this,mI,e.id),nd(this,mj,e.isSvg)),e.file&&nd(this,mO,e.file.name),ng(this,mG,m$).call(this)}function mJ(){if(nd(this,mL,null),this._uiManager.enableWaiting(!1),no(this,mN)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&no(this,mR)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&no(this,mR)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function mZ(){if(no(this,mI)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(no(this,mI)).then(e=>ng(this,mz,mQ).call(this,e,!0)).finally(()=>ng(this,mH,mJ).call(this));return}if(no(this,mD)){let e=no(this,mD);nd(this,mD,null),this._uiManager.enableWaiting(!0),nd(this,mL,this._uiManager.imageManager.getFromUrl(e).then(e=>ng(this,mz,mQ).call(this,e)).finally(()=>ng(this,mH,mJ).call(this)));return}if(no(this,mF)){let e=no(this,mF);nd(this,mF,null),this._uiManager.enableWaiting(!0),nd(this,mL,this._uiManager.imageManager.getFromFile(e).then(e=>ng(this,mz,mQ).call(this,e)).finally(()=>ng(this,mH,mJ).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=mY.supportedTypesStr;let t=this._uiManager._signal;nd(this,mL,new Promise(i=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ng(this,mz,mQ).call(this,t)}else this.remove();i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>ng(this,mH,mJ).call(this))),e.click()}function m$(){var e;let{div:t}=this,{width:i,height:n}=no(this,mR),[r,a]=this.pageDimensions;if(this.width)i=this.width*r,n=this.height*a;else if(i>.75*r||n>.75*a){let e=Math.min(.75*r/i,.75*a/n);i*=e,n*=e}let[s,l]=this.parentDimensions;this.setDims(i*s/r,n*l/a),this._uiManager.enableWaiting(!1);let o=nd(this,mN,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=i/r,this.height=n/a,(null==(e=this._initialOptions)?void 0:e.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),ng(this,mq,m1).call(this),no(this,mB)||(this.parent.addUndoableEditor(this),nd(this,mB,!0)),this._reportTelemetry({action:"inserted_image"}),no(this,mO)&&o.setAttribute("aria-label",no(this,mO))}function m0(e,t){let{width:i,height:n}=no(this,mR),r=i,a=n,s=no(this,mR);for(;r>2*e||a>2*t;){let i=r,n=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let l=new OffscreenCanvas(r,a);l.getContext("2d").drawImage(s,0,0,i,n,0,0,r,a),s=l.transferToImageBitmap()}return s}function m1(){let[e,t]=this.parentDimensions,{width:i,height:n}=this,r=new rS,a=Math.ceil(i*e*r.sx),s=Math.ceil(n*t*r.sy),l=no(this,mN);if(!l||l.width===a&&l.height===s)return;l.width=a,l.height=s;let o=no(this,mj)?no(this,mR):ng(this,mV,m0).call(this,a,s),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(o,0,0,o.width,o.height,0,0,a,s)}function m2(e){if(e){if(no(this,mj)){let e=this._uiManager.imageManager.getSvgUrl(no(this,mI));if(e)return e}let e=document.createElement("canvas");return{width:e.width,height:e.height}=no(this,mR),e.getContext("2d").drawImage(no(this,mR),0,0),e.toDataURL()}if(no(this,mj)){let[e,t]=this.pageDimensions,i=Math.round(this.width*e*rs.PDF_TO_CSS_UNITS),n=Math.round(this.height*t*rs.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(i,n);return r.getContext("2d").drawImage(no(this,mR),0,0,no(this,mR).width,no(this,mR).height,0,0,i,n),r.transferToImageBitmap()}return structuredClone(no(this,mR))}function m3(e){var t;let{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===i,a=((null==(t=e.accessibilityData)?void 0:t.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}(0,nA._)(mY,"_type","stamp"),(0,nA._)(mY,"_editorType",nI.STAMP);var m4=new WeakMap,m5=new WeakMap,m6=new WeakMap,m9=new WeakMap,m8=new WeakMap,m7=new WeakMap,ve=new WeakMap,vt=new WeakMap,vi=new WeakMap,vn=new WeakMap,vr=new WeakMap,va=new WeakMap,vs=new WeakMap,vl=new WeakMap,vo=new WeakSet,vh=new WeakMap,vc=new WeakSet,vu=new WeakSet,vd=new WeakSet;class vp{get isEmpty(){return 0===no(this,m7).size}get isInvisible(){return this.isEmpty&&no(this,vl).getMode()===nI.NONE}updateToolbar(e){no(this,vl).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no(this,vl).getMode();switch(ng(this,vd,vw).call(this),e){case nI.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case nI.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case nI.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;for(let i of nw(vp,vp,vf).values())t.toggle("".concat(i._type,"Editing"),e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=no(this,va))?void 0:t.div)}setEditingState(e){no(this,vl).setEditingState(e)}addCommands(e){no(this,vl).addCommands(e)}cleanUndoStack(e){no(this,vl).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==(e=no(this,m6))||e.div.classList.toggle("disabled",!t)}async enable(){nd(this,vi,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let t of no(this,m7).values())t.enableEditing(),t.show(!0),t.annotationElementId&&(no(this,vl).removeChangedExistingAnnotation(t),e.add(t.annotationElementId));if(!no(this,m6))return void nd(this,vi,!1);for(let t of no(this,m6).getEditableAnnotations()){if(t.hide(),no(this,vl).isDeletedAnnotationElement(t.data.id)||e.has(t.data.id))continue;let i=await this.deserialize(t);i&&(this.addOrRebuild(i),i.enableEditing())}nd(this,vi,!1)}disable(){nd(this,vt,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,t=new Map;for(let n of no(this,m7).values()){var i;if(n.disableEditing(),n.annotationElementId){if(null!==n.serialize()){e.set(n.annotationElementId,n);continue}t.set(n.annotationElementId,n),null==(i=this.getEditableAnnotation(n.annotationElementId))||i.show(),n.remove()}}if(no(this,m6))for(let i of no(this,m6).getEditableAnnotations()){let{id:n}=i.data;if(no(this,vl).isDeletedAnnotationElement(n))continue;let r=t.get(n);if(r){r.resetAnnotationElement(i),r.show(!1),i.show();continue}(r=e.get(n))&&(no(this,vl).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show()}ng(this,vd,vw).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let e of nw(vp,vp,vf).values())n.remove("".concat(e._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),nd(this,vt,!1)}getEditableAnnotation(e){var t;return(null==(t=no(this,m6))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){no(this,vl).getActive()!==e&&no(this,vl).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(null==(e=no(this,va))?void 0:e.div)&&!no(this,vs)){nd(this,vs,new AbortController);let e=no(this,vl).combinedSignal(no(this,vs));no(this,va).div.addEventListener("pointerdown",ng(this,vo,vg).bind(this),{signal:e}),no(this,va).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(null==(e=no(this,va))?void 0:e.div)&&no(this,vs)&&(no(this,vs).abort(),nd(this,vs,null),no(this,va).div.classList.remove("highlighting"))}enableClick(){if(no(this,m9))return;nd(this,m9,new AbortController);let e=no(this,vl).combinedSignal(no(this,m9));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null==(e=no(this,m9))||e.abort(),nd(this,m9,null)}attach(e){no(this,m7).set(e.id,e);let{annotationElementId:t}=e;t&&no(this,vl).isDeletedAnnotationElement(t)&&no(this,vl).removeDeletedAnnotationElement(e)}detach(e){var t;no(this,m7).delete(e.id),null==(t=no(this,m4))||t.removePointerInTextLayer(e.contentDiv),!no(this,vt)&&e.annotationElementId&&no(this,vl).addDeletedAnnotationElement(e)}remove(e){this.detach(e),no(this,vl).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(no(this,vl).addDeletedAnnotationElement(e.annotationElementId),lU.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),no(this,vl).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!no(this,vi)),no(this,vl).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!no(this,m8)&&(e._focusEventsAllowed=!1,nd(this,m8,setTimeout(()=>{nd(this,m8,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:no(this,vl)._signal}),i.focus())},0))),e._structTreeParentId=null==(t=no(this,m4))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return no(this,vl).getId()}combinedSignal(e){return no(this,vl).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null==(e=no(this,vh))?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){no(this,vl).updateToolbar(e),no(this,vl).updateMode(e);let{offsetX:i,offsetY:n}=ng(this,vu,vb).call(this),r=this.getNextId(),a=ng(this,vc,vv).call(this,{parent:this,id:r,x:i,y:n,uiManager:no(this,vl),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t,i;return await (null==(t=nw(vp,vp,vf).get(null!=(i=e.annotationType)?i:e.annotationEditorType))?void 0:t.deserialize(e,this,no(this,vl)))||null}createAndAddNewEditor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getNextId(),r=ng(this,vc,vv).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:no(this,vl),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(ng(this,vu,vb).call(this),!0)}setSelected(e){no(this,vl).setSelected(e)}toggleSelected(e){no(this,vl).toggleSelected(e)}unselect(e){no(this,vl).unselect(e)}pointerup(e){var t;let{isMac:i}=n6.platform;if(0===e.button&&(!e.ctrlKey||!i)&&e.target===this.div&&no(this,ve)&&(nd(this,ve,!1),null==(t=no(this,vh))||!t.isDrawer||!no(this,vh).supportMultipleDrawings)){if(!no(this,m5))return void nd(this,m5,!0);if(no(this,vl).getMode()===nI.STAMP)return void no(this,vl).unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){var t;if(no(this,vl).getMode()===nI.HIGHLIGHT&&this.enableTextSelection(),no(this,ve))return void nd(this,ve,!1);let{isMac:i}=n6.platform;if(0!==e.button||e.ctrlKey&&i||e.target!==this.div)return;if(nd(this,ve,!0),null==(t=no(this,vh))?void 0:t.isDrawer)return void this.startDrawingSession(e);let n=no(this,vl).getActive();nd(this,m5,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),no(this,vn))return void no(this,vh).startDrawing(this,no(this,vl),!1,e);no(this,vl).setCurrentDrawingSession(this),nd(this,vn,new AbortController);let t=no(this,vl).combinedSignal(no(this,vn));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(nd(this,vr,null),this.commitOrRemove())},{signal:t}),no(this,vh).startDrawing(this,no(this,vl),!1,e)}pause(e){if(e){let{activeElement:e}=document;this.div.contains(e)&&nd(this,vr,e);return}no(this,vr)&&setTimeout(()=>{var e;null==(e=no(this,vr))||e.focus(),nd(this,vr,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return no(this,vn)?(no(this,vl).setCurrentDrawingSession(null),no(this,vn).abort(),nd(this,vn,null),nd(this,vr,null),no(this,vh).endDrawing(e)):null}findNewParent(e,t,i){let n=no(this,vl).findParent(t,i);return null!==n&&n!==this&&(n.changeParent(e),!0)}commitOrRemove(){return!!no(this,vn)&&(this.endDrawingSession(),!0)}onScaleChanging(){no(this,vn)&&no(this,vh).onScaleChangingWhenDrawing(this)}destroy(){var e,t;for(let i of(this.commitOrRemove(),(null==(e=no(this,vl).getActive())?void 0:e.parent)===this&&(no(this,vl).commitOrRemove(),no(this,vl).setActiveEditor(null)),no(this,m8)&&(clearTimeout(no(this,m8)),nd(this,m8,null)),no(this,m7).values()))null==(t=no(this,m4))||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,no(this,m7).clear(),no(this,vl).removeLayer(this)}render(e){let{viewport:t}=e;for(let e of(this.viewport=t,r_(this.div,t),no(this,vl).getEditors(this.pageIndex)))this.add(e),e.rebuild();this.updateMode()}update(e){let{viewport:t}=e;no(this,vl).commitOrRemove(),ng(this,vd,vw).call(this);let i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,r_(this.div,{rotation:n}),i!==n)for(let e of no(this,m7).values())e.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return no(this,vl).viewParameters.realScale}constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:n,accessibilityManager:r,annotationLayer:a,drawLayer:s,textLayer:l,viewport:o,l10n:h}){nm(this,vo),nc(this,vh,{get:vm,set:void 0}),nm(this,vc),nm(this,vu),nm(this,vd),nc(this,m4,{writable:!0,value:void 0}),nc(this,m5,{writable:!0,value:!1}),nc(this,m6,{writable:!0,value:null}),nc(this,m9,{writable:!0,value:null}),nc(this,m8,{writable:!0,value:null}),nc(this,m7,{writable:!0,value:new Map}),nc(this,ve,{writable:!0,value:!1}),nc(this,vt,{writable:!0,value:!1}),nc(this,vi,{writable:!0,value:!1}),nc(this,vn,{writable:!0,value:null}),nc(this,vr,{writable:!0,value:null}),nc(this,va,{writable:!0,value:null}),nc(this,vs,{writable:!0,value:null}),nc(this,vl,{writable:!0,value:void 0});let c=[...nw(vp,vp,vf).values()];if(!vp._initialized)for(let t of(vp._initialized=!0,c))t.initialize(h,e);e.registerEditorTypes(c),nd(this,vl,e),this.pageIndex=t,this.div=i,nd(this,m4,r),nd(this,m6,a),this.viewport=o,nd(this,va,l),this.drawLayer=s,this._structTree=n,no(this,vl).addLayer(this)}}(0,nA._)(vp,"_initialized",!1);var vf={writable:!0,value:new Map([pf,mT,mY,gp].map(e=>[e._editorType,e]))};function vg(e){no(this,vl).unselectAll();let{target:t}=e;if(t===no(this,va).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&no(this,va).div.contains(t)){let{isMac:t}=n6.platform;if(0!==e.button||e.ctrlKey&&t)return;no(this,vl).showAllEditors("highlight",!0,!0),no(this,va).div.classList.add("free"),this.toggleDrawing(),gp.startHighlighting(this,"ltr"===no(this,vl).direction,{target:no(this,va).div,x:e.x,y:e.y}),no(this,va).div.addEventListener("pointerup",()=>{no(this,va).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:no(this,vl)._signal}),e.preventDefault()}}function vm(){return nw(vp,vp,vf).get(no(this,vl).getMode())}function vv(e){let t=no(this,vh);return t?new t.prototype.constructor(e):null}function vb(){let{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),s=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+n),o=(r+s)/2-e,h=(a+l)/2-t,[c,u]=this.viewport.rotation%180==0?[o,h]:[h,o];return{offsetX:c,offsetY:u}}function vw(){for(let e of no(this,m7).values())e.isEmpty()&&e.remove()}var vy=new WeakMap,vx=new WeakMap,vA=new WeakMap,vk=new WeakMap,v_=new WeakSet,vS=new WeakSet,vE=new WeakSet;class vM{setParent(e){if(!no(this,vy))return void nd(this,vy,e);if(no(this,vy)!==e){if(no(this,vA).size>0)for(let t of no(this,vA).values())t.remove(),e.append(t);nd(this,vy,e)}}static get _svgFactory(){return nK(this,"_svgFactory",new uT)}draw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=nf(this,vx).value++,r=ng(this,v_,vT).call(this),a=vM._svgFactory.createElement("defs");r.append(a);let s=vM._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t&&no(this,vk).set(n,s);let o=i?ng(this,vS,vP).call(this,a,l):null,h=vM._svgFactory.createElement("use");return r.append(h),h.setAttribute("href","#".concat(l)),this.updateProperties(r,e),no(this,vA).set(n,r),{id:n,clipPathId:"url(#".concat(o,")")}}drawOutline(e,t){let i,n=nf(this,vx).value++,r=ng(this,v_,vT).call(this),a=vM._svgFactory.createElement("defs");r.append(a);let s=vM._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);if(s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t){let e=vM._svgFactory.createElement("mask");a.append(e),i="mask_p".concat(this.pageIndex,"_").concat(n),e.setAttribute("id",i),e.setAttribute("maskUnits","objectBoundingBox");let t=vM._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");let r=vM._svgFactory.createElement("use");e.append(r),r.setAttribute("href","#".concat(l)),r.setAttribute("stroke","none"),r.setAttribute("fill","black"),r.setAttribute("fill-rule","nonzero"),r.classList.add("mask")}let o=vM._svgFactory.createElement("use");r.append(o),o.setAttribute("href","#".concat(l)),i&&o.setAttribute("mask","url(#".concat(i,")"));let h=o.cloneNode();return r.append(h),o.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),no(this,vA).set(n,r),n}finalizeDraw(e,t){no(this,vk).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:i,bbox:n,rootClass:r,path:a}=t,s="number"==typeof e?no(this,vA).get(e):e;if(s){if(i&&ng(this,vE,vR).call(this,s,i),n&&(nv(vM,vM),vC).call(vM,s,n),r){let{classList:e}=s;for(let[t,i]of Object.entries(r))e.toggle(t,i)}if(a){let e=s.firstChild.firstChild;ng(this,vE,vR).call(this,e,a)}}}updateParent(e,t){if(t===this)return;let i=no(this,vA).get(e);i&&(no(t,vy).append(i),no(this,vA).delete(e),no(t,vA).set(e,i))}remove(e){no(this,vk).delete(e),null!==no(this,vy)&&(no(this,vA).get(e).remove(),no(this,vA).delete(e))}destroy(){for(let e of(nd(this,vy,null),no(this,vA).values()))e.remove();no(this,vA).clear(),no(this,vk).clear()}constructor({pageIndex:e}){nm(this,v_),nm(this,vS),nm(this,vE),nc(this,vy,{writable:!0,value:null}),nc(this,vx,{writable:!0,value:0}),nc(this,vA,{writable:!0,value:new Map}),nc(this,vk,{writable:!0,value:new Map}),this.pageIndex=e}}function vC(e,t){let[i,n,r,a]=t,{style:s}=e;s.top="".concat(100*n,"%"),s.left="".concat(100*i,"%"),s.width="".concat(100*r,"%"),s.height="".concat(100*a,"%")}function vT(){let e=vM._svgFactory.create(1,1,!0);return no(this,vy).append(e),e.setAttribute("aria-hidden",!0),e}function vP(e,t){let i=vM._svgFactory.createElement("clipPath");e.append(i);let n="clip_".concat(t);i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let r=vM._svgFactory.createElement("use");return i.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),n}function vR(e,t){for(let[i,n]of Object.entries(t))null===n?e.removeAttribute(i):e.setAttribute(i,n)}globalThis.pdfjsTestingUtils={HighlightOutliner:fc},nE.AbortException,nE.AnnotationEditorLayer,nE.AnnotationEditorParamsType,nE.AnnotationEditorType,nE.AnnotationEditorUIManager,nE.AnnotationLayer,nE.AnnotationMode,nE.ColorPicker,nE.DOMSVGFactory,nE.DrawLayer,nE.FeatureTest;var vI=nE.GlobalWorkerOptions;nE.ImageKind,nE.InvalidPDFException,nE.MissingPDFException,nE.OPS,nE.OutputScale,nE.PDFDataRangeTransport,nE.PDFDateString,nE.PDFWorker,nE.PasswordResponses,nE.PermissionFlag,nE.PixelsPerInch,nE.RenderingCancelledException,nE.TextLayer,nE.TouchManager,nE.UnexpectedResponseException,nE.Util,nE.VerbosityLevel,nE.XfaLayer,nE.build,nE.createValidAbsoluteUrl,nE.fetchData;var vL=nE.getDocument;nE.getFilenameFromUrl,nE.getPdfFilenameFromUrl,nE.getXfaPageViewport,nE.isDataScheme,nE.isPdfFile,nE.noContextMenu,nE.normalizeUnicode,nE.setLayerDimensions,nE.shadow,nE.stopEvent;var vD=nE.version,vF=e.i(43943);let vO=nr.default.env.NEXT_PUBLIC_OPENAI_API_KEY||"",vN=async e=>{var t,i,n;let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(vO)},body:JSON.stringify({model:"gpt-3.5-turbo",temperature:.5,top_p:.8,messages:[{role:"system",content:e}]})}),a=await r.json(),s=null==a||null==(n=a.choices)||null==(i=n[0])||null==(t=i.message)?void 0:t.content;return Array.isArray(s)?s.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&"text"in e&&e.text||"").join("")||"":s||""},vW=async e=>{var t,i;let{context:n,user:r,system:a,logMessagesToChatHistory:s=!0,returnFirstResponse:l=!1,chatHistory:o=[],onChatHistoryChange:h,onPDFProgressChange:c}=e,u=[...o,s?{role:"user",message:r||"",hasMore:!1}:null,{role:"assistant",message:s?"I'm thinking...":"Processing PDF...",hasMore:!0}];null==h||h([...u]);let d=u.length-1,p="".concat(n),f="";do{let e=n.substring(Math.min(20481,n.length));n=n.substring(0,Math.min(20480,n.length));let i="Question: ".concat(r,"\n\n")+a.replaceAll("{{context}}",n);if(f=await vN(i),u[d]={role:"assistant",message:(null==u||null==(t=u[d])?void 0:t.message.replaceAll(s?"I'm thinking...":"Processing PDF...",""))+(p.length>20480?f:null==f?void 0:f.substring(0,20480))+"\n\n",hasMore:!l&&e.length>0},n=e,null==c||c((p.length-e.length)/p.length*100),l&&f)break}while(n.length>0)if(!s&&null!==u&&null!==u[d]){let e=null==(i=u[d])?void 0:i.message;return u[d]={message:"Ready! Ask me anything about your PDF.",role:"assistant",hasMore:!1},null==h||h([...u]),{...u[d],message:e}}return null==h||h([...u]),u[d]};async function vj(e){let t=new FileReader;vI.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(vD,"/pdf.worker.min.mjs");let i=new Promise((e,i)=>{t.onload=()=>{e(t.result)},t.onerror=i});t.readAsArrayBuffer(e);let n=new Uint8Array(await i),r=await vL({data:n}).promise,a=r.numPages,s="";for(let e=1;e<=a;e++){let t=await r.getPage(e);for(let e of(await t.getTextContent()).items)s+=e.str+"\n";s+="\n\n"}return s}window.Buffer=window.Buffer||vF.Buffer;var b=a,i3=i3,ne=p;function vB(e){return(0,i.jsxs)(b.default,{sx:{position:"relative",display:"inline-flex"},children:[(0,i.jsx)(i3.default,{variant:"determinate",...e}),(0,i.jsx)(b.default,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(ne.default,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}let vz={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},vH=new Uint8Array(16),vU=[];for(let e=0;e<256;++e)vU.push((e+256).toString(16).slice(1));let vG=function(e,i,n){var r,a,s;if(vz.randomUUID&&!i&&!e)return vz.randomUUID();let l=null!=(s=null!=(a=(e=e||{}).random)?a:null==(r=e.rng)?void 0:r.call(e))?s:function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(vH)}();if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i){if((n=n||0)<0||n+16>i.length)throw RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)i[n+e]=l[e];return i}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(vU[e[t+0]]+vU[e[t+1]]+vU[e[t+2]]+vU[e[t+3]]+"-"+vU[e[t+4]]+vU[e[t+5]]+"-"+vU[e[t+6]]+vU[e[t+7]]+"-"+vU[e[t+8]]+vU[e[t+9]]+"-"+vU[e[t+10]]+vU[e[t+11]]+vU[e[t+12]]+vU[e[t+13]]+vU[e[t+14]]+vU[e[t+15]]).toLowerCase()}(l)};var b=a,w=u,vV=e.i(42789),i7=i7,ne=p,vq=e.i(55731),vq=vq,vX=e.i(96498),vX=vX,vK=e.i(97576),vK=vK;function vY(e){let{id:t=vG(),label:r,helperText:a,input:s,...l}=e||{},o=t?"".concat(t,"-input"):void 0,h=a&&t?"".concat(t,"-helper-text"):void 0;return(0,i.jsxs)(vq.default,{...l,children:[r&&(0,i.jsx)(vK.default,{htmlFor:o,children:r}),(0,n.cloneElement)(s,{id:o,"aria-describedby":h}),a&&(0,i.jsx)(vX.default,{id:h,children:a})]})}let vQ=(0,y.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");function vJ(e){let{id:t=vG(),accept:r,label:a,limit:s=1,maxFileSize:l=5e6,variant:o="text",onChange:h,outputType:c="content",...u}=e||{},[d,p]=(0,n.useState)([]),[f,g]=(0,n.useState)([...d]),[m,y]=(0,n.useState)({}),x=(0,n.useRef)(null),A=(0,n.useCallback)(e=>{e.stopPropagation(),e.preventDefault();let t=e.target;if(!t.files)return;let i=Object.values(t.files).map(e=>e);if(i){let e=[...f,...i],t={...m},n=[...d,...i];if(e.forEach(e=>{n.indexOf(e)>s-1?(t[e.name]="File not uploaded.  Maximum number of files exceeded. Must not be more than ".concat(s,"."),n=n.filter(t=>t.name!==e.name)):e.size>l?(t[e.name]="File not uploaded.  Maximum file size exceeded. Must not be more than ".concat(k(l),"."),n=n.filter(t=>t.name!==e.name)):n.indexOf(e)>-1&&(t[e.name]="")}),y(t),g(e),p(n),n&&n.length>0&&["text","dataUri"].includes(o)&&1===s){let e=new FileReader,t=n[0];e.onload=async e=>{var i,r,a,s;return null==h?void 0:h("content"===c?null==(r=e.target)||null==(i=r.result)?void 0:i.toString():"files"===c?n:{filename:t.name,type:t.type,content:(null==(s=e.target)||null==(a=s.result)?void 0:a.toString())||""})},"text"===o?e.readAsText(t):"dataUri"===o&&e.readAsDataURL(t)}}},[f,s,l,m,h,c,d,o]),k=e=>e<1e6?"".concat(Math.floor(e/1e3)," KB"):"".concat((e/1e6).toFixed(1)," MB"),_=e=>{if(!e)return"";let t=e.split(",").map(e=>"*.*"===e?"Any file":"audio/*"===e?"Any audio file":"video/*"===e?"Any video file":"image/*"===e?"Any image file":e.startsWith(".")?e.replace(".","").toUpperCase():e.includes("/")?e.split("/")[1].toUpperCase():e.toUpperCase());return t.length>1&&(t[t.length-1]="or ".concat(t[t.length-1])),t.join(", ")};return(0,i.jsx)(vY,{id:t,fullWidth:!0,...u,variant:"outlined",input:(0,i.jsx)(b.default,{id:t,sx:{border:"1px solid",borderRadius:"4px",display:"flex",p:2,width:"100%"},children:(0,i.jsxs)(vV.Grid,{container:!0,spacing:2,children:[(0,i.jsxs)(vV.Grid,{item:!0,xs:9,children:[a&&(0,i.jsx)(ne.default,{variant:"body1",children:a}),r?(0,i.jsx)(ne.default,{variant:"body1",children:"".concat(_(r)).concat(l?" (max. ".concat(k(l),")"):"")}):(0,i.jsx)(ne.default,{variant:"body1",children:"".concat(_("*.*")).concat(l?" (max. ".concat(k(l),")"):"")})]}),(0,i.jsxs)(vV.Grid,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,i.jsx)(w.default,{color:"primary",variant:"outlined",onClick:e=>{var t,i;e.stopPropagation(),e.preventDefault(),y({}),g([...d]),null==x||null==(i=x.current)||null==(t=i.click)||t.call(i)},sx:{p:1,zIndex:1},children:(0,i.jsx)(b.default,{sx:{p:1},children:"Browse"})}),(0,i.jsx)(b.default,{ref:x,htmlFor:"".concat(t,"__input"),component:"label",children:(0,i.jsx)("input",{type:"file",id:"".concat(t,"__input"),onChange:A,multiple:s>1,accept:r,style:{display:"none"}})})]}),f.length>0?(0,i.jsx)(i7.default,{sx:{ml:2,mt:2,width:"100%"},children:f.map((e,t)=>(0,i.jsxs)(b.default,{sx:{border:"1px solid",p:2,position:"relative"},children:[(0,i.jsx)(b.default,{display:"flex",children:(0,i.jsxs)(b.default,{sx:{ml:1},children:[(0,i.jsx)(ne.default,{variant:"body1",children:e.name}),(0,i.jsx)(ne.default,{variant:"body2",children:k(e.size)}),(null==m?void 0:m[e.name])&&(0,i.jsx)(ne.default,{variant:"body2",sx:{color:"red"},children:null==m?void 0:m[e.name]})]})}),(0,i.jsx)(w.default,{onClick:t=>{t.stopPropagation(),t.preventDefault();let i=[...d];i.splice(i.indexOf(e),1),g([...i]),p(i),y({}),("text"===o||"dataUri"===o)&&1===s&&(null==h||h("content"===c?"":{filename:"",type:"",content:""}))},startIcon:(0,i.jsx)(vQ,{}),color:"info",sx:{border:"none",position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)"}})]},t))}):null]})})})}var vZ=e.i(7670),v$=e.i(19130),v0=e.i(57242),v1=e.i(90290),v2=e.i(25652),v3=e.i(41134),v4=e.i(74429),v5=e.i(40672),v6=e.i(19727);function v9(e){return(0,v6.default)("MuiDialog",e)}let v8=(0,v5.default)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),v7=n.createContext({});var be=e.i(26933),bt=e.i(61722),bi=e.i(54512),bn=e.i(50915),br=e.i(99844),ba=e.i(54072);let bs=(0,bt.styled)(be.default,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),bl=(0,bt.styled)(v2.default,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),bo=(0,bt.styled)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.container,t["scroll".concat((0,v1.default)(i.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),bh=(0,bt.styled)(v4.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.paper,t["scrollPaper".concat((0,v1.default)(i.scroll))],t["paperWidth".concat((0,v1.default)(String(i.maxWidth)))],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})((0,bn.default)(e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(v8.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>"xs"!==e).map(e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(v8.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(v8.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}})),bc=n.forwardRef(function(e,t){let r=(0,br.useDefaultProps)({props:e,name:"MuiDialog"}),a=(0,bi.useTheme)(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":o,"aria-modal":h=!0,BackdropComponent:c,BackdropProps:u,children:d,className:p,disableEscapeKeyDown:f=!1,fullScreen:g=!1,fullWidth:m=!1,maxWidth:b="sm",onBackdropClick:w,onClick:y,onClose:x,open:A,PaperComponent:k=v4.default,PaperProps:_={},scroll:S="paper",slots:E={},slotProps:M={},TransitionComponent:C=v3.default,transitionDuration:T=s,TransitionProps:P,...R}=r,I={...r,disableEscapeKeyDown:f,fullScreen:g,fullWidth:m,maxWidth:b,scroll:S},L=(e=>{let{classes:t,scroll:i,maxWidth:n,fullWidth:r,fullScreen:a}=e,s={root:["root"],container:["container","scroll".concat((0,v1.default)(i))],paper:["paper","paperScroll".concat((0,v1.default)(i)),"paperWidth".concat((0,v1.default)(String(n))),r&&"paperFullWidth",a&&"paperFullScreen"]};return(0,v$.default)(s,v9,t)})(I),D=n.useRef(),F=(0,v0.default)(o),O=n.useMemo(()=>({titleId:F}),[F]),N={slots:{transition:C,...E},slotProps:{transition:P,paper:_,backdrop:u,...M}},[W,j]=(0,ba.default)("root",{elementType:bl,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:I,className:(0,vZ.default)(L.root,p),ref:t}),[B,z]=(0,ba.default)("backdrop",{elementType:bs,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:I}),[H,U]=(0,ba.default)("paper",{elementType:bh,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:I,className:(0,vZ.default)(L.paper,_.className)}),[G,V]=(0,ba.default)("container",{elementType:bo,externalForwardedProps:N,ownerState:I,className:(0,vZ.default)(L.container)}),[q,X]=(0,ba.default)("transition",{elementType:v3.default,externalForwardedProps:N,ownerState:I,additionalProps:{appear:!0,in:A,timeout:T,role:"presentation"}});return(0,i.jsx)(W,{closeAfterTransition:!0,slots:{backdrop:B},slotProps:{backdrop:{transitionDuration:T,as:c,...z}},disableEscapeKeyDown:f,onClose:x,open:A,onClick:e=>{y&&y(e),D.current&&(D.current=null,w&&w(e),x&&x(e,"backdropClick"))},...j,...R,children:(0,i.jsx)(q,{...X,children:(0,i.jsx)(G,{onMouseDown:e=>{D.current=e.target===e.currentTarget},...V,children:(0,i.jsx)(H,{as:k,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":F,"aria-modal":h,...U,children:(0,i.jsx)(v7.Provider,{value:O,children:d})})})})})});function bu(e){return(0,v6.default)("MuiDialogTitle",e)}let bd=(0,v5.default)("MuiDialogTitle",["root"]),bp=(0,bt.styled)(p.default,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),bf=n.forwardRef(function(e,t){let r=(0,br.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:a,id:s,...l}=r,o=(e=>{let{classes:t}=e;return(0,v$.default)({root:["root"]},bu,t)})(r),{titleId:h=s}=n.useContext(v7);return(0,i.jsx)(bp,{component:"h2",className:(0,vZ.default)(o.root,a),ownerState:r,ref:t,variant:"h6",id:null!=s?s:h,...l})});function bg(e){return(0,v6.default)("MuiDialogContent",e)}(0,v5.default)("MuiDialogContent",["root","dividers"]);let bm=(0,bt.styled)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})((0,bn.default)(e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(bd.root," + &")]:{paddingTop:0}}}]}})),bv=n.forwardRef(function(e,t){let n=(0,br.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:r,dividers:a=!1,...s}=n,l={...n,dividers:a},o=(e=>{let{classes:t,dividers:i}=e;return(0,v$.default)({root:["root",i&&"dividers"]},bg,t)})(l);return(0,i.jsx)(bm,{className:(0,vZ.default)(o.root,r),ownerState:l,ref:t,...s})});function bb(e){return(0,v6.default)("MuiDialogActions",e)}(0,v5.default)("MuiDialogActions",["root","spacing"]);let bw=(0,bt.styled)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),by=n.forwardRef(function(e,t){let n=(0,br.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:a=!1,...s}=n,l={...n,disableSpacing:a},o=(e=>{let{classes:t,disableSpacing:i}=e;return(0,v$.default)({root:["root",!i&&"spacing"]},bb,t)})(l);return(0,i.jsx)(bw,{className:(0,vZ.default)(o.root,r),ownerState:l,ref:t,...s})});var w=u,i5=i5;let bx=(0,y.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function bA(e){let{open:t=!1,onClose:n}=e,r=()=>{null==n||n()};return(0,i.jsxs)(bc,{open:t,onClose:r,children:[(0,i.jsx)(bf,{children:"Terms of Use"}),(0,i.jsx)(i5.default,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bx,{})}),(0,i.jsx)(bv,{children:(0,i.jsx)(i1,{children:'\n\nWelcome to Bookworm! These Terms of Use govern your use of Bookworm, an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions.\n\nBy accessing or using Bookworm, you agree to be bound by these Terms of Use. If you do not agree with any part of these terms, you may not use Bookworm.\n\n### 1. Use of Bookworm\n\n** 1.1 Use License **\n\n- You may use Bookworm solely for your personal or internal business purposes in accordance with these Terms of Use.\n\n- You may not use Bookworm for any unlawful or unauthorized purpose, including but not limited to violating any applicable laws or regulations.\n\n- You agree not to reproduce, duplicate, copy, sell, resell, or exploit any portion of Bookworm without express written permission from the owner.\n\n### 2. User Content\n\n** 2.1 Ownership of User Content **\n\n- You retain ownership of any content you upload or submit to Bookworm ("User Content").\n\n- By uploading or submitting User Content, you grant Bookworm a worldwide, non-exclusive, royalty-free, transferable license to use, reproduce, distribute, modify, adapt, display, and perform the User Content in connection with Bookworm\'s operation and promotion.\n\n### 3. Privacy\n\n** 3.1 Privacy Policy **\n\n- Bookworm respects your privacy and handles your personal data in accordance with its Privacy Policy.\n\n- By using Bookworm, you consent to the collection, use, and sharing of your information as described in the Privacy Policy.\n\n### 4. Intellectual Property\n\n** 4.1 Ownership of Intellectual Property **\n\n- All content, trademarks, service marks, logos, and other intellectual property rights on Bookworm are the property of their respective owners.\n\n- You may not use any trademarks, service marks, or logos displayed on Bookworm without the prior written consent of the owner.\n\n### 5. Limitation of Liability\n\n** 5.1 Disclaimer of Warranties **\n\n- Bookworm is provided on an "as is" and "as available" basis. We make no warranties or representations about the accuracy or completeness of the content provided by Bookworm.\n\n- In no event shall Bookworm or its affiliates be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or in connection with your use of Bookworm.\n\n### 6. Changes to Terms of Use\n\n** 6.1 Modifications **\n\n- Bookworm reserves the right to modify or replace these Terms of Use at any time. Any changes will be effective immediately upon posting the revised Terms of Use on Bookworm.\n\n- Your continued use of Bookworm after any changes to these Terms of Use constitutes your acceptance of the revised terms.\n\n### 7. Governing Law\n\n** 7.1 Jurisdiction **\n\n- These Terms of Use shall be governed by and construed in accordance with the laws of the state of New Hampshire, without regard to its conflict of law provisions.\n\n### 8. Contact Us\n\n- If you have any questions about these Terms of Use, please contact us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com).\n'})}),(0,i.jsx)(by,{children:(0,i.jsx)(w.default,{onClick:r,children:"OK"})})]})}function bk(){let[e,t]=n.useState([]),[r,a]=n.useState(""),[s,l]=n.useState(""),[o,h]=n.useState(""),[c,u]=n.useState(0),[d,p]=n.useState(null),[f,g]=n.useState(!1),m=e=>{t(e),u(null)},w=n.useRef(null),y=n.useRef(null),x=async()=>{vW({context:(null==r?void 0:r.length)>20480?s:r,user:"".concat(o),system:'\nBegin relevant content\n{{context}}\nEnd relevant content\n\nProvide relevant answers within the scope of the relevant content.\nAnswer the question only if it is based on the provided relevant content.\nIf the question is outside the scope of the relevant content, respond "I didn\'t see that in the PDF.  Try asking a different question.".\nRefrain from answering questions that are outside the scope of the relevant content.\nUse markdown markup to format your response for better readability.\nUse markdown to bold key points in your response, including names.\nUse markdown to italicize quotes or other key points in your response.\nRefrain from using the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from responding with questions.\nRefrain from including any additional questions in your response.\n',returnFirstResponse:!0,chatHistory:e,onChatHistoryChange:m}),h("")},A=(t,i)=>{if(null==i&&(i=null===c?e.length-1+t:c+t),u(i),null!==i&&i<e.length-1){let r=Math.max(i,2),a=e[r];if(null===a||(null==a?void 0:a.role)==="user"){var n;h((null==a?void 0:a.message)||""),null==y||null==(n=y.current)||n.focus()}else u(r),A(t,r+t)}else h(""),u(null)};return n.useEffect(()=>{if(w.current){var e;w.current.scrollTop=(null==w||null==(e=w.current)?void 0:e.scrollHeight)||0}}),(0,i.jsxs)(b.default,{id:"hero",sx:e=>({width:"100%",backgroundImage:"light"===e.palette.mode?"linear-gradient(180deg, #CEE5FD, #FFF)":"linear-gradient(#02294F, ".concat((0,nt.alpha)("#090E10",0),")"),backgroundSize:"100% 20%",backgroundRepeat:"no-repeat"}),children:[(0,i.jsx)(bA,{open:f,onClose:()=>g(!1)}),(0,i.jsxs)(i4.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",pt:{xs:10},pb:{xs:2}},children:[(0,i.jsxs)(i7.default,{spacing:2,useFlexGap:!0,sx:{width:{xs:"100%",sm:"70%"}},children:[(0,i.jsxs)(ne.default,{variant:"h1",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignSelf:"center",textAlign:"center",fontSize:"clamp(3.5rem, 10vw, 4rem)"},children:["Welcome to",(0,i.jsx)(ne.default,{variant:"h1",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})]}),(0,i.jsx)(ne.default,{textAlign:"center",color:"text.secondary",sx:{alignSelf:"center",width:{sm:"100%",md:"80%"}},children:"Introducing your AI-powered reading assistant designed to revolutionize the way you interact with PDFs."}),(0,i.jsx)(i7.default,{direction:{xs:"column",sm:"row"},alignSelf:"center",spacing:1,useFlexGap:!0,sx:{pt:2,width:{xs:"100%"}},children:(0,i.jsx)(vJ,{accept:".pdf",label:"Upload your pdf",outputType:"files",sx:{width:{xs:"100%"}},onChange:async t=>{if(t&&t.length>0){var i;let n=await vj(t[0]);a(n);let r=await vW({context:n,user:"Summarize the markdown content.",system:'\nThe user uploaded a PDF file. The content of the file has been converted to markdown.\nHere is the markdown content:\n```\n{{context}}\n```\nRefrain from mentioning the PDF file or the markdown conversion process in your response.\nDo not say the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from omitting any important information in your response.\nRefrain from omitting quotes or key points in your response.\n',logMessagesToChatHistory:!1,chatHistory:e,onChatHistoryChange:m,onPDFProgressChange:p});l((null==r?void 0:r.message)||""),null==y||null==(i=y.current)||i.focus()}}})}),(0,i.jsxs)(ne.default,{variant:"caption",textAlign:"center",sx:{opacity:.8},children:["By using this site, you agree to our",(0,i.jsx)(i9.default,{onClick:()=>g(!0),color:"primary",sx:{cursor:"pointer"},children:"Terms & Conditions"}),"."]})]}),(0,i.jsx)(b.default,{ref:w,sx:e=>({mt:{xs:2},alignSelf:"center",height:{xs:200,sm:400},overflowY:"auto",width:"100%",backgroundImage:"light"===e.palette.mode?'url("/static/images/templates/templates-images/hero-light.png")':'url("/static/images/templates/templates-images/hero-dark.png")',backgroundSize:"cover",borderRadius:"10px",outline:"1px solid",outlineColor:"light"===e.palette.mode?(0,nt.alpha)("#BFCCD9",.5):(0,nt.alpha)("#9CCCFC",.1),boxShadow:"light"===e.palette.mode?"0 0 12px 8px ".concat((0,nt.alpha)("#9CCCFC",.2)):"0 0 24px 12px ".concat((0,nt.alpha)("#033363",.2)),p:2}),children:e.map((e,t)=>(null==e?void 0:e.message)?(0,i.jsxs)(b.default,{sx:{borderRadius:"10px",p:1,my:1,backgroundColor:(null==e?void 0:e.role)==="user"?(0,nt.alpha)("#BFCCD9",.5):(0,nt.alpha)("#9CCCFC",.5)},children:[(null==e?void 0:e.role)==="assistant"?(0,i.jsxs)(ne.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:[(0,i.jsx)(ne.default,{variant:"h6",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"says..."]}):(null==e?void 0:e.message)&&(0,i.jsx)(ne.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:"You..."}),(0,i.jsxs)(ne.default,{variant:"body2",component:"div",sx:{whiteSpace:"pre-wrap",color:(null==e?void 0:e.role)==="user"?"text.primary":"text.secondary"},children:[(0,i.jsx)(i1,{children:null==e?void 0:e.message}),(null==e?void 0:e.message)==="I'm thinking..."&&(null==e?void 0:e.hasMore)?(0,i.jsx)(i3.default,{size:12}):"",(null==e?void 0:e.message)==="Processing PDF..."&&(null==e?void 0:e.hasMore)&&(null!==d?(0,i.jsx)(vB,{value:d,size:18}):(0,i.jsx)(i3.default,{size:18}))]})]},t):null)}),(0,i.jsx)(i8.default,{ref:y,placeholder:"Ask bookworm anything about your PDF...",fullWidth:!0,value:o,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),x()):"ArrowUp"===e.key?A(-1):"ArrowDown"===e.key?A(1):u(null)},multiline:!0,sx:{mt:{xs:2}},endAdornment:(0,i.jsx)(i6.default,{position:"end",children:(0,i.jsxs)(i7.default,{direction:"row",alignSelf:"center",spacing:1,useFlexGap:!0,sx:{width:{xs:"100%",sm:"auto"}},children:[(0,i.jsx)(i5.default,{"aria-label":"submit user question",disabled:!o||!r,onClick:x,edge:"end",children:(0,i.jsx)(nn,{})}),(0,i.jsx)(i5.default,{"aria-label":"clear chat history",disabled:!(null==e?void 0:e.length),onClick:()=>m([]),edge:"end",children:(0,i.jsx)(ni,{})})]})})})]})]})}var b_=e.i(92527),bS=e.i(53174),bE=i7;let bM=(0,y.default)((0,i.jsx)("path",{d:"m20.45 6 .49-1.06L22 4.45c.39-.18.39-.73 0-.91l-1.06-.49L20.45 2c-.18-.39-.73-.39-.91 0l-.49 1.06-1.05.49c-.39.18-.39.73 0 .91l1.06.49.49 1.05c.17.39.73.39.9 0M8.95 6l.49-1.06 1.06-.49c.39-.18.39-.73 0-.91l-1.06-.48L8.95 2c-.17-.39-.73-.39-.9 0l-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49L8.05 6c.17.39.73.39.9 0m10.6 7.5-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49.49 1.06c.18.39.73.39.91 0l.49-1.06 1.05-.5c.39-.18.39-.73 0-.91l-1.06-.49-.49-1.06c-.17-.38-.73-.38-.9.01m-1.84-4.38-2.83-2.83a.996.996 0 0 0-1.41 0L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.39.39 1.02.39 1.41 0L17.7 10.53c.4-.38.4-1.02.01-1.41m-3.5 2.09L12.8 9.8l1.38-1.38 1.41 1.41z"}),"AutoFixHighRounded"),bC=(0,y.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),bT=(0,y.default)([(0,i.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,i.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),bP=[{icon:(0,i.jsx)(bC,{}),title:"Efficiency and Time-Saving",description:"Bookworm dramatically reduces the time you spend reading and comprehending long PDF documents. By providing concise summaries, it allows you to grasp the key points quickly, freeing up time for other tasks or deeper study on specific areas of interest."},{icon:(0,i.jsx)(bT,{}),title:"Enhanced Understanding",description:"With the ability to ask specific questions about the PDF content, Bookworm enhances your understanding by clarifying complex information and providing detailed insights. This feature is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."},{icon:(0,i.jsx)(bM,{}),title:"Accessibility and Convenience",description:"Bookworm is designed to be accessible anywhere and anytime. Whether youre on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages. This makes it an invaluable tool for students, professionals, and anyone who needs to process written content efficiently."}];function bR(){return(0,i.jsx)(a.default,{id:"highlights",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},color:"white",bgcolor:"#06090a"},children:(0,i.jsxs)(d.default,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsxs)(a.default,{sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:[(0,i.jsx)(p.default,{component:"h2",variant:"h4",children:"Highlights"}),(0,i.jsxs)(p.default,{variant:"body1",sx:{color:"grey.400"},children:[(0,i.jsx)(p.default,{variant:"body1",component:"span",color:"text.contrastText",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","stands out with its advanced AI that not only summarizes PDFs but also answers content-specific questions, offering an intuitive, user-friendly interface that improves over time, making it an essential tool for efficient document handling and deeper comprehension."]})]}),(0,i.jsx)(bS.default,{container:!0,spacing:2.5,children:bP.map((e,t)=>(0,i.jsx)(bS.default,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsxs)(bE.default,{direction:"column",color:"inherit",component:b_.default,spacing:1,useFlexGap:!0,sx:{p:3,height:"100%",border:"1px solid",borderColor:"grey.800",background:"transparent",backgroundColor:"grey.900"},children:[(0,i.jsx)(a.default,{sx:{opacity:"50%"},children:e.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p.default,{fontWeight:"medium",gutterBottom:!0,children:e.title}),(0,i.jsx)(p.default,{variant:"body2",sx:{color:"grey.400"},children:e.description})]})]})},t))})]})})}var bI=e.i(6586),bL=e.i(52836),bD=e.i(18827),bF=e.i(27001),bO=e.i(66352),bO=bO;function bN(e){return(0,v6.default)("MuiCollapse",e)}(0,v5.default)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let bW=(0,bt.styled)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],"entered"===i.state&&t.entered,"exited"===i.state&&!i.in&&"0px"===i.collapsedSize&&t.hidden]}})((0,bn.default)(e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}})),bj=(0,bt.styled)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bB=(0,bt.styled)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bz=n.forwardRef(function(e,t){let r=(0,br.useDefaultProps)({props:e,name:"MuiCollapse"}),{addEndListener:a,children:s,className:l,collapsedSize:o="0px",component:h,easing:c,in:u,onEnter:d,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:b,orientation:w="vertical",style:y,timeout:x=bD.duration.standard,TransitionComponent:A=bI.Transition,...k}=r,_={...r,orientation:w,collapsedSize:o},S=(e=>{let{orientation:t,classes:i}=e;return(0,v$.default)({root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]},bN,i)})(_),E=(0,bi.useTheme)(),M=(0,bL.default)(),C=n.useRef(null),T=n.useRef(),P="number"==typeof o?"".concat(o,"px"):o,R="horizontal"===w,I=R?"width":"height",L=n.useRef(null),D=(0,bO.default)(t,L),F=e=>t=>{if(e){let i=L.current;void 0===t?e(i):e(i,t)}},O=()=>C.current?C.current[R?"clientWidth":"clientHeight"]:0,N=F((e,t)=>{C.current&&R&&(C.current.style.position="absolute"),e.style[I]=P,d&&d(e,t)}),W=F((e,t)=>{let i=O();C.current&&R&&(C.current.style.position="");let{duration:n,easing:r}=(0,bF.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"enter"});if("auto"===x){let t=E.transitions.getAutoHeightDuration(i);e.style.transitionDuration="".concat(t,"ms"),T.current=t}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style[I]="".concat(i,"px"),e.style.transitionTimingFunction=r,f&&f(e,t)}),j=F((e,t)=>{e.style[I]="auto",p&&p(e,t)}),B=F(e=>{e.style[I]="".concat(O(),"px"),g&&g(e)}),z=F(m),H=F(e=>{let t=O(),{duration:i,easing:n}=(0,bF.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"exit"});if("auto"===x){let i=E.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(i,"ms"),T.current=i}else e.style.transitionDuration="string"==typeof i?i:"".concat(i,"ms");e.style[I]=P,e.style.transitionTimingFunction=n,b&&b(e)});return(0,i.jsx)(A,{in:u,onEnter:N,onEntered:j,onEntering:W,onExit:B,onExited:z,onExiting:H,addEndListener:e=>{"auto"===x&&M.start(T.current||0,e),a&&a(L.current,e)},nodeRef:L,timeout:"auto"===x?null:x,...k,children:(e,t)=>{let{ownerState:n,...r}=t;return(0,i.jsx)(bW,{as:h,className:(0,vZ.default)(S.root,l,{entered:S.entered,exited:!u&&"0px"===P&&S.hidden}[e]),style:{[R?"minWidth":"minHeight"]:P,...y},ref:D,ownerState:{..._,state:e},...r,children:(0,i.jsx)(bj,{ownerState:{..._,state:e},className:S.wrapper,ref:C,children:(0,i.jsx)(bB,{ownerState:{..._,state:e},className:S.wrapperInner,children:s})})})}})});bz&&(bz.muiSupportAuto=!0);let bH=n.createContext({});var bU=e.i(16e3);function bG(e){return(0,v6.default)("MuiAccordion",e)}let bV=(0,v5.default)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),bq=(0,bt.styled)(v4.default,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{["& .".concat(bV.region)]:t.region},t.root,!i.square&&t.rounded,!i.disableGutters&&t.gutters]}})((0,bn.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],i),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],i)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(bV.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(bV.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(0,bn.default)(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(bV.expanded)]:{margin:"16px 0"}}}]}})),bX=(0,bt.styled)("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),bK=n.forwardRef(function(e,t){let r=(0,br.useDefaultProps)({props:e,name:"MuiAccordion"}),{children:a,className:s,defaultExpanded:l=!1,disabled:o=!1,disableGutters:h=!1,expanded:c,onChange:u,square:d=!1,slots:p={},slotProps:f={},TransitionComponent:g,TransitionProps:m,...b}=r,[w,y]=(0,bU.default)({controlled:c,default:l,name:"Accordion",state:"expanded"}),x=n.useCallback(e=>{y(!w),u&&u(e,!w)},[w,u,y]),[A,...k]=n.Children.toArray(a),_=n.useMemo(()=>({expanded:w,disabled:o,disableGutters:h,toggle:x}),[w,o,h,x]),S={...r,square:d,disabled:o,disableGutters:h,expanded:w},E=(e=>{let{classes:t,square:i,expanded:n,disabled:r,disableGutters:a}=e;return(0,v$.default)({root:["root",!i&&"rounded",n&&"expanded",r&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},bG,t)})(S),M={slots:{transition:g,...p},slotProps:{transition:m,...f}},[C,T]=(0,ba.default)("root",{elementType:bq,externalForwardedProps:{...M,...b},className:(0,vZ.default)(E.root,s),shouldForwardComponentProp:!0,ownerState:S,ref:t,additionalProps:{square:d}}),[P,R]=(0,ba.default)("heading",{elementType:bX,externalForwardedProps:M,className:E.heading,ownerState:S}),[I,L]=(0,ba.default)("transition",{elementType:bz,externalForwardedProps:M,ownerState:S});return(0,i.jsxs)(C,{...T,children:[(0,i.jsx)(P,{...R,children:(0,i.jsx)(bH.Provider,{value:_,children:A})}),(0,i.jsx)(I,{in:w,timeout:"auto",...L,children:(0,i.jsx)("div",{"aria-labelledby":A.props.id,id:A.props["aria-controls"],role:"region",className:E.region,children:k})})]})});function bY(e){return(0,v6.default)("MuiAccordionDetails",e)}(0,v5.default)("MuiAccordionDetails",["root"]);let bQ=(0,bt.styled)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bn.default)(e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),bJ=n.forwardRef(function(e,t){let n=(0,br.useDefaultProps)({props:e,name:"MuiAccordionDetails"}),{className:r,...a}=n,s=(e=>{let{classes:t}=e;return(0,v$.default)({root:["root"]},bY,t)})(n);return(0,i.jsx)(bQ,{className:(0,vZ.default)(s.root,r),ref:t,ownerState:n,...a})});var bZ=e.i(20103);function b$(e){return(0,v6.default)("MuiAccordionSummary",e)}let b0=(0,v5.default)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),b1=(0,bt.styled)(bZ.default,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bn.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],i),["&.".concat(b0.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(b0.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(b0.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(b0.expanded)]:{minHeight:64}}}]}})),b2=(0,bt.styled)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,bn.default)(e=>{let{theme:t}=e;return{display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(b0.expanded)]:{margin:"20px 0"}}}]}})),b3=(0,bt.styled)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,bn.default)(e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(b0.expanded)]:{transform:"rotate(180deg)"}}})),b4=n.forwardRef(function(e,t){let r=(0,br.useDefaultProps)({props:e,name:"MuiAccordionSummary"}),{children:a,className:s,expandIcon:l,focusVisibleClassName:o,onClick:h,slots:c,slotProps:u,...d}=r,{disabled:p=!1,disableGutters:f,expanded:g,toggle:m}=n.useContext(bH),b={...r,expanded:g,disabled:p,disableGutters:f},w=(e=>{let{classes:t,expanded:i,disabled:n,disableGutters:r}=e;return(0,v$.default)({root:["root",i&&"expanded",n&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},b$,t)})(b),y={slots:c,slotProps:u},[x,A]=(0,ba.default)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,vZ.default)(w.root,s),elementType:b1,externalForwardedProps:{...y,...d},ownerState:b,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":g,focusVisibleClassName:(0,vZ.default)(w.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{var i;null==(i=e.onClick)||i.call(e,t),m&&m(t),h&&h(t)}})}),[k,_]=(0,ba.default)("content",{className:w.content,elementType:b2,externalForwardedProps:y,ownerState:b}),[S,E]=(0,ba.default)("expandIconWrapper",{className:w.expandIconWrapper,elementType:b3,externalForwardedProps:y,ownerState:b});return(0,i.jsxs)(x,{...A,children:[(0,i.jsx)(k,{..._,children:a}),l&&(0,i.jsx)(S,{...E,children:l})]})});var b=a,ne=p;let b5=(0,y.default)((0,i.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");function b6(){let[e,t]=n.useState(!1),r=e=>(i,n)=>{t(!!n&&e)};return(0,i.jsxs)(i4.Container,{id:"faq",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsx)(ne.default,{component:"h2",variant:"h4",color:"text.primary",sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:"Frequently asked questions"}),(0,i.jsxs)(b.default,{sx:{width:"100%"},children:[(0,i.jsxs)(bK,{expanded:"panel1"===e,onChange:r("panel1"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel1d-content",id:"panel1d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["What is"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions. It offers a user-friendly interface and continuously improves over time to provide efficient document handling and deeper comprehension."})})]}),(0,i.jsxs)(bK,{expanded:"panel2"===e,onChange:r("panel2"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel2d-content",id:"panel2d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","save time?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm dramatically reduces the time spent reading and comprehending long PDF documents by providing concise summaries. This allows users to quickly grasp key points, freeing up time for other tasks or deeper study on specific areas of interest."})})]}),(0,i.jsxs)(bK,{expanded:"panel3"===e,onChange:r("panel3"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","enhance understanding?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm enhances understanding by allowing users to ask specific questions about the PDF content. It clarifies complex information and provides detailed insights, which is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."})})]}),(0,i.jsxs)(bK,{expanded:"panel4"===e,onChange:r("panel4"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel4d-content",id:"panel4d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","accessible anywhere?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is designed to be accessible anywhere and anytime. Whether you're on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages."})})]}),(0,i.jsxs)(bK,{expanded:"panel5"===e,onChange:r("panel5"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel5d-content",id:"panel5d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Who can benefit from using"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is beneficial for students, professionals, and anyone who deals with large volumes of PDF documents. It helps streamline document handling, improve comprehension, and save time, making it an invaluable tool for various tasks and industries."})})]}),(0,i.jsxs)(bK,{expanded:"panel6"===e,onChange:r("panel6"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel6d-content",id:"panel6d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","handle different types of PDF documents?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is versatile and can handle various types of PDF documents, including academic papers, technical manuals, reports, and more. Its advanced AI capabilities adapt to different content structures and complexities to provide accurate summaries and insights."})})]}),(0,i.jsxs)(bK,{expanded:"panel7"===e,onChange:r("panel7"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel7d-content",id:"panel7d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","easy to use?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm offers an intuitive, user-friendly interface that is easy to navigate. Its features are designed to be accessible and straightforward, allowing users to upload documents, ask questions, and interact with the content seamlessly."})})]}),(0,i.jsxs)(bK,{expanded:"panel8"===e,onChange:r("panel8"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel8d-content",id:"panel8d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Does"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","require any installation?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"No, Bookworm is a web-based application that does not require any installation. Users can access it directly through their web browsers, making it convenient to use on any device with an internet connection."})})]}),(0,i.jsxs)(bK,{expanded:"panel9"===e,onChange:r("panel9"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel9d-content",id:"panel9d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","secure?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm takes user privacy and data security seriously. It uses encryption and other security measures to protect user data and ensure confidentiality while handling PDF documents. Additionally, Bookworm does not store uploaded documents after processing."})})]}),(0,i.jsxs)(bK,{expanded:"panel10"===e,onChange:r("panel10"),children:[(0,i.jsx)(b4,{expandIcon:(0,i.jsx)(b5,{}),"aria-controls":"panel10d-content",id:"panel10d-header",children:(0,i.jsxs)(ne.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(ne.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","be used for collaborative work?"]})}),(0,i.jsx)(bJ,{children:(0,i.jsx)(ne.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Currently, Bookworm is primarily designed for individual use. However, future updates may include collaborative features to facilitate teamwork and document sharing among users."})})]})]})]})}var b=a,w=u,i5=i5,i9=i9,i7=i7,b9=e.i(15134),b9=b9,ne=p;let b8=(0,y.default)((0,i.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),b7=(0,y.default)((0,i.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),we={width:"140px",height:"auto"};function wt(){return(0,i.jsxs)(ne.default,{variant:"body2",color:"text.secondary",mt:1,children:["Copyright  ",(0,i.jsx)(i9.default,{href:"https://github.com/rfranks/bookworm",children:(0,i.jsx)(ne.default,{variant:"body2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})})," ",new Date().getFullYear()]})}function wi(){let[e,t]=n.useState(""),r=e=>{let i=document.getElementById(e);if(i){let e=i.offsetTop-128;i.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),t("")}};return(0,i.jsxs)(i4.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:4,sm:8},py:{xs:8,sm:10},textAlign:{sm:"center",md:"left"}},children:[(0,i.jsx)(bA,{open:"terms"===e,onClose:()=>t("")}),(0,i.jsxs)(bc,{open:"aboutUs"===e,onClose:()=>t(""),children:[(0,i.jsx)(bf,{children:"About Us"}),(0,i.jsx)(i5.default,{"aria-label":"close",onClick:()=>t(""),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bx,{})}),(0,i.jsx)(bv,{children:(0,i.jsx)(i1,{children:"\nBookworm is an innovative AI-powered tool designed to revolutionize the way we interact with PDF documents. Our mission is to empower users to efficiently handle and comprehend large volumes of textual content with ease.\n\n## Our Vision\n\nAt Bookworm, we envision a future where accessing and understanding complex documents is effortless. By leveraging advanced artificial intelligence technologies, we aim to provide users with intelligent summaries, insightful analysis, and instant answers to content-specific questions.\n\n## Our Mission\n\nOur mission is to simplify the process of document handling and comprehension. We strive to save users time and effort by offering a user-friendly interface that allows for seamless interaction with PDF documents. Whether you're a student, professional, or researcher, Bookworm is your essential companion for unlocking the wealth of knowledge hidden within your documents.\n\n## Key Features\n\n- **Summarization**: Bookworm generates concise summaries of PDF documents, enabling users to grasp key points quickly.\n- **Question-Answering**: With Bookworm's question-answering capability, users can ask specific questions about the content and receive instant answers.\n- **Continuous Improvement**: Bookworm's AI algorithms continuously learn and improve over time, ensuring that users receive the most accurate and relevant information.\n- **Accessibility**: Bookworm is accessible anywhere, anytime, allowing users to upload and interact with documents on the go.\n\n## Meet the Team\n\nOur team consists of passionate individuals dedicated to making document handling and comprehension more efficient and accessible. With expertise in artificial intelligence, natural language processing, and user experience design, we're committed to delivering an exceptional user experience with Bookworm.\n\n## Contact Us\n\nHave questions or feedback? We'd love to hear from you! Feel free to reach out to us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com) and join us on our mission to revolutionize document handling and comprehension with Bookworm.\n"})}),(0,i.jsx)(by,{children:(0,i.jsx)(w.default,{onClick:()=>t(""),children:"OK"})})]}),(0,i.jsxs)(b.default,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},width:"100%",justifyContent:"space-between"},children:[(0,i.jsx)(b.default,{sx:{display:"flex",flexDirection:"column",gap:4,minWidth:{xs:"100%",sm:"60%"}},children:(0,i.jsxs)(b.default,{sx:{width:{xs:"100%",sm:"60%"}},children:[(0,i.jsx)(b.default,{sx:{ml:"-15px"},children:(0,i.jsx)(_.default,{src:"/logo192.png",style:we,alt:"bookworm logo",width:192,height:194})}),(0,i.jsx)(ne.default,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Newsletter"}),(0,i.jsx)(ne.default,{variant:"body2",color:"text.secondary",mb:2,children:"Subscribe to our newsletter for weekly updates and promotions."}),(0,i.jsxs)(i7.default,{direction:"row",spacing:1,useFlexGap:!0,children:[(0,i.jsx)(b9.default,{id:"outlined-basic",hiddenLabel:!0,size:"small",variant:"outlined",fullWidth:!0,"aria-label":"Enter your email address",placeholder:"Your email address",inputProps:{autoComplete:"off","aria-label":"Enter your email address"}}),(0,i.jsx)(w.default,{variant:"contained",color:"primary",sx:{flexShrink:0},children:"Subscribe"})]})]})}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("highlights"),children:"Highlights"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("pricing"),children:"Pricing"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("faq"),children:"FAQs"})]}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(ne.default,{variant:"body2",fontWeight:600,children:"Company"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("aboutUs"),children:"About us"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Careers"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Press"})]}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(ne.default,{variant:"body2",fontWeight:600,children:"Legal"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Privacy"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Contact"})]})]}),(0,i.jsxs)(b.default,{sx:{display:"flex",justifyContent:"space-between",pt:{xs:4,sm:8},width:"100%",borderTop:"1px solid",borderColor:"divider"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Privacy Policy"}),(0,i.jsx)(ne.default,{display:"inline",sx:{mx:.5,opacity:.5},children:""}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms of Service"}),(0,i.jsx)(wt,{})]}),(0,i.jsxs)(i7.default,{direction:"row",justifyContent:"left",spacing:1,useFlexGap:!0,sx:{color:"text.secondary"},children:[(0,i.jsx)(i5.default,{color:"inherit",href:"https://github.com/rfranks/bookworm","aria-label":"GitHub",sx:{alignSelf:"center"},children:(0,i.jsx)(b8,{})}),(0,i.jsx)(i5.default,{color:"inherit",href:"https://www.linkedin.com/in/richardfranksjr/","aria-label":"LinkedIn",sx:{alignSelf:"center"},children:(0,i.jsx)(b7,{})})]})]})]})}function wn(){let[e,t]=n.useState("light"),h=(0,o.createTheme)({palette:{mode:e}});return(0,i.jsxs)(l.ThemeProvider,{theme:h,children:[(0,i.jsx)(r.default,{}),(0,i.jsx)(E,{mode:e,toggleColorMode:()=>{t(e=>"dark"===e?"light":"dark")}}),(0,i.jsx)(bk,{}),(0,i.jsxs)(a.default,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(bR,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(b6,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(wi,{})]})]})}}]);