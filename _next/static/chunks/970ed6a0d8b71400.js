(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94909,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(i,{default:function(){return o},getImageProps:function(){return l}});let n=e.r(55682),r=e.r(8927),a=e.r(5500),s=n._(e.r(1948));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/portfolio/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let o=a.Image},57688,(e,t,i)=>{t.exports=e.r(94909)},95672,(e,t,i)=>{var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,r=/\n/g,a=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,h=/^[;\s]*/,c=/^\s+|\s+$/g;function u(e){return e?e.replace(c,""):""}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var i=1,c=1;function d(e){var t=e.match(r);t&&(i+=t.length);var n=e.lastIndexOf("\n");c=~n?e.length-n:c+e.length}function p(){var e={line:i,column:c};return function(t){return t.position=new f(e),b(a),t}}function f(e){this.start=e,this.end={line:i,column:c},this.source=t.source}f.prototype.content=e;var g=[];function m(n){var r=Error(t.source+":"+i+":"+c+": "+n);if(r.reason=n,r.filename=t.source,r.line=i,r.column=c,r.source=e,t.silent)g.push(r);else throw r}function b(t){var i=t.exec(e);if(i){var n=i[0];return d(n),e=e.slice(n.length),i}}function w(e){var t;for(e=e||[];t=y();)!1!==t&&e.push(t);return e}function y(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var i=2;""!=e.charAt(i)&&("*"!=e.charAt(i)||"/"!=e.charAt(i+1));)++i;if(i+=2,""===e.charAt(i-1))return m("End of comment missing");var n=e.slice(2,i-2);return c+=2,d(n),e=e.slice(i),c+=2,t({type:"comment",comment:n})}}b(a);var x,A=[];for(w(A);x=function(){var e=p(),t=b(s);if(t){if(y(),!b(l))return m("property missing ':'");var i=b(o),r=e({type:"declaration",property:u(t[0].replace(n,"")),value:i?u(i[0].replace(n,"")):""});return b(h),r}}();)!1!==x&&(A.push(x),w(A));return A}},70454,(e,t,i)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=null;if(!e||"string"!=typeof e)return i;var n=(0,r.default)(e),a="function"==typeof t;return n.forEach(function(e){if("declaration"===e.type){var n=e.property,r=e.value;a?t(n,r,e):r&&((i=i||{})[n]=r)}}),i};var r=n(e.r(95672))},65185,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,a=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},h=function(e,t){return"".concat(t,"-")};i.camelCase=function(e,t){var i;return(void 0===t&&(t={}),!(i=e)||a.test(i)||n.test(i))?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(l,h):e.replace(s,h)).replace(r,o))}},15511,(e,t,i)=>{"use strict";var n=(e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e.r(70454)),r=e.r(65185);function a(e,t){var i={};return e&&"string"==typeof e&&(0,n.default)(e,function(e,n){e&&n&&(i[(0,r.camelCase)(e,t)]=n)}),i}a.default=a,t.exports=a},4100,(e,t,i)=>{"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},o=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return void 0===t||n.call(e,t)},h=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;else if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,i,n,r,a,s,u=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},d=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});d<p;++d)if(t=arguments[d],null!=t)for(i in t)n=c(u,i),u!==(r=c(t,i))&&(f&&r&&(o(r)||(a=l(r)))?(a?(a=!1,s=n&&l(n)?n:[]):s=n&&o(n)?n:{},h(u,{name:i,newValue:e(f,s,r)})):void 0!==r&&h(u,{name:i,newValue:r}));return u}},1484,e=>{"use strict";let t;e.s(["default",()=>wf],1484);var i=e.i(43476),n=e.i(71645),r=e.i(62406),a=e.i(63665),s=e.i(98166),l=e.i(75756),o=e.i(84240),h=e.i(28885),c=e.i(72260),u=e.i(22030),d=e.i(54526),p=e.i(89820),f=e.i(51449),g=e.i(48251),m=e.i(31526),b=a,w=u,y=e.i(59173);let x=(0,y.default)((0,i.jsx)("path",{d:"m6.05 4.14-.39-.39c-.39-.39-1.02-.38-1.4 0l-.01.01c-.39.39-.39 1.02 0 1.4l.39.39c.39.39 1.01.39 1.4 0l.01-.01c.39-.38.39-1.02 0-1.4M3.01 10.5H1.99c-.55 0-.99.44-.99.99v.01c0 .55.44.99.99.99H3c.56.01 1-.43 1-.98v-.01c0-.56-.44-1-.99-1m9-9.95H12c-.56 0-1 .44-1 .99v.96c0 .55.44.99.99.99H12c.56.01 1-.43 1-.98v-.97c0-.55-.44-.99-.99-.99m7.74 3.21c-.39-.39-1.02-.39-1.41-.01l-.39.39c-.39.39-.39 1.02 0 1.4l.01.01c.39.39 1.02.39 1.4 0l.39-.39c.39-.39.39-1.01 0-1.4m-1.81 15.1.39.39c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-.39-.39c-.39-.39-1.02-.38-1.4 0-.4.4-.4 1.02-.01 1.41M20 11.49v.01c0 .55.44.99.99.99H22c.55 0 .99-.44.99-.99v-.01c0-.55-.44-.99-.99-.99h-1.01c-.55 0-.99.44-.99.99M12 5.5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-.01 16.95H12c.55 0 .99-.44.99-.99v-.96c0-.55-.44-.99-.99-.99h-.01c-.55 0-.99.44-.99.99v.96c0 .55.44.99.99.99m-7.74-3.21c.39.39 1.02.39 1.41 0l.39-.39c.39-.39.38-1.02 0-1.4l-.01-.01a.996.996 0 0 0-1.41 0l-.39.39c-.38.4-.38 1.02.01 1.41"}),"WbSunnyRounded"),A=(0,y.default)((0,i.jsx)("path",{d:"M11.93 2.3c-2.04-.5-4.02-.35-5.77.28-.72.26-.91 1.22-.31 1.71C8.08 6.12 9.5 8.89 9.5 12s-1.42 5.88-3.65 7.71c-.59.49-.42 1.45.31 1.7 1.04.38 2.17.59 3.34.59 6.05 0 10.85-5.38 9.87-11.6-.61-3.92-3.59-7.16-7.44-8.1"}),"ModeNightRounded"),k=function(e){let{mode:t,toggleColorMode:n}=e;return(0,i.jsx)(b.default,{sx:{maxWidth:"32px"},children:(0,i.jsx)(w.default,{variant:"text",onClick:n,size:"small","aria-label":"button to toggle theme",sx:{minWidth:"32px",height:"32px",p:"4px"},children:"dark"===t?(0,i.jsx)(x,{fontSize:"small"}):(0,i.jsx)(A,{fontSize:"small"})})})};var _=e.i(57688);let S={width:"64px",height:"auto",cursor:"pointer"},E=function(e){let{mode:t,toggleColorMode:r}=e,[l,o]=n.useState(!1),b=e=>()=>{o(e)},w=e=>{let t=document.getElementById(e);if(t){let e=t.offsetTop-128;t.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),o(!1)}};return(0,i.jsx)("div",{children:(0,i.jsx)(h.default,{position:"fixed",sx:{boxShadow:0,bgcolor:"transparent",backgroundImage:"none",mt:2},children:(0,i.jsx)(d.default,{maxWidth:"lg",children:(0,i.jsxs)(c.default,{variant:"regular",sx:e=>({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,borderRadius:"999px",bgcolor:"light"===e.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(24px)",maxHeight:40,border:"1px solid",borderColor:"divider",boxShadow:"light"===e.palette.mode?"0 0 1px rgba(85, 166, 246, 0.1), 1px 1.5px 2px -1px rgba(85, 166, 246, 0.15), 4px 4px 12px -2.5px rgba(85, 166, 246, 0.15)":"0 0 1px rgba(2, 31, 59, 0.7), 1px 1.5px 2px -1px rgba(2, 31, 59, 0.65), 4px 4px 12px -2.5px rgba(2, 31, 59, 0.65)"}),children:[(0,i.jsxs)(a.default,{sx:{flexGrow:1,display:"flex",alignItems:"center",ml:"-18px",px:0},children:[(0,i.jsx)(_.default,{src:"/logo192.png",style:S,alt:"bookworm logo",width:192,height:194}),(0,i.jsx)(p.default,{onClick:()=>w("hero"),variant:"h4",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"}},children:[(0,i.jsx)(f.default,{onClick:()=>w("highlights"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Highlights"})}),(0,i.jsx)(f.default,{onClick:()=>w("pricing"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Pricing"})}),(0,i.jsx)(f.default,{onClick:()=>w("faq"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"FAQ"})})]})]}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"},gap:.5,alignItems:"center"},children:[(0,i.jsx)(k,{mode:t,toggleColorMode:r}),(0,i.jsx)(u.default,{color:"primary",variant:"text",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",children:"Sign in"}),(0,i.jsx)(u.default,{color:"primary",variant:"contained",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",children:"Sign up"})]}),(0,i.jsxs)(a.default,{sx:{display:{sm:"",md:"none"}},children:[(0,i.jsx)(u.default,{variant:"text",color:"primary","aria-label":"menu",onClick:b(!0),sx:{minWidth:"30px",p:"4px"},children:(0,i.jsx)(m.default,{})}),(0,i.jsx)(g.default,{anchor:"right",open:l,onClose:b(!1),children:(0,i.jsxs)(a.default,{sx:{minWidth:"60dvw",p:2,backgroundColor:"background.paper",flexGrow:1},children:[(0,i.jsx)(a.default,{sx:{display:"flex",flexDirection:"column",alignItems:"end",flexGrow:1},children:(0,i.jsx)(k,{mode:t,toggleColorMode:r})}),(0,i.jsx)(f.default,{onClick:()=>w("features"),children:"Features"}),(0,i.jsx)(f.default,{onClick:()=>w("testimonials"),children:"Testimonials"}),(0,i.jsx)(f.default,{onClick:()=>w("highlights"),children:"Highlights"}),(0,i.jsx)(f.default,{onClick:()=>w("pricing"),children:"Pricing"}),(0,i.jsx)(f.default,{onClick:()=>w("faq"),children:"FAQ"}),(0,i.jsx)(s.default,{}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"contained",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",sx:{width:"100%"},children:"Sign up"})}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"outlined",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",sx:{width:"100%"},children:"Sign in"})})]})})]})]})})})})};function M(){}function C(){}RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let T=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),P=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),R={};function I(e,t){return((t||R).jsx?P:T).test(e)}let L=/[ \t\n\f\r]/g;function D(e){return""===e.replace(L,"")}class F{constructor(e,t){this.attribute=t,this.property=e}}F.prototype.attribute="",F.prototype.booleanish=!1,F.prototype.boolean=!1,F.prototype.commaOrSpaceSeparated=!1,F.prototype.commaSeparated=!1,F.prototype.defined=!1,F.prototype.mustUseProperty=!1,F.prototype.number=!1,F.prototype.overloadedBoolean=!1,F.prototype.property="",F.prototype.spaceSeparated=!1,F.prototype.space=void 0,e.s(["boolean",()=>O,"booleanish",()=>W,"commaOrSpaceSeparated",()=>U,"commaSeparated",()=>H,"number",()=>B,"overloadedBoolean",()=>j,"spaceSeparated",()=>z],744);let N=0,O=G(),W=G(),j=G(),B=G(),z=G(),H=G(),U=G();function G(){return 2**++N}var V=e.i(744);let q=Object.keys(V);class X extends F{constructor(e,t,i,n){let r=-1;if(super(e,t),function(e,t,i){i&&(e[t]=i)}(this,"space",n),"number"==typeof i)for(;++r<q.length;){let e=q[r];!function(e,t,i){i&&(e[t]=i)}(this,q[r],(i&V[e])===V[e])}}}function K(e){return e.toLowerCase()}X.prototype.defined=!0;let Y=/[A-Z]/g,Q=/-[a-z]/g,J=/^data[-\w.:]+$/i;function Z(e){return"-"+e.toLowerCase()}function $(e){return e.charAt(1).toUpperCase()}let ee={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};class et{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}function ei(e,t){let i={},n={};for(let t of e)Object.assign(i,t.property),Object.assign(n,t.normal);return new et(i,n,t)}function en(e){let t={},i={};for(let[n,r]of Object.entries(e.properties)){let a=new X(n,e.transform(e.attributes||{},n),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),t[n]=a,i[K(n)]=n,i[K(a.attribute)]=n}return new et(t,i,e.space)}et.prototype.normal={},et.prototype.property={},et.prototype.space=void 0;let er=en({properties:{ariaActiveDescendant:null,ariaAtomic:W,ariaAutoComplete:null,ariaBusy:W,ariaChecked:W,ariaColCount:B,ariaColIndex:B,ariaColSpan:B,ariaControls:z,ariaCurrent:null,ariaDescribedBy:z,ariaDetails:null,ariaDisabled:W,ariaDropEffect:z,ariaErrorMessage:null,ariaExpanded:W,ariaFlowTo:z,ariaGrabbed:W,ariaHasPopup:null,ariaHidden:W,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:z,ariaLevel:B,ariaLive:null,ariaModal:W,ariaMultiLine:W,ariaMultiSelectable:W,ariaOrientation:null,ariaOwns:z,ariaPlaceholder:null,ariaPosInSet:B,ariaPressed:W,ariaReadOnly:W,ariaRelevant:null,ariaRequired:W,ariaRoleDescription:z,ariaRowCount:B,ariaRowIndex:B,ariaRowSpan:B,ariaSelected:W,ariaSetSize:B,ariaSort:null,ariaValueMax:B,ariaValueMin:B,ariaValueNow:B,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function ea(e,t){return t in e?e[t]:t}function es(e,t){return ea(e,t.toLowerCase())}let el=en({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:H,acceptCharset:z,accessKey:z,action:null,allow:null,allowFullScreen:O,allowPaymentRequest:O,allowUserMedia:O,alt:null,as:null,async:O,autoCapitalize:null,autoComplete:z,autoFocus:O,autoPlay:O,blocking:z,capture:null,charSet:null,checked:O,cite:null,className:z,cols:B,colSpan:null,content:null,contentEditable:W,controls:O,controlsList:z,coords:B|H,crossOrigin:null,data:null,dateTime:null,decoding:null,default:O,defer:O,dir:null,dirName:null,disabled:O,download:j,draggable:W,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:O,formTarget:null,headers:z,height:B,hidden:j,high:B,href:null,hrefLang:null,htmlFor:z,httpEquiv:z,id:null,imageSizes:null,imageSrcSet:null,inert:O,inputMode:null,integrity:null,is:null,isMap:O,itemId:null,itemProp:z,itemRef:z,itemScope:O,itemType:z,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:O,low:B,manifest:null,max:null,maxLength:B,media:null,method:null,min:null,minLength:B,multiple:O,muted:O,name:null,nonce:null,noModule:O,noValidate:O,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:O,optimum:B,pattern:null,ping:z,placeholder:null,playsInline:O,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:O,referrerPolicy:null,rel:z,required:O,reversed:O,rows:B,rowSpan:B,sandbox:z,scope:null,scoped:O,seamless:O,selected:O,shadowRootClonable:O,shadowRootDelegatesFocus:O,shadowRootMode:null,shape:null,size:B,sizes:null,slot:null,span:B,spellCheck:W,src:null,srcDoc:null,srcLang:null,srcSet:null,start:B,step:null,style:null,tabIndex:B,target:null,title:null,translate:null,type:null,typeMustMatch:O,useMap:null,value:W,width:B,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:z,axis:null,background:null,bgColor:null,border:B,borderColor:null,bottomMargin:B,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:O,declare:O,event:null,face:null,frame:null,frameBorder:null,hSpace:B,leftMargin:B,link:null,longDesc:null,lowSrc:null,marginHeight:B,marginWidth:B,noResize:O,noHref:O,noShade:O,noWrap:O,object:null,profile:null,prompt:null,rev:null,rightMargin:B,rules:null,scheme:null,scrolling:W,standby:null,summary:null,text:null,topMargin:B,valueType:null,version:null,vAlign:null,vLink:null,vSpace:B,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:O,disableRemotePlayback:O,prefix:null,property:null,results:B,security:null,unselectable:null},space:"html",transform:es}),eo=en({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:U,accentHeight:B,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:B,amplitude:B,arabicForm:null,ascent:B,attributeName:null,attributeType:null,azimuth:B,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:B,by:null,calcMode:null,capHeight:B,className:z,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:B,diffuseConstant:B,direction:null,display:null,dur:null,divisor:B,dominantBaseline:null,download:O,dx:null,dy:null,edgeMode:null,editable:null,elevation:B,enableBackground:null,end:null,event:null,exponent:B,externalResourcesRequired:null,fill:null,fillOpacity:B,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:H,g2:H,glyphName:H,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:B,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:B,horizOriginX:B,horizOriginY:B,id:null,ideographic:B,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:B,k:B,k1:B,k2:B,k3:B,k4:B,kernelMatrix:U,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:B,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:B,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:B,overlineThickness:B,paintOrder:null,panose1:null,path:null,pathLength:B,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:z,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:B,pointsAtY:B,pointsAtZ:B,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:U,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:U,rev:U,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:U,requiredFeatures:U,requiredFonts:U,requiredFormats:U,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:B,specularExponent:B,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:B,strikethroughThickness:B,string:null,stroke:null,strokeDashArray:U,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:B,strokeOpacity:B,strokeWidth:null,style:null,surfaceScale:B,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:U,tabIndex:B,tableValues:null,target:null,targetX:B,targetY:B,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:U,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:B,underlineThickness:B,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:B,values:null,vAlphabetic:B,vMathematical:B,vectorEffect:null,vHanging:B,vIdeographic:B,version:null,vertAdvY:B,vertOriginX:B,vertOriginY:B,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:B,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ea}),eh=en({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),ec=en({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:es}),eu=en({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),ed=ei([er,el,eh,ec,eu],"html"),ep=ei([er,eo,eh,ec,eu],"svg");var ef=e.i(15511);let eg=ev("end"),em=ev("start");function ev(e){return function(t){let i=t&&t.position&&t.position[e]||{};if("number"==typeof i.line&&i.line>0&&"number"==typeof i.column&&i.column>0)return{line:i.line,column:i.column,offset:"number"==typeof i.offset&&i.offset>-1?i.offset:void 0}}}function eb(e){return e&&"object"==typeof e?"position"in e||"type"in e?ey(e.position):"start"in e||"end"in e?ey(e):"line"in e||"column"in e?ew(e):"":""}function ew(e){return ex(e&&e.line)+":"+ex(e&&e.column)}function ey(e){return ew(e&&e.start)+"-"+ew(e&&e.end)}function ex(e){return e&&"number"==typeof e?e:1}class eA extends Error{constructor(e,t,i){super(),"string"==typeof t&&(i=t,t=void 0);let n="",r={},a=!1;if(t&&(r="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?n=e:!r.cause&&e&&(a=!0,n=e.message,r.cause=e),!r.ruleId&&!r.source&&"string"==typeof i){let e=i.indexOf(":");-1===e?r.ruleId=i:(r.source=i.slice(0,e),r.ruleId=i.slice(e+1))}if(!r.place&&r.ancestors&&r.ancestors){let e=r.ancestors[r.ancestors.length-1];e&&(r.place=e.position)}let s=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=n,this.line=s?s.line:void 0,this.name=eb(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=a&&r.cause&&"string"==typeof r.cause.stack?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}eA.prototype.file="",eA.prototype.name="",eA.prototype.reason="",eA.prototype.message="",eA.prototype.stack="",eA.prototype.column=void 0,eA.prototype.line=void 0,eA.prototype.ancestors=void 0,eA.prototype.cause=void 0,eA.prototype.fatal=void 0,eA.prototype.place=void 0,eA.prototype.ruleId=void 0,eA.prototype.source=void 0;let ek={}.hasOwnProperty,e_=new Map,eS=/[A-Z]/g,eE=new Set(["table","tbody","thead","tfoot","tr"]),eM=new Set(["td","th"]),eC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eT(e,t,i){return"element"===t.type?function(e,t,i){let n=e.schema;"svg"===t.tagName.toLowerCase()&&"html"===n.space&&(e.schema=ep),e.ancestors.push(t);let r=eL(e,t.tagName,!1),a=function(e,t){let i,n,r={};for(n in t.properties)if("children"!==n&&ek.call(t.properties,n)){let a=function(e,t,i){let n=function(e,t){let i=K(t),n=t,r=F;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&"data"===i.slice(0,4)&&J.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(Q,$);n="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!Q.test(e)){let i=e.replace(Y,Z);"-"!==i.charAt(0)&&(i="-"+i),t="data"+i}}r=X}return new r(n,t)}(e.schema,t);if(!(null==i||"number"==typeof i&&Number.isNaN(i))){if(Array.isArray(i)&&(i=n.commaSeparated?function(e,t){let i={};return(""===e[e.length-1]?[...e,""]:e).join((i.padRight?" ":"")+","+(!1===i.padLeft?"":" ")).trim()}(i):i.join(" ").trim()),"style"===n.property){let t="object"==typeof i?i:function(e,t){try{return(0,ef.default)(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};let t=new eA("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=eC+"#cannot-parse-style-attribute",t}}(e,String(i));return"css"===e.stylePropertyNameCase&&(t=function(e){let t,i={};for(t in e)ek.call(e,t)&&(i[function(e){let t=e.replace(eS,eF);return"ms-"===t.slice(0,3)&&(t="-"+t),t}(t)]=e[t]);return i}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&n.space?ee[n.property]||n.property:n.attribute,i]}}(e,n,t.properties[n]);if(a){let[n,s]=a;e.tableCellAlignToStyle&&"align"===n&&"string"==typeof s&&eM.has(t.tagName)?i=s:r[n]=s}}return i&&((r.style||(r.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=i),r}(e,t),s=eI(e,t);return eE.has(t.tagName)&&(s=s.filter(function(e){return"string"!=typeof e||!("object"==typeof e?"text"===e.type&&D(e.value):D(e))})),eP(e,a,r,t),eR(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){let i=t.data.estree.body[0];return M("ExpressionStatement"===i.type),e.evaluater.evaluateExpression(i.expression)}eD(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,i){let n=e.schema;"svg"===t.name&&"html"===n.space&&(e.schema=ep),e.ancestors.push(t);let r=null===t.name?e.Fragment:eL(e,t.name,!0),a=function(e,t){let i={};for(let n of t.attributes)if("mdxJsxExpressionAttribute"===n.type)if(n.data&&n.data.estree&&e.evaluater){let t=n.data.estree.body[0];M("ExpressionStatement"===t.type);let r=t.expression;M("ObjectExpression"===r.type);let a=r.properties[0];M("SpreadElement"===a.type),Object.assign(i,e.evaluater.evaluateExpression(a.argument))}else eD(e,t.position);else{let r,a=n.name;if(n.value&&"object"==typeof n.value)if(n.value.data&&n.value.data.estree&&e.evaluater){let t=n.value.data.estree.body[0];M("ExpressionStatement"===t.type),r=e.evaluater.evaluateExpression(t.expression)}else eD(e,t.position);else r=null===n.value||n.value;i[a]=r}return i}(e,t),s=eI(e,t);return eP(e,a,r,t),eR(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);eD(e,t.position)}(e,t):"root"===t.type?function(e,t,i){let n={};return eR(n,eI(e,t)),e.create(t,e.Fragment,n,i)}(e,t,i):"text"===t.type?t.value:void 0}function eP(e,t,i,n){"string"!=typeof i&&i!==e.Fragment&&e.passNode&&(t.node=n)}function eR(e,t){if(t.length>0){let i=t.length>1?t:t[0];i&&(e.children=i)}}function eI(e,t){let i=[],n=-1,r=e.passKeys?new Map:e_;for(;++n<t.children.length;){let a,s=t.children[n];if(e.passKeys){let e="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(e){let t=r.get(e)||0;a=e+"-"+t,r.set(e,t+1)}}let l=eT(e,s,a);void 0!==l&&i.push(l)}return i}function eL(e,t,i){let n;if(i)if(t.includes(".")){let e,i=t.split("."),r=-1;for(;++r<i.length;){let t=I(i[r])?{type:"Identifier",name:i[r]}:{type:"Literal",value:i[r]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(r&&"Literal"===t.type),optional:!1}:t}M(e,"always a result"),n=e}else n=I(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else n={type:"Literal",value:t};if("Literal"===n.type){let t=n.value;return ek.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(n);eD(e)}function eD(e,t){let i=new eA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=eC+"#cannot-handle-mdx-estrees-without-createevaluater",i}function eF(e){return"-"+e.toLowerCase()}let eN={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eO={};function eW(e,t,i){var n;if((n=e)&&"object"==typeof n){if("value"in e)return"html"!==e.type||i?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ej(e.children,t,i)}return Array.isArray(e)?ej(e,t,i):""}function ej(e,t,i){let n=[],r=-1;for(;++r<e.length;)n[r]=eW(e[r],t,i);return n.join("")}function eB(e,t,i,n){let r,a=e.length,s=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,i=i>0?i:0,n.length<1e4)(r=Array.from(n)).unshift(t,i),e.splice(...r);else for(i&&e.splice(t,i);s<n.length;)(r=n.slice(s,s+1e4)).unshift(t,0),e.splice(...r),s+=1e4,t+=1e4}function ez(e,t){return e.length>0?(eB(e,e.length,0,t),e):t}let eH={}.hasOwnProperty,eU=e1(/[A-Za-z]/),eG=e1(/[\dA-Za-z]/),eV=e1(/[#-'*+\--9=?A-Z^-~]/);function eq(e){return null!==e&&(e<32||127===e)}let eX=e1(/\d/),eK=e1(/[\dA-Fa-f]/),eY=e1(/[!-/:-@[-`{-~]/);function eQ(e){return null!==e&&e<-2}function eJ(e){return null!==e&&(e<0||32===e)}function eZ(e){return -2===e||-1===e||32===e}let e$=e1(RegExp("\\p{P}|\\p{S}","u")),e0=e1(/\s/);function e1(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function e2(e,t,i,n){let r=n?n-1:1/0,a=0;return function(n){return eZ(n)?(e.enter(i),function n(s){return eZ(s)&&a++<r?(e.consume(s),n):(e.exit(i),t(s))}(n)):t(n)}}let e3={tokenize:function(e){let t,i=e.attempt(this.parser.constructs.contentInitial,function(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,i,"linePrefix"))},function(i){return e.enter("paragraph"),function i(n){let r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,function t(n){if(null===n){e.exit("chunkText"),e.exit("paragraph"),e.consume(n);return}return eQ(n)?(e.consume(n),e.exit("chunkText"),i):(e.consume(n),t)}(n)}(i)});return i}},e4={tokenize:function(e){let t,i,n,r=this,a=[],s=0;return l;function l(t){if(s<a.length){let i=a[s];return r.containerState=i[1],e.attempt(i[0].continuation,o,h)(t)}return h(t)}function o(e){if(s++,r.containerState._closeFlow){let i;r.containerState._closeFlow=void 0,t&&b();let n=r.events.length,a=n;for(;a--;)if("exit"===r.events[a][0]&&"chunkFlow"===r.events[a][1].type){i=r.events[a][1].end;break}m(s);let l=n;for(;l<r.events.length;)r.events[l][1].end={...i},l++;return eB(r.events,a+1,0,r.events.slice(n)),r.events.length=l,h(e)}return l(e)}function h(i){if(s===a.length){if(!t)return d(i);if(t.currentConstruct&&t.currentConstruct.concrete)return f(i);r.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(e5,c,u)(i)}function c(e){return t&&b(),m(s),d(e)}function u(e){return r.parser.lazy[r.now().line]=s!==a.length,n=r.now().offset,f(e)}function d(t){return r.containerState={},e.attempt(e5,p,f)(t)}function p(e){return s++,a.push([r.currentConstruct,r.containerState]),d(e)}function f(n){if(null===n){t&&b(),m(0),e.consume(n);return}return t=t||r.parser.flow(r.now()),e.enter("chunkFlow",{_tokenizer:t,contentType:"flow",previous:i}),function t(i){if(null===i){g(e.exit("chunkFlow"),!0),m(0),e.consume(i);return}return eQ(i)?(e.consume(i),g(e.exit("chunkFlow")),s=0,r.interrupt=void 0,l):(e.consume(i),t)}(n)}function g(e,a){let l=r.sliceStream(e);if(a&&l.push(null),e.previous=i,i&&(i.next=e),i=e,t.defineSkip(e.start),t.write(l),r.parser.lazy[e.start.line]){let e,i,a=t.events.length;for(;a--;)if(t.events[a][1].start.offset<n&&(!t.events[a][1].end||t.events[a][1].end.offset>n))return;let l=r.events.length,o=l;for(;o--;)if("exit"===r.events[o][0]&&"chunkFlow"===r.events[o][1].type){if(e){i=r.events[o][1].end;break}e=!0}for(m(s),a=l;a<r.events.length;)r.events[a][1].end={...i},a++;eB(r.events,o+1,0,r.events.slice(l)),r.events.length=a}}function m(t){let i=a.length;for(;i-- >t;){let t=a[i];r.containerState=t[1],t[0].exit.call(r,e)}a.length=t}function b(){t.write([null]),i=void 0,t=void 0,r.containerState._closeFlow=void 0}}},e5={tokenize:function(e,t,i){return e2(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},e6={partial:!0,tokenize:function(e,t,i){return function(t){return eZ(t)?e2(e,n,"linePrefix")(t):n(t)};function n(e){return null===e||eQ(e)?t(e):i(e)}}};class e9{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let i=null==t?1/0:t;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){this.setCursor(Math.trunc(e));let n=this.right.splice(this.right.length-(t||0),1/0);return i&&e8(this.left,i),n.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),e8(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),e8(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);e8(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);e8(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function e8(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function e7(e){let t,i,n,r,a,s,l,o={},h=-1,c=new e9(e);for(;++h<c.length;){for(;h in o;)h=o[h];if(t=c.get(h),h&&"chunkFlow"===t[1].type&&"listItemPrefix"===c.get(h-1)[1].type&&((n=0)<(s=t[1]._tokenizer.events).length&&"lineEndingBlank"===s[n][1].type&&(n+=2),n<s.length&&"content"===s[n][1].type))for(;++n<s.length&&"content"!==s[n][1].type;)"chunkText"===s[n][1].type&&(s[n][1]._isInFirstContentOfListItem=!0,n++);if("enter"===t[0])t[1].contentType&&(Object.assign(o,function(e,t){let i,n,r=e.get(t)[1],a=e.get(t)[2],s=t-1,l=[],o=r._tokenizer;!o&&(o=a.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let h=o.events,c=[],u={},d=-1,p=r,f=0,g=0,m=[0];for(;p;){for(;e.get(++s)[1]!==p;);l.push(s),!p._tokenizer&&(i=a.sliceStream(p),p.next||i.push(null),n&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(i),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),n=p,p=p.next}for(p=r;++d<h.length;)"exit"===h[d][0]&&"enter"===h[d-1][0]&&h[d][1].type===h[d-1][1].type&&h[d][1].start.line!==h[d][1].end.line&&(g=d+1,m.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):m.pop(),d=m.length;d--;){let t=h.slice(m[d],m[d+1]),i=l.pop();c.push([i,i+t.length-1]),e.splice(i,2,t)}for(c.reverse(),d=-1;++d<c.length;)u[f+c[d][0]]=f+c[d][1],f+=c[d][1]-c[d][0]-1;return u}(c,h)),h=o[h],l=!0);else if(t[1]._container){for(n=h,i=void 0;n--;)if("lineEnding"===(r=c.get(n))[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(i&&(c.get(i)[1].type="lineEndingBlank"),r[1].type="lineEnding",i=n);else if("linePrefix"===r[1].type||"listItemIndent"===r[1].type);else break;i&&(t[1].end={...c.get(i)[1].start},(a=c.slice(i,h)).unshift(t),c.splice(i,h-i+1,a))}}return eB(e,0,1/0,c.slice(0)),!l}let te={resolve:function(e){return e7(e),e},tokenize:function(e,t){let i;return function(t){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),n(t)};function n(t){return null===t?r(t):eQ(t)?e.check(tt,a,r)(t):(e.consume(t),n)}function r(i){return e.exit("chunkContent"),e.exit("content"),t(i)}function a(t){return e.consume(t),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,n}}},tt={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,r,"linePrefix")};function r(r){if(null===r||eQ(r))return i(r);let a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(r):e.interrupt(n.parser.constructs.flow,i,t)(r)}}},ti={tokenize:function(e){let t=this,i=e.attempt(e6,function(n){return null===n?void e.consume(n):(e.enter("lineEndingBlank"),e.consume(n),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i)},e.attempt(this.parser.constructs.flowInitial,n,e2(e,e.attempt(this.parser.constructs.flow,n,e.attempt(te,n)),"linePrefix")));return i;function n(n){return null===n?void e.consume(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),t.currentConstruct=void 0,i)}}},tn={resolveAll:tl()},tr=ts("string"),ta=ts("text");function ts(e){return{resolveAll:tl("text"===e?to:void 0),tokenize:function(t){let i=this,n=this.parser.constructs[e],r=t.attempt(n,a,s);return a;function a(e){return o(e)?r(e):s(e)}function s(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),l)}function l(e){return o(e)?(t.exit("data"),r(e)):(t.consume(e),l)}function o(e){if(null===e)return!0;let t=n[e],r=-1;if(t)for(;++r<t.length;){let e=t[r];if(!e.previous||e.previous.call(i,i.previous))return!0}return!1}}}}function tl(e){return function(t,i){let n,r=-1;for(;++r<=t.length;)void 0===n?t[r]&&"data"===t[r][1].type&&(n=r,r++):t[r]&&"data"===t[r][1].type||(r!==n+2&&(t[n][1].end=t[r-1][1].end,t.splice(n+2,r-n-2),r=n+2),n=void 0);return e?e(t,i):t}}function to(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||"lineEnding"===e[i][1].type)&&"data"===e[i-1][1].type){let n,r=e[i-1][1],a=t.sliceStream(r),s=a.length,l=-1,o=0;for(;s--;){let e=a[s];if("string"==typeof e){for(l=e.length;32===e.charCodeAt(l-1);)o++,l--;if(l)break;l=-1}else if(-2===e)n=!0,o++;else if(-1===e);else{s++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(o=0),o){let a={type:i===e.length||n||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:r.start._bufferIndex+l,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...a.start},r.start.offset===r.end.offset?Object.assign(r,a):(e.splice(i,0,["enter",a,t],["exit",a,t]),i+=2)}i++}return e}function th(e){return null===e||eJ(e)||e0(e)?1:e$(e)?2:void 0}function tc(e,t,i){let n=[],r=-1;for(;++r<e.length;){let a=e[r].resolveAll;a&&!n.includes(a)&&(t=a(t,i),n.push(a))}return t}e.s(["attentionMarkers",()=>tJ,"contentInitial",()=>tV,"disable",()=>tZ,"document",()=>tG,"flow",()=>tX,"flowInitial",()=>tq,"insideSpan",()=>tQ,"string",()=>tK,"text",()=>tY],4127);let tu={name:"attention",resolveAll:function(e,t){let i,n,r,a,s,l,o,h,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close){for(i=c;i--;)if("exit"===e[i][0]&&"attentionSequence"===e[i][1].type&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[i][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;l=e[i][1].end.offset-e[i][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;let u={...e[i][1].end},d={...e[c][1].start};td(u,-l),td(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...e[i][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[c][1].start},end:d},r={type:l>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[c][1].start}},n={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},e[i][1].end={...a.start},e[c][1].start={...s.end},o=[],e[i][1].end.offset-e[i][1].start.offset&&(o=ez(o,[["enter",e[i][1],t],["exit",e[i][1],t]])),o=ez(o,[["enter",n,t],["enter",a,t],["exit",a,t],["enter",r,t]]),o=ez(o,tc(t.parser.constructs.insideSpan.null,e.slice(i+1,c),t)),o=ez(o,[["exit",r,t],["enter",s,t],["exit",s,t],["exit",n,t]]),e[c][1].end.offset-e[c][1].start.offset?(h=2,o=ez(o,[["enter",e[c][1],t],["exit",e[c][1],t]])):h=0,eB(e,i-1,c-i+3,o),c=i+o.length-h-2;break}}for(c=-1;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e},tokenize:function(e,t){let i,n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=th(r);return function(s){return i=s,e.enter("attentionSequence"),function s(l){if(l===i)return e.consume(l),s;let o=e.exit("attentionSequence"),h=th(l),c=!h||2===h&&a||n.includes(l),u=!a||2===a&&h||n.includes(r);return o._open=!!(42===i?c:c&&(a||!u)),o._close=!!(42===i?u:u&&(h||!c)),t(l)}(s)}}};function td(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let tp={continuation:{tokenize:function(e,t,i){let n=this;return function(t){return eZ(t)?e2(e,r,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):r(t)};function r(n){return e.attempt(tp,t,i)(n)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,i){let n=this;return function(t){if(62===t){let i=n.containerState;return i.open||(e.enter("blockQuote",{_container:!0}),i.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return i(t)};function r(i){return eZ(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}},tf={name:"characterEscape",tokenize:function(e,t,i){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),n};function n(n){return eY(n)?(e.enter("characterEscapeValue"),e.consume(n),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(n)}}},tg=document.createElement("i");function tm(e){let t="&"+e+";";tg.innerHTML=t;let i=tg.textContent;return(59!==i.charCodeAt(i.length-1)||"semi"===e)&&i!==t&&i}let tv={name:"characterReference",tokenize:function(e,t,i){let n,r,a=this,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l};function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),o):(e.enter("characterReferenceValue"),n=31,r=eG,h(t))}function o(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),n=6,r=eK,h):(e.enter("characterReferenceValue"),n=7,r=eX,h(t))}function h(l){if(59===l&&s){let n=e.exit("characterReferenceValue");return r!==eG||tm(a.sliceSerialize(n))?(e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):i(l)}return r(l)&&s++<n?(e.consume(l),h):i(l)}}},tb={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return null===t?i(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tw={concrete:!0,name:"codeFenced",tokenize:function(e,t,i){let n,r=this,a={partial:!0,tokenize:function(e,t,i){let a=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(t){return e.enter("codeFencedFence"),eZ(t)?e2(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):o(t)}function o(t){return t===n?(e.enter("codeFencedFenceSequence"),function t(r){return r===n?(a++,e.consume(r),t):a>=l?(e.exit("codeFencedFenceSequence"),eZ(r)?e2(e,h,"whitespace")(r):h(r)):i(r)}(t)):i(t)}function h(n){return null===n||eQ(n)?(e.exit("codeFencedFence"),t(n)):i(n)}}},s=0,l=0;return function(t){var a=t;let h=r.events[r.events.length-1];return s=h&&"linePrefix"===h[1].type?h[2].sliceSerialize(h[1],!0).length:0,n=a,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function t(r){return r===n?(l++,e.consume(r),t):l<3?i(r):(e.exit("codeFencedFenceSequence"),eZ(r)?e2(e,o,"whitespace")(r):o(r))}(a)};function o(a){return null===a||eQ(a)?(e.exit("codeFencedFence"),r.interrupt?t(a):e.check(tb,c,f)(a)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eQ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),o(r)):eZ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),e2(e,h,"whitespace")(r)):96===r&&r===n?i(r):(e.consume(r),t)}(a))}function h(t){return null===t||eQ(t)?o(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eQ(r)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),o(r)):96===r&&r===n?i(r):(e.consume(r),t)}(t))}function c(t){return e.attempt(a,f,u)(t)}function u(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d}function d(t){return s>0&&eZ(t)?e2(e,p,"linePrefix",s+1)(t):p(t)}function p(t){return null===t||eQ(t)?e.check(tb,c,f)(t):(e.enter("codeFlowValue"),function t(i){return null===i||eQ(i)?(e.exit("codeFlowValue"),p(i)):(e.consume(i),t)}(t))}function f(i){return e.exit("codeFenced"),t(i)}}},ty={name:"codeIndented",tokenize:function(e,t,i){let n=this;return function(t){return e.enter("codeIndented"),e2(e,r,"linePrefix",5)(t)};function r(t){let r=n.events[n.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?function t(i){return null===i?a(i):eQ(i)?e.attempt(tx,t,a)(i):(e.enter("codeFlowValue"),function i(n){return null===n||eQ(n)?(e.exit("codeFlowValue"),t(n)):(e.consume(n),i)}(i))}(t):i(t)}function a(i){return e.exit("codeIndented"),t(i)}}},tx={partial:!0,tokenize:function(e,t,i){let n=this;return r;function r(t){return n.parser.lazy[n.now().line]?i(t):eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):e2(e,a,"linePrefix",5)(t)}function a(e){let a=n.events[n.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):eQ(e)?r(e):i(e)}}};function tA(e,t,i,n,r,a,s,l,o){let h=o||1/0,c=0;return function(t){return 60===t?(e.enter(n),e.enter(r),e.enter(a),e.consume(t),e.exit(a),u):null===t||32===t||41===t||eq(t)?i(t):(e.enter(n),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),f(t))};function u(i){return 62===i?(e.enter(a),e.consume(i),e.exit(a),e.exit(r),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),d(i))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(l),u(t)):null===t||60===t||eQ(t)?i(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(r){return!c&&(null===r||41===r||eJ(r))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(n),t(r)):c<h&&40===r?(e.consume(r),c++,f):41===r?(e.consume(r),c--,f):null===r||32===r||40===r||eq(r)?i(r):(e.consume(r),92===r?g:f)}function g(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function tk(e,t,i,n,r,a){let s,l=this,o=0;return function(t){return e.enter(n),e.enter(r),e.consume(t),e.exit(r),e.enter(a),h};function h(u){return o>999||null===u||91===u||93===u&&!s||94===u&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?i(u):93===u?(e.exit(a),e.enter(r),e.consume(u),e.exit(r),e.exit(n),t):eQ(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(t){return null===t||91===t||93===t||eQ(t)||o++>999?(e.exit("chunkString"),h(t)):(e.consume(t),s||(s=!eZ(t)),92===t?u:c)}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}}function t_(e,t,i,n,r,a){let s;return function(t){return 34===t||39===t||40===t?(e.enter(n),e.enter(r),e.consume(t),e.exit(r),s=40===t?41:t,l):i(t)};function l(i){return i===s?(e.enter(r),e.consume(i),e.exit(r),e.exit(n),t):(e.enter(a),o(i))}function o(t){return t===s?(e.exit(a),l(s)):null===t?i(t):eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e2(e,o,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return t===s||null===t||eQ(t)?(e.exit("chunkString"),o(t)):(e.consume(t),92===t?c:h)}function c(t){return t===s||92===t?(e.consume(t),h):h(t)}}function tS(e,t){let i;return function n(r){return eQ(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i=!0,n):eZ(r)?e2(e,n,i?"linePrefix":"lineSuffix")(r):t(r)}}function tE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let tM={partial:!0,tokenize:function(e,t,i){return function(t){return eJ(t)?tS(e,n)(t):i(t)};function n(t){return t_(e,r,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return eZ(t)?e2(e,a,"whitespace")(t):a(t)}function a(e){return null===e||eQ(e)?t(e):i(e)}}},tC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tT=["pre","script","style","textarea"],tP={partial:!0,tokenize:function(e,t,i){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e.attempt(e6,t,i)}}},tR={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return eQ(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):i(t)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tI={name:"labelEnd",resolveAll:function(e){let t=-1,i=[];for(;++t<e.length;){let n=e[t][1];if(i.push(e[t]),"labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type){let e="labelImage"===n.type?4:2;n.type="data",t+=e}}return e.length!==i.length&&eB(e,0,e.length,i),e},resolveTo:function(e,t){let i,n,r,a,s=e.length,l=0;for(;s--;)if(i=e[s][1],n){if("link"===i.type||"labelLink"===i.type&&i._inactive)break;"enter"===e[s][0]&&"labelLink"===i.type&&(i._inactive=!0)}else if(r){if("enter"===e[s][0]&&("labelImage"===i.type||"labelLink"===i.type)&&!i._balanced&&(n=s,"labelLink"!==i.type)){l=2;break}}else"labelEnd"===i.type&&(r=s);let o={type:"labelLink"===e[n][1].type?"link":"image",start:{...e[n][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[n][1].start},end:{...e[r][1].end}},c={type:"labelText",start:{...e[n+l+2][1].end},end:{...e[r-2][1].start}};return a=ez(a=[["enter",o,t],["enter",h,t]],e.slice(n+1,n+l+3)),a=ez(a,[["enter",c,t]]),a=ez(a,tc(t.parser.constructs.insideSpan.null,e.slice(n+l+4,r-3),t)),a=ez(a,[["exit",c,t],e[r-2],e[r-1],["exit",h,t]]),a=ez(a,e.slice(r+1)),a=ez(a,[["exit",o,t]]),eB(e,n,e.length,a),e},tokenize:function(e,t,i){let n,r,a=this,s=a.events.length;for(;s--;)if(("labelImage"===a.events[s][1].type||"labelLink"===a.events[s][1].type)&&!a.events[s][1]._balanced){n=a.events[s][1];break}return function(t){return n?n._inactive?c(t):(r=a.parser.defined.includes(tE(a.sliceSerialize({start:n.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):i(t)};function l(t){return 40===t?e.attempt(tL,h,r?h:c)(t):91===t?e.attempt(tD,h,r?o:c)(t):r?h(t):c(t)}function o(t){return e.attempt(tF,h,c)(t)}function h(e){return t(e)}function c(e){return n._balanced=!0,i(e)}}},tL={tokenize:function(e,t,i){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),n};function n(t){return eJ(t)?tS(e,r)(t):r(t)}function r(t){return 41===t?h(t):tA(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return eJ(t)?tS(e,l)(t):h(t)}function s(e){return i(e)}function l(t){return 34===t||39===t||40===t?t_(e,o,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):h(t)}function o(t){return eJ(t)?tS(e,h)(t):h(t)}function h(n){return 41===n?(e.enter("resourceMarker"),e.consume(n),e.exit("resourceMarker"),e.exit("resource"),t):i(n)}}},tD={tokenize:function(e,t,i){let n=this;return function(t){return tk.call(n,e,r,a,"reference","referenceMarker","referenceString")(t)};function r(e){return n.parser.defined.includes(tE(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(e):i(e)}function a(e){return i(e)}}},tF={tokenize:function(e,t,i){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),n};function n(n){return 93===n?(e.enter("referenceMarker"),e.consume(n),e.exit("referenceMarker"),e.exit("reference"),t):i(n)}}},tN={name:"labelStartImage",resolveAll:tI.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):i(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tO={name:"labelStartLink",resolveAll:tI.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tW={name:"lineEnding",tokenize:function(e,t){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e2(e,t,"linePrefix")}}},tj={name:"thematicBreak",tokenize:function(e,t,i){let n,r=0;return function(a){var s;return e.enter("thematicBreak"),n=s=a,function a(s){return s===n?(e.enter("thematicBreakSequence"),function t(i){return i===n?(e.consume(i),r++,t):(e.exit("thematicBreakSequence"),eZ(i)?e2(e,a,"whitespace")(i):a(i))}(s)):r>=3&&(null===s||eQ(s))?(e.exit("thematicBreak"),t(s)):i(s)}(s)}}},tB={continuation:{tokenize:function(e,t,i){let n=this;return n.containerState._closeFlow=void 0,e.check(e6,function(i){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,e2(e,t,"listItemIndent",n.containerState.size+1)(i)},function(i){return n.containerState.furtherBlankLines||!eZ(i)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r(i)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(tH,t,r)(i))});function r(r){return n.containerState._closeFlow=!0,n.interrupt=void 0,e2(e,e.attempt(tB,t,i),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,i){let n=this,r=n.events[n.events.length-1],a=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,s=0;return function(t){let r=n.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!n.containerState.marker||t===n.containerState.marker:eX(t)){if(n.containerState.type||(n.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(tj,i,l)(t):l(t);if(!n.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(r){return eX(r)&&++s<10?(e.consume(r),t):(!n.interrupt||s<2)&&(n.containerState.marker?r===n.containerState.marker:41===r||46===r)?(e.exit("listItemValue"),l(r)):i(r)}(t)}return i(t)};function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||t,e.check(e6,n.interrupt?i:o,e.attempt(tz,c,h))}function o(e){return n.containerState.initialBlankLine=!0,a++,c(e)}function h(t){return eZ(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),c):i(t)}function c(i){return n.containerState.size=a+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(i)}}},tz={partial:!0,tokenize:function(e,t,i){let n=this;return e2(e,function(e){let r=n.events[n.events.length-1];return!eZ(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):i(e)},"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},tH={partial:!0,tokenize:function(e,t,i){let n=this;return e2(e,function(e){let r=n.events[n.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===n.containerState.size?t(e):i(e)},"listItemIndent",n.containerState.size+1)}},tU={name:"setextUnderline",resolveTo:function(e,t){let i,n,r,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){i=a;break}"paragraph"===e[a][1].type&&(n=a)}else"content"===e[a][1].type&&e.splice(a,1),r||"definition"!==e[a][1].type||(r=a);let s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[n][1].type="setextHeadingText",r?(e.splice(n,0,["enter",s,t]),e.splice(r+1,0,["exit",e[i][1],t]),e[i][1].end={...e[r][1].end}):e[i][1]=s,e.push(["exit",s,t]),e},tokenize:function(e,t,i){let n,r=this;return function(t){var s;let l,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){l="paragraph"===r.events[o][1].type;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||l)?(e.enter("setextHeadingLine"),n=t,s=t,e.enter("setextHeadingLineSequence"),function t(i){return i===n?(e.consume(i),t):(e.exit("setextHeadingLineSequence"),eZ(i)?e2(e,a,"lineSuffix")(i):a(i))}(s)):i(t)};function a(n){return null===n||eQ(n)?(e.exit("setextHeadingLine"),t(n)):i(n)}}},tG={42:tB,43:tB,45:tB,48:tB,49:tB,50:tB,51:tB,52:tB,53:tB,54:tB,55:tB,56:tB,57:tB,62:tp},tV={91:{name:"definition",tokenize:function(e,t,i){let n,r=this;return function(t){var n;return e.enter("definition"),n=t,tk.call(r,e,a,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(n)};function a(t){return(n=tE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):i(t)}function s(t){return eJ(t)?tS(e,l)(t):l(t)}function l(t){return tA(e,o,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function o(t){return e.attempt(tM,h,h)(t)}function h(t){return eZ(t)?e2(e,c,"whitespace")(t):c(t)}function c(a){return null===a||eQ(a)?(e.exit("definition"),r.parser.defined.push(n),t(a)):i(a)}}}},tq={[-2]:ty,[-1]:ty,32:ty},tX={35:{name:"headingAtx",resolve:function(e,t){let i,n,r=e.length-2,a=3;return"whitespace"===e[3][1].type&&(a+=2),r-2>a&&"whitespace"===e[r][1].type&&(r-=2),"atxHeadingSequence"===e[r][1].type&&(a===r-1||r-4>a&&"whitespace"===e[r-2][1].type)&&(r-=a+1===r?2:4),r>a&&(i={type:"atxHeadingText",start:e[a][1].start,end:e[r][1].end},n={type:"chunkText",start:e[a][1].start,end:e[r][1].end,contentType:"text"},eB(e,a,r-a+1,[["enter",i,t],["enter",n,t],["exit",n,t],["exit",i,t]])),e},tokenize:function(e,t,i){let n=0;return function(r){var a;return e.enter("atxHeading"),a=r,e.enter("atxHeadingSequence"),function r(a){return 35===a&&n++<6?(e.consume(a),r):null===a||eJ(a)?(e.exit("atxHeadingSequence"),function i(n){return 35===n?(e.enter("atxHeadingSequence"),function t(n){return 35===n?(e.consume(n),t):(e.exit("atxHeadingSequence"),i(n))}(n)):null===n||eQ(n)?(e.exit("atxHeading"),t(n)):eZ(n)?e2(e,i,"whitespace")(n):(e.enter("atxHeadingText"),function t(n){return null===n||35===n||eJ(n)?(e.exit("atxHeadingText"),i(n)):(e.consume(n),t)}(n))}(a)):i(a)}(a)}}},42:tj,45:[tU,tj],60:{concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},tokenize:function(e,t,i){let n,r,a,s,l,o=this;return function(t){var i;return i=t,e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(i),h};function h(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),r=!0,p):63===s?(e.consume(s),n=3,o.interrupt?t:L):eU(s)?(e.consume(s),a=String.fromCharCode(s),f):i(s)}function c(r){return 45===r?(e.consume(r),n=2,u):91===r?(e.consume(r),n=5,s=0,d):eU(r)?(e.consume(r),n=4,o.interrupt?t:L):i(r)}function u(n){return 45===n?(e.consume(n),o.interrupt?t:L):i(n)}function d(n){let r="CDATA[";return n===r.charCodeAt(s++)?(e.consume(n),s===r.length)?o.interrupt?t:S:d:i(n)}function p(t){return eU(t)?(e.consume(t),a=String.fromCharCode(t),f):i(t)}function f(s){if(null===s||47===s||62===s||eJ(s)){let l=47===s,h=a.toLowerCase();return!l&&!r&&tT.includes(h)?(n=1,o.interrupt?t(s):S(s)):tC.includes(a.toLowerCase())?(n=6,l)?(e.consume(s),g):o.interrupt?t(s):S(s):(n=7,o.interrupt&&!o.parser.lazy[o.now().line]?i(s):r?function t(i){return eZ(i)?(e.consume(i),t):k(i)}(s):m(s))}return 45===s||eG(s)?(e.consume(s),a+=String.fromCharCode(s),f):i(s)}function g(n){return 62===n?(e.consume(n),o.interrupt?t:S):i(n)}function m(t){return 47===t?(e.consume(t),k):58===t||95===t||eU(t)?(e.consume(t),b):eZ(t)?(e.consume(t),m):k(t)}function b(t){return 45===t||46===t||58===t||95===t||eG(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),y):eZ(t)?(e.consume(t),w):m(t)}function y(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),l=t,x):eZ(t)?(e.consume(t),y):function t(i){return null===i||34===i||39===i||47===i||60===i||61===i||62===i||96===i||eJ(i)?w(i):(e.consume(i),t)}(t)}function x(t){return t===l?(e.consume(t),l=null,A):null===t||eQ(t)?i(t):(e.consume(t),x)}function A(e){return 47===e||62===e||eZ(e)?m(e):i(e)}function k(t){return 62===t?(e.consume(t),_):i(t)}function _(t){return null===t||eQ(t)?S(t):eZ(t)?(e.consume(t),_):i(t)}function S(t){return 45===t&&2===n?(e.consume(t),T):60===t&&1===n?(e.consume(t),P):62===t&&4===n?(e.consume(t),D):63===t&&3===n?(e.consume(t),L):93===t&&5===n?(e.consume(t),I):eQ(t)&&(6===n||7===n)?(e.exit("htmlFlowData"),e.check(tP,F,E)(t)):null===t||eQ(t)?(e.exit("htmlFlowData"),E(t)):(e.consume(t),S)}function E(t){return e.check(tR,M,F)(t)}function M(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),C}function C(t){return null===t||eQ(t)?E(t):(e.enter("htmlFlowData"),S(t))}function T(t){return 45===t?(e.consume(t),L):S(t)}function P(t){return 47===t?(e.consume(t),a="",R):S(t)}function R(t){if(62===t){let i=a.toLowerCase();return tT.includes(i)?(e.consume(t),D):S(t)}return eU(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),R):S(t)}function I(t){return 93===t?(e.consume(t),L):S(t)}function L(t){return 62===t?(e.consume(t),D):45===t&&2===n?(e.consume(t),L):S(t)}function D(t){return null===t||eQ(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),D)}function F(i){return e.exit("htmlFlow"),t(i)}}},61:tU,95:tj,96:tw,126:tw},tK={38:tv,92:tf},tY={[-5]:tW,[-4]:tW,[-3]:tW,33:tN,38:tv,42:tu,60:[{name:"autolink",tokenize:function(e,t,i){let n=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return eU(t)?(e.consume(t),a):64===t?i(t):l(t)}function a(t){return 43===t||45===t||46===t||eG(t)?(n=1,function t(i){return 58===i?(e.consume(i),n=0,s):(43===i||45===i||46===i||eG(i))&&n++<32?(e.consume(i),t):(n=0,l(i))}(t)):l(t)}function s(n){return 62===n?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):null===n||32===n||60===n||eq(n)?i(n):(e.consume(n),s)}function l(t){return 64===t?(e.consume(t),o):eV(t)?(e.consume(t),l):i(t)}function o(r){return eG(r)?function r(a){return 46===a?(e.consume(a),n=0,o):62===a?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(a),e.exit("autolinkMarker"),e.exit("autolink"),t):function t(a){if((45===a||eG(a))&&n++<63){let i=45===a?t:r;return e.consume(a),i}return i(a)}(a)}(r):i(r)}}},{name:"htmlText",tokenize:function(e,t,i){let n,r,a,s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),o):47===t?(e.consume(t),x):63===t?(e.consume(t),w):eU(t)?(e.consume(t),k):i(t)}function o(t){return 45===t?(e.consume(t),h):91===t?(e.consume(t),r=0,p):eU(t)?(e.consume(t),b):i(t)}function h(t){return 45===t?(e.consume(t),d):i(t)}function c(t){return null===t?i(t):45===t?(e.consume(t),u):eQ(t)?(a=c,R(t)):(e.consume(t),c)}function u(t){return 45===t?(e.consume(t),d):c(t)}function d(e){return 62===e?P(e):45===e?u(e):c(e)}function p(t){let n="CDATA[";return t===n.charCodeAt(r++)?(e.consume(t),r===n.length?f:p):i(t)}function f(t){return null===t?i(t):93===t?(e.consume(t),g):eQ(t)?(a=f,R(t)):(e.consume(t),f)}function g(t){return 93===t?(e.consume(t),m):f(t)}function m(t){return 62===t?P(t):93===t?(e.consume(t),m):f(t)}function b(t){return null===t||62===t?P(t):eQ(t)?(a=b,R(t)):(e.consume(t),b)}function w(t){return null===t?i(t):63===t?(e.consume(t),y):eQ(t)?(a=w,R(t)):(e.consume(t),w)}function y(e){return 62===e?P(e):w(e)}function x(t){return eU(t)?(e.consume(t),A):i(t)}function A(t){return 45===t||eG(t)?(e.consume(t),A):function t(i){return eQ(i)?(a=t,R(i)):eZ(i)?(e.consume(i),t):P(i)}(t)}function k(t){return 45===t||eG(t)?(e.consume(t),k):47===t||62===t||eJ(t)?_(t):i(t)}function _(t){return 47===t?(e.consume(t),P):58===t||95===t||eU(t)?(e.consume(t),S):eQ(t)?(a=_,R(t)):eZ(t)?(e.consume(t),_):P(t)}function S(t){return 45===t||46===t||58===t||95===t||eG(t)?(e.consume(t),S):function t(i){return 61===i?(e.consume(i),E):eQ(i)?(a=t,R(i)):eZ(i)?(e.consume(i),t):_(i)}(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),n=t,M):eQ(t)?(a=E,R(t)):eZ(t)?(e.consume(t),E):(e.consume(t),C)}function M(t){return t===n?(e.consume(t),n=void 0,T):null===t?i(t):eQ(t)?(a=M,R(t)):(e.consume(t),M)}function C(t){return null===t||34===t||39===t||60===t||61===t||96===t?i(t):47===t||62===t||eJ(t)?_(t):(e.consume(t),C)}function T(e){return 47===e||62===e||eJ(e)?_(e):i(e)}function P(n){return 62===n?(e.consume(n),e.exit("htmlTextData"),e.exit("htmlText"),t):i(n)}function R(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return eZ(t)?e2(e,L,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):L(t)}function L(t){return e.enter("htmlTextData"),a(t)}}}],91:tO,92:[{name:"hardBreakEscape",tokenize:function(e,t,i){return function(t){return e.enter("hardBreakEscape"),e.consume(t),n};function n(n){return eQ(n)?(e.exit("hardBreakEscape"),t(n)):i(n)}}},tf],93:tI,95:tu,96:{name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,i,n=e.length-4,r=3;if(("lineEnding"===e[3][1].type||"space"===e[r][1].type)&&("lineEnding"===e[n][1].type||"space"===e[n][1].type)){for(t=r;++t<n;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[n][1].type="codeTextPadding",r+=2,n-=2;break}}for(t=r-1,n++;++t<=n;)void 0===i?t!==n&&"lineEnding"!==e[t][1].type&&(i=t):(t===n||"lineEnding"===e[t][1].type)&&(e[i][1].type="codeTextData",t!==i+2&&(e[i][1].end=e[t-1][1].end,e.splice(i+2,t-i-2),n-=t-i-2,t=i+2),i=void 0);return e},tokenize:function(e,t,i){let n,r,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(i){return 96===i?(e.consume(i),a++,t):(e.exit("codeTextSequence"),s(i))}(t)};function s(o){return null===o?i(o):32===o?(e.enter("space"),e.consume(o),e.exit("space"),s):96===o?(r=e.enter("codeTextSequence"),n=0,function i(s){return 96===s?(e.consume(s),n++,i):n===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(s)):(r.type="codeTextData",l(s))}(o)):eQ(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(o))}function l(t){return null===t||32===t||96===t||eQ(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}}}},tQ={null:[tu,tn]},tJ={null:[42,95]},tZ={null:[]};var t$=e.i(4127);let t0=/[\0\t\n\r]/g;function t1(e,t){let i=Number.parseInt(e,t);return i<9||11===i||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(65535&i)==65535||(65535&i)==65534||i>1114111?"":String.fromCodePoint(i)}let t2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function t3(e,t,i){if(t)return t;if(35===i.charCodeAt(0)){let e=i.charCodeAt(1),t=120===e||88===e;return t1(i.slice(t?2:1),t?16:10)}return tm(i)||e}let t4={}.hasOwnProperty;function t5(e){return{line:e.line,column:e.column,offset:e.offset}}function t6(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+eb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+eb({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+eb({start:t.start,end:t.end})+") is still open")}function t9(e){let t=this;t.parser=function(i){var n,r;let a,s,l,o;return"string"!=typeof(n={...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})&&(r=n,n=void 0),(function(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(b),autolinkProtocol:h,autolinkEmail:h,atxHeading:n(f),blockQuote:n(function(){return{type:"blockquote",children:[]}}),characterEscape:h,characterReference:h,codeFenced:n(p),codeFencedFenceInfo:r,codeFencedFenceMeta:r,codeIndented:n(p,r),codeText:n(function(){return{type:"inlineCode",value:""}},r),codeTextData:h,data:h,codeFlowValue:h,definition:n(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:r,definitionLabelString:r,definitionTitleString:r,emphasis:n(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:n(g),hardBreakTrailing:n(g),htmlFlow:n(m,r),htmlFlowData:h,htmlText:n(m,r),htmlTextData:h,image:n(function(){return{type:"image",title:null,url:"",alt:null}}),label:r,link:n(b),listItem:n(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:n(w,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:n(w),paragraph:n(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:r,resourceDestinationString:r,resourceTitleString:r,setextHeading:n(f),strong:n(function(){return{type:"strong",children:[]}}),thematicBreak:n(function(){return{type:"thematicBreak"}})},exit:{atxHeading:s(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)},autolink:s(),autolinkEmail:function(e){c.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){c.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:c,characterReferenceMarkerHexadecimal:d,characterReferenceMarkerNumeric:d,characterReferenceValue:function(e){let t,i=this.sliceSerialize(e),n=this.data.characterReferenceType;n?(t=t1(i,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):t=tm(i);let r=this.stack[this.stack.length-1];r.value+=t},characterReference:function(e){this.stack.pop().position.end=t5(e.end)},codeFenced:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){let e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:c,codeIndented:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:c,data:c,definition:s(),definitionDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tE(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(u),hardBreakTrailing:s(u),htmlFlow:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:c,htmlText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:c,image:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),i=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===i.type?i.children=e.children:i.alt=t},labelText:function(e){let t=this.sliceSerialize(e),i=this.stack[this.stack.length-2];i.label=t.replace(t2,t3),i.identifier=tE(t).toLowerCase()},lineEnding:function(e){let i=this.stack[this.stack.length-1];if(this.data.atHardBreak){i.children[i.children.length-1].position.end=t5(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(i.type)&&(h.call(this,e),c.call(this,e))},link:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tE(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};!function e(t,i){let n=-1;for(;++n<i.length;){let r=i[n];Array.isArray(r)?e(t,r):function(e,t){let i;for(i in t)if(t4.call(t,i))switch(i){case"canContainEols":{let n=t[i];n&&e[i].push(...n);break}case"transforms":{let n=t[i];n&&e[i].push(...n);break}case"enter":case"exit":{let n=t[i];n&&Object.assign(e[i],n)}}}(t,r)}}(t,(e||{}).mdastExtensions||[]);let i={};return function(e){let n={type:"root",children:[]},s={stack:[n],tokenStack:[],config:t,enter:a,exit:l,buffer:r,resume:o,data:i},h=[],c=-1;for(;++c<e.length;)("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)&&("enter"===e[c][0]?h.push(c):c=function(e,t,i){let n,r,a,s,l=t-1,o=-1,h=!1;for(;++l<=i;){let t=e[l];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?o++:o--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!n||s||o||a||(a=l),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!o&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===o&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(n){let s=l;for(r=void 0;s--;){let t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",h=!0),t[1].type="lineEnding",r=s}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!r||a<r)&&(n._spread=!0),n.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||l,0,["exit",n,t[2]]),l++,i++}if("listItemPrefix"===t[1].type){let r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};n=r,e.splice(l,0,["enter",r,t[2]]),l++,i++,a=void 0,s=!0}}}return e[t][1]._spread=h,i}(e,h.pop(),c));for(c=-1;++c<e.length;){let i=t[e[c][0]];t4.call(i,e[c][1].type)&&i[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},s),e[c][1])}if(s.tokenStack.length>0){let e=s.tokenStack[s.tokenStack.length-1];(e[1]||t6).call(s,void 0,e[0])}for(n.position={start:t5(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:t5(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<t.transforms.length;)n=t.transforms[c](n)||n;return n};function n(e,t){return function(i){a.call(this,e(i),i),t&&t.call(this,i)}}function r(){this.stack.push({type:"fragment",children:[]})}function a(e,t,i){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,i||void 0]),e.position={start:t5(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){let i=this.stack.pop(),n=this.tokenStack.pop();if(n)n[0].type!==e.type&&(t?t.call(this,e,n[0]):(n[1]||t6).call(this,e,n[0]));else throw Error("Cannot close `"+e.type+"` ("+eb({start:e.start,end:e.end})+"): its not open");i.position.end=t5(e.end)}function o(){return eW(this.stack.pop(),"boolean"!=typeof eO.includeImageAlt||eO.includeImageAlt,"boolean"!=typeof eO.includeHtml||eO.includeHtml)}function h(e){let t=this.stack[this.stack.length-1].children,i=t[t.length-1];i&&"text"===i.type||((i={type:"text",value:""}).position={start:t5(e.start),end:void 0},t.push(i)),this.stack.push(i)}function c(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=t5(e.end)}function u(){this.data.atHardBreak=!0}function d(e){this.data.characterReferenceType=e.type}function p(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function g(){return{type:"break"}}function m(){return{type:"html",value:""}}function b(){return{type:"link",title:null,url:"",children:[]}}function w(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(r)(function(e){for(;!e7(e););return e}((function(e){let t={constructs:function(e){let t={},i=-1;for(;++i<e.length;)!function(e,t){let i;for(i in t){let n,r=(eH.call(e,i)?e[i]:void 0)||(e[i]={}),a=t[i];if(a)for(n in a){eH.call(r,n)||(r[n]=[]);let e=a[n];!function(e,t){let i=-1,n=[];for(;++i<t.length;)("after"===t[i].add?e:n).push(t[i]);eB(e,0,0,n)}(r[n],Array.isArray(e)?e:e?[e]:[])}}}(t,e[i]);return t}([t$,...(e||{}).extensions||[]]),content:i(e3),defined:[],document:i(e4),flow:i(ti),lazy:{},string:i(tr),text:i(ta)};return t;function i(e){return function(i){return function(e,t,i){let n={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0},r={},a=[],s=[],l=[],o={attempt:f(function(e,t){g(e,t.from)}),check:f(p),consume:function(e){eQ(e)?(n.line++,n.column=1,n.offset+=-3===e?2:1,m()):-1!==e&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=e},enter:function(e,t){let i=t||{};return i.type=e,i.start=d(),h.events.push(["enter",i,h]),l.push(i),i},exit:function(e){let t=l.pop();return t.end=d(),h.events.push(["exit",t,h]),t},interrupt:f(p,{interrupt:!0})},h={code:null,containerState:{},defineSkip:function(e){r[e.line]=e.column,m()},events:[],now:d,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let i,n=-1,r=[];for(;++n<e.length;){let a,s=e[n];if("string"==typeof s)a=s;else switch(s){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(s)}i=-2===s,r.push(a)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){return(s=ez(s,e),function(){let e;for(;n._index<s.length;){let i=s[n._index];if("string"==typeof i)for(e=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===e&&n._bufferIndex<i.length;){var t;t=i.charCodeAt(n._bufferIndex),c=c(t)}else c=c(i)}}(),null!==s[s.length-1])?[]:(g(t,0),h.events=tc(a,h.events,h),h.events)}},c=t.tokenize.call(h,o);return t.resolveAll&&a.push(t),h;function u(e){return function(e,t){let i,n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;if(n===a)i=[e[n].slice(r,s)];else{if(i=e.slice(n,a),r>-1){let e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}s>0&&i.push(e[a].slice(0,s))}return i}(s,e)}function d(){let{_bufferIndex:e,_index:t,line:i,column:r,offset:a}=n;return{_bufferIndex:e,_index:t,line:i,column:r,offset:a}}function p(e,t){t.restore()}function f(e,t){return function(i,r,a){var s;let c,u,p,f;return Array.isArray(i)?g(i):"tokenize"in i?g([i]):(s=i,function(e){let t=null!==e&&s[e],i=null!==e&&s.null;return g([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(i)?i:i?[i]:[]])(e)});function g(e){return(c=e,u=0,0===e.length)?a:b(e[u])}function b(e){return function(i){return(f=function(){let e=d(),t=h.previous,i=h.currentConstruct,r=h.events.length,a=Array.from(l);return{from:r,restore:function(){n=e,h.previous=t,h.currentConstruct=i,h.events.length=r,l=a,m()}}}(),p=e,e.partial||(h.currentConstruct=e),e.name&&h.parser.constructs.disable.null.includes(e.name))?y(i):e.tokenize.call(t?Object.assign(Object.create(h),t):h,o,w,y)(i)}}function w(t){return e(p,f),r}function y(e){return(f.restore(),++u<c.length)?b(c[u]):a}}}function g(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&eB(h.events,t,h.events.length-t,e.resolve(h.events.slice(t),h)),e.resolveTo&&(h.events=e.resolveTo(h.events,h))}function m(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}(t,e,i)}}})(r).document().write((s=1,l="",o=!0,function(e,t,i){let n,r,h,c,u,d=[];for(e=l+("string"==typeof e?e.toString():new TextDecoder(t||void 0).decode(e)),h=0,l="",o&&(65279===e.charCodeAt(0)&&h++,o=void 0);h<e.length;){if(t0.lastIndex=h,c=(n=t0.exec(e))&&void 0!==n.index?n.index:e.length,u=e.charCodeAt(c),!n){l=e.slice(h);break}if(10===u&&h===c&&a)d.push(-3),a=void 0;else switch(a&&(d.push(-5),a=void 0),h<c&&(d.push(e.slice(h,c)),s+=c-h),u){case 0:d.push(65533),s++;break;case 9:for(r=4*Math.ceil(s/4),d.push(-2);s++<r;)d.push(-1);break;case 10:d.push(-4),s=1;break;default:a=!0,s=1}h=c+1}return i&&(a&&d.push(-5),l&&d.push(l),d.push(null)),d})(i,n,!0))))}}let t8="object"==typeof self?self:globalThis,t7=e=>((e,t)=>{let i=(t,i)=>(e.set(i,t),t),n=r=>{if(e.has(r))return e.get(r);let[a,s]=t[r];switch(a){case 0:case -1:return i(s,r);case 1:{let e=i([],r);for(let t of s)e.push(n(t));return e}case 2:{let e=i({},r);for(let[t,i]of s)e[n(t)]=n(i);return e}case 3:return i(new Date(s),r);case 4:{let{source:e,flags:t}=s;return i(new RegExp(e,t),r)}case 5:{let e=i(new Map,r);for(let[t,i]of s)e.set(n(t),n(i));return e}case 6:{let e=i(new Set,r);for(let t of s)e.add(n(t));return e}case 7:{let{name:e,message:t}=s;return i(new t8[e](t),r)}case 8:return i(BigInt(s),r);case"BigInt":return i(Object(BigInt(s)),r);case"ArrayBuffer":return i(new Uint8Array(s).buffer,s);case"DataView":{let{buffer:e}=new Uint8Array(s);return i(new DataView(e),s)}}return i(new t8[a](s),r)};return n})(new Map,e)(0),{toString:ie}={},{keys:it}=Object,ii=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let i=ie.call(e).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""];case"DataView":return[1,i]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},ir=e=>{let[t,i]=e;return 0===t&&("function"===i||"symbol"===i)},ia=function(e){let{json:t,lossy:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return((e,t,i,n)=>{let r=(e,t)=>{let r=n.push(e)-1;return i.set(t,r),r},a=n=>{if(i.has(n))return i.get(n);let[s,l]=ii(n);switch(s){case 0:{let t=n;switch(l){case"bigint":s=8,t=n.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+l);t=null;break;case"undefined":return r([-1],n)}return r([s,t],n)}case 1:{if(l){let e=n;return"DataView"===l?e=new Uint8Array(n.buffer):"ArrayBuffer"===l&&(e=new Uint8Array(n)),r([l,[...e]],n)}let e=[],t=r([s,e],n);for(let t of n)e.push(a(t));return t}case 2:{if(l)switch(l){case"BigInt":return r([l,n.toString()],n);case"Boolean":case"Number":case"String":return r([l,n.valueOf()],n)}if(t&&"toJSON"in n)return a(n.toJSON());let i=[],o=r([s,i],n);for(let t of it(n))(e||!ir(ii(n[t])))&&i.push([a(t),a(n[t])]);return o}case 3:return r([s,n.toISOString()],n);case 4:{let{source:e,flags:t}=n;return r([s,{source:e,flags:t}],n)}case 5:{let t=[],i=r([s,t],n);for(let[i,r]of n)(e||!(ir(ii(i))||ir(ii(r))))&&t.push([a(i),a(r)]);return i}case 6:{let t=[],i=r([s,t],n);for(let i of n)(e||!ir(ii(i)))&&t.push(a(i));return i}}let{message:o}=n;return r([s,{name:l,message:o}],n)};return a})(!(t||i),!!t,new Map,n)(e),n},is="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?t7(ia(e,t)):structuredClone(e):(e,t)=>t7(ia(e,t));function il(e){let t=[],i=-1,n=0,r=0;for(;++i<e.length;){let a=e.charCodeAt(i),s="";if(37===a&&eG(e.charCodeAt(i+1))&&eG(e.charCodeAt(i+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(i+1);a<56320&&t>56319&&t<57344?(s=String.fromCharCode(a,t),r=1):s=""}else s=String.fromCharCode(a);s&&(t.push(e.slice(n,i),encodeURIComponent(s)),n=i+r+1,s=""),r&&(i+=r,r=0)}return t.join("")+e.slice(n)}function io(e,t){let i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function ih(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}let ic=function(e){var t,i;if(null==e)return id;if("function"==typeof e)return iu(e);if("object"==typeof e){return Array.isArray(e)?function(e){let t=[],i=-1;for(;++i<e.length;)t[i]=ic(e[i]);return iu(function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];let r=-1;for(;++r<t.length;)if(t[r].apply(this,i))return!0;return!1})}(e):(t=e,iu(function(e){let i;for(i in t)if(e[i]!==t[i])return!1;return!0}))}if("string"==typeof e){return i=e,iu(function(e){return e&&e.type===i})}throw Error("Expected function, string, or object as test")};function iu(e){return function(t,i,n){return!!(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof i?i:void 0,n||void 0))}}function id(){return!0}let ip=[];function ig(e,t,i,n){let r,a,s,l;"function"==typeof t&&"function"!=typeof i?(a=void 0,s=t,r=i):(a=t,s=i,r=n);var o=a,h=function(e,t){let i=t[t.length-1],n=i?i.children.indexOf(e):void 0;return s(e,n,i)},c=r;"function"==typeof o&&"function"!=typeof h?(c=h,h=o):l=o;let u=ic(l),d=c?-1:1;(function e(t,i,n){let r=t&&"object"==typeof t?t:{};if("string"==typeof r.type){let e="string"==typeof r.tagName?r.tagName:"string"==typeof r.name?r.name:void 0;Object.defineProperty(a,"name",{value:"node ("+t.type+(e?"<"+e+">":"")+")"})}return a;function a(){var r;let a,s,l,p=ip;if((!o||u(t,i,n[n.length-1]||void 0))&&!1===(p=Array.isArray(r=h(t,n))?r:"number"==typeof r?[!0,r]:null==r?ip:[r])[0])return p;if("children"in t&&t.children&&t.children&&"skip"!==p[0])for(s=(c?t.children.length:-1)+d,l=n.concat(t);s>-1&&s<t.children.length;){if(!1===(a=e(t.children[s],s,l)())[0])return a;s="number"==typeof a[1]?a[1]:s+d}return p}})(e,void 0,[])()}function im(e,t){let i=t.referenceType,n="]";if("collapsed"===i?n+="[]":"full"===i&&(n+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+n}];let r=e.all(t),a=r[0];a&&"text"===a.type?a.value="["+a.value:r.unshift({type:"text",value:"["});let s=r[r.length-1];return s&&"text"===s.type?s.value+=n:r.push({type:"text",value:n}),r}function iv(e){let t=e.spread;return null==t?e.children.length>1:t}function ib(e,t,i){let n=0,r=e.length;if(t){let t=e.codePointAt(n);for(;9===t||32===t;)n++,t=e.codePointAt(n)}if(i){let t=e.codePointAt(r-1);for(;9===t||32===t;)r--,t=e.codePointAt(r-1)}return r>n?e.slice(n,r):""}let iw={blockquote:function(e,t){let i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)},break:function(e,t){let i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:"\n"}]},code:function(e,t){let i=t.value?t.value+"\n":"",n={};t.lang&&(n.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:i}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r={type:"element",tagName:"pre",properties:{},children:[r=e.applyData(t,r)]},e.patch(t,r),r},delete:function(e,t){let i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},emphasis:function(e,t){let i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},footnoteReference:function(e,t){let i,n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=il(r.toLowerCase()),s=e.footnoteOrder.indexOf(r),l=e.footnoteCounts.get(r);void 0===l?(l=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,l+=1,e.footnoteCounts.set(r,l);let o={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,o);let h={type:"element",tagName:"sup",properties:{},children:[o]};return e.patch(t,h),e.applyData(t,h)},heading:function(e,t){let i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},html:function(e,t){if(e.options.allowDangerousHtml){let i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}},imageReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return im(e,t);let r={src:il(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){let i={src:il(t.url)};null!==t.alt&&void 0!==t.alt&&(i.alt=t.alt),null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,n),e.applyData(t,n)},inlineCode:function(e,t){let i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);let n={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,n),e.applyData(t,n)},linkReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return im(e,t);let r={href:il(n.url||"")};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){let i={href:il(t.url)};null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},listItem:function(e,t,i){let n=e.all(t),r=i?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;let i=e.children,n=-1;for(;!t&&++n<i.length;)t=iv(i[n])}return t}(i):iv(t),a={},s=[];if("boolean"==typeof t.checked){let e,i=n[0];i&&"element"===i.type&&"p"===i.tagName?e=i:(e={type:"element",tagName:"p",properties:{},children:[]},n.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<n.length;){let e=n[l];(r||0!==l||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?s.push(e):s.push(...e.children)}let o=n[n.length-1];o&&(r||"element"!==o.type||"p"!==o.tagName)&&s.push({type:"text",value:"\n"});let h={type:"element",tagName:"li",properties:a,children:s};return e.patch(t,h),e.applyData(t,h)},list:function(e,t){let i={},n=e.all(t),r=-1;for("number"==typeof t.start&&1!==t.start&&(i.start=t.start);++r<n.length;){let e=n[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(n,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){let i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},root:function(e,t){let i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)},strong:function(e,t){let i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},table:function(e,t){let i=e.all(t),n=i.shift(),r=[];if(n){let i={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],i),r.push(i)}if(i.length>0){let n={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},a=em(t.children[1]),s=eg(t.children[t.children.length-1]);a&&s&&(n.position={start:a,end:s}),r.push(n)}let a={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){let i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},tableRow:function(e,t,i){let n=i?i.children:void 0,r=0===(n?n.indexOf(t):1)?"th":"td",a=i&&"table"===i.type?i.align:void 0,s=a?a.length:t.children.length,l=-1,o=[];for(;++l<s;){let i=t.children[l],n={},s=a?a[l]:void 0;s&&(n.align=s);let h={type:"element",tagName:r,properties:n,children:[]};i&&(h.children=e.all(i),e.patch(i,h),h=e.applyData(i,h)),o.push(h)}let h={type:"element",tagName:"tr",properties:{},children:e.wrap(o,!0)};return e.patch(t,h),e.applyData(t,h)},text:function(e,t){let i={type:"text",value:function(e){let t=String(e),i=/\r?\n|\r/g,n=i.exec(t),r=0,a=[];for(;n;)a.push(ib(t.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=i.exec(t);return a.push(ib(t.slice(r),r>0,!1)),a.join("")}(String(t.value))};return e.patch(t,i),e.applyData(t,i)},thematicBreak:function(e,t){let i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)},toml:iy,yaml:iy,definition:iy,footnoteDefinition:iy};function iy(){}let ix={}.hasOwnProperty,iA={};function ik(e,t){e.position&&(t.position=function(e){let t=em(e),i=eg(e);if(t&&i)return{start:t,end:i}}(e))}function i_(e,t){let i=t;if(e&&e.data){let t=e.data.hName,n=e.data.hChildren,r=e.data.hProperties;"string"==typeof t&&("element"===i.type?i.tagName=t:i={type:"element",tagName:t,properties:{},children:"children"in i?i.children:[i]}),"element"===i.type&&r&&Object.assign(i.properties,is(r)),"children"in i&&i.children&&null!=n&&(i.children=n)}return i}function iS(e,t){let i=[],n=-1;for(t&&i.push({type:"text",value:"\n"});++n<e.length;)n&&i.push({type:"text",value:"\n"}),i.push(e[n]);return t&&e.length>0&&i.push({type:"text",value:"\n"}),i}function iE(e){let t=0,i=e.charCodeAt(t);for(;9===i||32===i;)t++,i=e.charCodeAt(t);return e.slice(t)}function iM(e,t){let i=function(e,t){let i=t||iA,n=new Map,r=new Map,a={all:function(e){let t=[];if("children"in e){let i=e.children,n=-1;for(;++n<i.length;){let r=a.one(i[n],e);if(r){if(n&&"break"===i[n-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=iE(r.value)),!Array.isArray(r)&&"element"===r.type)){let e=r.children[0];e&&"text"===e.type&&(e.value=iE(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:i_,definitionById:n,footnoteById:r,footnoteCounts:new Map,footnoteOrder:[],handlers:{...iw,...i.handlers},one:function(e,t){let i=e.type,n=a.handlers[i];if(ix.call(a.handlers,i)&&n)return n(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(i)){if("children"in e){let{children:t,...i}=e,n=is(i);return n.children=a.all(e),n}return is(e)}return(a.options.unknownHandler||function(e,t){let i=t.data||{},n="value"in t&&!(ix.call(i,"hProperties")||ix.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)})(a,e,t)},options:i,patch:ik,wrap:iS};return ig(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?n:r,i=String(e.identifier).toUpperCase();t.has(i)||t.set(i,e)}}),a}(e,t),n=i.one(e,void 0),r=function(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||io,n=e.options.footnoteBackLabel||ih,r=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[],o=-1;for(;++o<e.footnoteOrder.length;){let r=e.footnoteById.get(e.footnoteOrder[o]);if(!r)continue;let a=e.all(r),s=String(r.identifier).toUpperCase(),h=il(s.toLowerCase()),c=0,u=[],d=e.footnoteCounts.get(s);for(;void 0!==d&&++c<=d;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof i?i:i(o,c);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof n?n:n(o,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let p=a[a.length-1];if(p&&"element"===p.type&&"p"===p.tagName){let e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...u)}else a.push(...u);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(a,!0)};e.patch(r,f),l.push(f)}if(0!==l.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...is(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:"\n"}]}}(i),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&(M("children"in a),a.children.push({type:"text",value:"\n"},r)),a}function iC(e,t){return e&&"run"in e?async function(i,n){let r=iM(i,{file:n,...t});await e.run(r,n)}:function(i,n){return iM(i,{file:n,...e||t})}}function iT(e){if(e)throw e}var iP=e.i(4100);function iR(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let iI={basename:function(e,t){let i;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');iL(e);let n=0,r=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,l=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else s<0&&(i=!0,s=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)},dirname:function(e){let t;if(iL(e),0===e.length)return".";let i=-1,n=e.length;for(;--n;)if(47===e.codePointAt(n)){if(t){i=n;break}}else t||(t=!0);return i<0?47===e.codePointAt(0)?"/":".":1===i&&47===e.codePointAt(0)?"//":e.slice(0,i)},extname:function(e){let t;iL(e);let i=e.length,n=-1,r=0,a=-1,s=0;for(;i--;){let l=e.codePointAt(i);if(47===l){if(t){r=i+1;break}continue}n<0&&(t=!0,n=i+1),46===l?a<0?a=i:1!==s&&(s=1):a>-1&&(s=-1)}return a<0||n<0||0===s||1===s&&a===n-1&&a===r+1?"":e.slice(a,n)},join:function(){let e;for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1;for(;++r<i.length;)iL(i[r]),i[r]&&(e=void 0===e?i[r]:e+"/"+i[r]);return void 0===e?".":function(e){iL(e);let t=47===e.codePointAt(0),i=function(e,t){let i,n,r="",a=0,s=-1,l=0,o=-1;for(;++o<=e.length;){if(o<e.length)i=e.codePointAt(o);else if(47===i)break;else i=47;if(47===i){if(s===o-1||1===l);else if(s!==o-1&&2===l){if(r.length<2||2!==a||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2)){if(r.length>2){if((n=r.lastIndexOf("/"))!==r.length-1){n<0?(r="",a=0):a=(r=r.slice(0,n)).length-1-r.lastIndexOf("/"),s=o,l=0;continue}}else if(r.length>0){r="",a=0,s=o,l=0;continue}}t&&(r=r.length>0?r+"/..":"..",a=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),a=o-s-1;s=o,l=0}else 46===i&&l>-1?l++:l=-1}return r}(e,!t);return 0!==i.length||t||(i="."),i.length>0&&47===e.codePointAt(e.length-1)&&(i+="/"),t?"/"+i:i}(e)},sep:"/"};function iL(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}let iD={cwd:function(){return"/"}};function iF(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}let iN=["history","path","basename","stem","extname","dirname"];class iO{get basename(){return"string"==typeof this.path?iI.basename(this.path):void 0}set basename(e){ij(e,"basename"),iW(e,"basename"),this.path=iI.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?iI.dirname(this.path):void 0}set dirname(e){iB(this.basename,"dirname"),this.path=iI.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?iI.extname(this.path):void 0}set extname(e){if(iW(e,"extname"),iB(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=iI.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){iF(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!iF(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,i=-1;for(;++i<t.length;)if(37===t.codePointAt(i)&&50===t.codePointAt(i+1)){let e=t.codePointAt(i+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),ij(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?iI.basename(this.path,this.extname):void 0}set stem(e){ij(e,"stem"),iW(e,"stem"),this.path=iI.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){let n=this.message(e,t,i);throw n.fatal=!0,n}info(e,t,i){let n=this.message(e,t,i);return n.fatal=void 0,n}message(e,t,i){let n=new eA(e,t,i);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,i;t=e?iF(e)?{path:e}:"string"==typeof e||function(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":iD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<iN.length;){let e=iN[n];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(i in t)iN.includes(i)||(this[i]=t[i])}}function iW(e,t){if(e&&e.includes(iI.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+iI.sep+"`")}function ij(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function iB(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}let iz=function(e){let t=this.constructor.prototype,i=t[e],n=function(){return i.apply(n,arguments)};return Object.setPrototypeOf(n,t),n},iH={}.hasOwnProperty;class iU extends iz{copy(){let e=new iU,t=-1;for(;++t<this.attachers.length;){let i=this.attachers[t];e.use(...i)}return e.data((0,iP.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(iX("data",this.frozen),this.namespace[e]=t,this):iH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(iX("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(!1===t[0])continue;!0===t[0]&&(t[0]=void 0);let i=e.call(this,...t);"function"==typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=iQ(e),i=this.parser||this.Parser;return iV("parse",i),i(String(t),t)}process(e,t){let i=this;return this.freeze(),iV("process",this.parser||this.Parser),iq("process",this.compiler||this.Compiler),t?n(void 0,t):new Promise(n);function n(n,r){let a=iQ(e),s=i.parse(a);function l(e,i){e||!i?r(e):n?n(i):(M(t,"`done` is defined if `resolve` is not"),t(void 0,i))}i.run(s,a,function(e,t,n){var r,a;if(e||!t||!n)return l(e);let s=i.stringify(t,n);"string"==typeof(r=s)||(a=r)&&"object"==typeof a&&"byteLength"in a&&"byteOffset"in a?n.value=s:n.result=s,l(e,n)})}}processSync(e){let t,i=!1;return this.freeze(),iV("processSync",this.parser||this.Parser),iq("processSync",this.compiler||this.Compiler),this.process(e,function(e,n){i=!0,iT(e),t=n}),iY("processSync","process",i),M(t,"we either bailed on an error or have a tree"),t}run(e,t,i){iK(e),this.freeze();let n=this.transformers;return i||"function"!=typeof t||(i=t,t=void 0),i?r(void 0,i):new Promise(r);function r(r,a){M("function"!=typeof t,"`file` cant be a `done` anymore, we checked");let s=iQ(t);n.run(e,s,function(t,n,s){let l=n||e;t?a(t):r?r(l):(M(i,"`done` is defined if `resolve` is not"),i(void 0,l,s))})}}runSync(e,t){let i,n=!1;return this.run(e,t,function(e,t){iT(e),i=t,n=!0}),iY("runSync","run",n),M(i,"we either bailed on an error or have a tree"),i}stringify(e,t){this.freeze();let i=iQ(t),n=this.compiler||this.Compiler;return iq("stringify",n),iK(e),n(e,i)}use(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let r=this.attachers,a=this.namespace;if(iX("use",this.frozen),null==e);else if("function"==typeof e)o(e,i);else if("object"==typeof e)Array.isArray(e)?l(e):s(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function s(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(a.settings=(0,iP.default)(!0,a.settings,e.settings))}function l(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;){var i=e[t];if("function"==typeof i)o(i,[]);else if("object"==typeof i)if(Array.isArray(i)){let[e,...t]=i;o(e,t)}else s(i);else throw TypeError("Expected usable value, not `"+i+"`")}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function o(e,t){let i=-1,n=-1;for(;++i<r.length;)if(r[i][0]===e){n=i;break}if(-1===n)r.push([e,...t]);else if(t.length>0){let[i,...a]=t,s=r[n][1];iR(s)&&iR(i)&&(i=(0,iP.default)(!0,s,i)),r[n]=[e,i,...a]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let e=[],t={run:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1,a=i.pop();if("function"!=typeof a)throw TypeError("Expected function as last argument, not "+a);!function t(n){for(var s=arguments.length,l=Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];let h=e[++r],c=-1;if(n)return void a(n);for(;++c<i.length;)(null===l[c]||void 0===l[c])&&(l[c]=i[c]);i=l,h?(function(e,t){let i;return function(){let t;for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];let o=e.length>s.length;o&&s.push(n);try{t=e.apply(this,s)}catch(e){if(o&&i)throw e;return n(e)}o||(t&&t.then&&"function"==typeof t.then?t.then(r,n):t instanceof Error?n(t):r(t))};function n(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];i||(i=!0,t(e,...r))}function r(e){n(null,e)}})(h,t)(...l):a(null,...l)}(null,...i)},use:function(i){if("function"!=typeof i)throw TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}};return t}()}}let iG=new iU().freeze();function iV(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function iq(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function iX(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function iK(e){if(!iR(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function iY(e,t,i){if(!i)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function iQ(e){var t;return(t=e)&&"object"==typeof t&&"message"in t&&"messages"in t?e:new iO(e)}let iJ=[],iZ={allowDangerousHtml:!0},i$=/^(https?|ircs?|mailto|xmpp)$/i,i0=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function i1(e){let t=function(e){let t=e.rehypePlugins||iJ,i=e.remarkPlugins||iJ,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iZ}:iZ;return iG().use(t9).use(i).use(iC,n).use(t)}(e),n=function(e){let t=e.children||"",i=new iO;return"string"==typeof t?i.value=t:C("Unexpected value `"+t+"` for `children` prop, expected `string`"),i}(e);return function(e,t){let n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,l=t.skipHtml,o=t.unwrapDisallowed,h=t.urlTransform||i2;for(let e of i0)Object.hasOwn(t,e.from)&&C("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return n&&s&&C("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),ig(e,function(e,t,i){if("raw"===e.type&&i&&"number"==typeof t)return l?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in eN)if(Object.hasOwn(eN,t)&&Object.hasOwn(e.properties,t)){let i=e.properties[t],n=eN[t];(null===n||n.includes(e.tagName))&&(e.properties[t]=h(String(i||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!s&&s.includes(e.tagName);if(!a&&r&&"number"==typeof t&&(a=!r(e,t,i)),a&&i&&"number"==typeof t)return o&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),function(e,t){var i,n,r,a;let s;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let l=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");i=l,n=t.jsxDEV,s=function(e,t,r,a){let s=Array.isArray(r.children),l=em(e);return n(t,r,a,s,{columnNumber:l?l.column-1:void 0,fileName:i,lineNumber:l?l.line:void 0},void 0)}}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");r=t.jsx,a=t.jsxs,s=function(e,t,i,n){let s=Array.isArray(i.children)?a:r;return n?s(t,i,n):s(t,i)}}let o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:l,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?ep:ed,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},h=eT(o,e,void 0);return h&&"string"!=typeof h?h:o.create(e,o.Fragment,{children:h||void 0},void 0)}(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(n),n),e)}function i2(e){let t=e.indexOf(":"),i=e.indexOf("?"),n=e.indexOf("#"),r=e.indexOf("/");return -1===t||-1!==r&&t>r||-1!==i&&t>i||-1!==n&&t>n||i$.test(e.slice(0,t))?e:""}var b=a,i3=e.i(76700),i3=i3,i4=e.i(57172),i5=e.i(48458),i5=i5,i6=e.i(4270),i6=i6,i9=e.i(21071),i9=i9,i8=e.i(27173),i8=i8,i7=e.i(47167),ne=e.i(7670),nt=e.i(76423),ni=e.i(19727),nn=e.i(19130),nr=e.i(1434),na=e.i(84429),ns=e.i(39416),nl=e.i(17494),no=e.i(43982),nh=e.i(10900);let nc=(0,nl.default)(),nu=(0,nr.default)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function nd(e){return(0,na.default)({props:e,name:"MuiStack",defaultTheme:nc})}let np=e=>{let{ownerState:t,theme:i}=e,n={display:"flex",flexDirection:"column",...(0,no.handleBreakpoints)({theme:i},(0,no.resolveBreakpointValues)({values:t.direction,breakpoints:i.breakpoints.values}),e=>({flexDirection:e}))};if(t.spacing){let e=(0,nh.createUnarySpacing)(i),r=Object.keys(i.breakpoints.values).reduce((e,i)=>(("object"==typeof t.spacing&&null!=t.spacing[i]||"object"==typeof t.direction&&null!=t.direction[i])&&(e[i]=!0),e),{}),a=(0,no.resolveBreakpointValues)({values:t.direction,base:r}),s=(0,no.resolveBreakpointValues)({values:t.spacing,base:r});"object"==typeof a&&Object.keys(a).forEach((e,t,i)=>{if(!a[e]){let n=t>0?a[i[t-1]]:"column";a[e]=n}}),n=(0,nt.default)(n,(0,no.handleBreakpoints)({theme:i},s,(i,n)=>t.useFlexGap?{gap:(0,nh.getValue)(e,i)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[n?a[n]:t.direction])]:(0,nh.getValue)(e,i)}}))}return(0,no.mergeBreakpointsInOrder)(i.breakpoints,n)};var nf=e.i(90059),ng=e.i(99844);let nm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{createStyledComponent:t=nu,useThemeProps:r=nd,componentName:a="MuiStack"}=e,s=t(np);return n.forwardRef(function(e,t){let l=r(e),{component:o="div",direction:h="column",spacing:c=0,divider:u,children:d,className:p,useFlexGap:f=!1,...g}=(0,ns.extendSxProp)(l),m=(0,nn.default)({root:["root"]},e=>(0,ni.default)(a,e),{});return(0,i.jsx)(s,{as:o,ownerState:{direction:h,spacing:c,useFlexGap:f},ref:t,className:(0,ne.default)(m.root,p),...g,children:u?function(e,t){let i=n.Children.toArray(e).filter(Boolean);return i.reduce((e,r,a)=>(e.push(r),a<i.length-1&&e.push(n.cloneElement(t,{key:"separator-".concat(a)})),e),[])}(d,u):d})})}({createStyledComponent:(0,nf.default)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,ng.useDefaultProps)({props:e,name:"MuiStack"})});var nv=p,nb=e.i(67239);let nw=(0,y.default)((0,i.jsx)("path",{d:"M14.12 10.47 12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8z"}),"DeleteForeverOutlined"),ny=(0,y.default)((0,i.jsx)("path",{d:"M5 4h14v2H5zm0 10h4v6h6v-6h4l-7-7zm8-2v6h-2v-6H9.83L12 9.83 14.17 12z"}),"PublishOutlined");var nx=e.i(67034);function nA(e,t){return t.get?t.get.call(e):t.value}function nk(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function n_(e,t){var i=nk(e,t,"get");return nA(e,i)}function nS(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function nE(e,t,i){nS(e,t),t.set(e,i)}function nM(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}function nC(e,t,i){var n=nk(e,t,"set");return nM(e,n,i),i}function nT(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}function nP(e,t){var i=nk(e,t,"update");return nT(e,i)}function nR(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function nI(e,t){nS(e,t),t.add(e)}function nL(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}function nD(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function nF(e,t,i){return nL(e,t),nD(i,"get"),nA(e,i)}function nN(e,t,i,n){return nL(e,t),nD(i,"set"),nM(e,i,n),n}function nO(e,t,i){return nL(e,t),nD(i,"update"),nT(e,i)}var nW=e.i(99749);function nj(e,t){var i=nk(e,t,"set");if(i.set)return"__destrObj"in i||(i.__destrObj={set value(v){i.set.call(e,v)}}),i.__destrObj;if(!i.writable)throw TypeError("attempted to set read only private field");return i}let nB={get url(){return`file://${e.P("node_modules/pdfjs-dist/build/pdf.mjs")}`}};var nz={};nz.d=(e,t)=>{for(var i in t)nz.o(t,i)&&!nz.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},nz.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var nH=globalThis.pdfjsLib={};nz.d(nH,{AbortException:()=>ro,AnnotationEditorLayer:()=>vT,AnnotationEditorParamsType:()=>nY,AnnotationEditorType:()=>nK,AnnotationEditorUIManager:()=>sk,AnnotationLayer:()=>pf,AnnotationMode:()=>nX,ColorPicker:()=>f0,DOMSVGFactory:()=>uV,DrawLayer:()=>vU,FeatureTest:()=>rd,GlobalWorkerOptions:()=>hq,ImageKind:()=>nZ,InvalidPDFException:()=>rr,MissingPDFException:()=>ra,OPS:()=>n2,OutputScale:()=>rz,PDFDataRangeTransport:()=>ui,PDFDateString:()=>rD,PDFWorker:()=>ug,PasswordResponses:()=>n3,PermissionFlag:()=>nQ,PixelsPerInch:()=>rA,RenderingCancelledException:()=>rS,TextLayer:()=>cG,TouchManager:()=>lp,UnexpectedResponseException:()=>rs,Util:()=>rf,VerbosityLevel:()=>n1,XfaLayer:()=>uq,build:()=>uB,createValidAbsoluteUrl:()=>n7,fetchData:()=>rk,getDocument:()=>c8,getFilenameFromUrl:()=>rC,getPdfFilenameFromUrl:()=>rT,getXfaPageViewport:()=>rN,isDataScheme:()=>rE,isPdfFile:()=>rM,noContextMenu:()=>rI,normalizeUnicode:()=>rw,setLayerDimensions:()=>rB,shadow:()=>re,stopEvent:()=>rL,version:()=>uj});let nU="object"==typeof i7.default&&i7.default+""=="[object process]"&&!i7.default.versions.nw&&!(i7.default.versions.electron&&i7.default.type&&"browser"!==i7.default.type),nG=[1,0,0,1,0,0],nV=[.001,0,0,.001,0,0],nq={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nX={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nK={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},nY={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},nQ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nJ={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nZ={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},n$={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},n0={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},n1={ERRORS:0,WARNINGS:1,INFOS:5},n2={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},n3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},n4=n1.WARNINGS;function n5(e){n4>=n1.INFOS&&console.log("Info: ".concat(e))}function n6(e){n4>=n1.WARNINGS&&console.log("Warning: ".concat(e))}function n9(e){throw Error(e)}function n8(e,t){e||n9(t)}function n7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){let t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e="http://".concat(e))}if(i.tryConvertEncoding)try{var n;n=e,e=decodeURIComponent(escape(n))}catch(e){}}let r=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(e){}return null}function re(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}let rt=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=Error(),e.constructor=e,e}();class ri extends rt{constructor(e,t){super(e,"PasswordException"),this.code=t}}class rn extends rt{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rr extends rt{constructor(e){super(e,"InvalidPDFException")}}class ra extends rt{constructor(e){super(e,"MissingPDFException")}}class rs extends rt{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class rl extends rt{constructor(e){super(e,"FormatError")}}class ro extends rt{constructor(e){super(e,"AbortException")}}function rh(e){("object"!=typeof e||(null==e?void 0:e.length)===void 0)&&n9("Invalid argument for bytesToString");let t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);let i=[];for(let n=0;n<t;n+=8192){let r=Math.min(n+8192,t),a=e.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function rc(e){"string"!=typeof e&&n9("Invalid argument for stringToBytes");let t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}function ru(e){let t=Object.create(null);for(let[i,n]of e)t[i]=n;return t}class rd{static get isLittleEndian(){return re(this,"isLittleEndian",function(){let e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return re(this,"isEvalSupported",function(){try{return Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return re(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return re(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){var e,t;return"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.platform)?re(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof(null==(t=navigator)?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):re(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return re(this,"isCSSRoundSupported",null==(t=globalThis.CSS)||null==(e=t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}let rp=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class rf{static makeHexColor(e,t,i){return"#".concat(rp[e]).concat(rp[t]).concat(rp[i])}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){let i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){let i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*n))/2;return[Math.sqrt(s+l||1),Math.sqrt(s-l||1)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;let r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,n,a]}static bezierBoundingBox(e,t,i,n,r,a,s,l,o){return o?(o[0]=Math.min(o[0],e,s),o[1]=Math.min(o[1],t,l),o[2]=Math.max(o[2],e,s),o[3]=Math.max(o[3],t,l)):o=[Math.min(e,s),Math.min(t,l),Math.max(e,s),Math.max(t,l)],(nL(this,rf),rm).call(rf,e,i,r,s,t,n,a,l,3*(-e+3*(i-r)+s),6*(e-2*i+r),3*(i-e),o),(nL(this,rf),rm).call(rf,e,i,r,s,t,n,a,l,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),o),o}}function rg(e,t,i,n,r,a,s,l,o,h){if(o<=0||o>=1)return;let c=1-o,u=o*o,d=u*o,p=c*(c*(c*e+3*o*t)+3*u*i)+d*n,f=c*(c*(c*r+3*o*a)+3*u*s)+d*l;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}function rm(e,t,i,n,r,a,s,l,o,h,c,u){if(1e-12>Math.abs(o)){Math.abs(h)>=1e-12&&(nL(this,rf),rg).call(rf,e,t,i,n,r,a,s,l,-c/h,u);return}let d=h**2-4*c*o;if(d<0)return;let p=Math.sqrt(d),f=2*o;(nL(this,rf),rg).call(rf,e,t,i,n,r,a,s,l,(-h+p)/f,u),(nL(this,rf),rg).call(rf,e,t,i,n,r,a,s,l,(-h-p)/f,u)}let rv=null,rb=null;function rw(e){return rv||(rv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rb=new Map([["","t"]])),e.replaceAll(rv,(e,t,i)=>t?t.normalize("NFKC"):rb.get(i))}let ry="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new Promise(t=>{t(e(...i))})});let rx="http://www.w3.org/2000/svg";class rA{}async function rk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(rR(e,document.baseURI)){let i=await fetch(e);if(!i.ok)throw Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}n(Error(r.statusText))}},r.send(null)})}(0,nW._)(rA,"CSS",96),(0,nW._)(rA,"PDF",72),(0,nW._)(rA,"PDF_TO_CSS_UNITS",rA.CSS/rA.PDF);class r_{get rawDims(){let{userUnit:e,viewBox:t}=this,i=t.map(t=>t*e);return re(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r_({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return rf.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=rf.applyTransform([e[0],e[1]],this.transform),i=rf.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return rf.applyInverseTransform([e,t],this.transform)}constructor({viewBox:e,userUnit:t,scale:i,rotation:n,offsetX:r=0,offsetY:a=0,dontFlip:s=!1}){let l,o,h,c,u,d,p,f;this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=n,this.offsetX=r,this.offsetY=a,i*=t;let g=(e[2]+e[0])/2,m=(e[3]+e[1])/2;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,o=0,h=0,c=1;break;case 90:l=0,o=1,h=1,c=0;break;case 270:l=0,o=-1,h=-1,c=0;break;case 0:l=1,o=0,h=0,c=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(h=-h,c=-c),0===l?(u=Math.abs(m-e[1])*i+r,d=Math.abs(g-e[0])*i+a,p=(e[3]-e[1])*i,f=(e[2]-e[0])*i):(u=Math.abs(g-e[0])*i+r,d=Math.abs(m-e[1])*i+a,p=(e[2]-e[0])*i,f=(e[3]-e[1])*i),this.transform=[l*i,o*i,h*i,c*i,u-l*i*g-h*i*m,d-o*i*g-c*i*m],this.width=p,this.height=f}}class rS extends rt{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function rE(e){let t=e.length,i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}function rM(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function rC(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function rT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(rE(e))return n6('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0]).includes("%"))try{r=i.exec(decodeURIComponent(r))[0]}catch(e){}return r||t}class rP{time(e){e in this.started&&n6("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||n6("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:i,start:n,end:r}of this.times)e.push("".concat(i.padEnd(t)," ").concat(r-n,"ms\n"));return e.join("")}constructor(){(0,nW._)(this,"started",Object.create(null)),(0,nW._)(this,"times",[])}}function rR(e,t){try{let{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i}catch(e){return!1}}function rI(e){e.preventDefault()}function rL(e){e.preventDefault(),e.stopPropagation()}class rD{static toDateObject(e){if(!e||"string"!=typeof e)return null;nN(this,rD,rF,nF(this,rD,rF)||RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=nF(this,rD,rF).exec(e);if(!t)return null;let i=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let o=t[7]||"Z",h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(t[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===o?(a+=h,s+=c):"+"===o&&(a-=h,s-=c),new Date(Date.UTC(i,n,r,a,s,l))}}var rF={writable:!0,value:void 0};function rN(e,t){let{scale:i=1,rotation:n=0}=t,{width:r,height:a}=e.attributes.style;return new r_({viewBox:[0,0,parseInt(r),parseInt(a)],userUnit:1,scale:i,rotation:n})}function rO(e){if(e.startsWith("#")){let t=parseInt(e.slice(1),16);return[(0xff0000&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(n6('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function rW(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform();return[t,i,n,r,a,s]}function rj(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform().invertSelf();return[t,i,n,r,a,s]}function rB(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t instanceof r_){let{pageWidth:n,pageHeight:r}=t.rawDims,{style:a}=e,s=rd.isCSSRoundSupported,l="var(--scale-factor) * ".concat(n,"px"),o="var(--scale-factor) * ".concat(r,"px"),h=s?"round(down, ".concat(l,", var(--scale-round-x, 1px))"):"calc(".concat(l,")"),c=s?"round(down, ".concat(o,", var(--scale-round-y, 1px))"):"calc(".concat(o,")");i&&t.rotation%180!=0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&e.setAttribute("data-main-rotation",t.rotation)}class rz{get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}}var rH=new WeakMap,rU=new WeakMap,rG=new WeakMap,rV=new WeakMap,rq=new WeakMap,rX=new WeakSet,rK=new WeakSet,rY=new WeakSet,rQ=new WeakSet,rJ=new WeakMap;class rZ{render(){let e=nC(this,rH,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=n_(this,rG)._uiManager._signal;e.addEventListener("contextmenu",rI,{signal:t}),e.addEventListener("pointerdown",(nL(rZ,rZ),r0),{signal:t});let i=nC(this,rV,document.createElement("div"));i.className="buttons",e.append(i);let n=n_(this,rG).toolbarPosition;if(n){let{style:t}=e,i="ltr"===n_(this,rG)._uiManager.direction?1-n[0]:n[0];t.insetInlineEnd="".concat(100*i,"%"),t.top="calc(".concat(100*n[1],"% + var(--editor-toolbar-vert-offset))")}return nR(this,rQ,r4).call(this),e}get div(){return n_(this,rH)}hide(){var e;n_(this,rH).classList.add("hidden"),null==(e=n_(this,rU))||e.hideDropdown()}show(){var e;n_(this,rH).classList.remove("hidden"),null==(e=n_(this,rq))||e.shown()}async addAltText(e){let t=await e.render();nR(this,rY,r3).call(this,t),n_(this,rV).prepend(t,n_(this,rJ)),nC(this,rq,e)}addColorPicker(e){nC(this,rU,e);let t=e.renderButton();nR(this,rY,r3).call(this,t),n_(this,rV).prepend(t,n_(this,rJ))}remove(){var e;n_(this,rH).remove(),null==(e=n_(this,rU))||e.destroy(),nC(this,rU,null)}constructor(e){nI(this,rX),nI(this,rK),nI(this,rY),nI(this,rQ),nE(this,rJ,{get:r5,set:void 0}),nE(this,rH,{writable:!0,value:null}),nE(this,rU,{writable:!0,value:null}),nE(this,rG,{writable:!0,value:void 0}),nE(this,rV,{writable:!0,value:null}),nE(this,rq,{writable:!0,value:null}),nC(this,rG,e),nN(rZ,rZ,r$,nF(rZ,rZ,r$)||Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}}var r$={writable:!0,value:null};function r0(e){e.stopPropagation()}function r1(e){n_(this,rG)._focusEventsAllowed=!1,rL(e)}function r2(e){n_(this,rG)._focusEventsAllowed=!0,rL(e)}function r3(e){let t=n_(this,rG)._uiManager._signal;e.addEventListener("focusin",nR(this,rX,r1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",nR(this,rK,r2).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",rI,{signal:t})}function r4(){let{editorType:e,_uiManager:t}=n_(this,rG),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",nF(rZ,rZ,r$)[e]),nR(this,rY,r3).call(this,i),i.addEventListener("click",e=>{t.delete()},{signal:t._signal}),n_(this,rV).append(i)}function r5(){let e=document.createElement("div");return e.className="divider",e}var r6=new WeakMap,r9=new WeakMap,r8=new WeakMap,r7=new WeakSet,ae=new WeakSet,at=new WeakSet;class ai{show(e,t,i){let[n,r]=nR(this,ae,ar).call(this,t,i),{style:a}=nC(this,r9,n_(this,r9)||nR(this,r7,an).call(this));e.append(n_(this,r9)),a.insetInlineEnd="".concat(100*n,"%"),a.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){n_(this,r9).remove()}constructor(e){nI(this,r7),nI(this,ae),nI(this,at),nE(this,r6,{writable:!0,value:null}),nE(this,r9,{writable:!0,value:null}),nE(this,r8,{writable:!0,value:void 0}),nC(this,r8,e)}}function an(){let e=nC(this,r9,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",rI,{signal:n_(this,r8)._signal});let t=nC(this,r6,document.createElement("div"));return t.className="buttons",e.append(t),nR(this,at,aa).call(this),e}function ar(e,t){let i=0,n=0;for(let r of e){let e=r.y+r.height;if(e<i)continue;let a=r.x+(t?r.width:0);if(e>i){n=a,i=e;continue}t?a>n&&(n=a):a<n&&(n=a)}return[t?1-n:n,i]}function aa(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=n_(this,r8)._signal;e.addEventListener("contextmenu",rI,{signal:i}),e.addEventListener("click",()=>{n_(this,r8).highlightSelection("floating_button")},{signal:i}),n_(this,r6).append(e)}function as(e,t,i){for(let n of i)t.addEventListener(n,e[n].bind(e))}var al=new WeakMap;class ao{get id(){return"".concat("pdfjs_internal_editor_").concat(nP(this,al).value++)}constructor(){nE(this,al,{writable:!0,value:0})}}var ah=new WeakMap,ac=new WeakMap,au=new WeakMap,ad=new WeakSet;class ap{static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',re(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){let{lastModified:t,name:i,size:n,type:r}=e;return nR(this,ad,af).call(this,"".concat(t,"_").concat(i,"_").concat(n,"_").concat(r),e)}async getFromUrl(e){return nR(this,ad,af).call(this,e,e)}async getFromBlob(e,t){let i=await t;return nR(this,ad,af).call(this,e,i)}async getFromId(e){nC(this,au,n_(this,au)||new Map);let t=n_(this,au).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){nC(this,au,n_(this,au)||new Map);let i=n_(this,au).get(e);if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:"image_".concat(n_(this,ah),"_").concat(nP(this,ac).value++),refCounter:1,isSvg:!1},n_(this,au).set(e,i),n_(this,au).set(i.id,i),i}getSvgUrl(e){let t=n_(this,au).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){var t;nC(this,au,n_(this,au)||new Map);let i=n_(this,au).get(e);if(!i||(i.refCounter-=1,0!==i.refCounter))return;let{bitmap:n}=i;if(!i.url&&!i.file){let e=new OffscreenCanvas(n.width,n.height);e.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=e.convertToBlob()}null==(t=n.close)||t.call(n),i.bitmap=null}isValidId(e){return e.startsWith("image_".concat(n_(this,ah),"_"))}constructor(){nI(this,ad),nE(this,ah,{writable:!0,value:function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Uint8Array(32);return crypto.getRandomValues(e),rh(e)}()}),nE(this,ac,{writable:!0,value:0}),nE(this,au,{writable:!0,value:null})}}async function af(e,t){nC(this,au,n_(this,au)||new Map);let i=n_(this,au).get(e);if(null===i)return null;if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;try{let e;if(i||(i={bitmap:null,id:"image_".concat(n_(this,ah),"_").concat(nP(this,ac).value++),refCounter:0,isSvg:!1}),"string"==typeof t?(i.url=t,e=await rk(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){let t=ap._isSVGFittingCanvas,n=new FileReader,r=new Image,a=new Promise((e,a)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{let e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=a});n.readAsDataURL(e),await a}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(e){n6(e),i=null}return n_(this,au).set(e,i),i&&n_(this,au).set(i.id,i),i}var ag=new WeakMap,am=new WeakMap,av=new WeakMap,ab=new WeakMap;class aw{add(e){let{cmd:t,undo:i,post:n,mustExec:r,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}=e;if(r&&t(),n_(this,am))return;let o={cmd:t,undo:i,post:n,type:a};if(-1===n_(this,ab)){n_(this,ag).length>0&&(n_(this,ag).length=0),nC(this,ab,0),n_(this,ag).push(o);return}if(s&&n_(this,ag)[n_(this,ab)].type===a){l&&(o.undo=n_(this,ag)[n_(this,ab)].undo),n_(this,ag)[n_(this,ab)]=o;return}let h=n_(this,ab)+1;h===n_(this,av)?n_(this,ag).splice(0,1):(nC(this,ab,h),h<n_(this,ag).length&&n_(this,ag).splice(h)),n_(this,ag).push(o)}undo(){if(-1===n_(this,ab))return;nC(this,am,!0);let{undo:e,post:t}=n_(this,ag)[n_(this,ab)];e(),null==t||t(),nC(this,am,!1),nC(this,ab,n_(this,ab)-1)}redo(){if(n_(this,ab)<n_(this,ag).length-1){nC(this,ab,n_(this,ab)+1),nC(this,am,!0);let{cmd:e,post:t}=n_(this,ag)[n_(this,ab)];e(),null==t||t(),nC(this,am,!1)}}hasSomethingToUndo(){return -1!==n_(this,ab)}hasSomethingToRedo(){return n_(this,ab)<n_(this,ag).length-1}cleanType(e){if(-1!==n_(this,ab)){for(let t=n_(this,ab);t>=0;t--)if(n_(this,ag)[t].type!==e){n_(this,ag).splice(t+1,n_(this,ab)-t),nC(this,ab,t);return}n_(this,ag).length=0,nC(this,ab,-1)}}destroy(){nC(this,ag,null)}constructor(e=128){nE(this,ag,{writable:!0,value:[]}),nE(this,am,{writable:!0,value:!1}),nE(this,av,{writable:!0,value:void 0}),nE(this,ab,{writable:!0,value:-1}),nC(this,av,e)}}var ay=new WeakSet;class ax{exec(e,t){if(!this.allKeys.has(t.key))return;let i=this.callbacks.get(nR(this,ay,aA).call(this,t));if(!i)return;let{callback:n,options:{bubbles:r=!1,args:a=[],checker:s=null}}=i;(!s||s(e,t))&&(n.bind(e,...a,t)(),r||rL(t))}constructor(e){nI(this,ay),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=rd.platform;for(let[i,n,r={}]of e)for(let e of i){let i=e.startsWith("mac+");t&&i?(this.callbacks.set(e.slice(4),{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1))):t||i||(this.callbacks.set(e,{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1)))}}}function aA(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}class ak{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]),t=document.createElement("span");for(let i of(t.style.visibility="hidden",document.body.append(t),e.keys())){t.style.color=i;let n=window.getComputedStyle(t).color;e.set(i,rO(n))}return t.remove(),re(this,"_colors",e)}convert(e){let t=rO(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[e,i]of this._colors)if(i.every((e,i)=>e===t[i]))return ak._colorsMapping.get(e);return t}getHexCode(e){let t=this._colors.get(e);return t?rf.makeHexColor(...t):e}}(0,nW._)(ak,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var a_=new WeakMap,aS=new WeakMap,aE=new WeakMap,aM=new WeakMap,aC=new WeakMap,aT=new WeakMap,aP=new WeakMap,aR=new WeakMap,aI=new WeakMap,aL=new WeakMap,aD=new WeakMap,aF=new WeakMap,aN=new WeakMap,aO=new WeakMap,aW=new WeakMap,aj=new WeakMap,aB=new WeakMap,az=new WeakMap,aH=new WeakMap,aU=new WeakMap,aG=new WeakMap,aV=new WeakMap,aq=new WeakMap,aX=new WeakMap,aK=new WeakMap,aY=new WeakMap,aQ=new WeakMap,aJ=new WeakMap,aZ=new WeakMap,a$=new WeakMap,a0=new WeakMap,a1=new WeakMap,a2=new WeakMap,a3=new WeakMap,a4=new WeakMap,a5=new WeakMap,a6=new WeakMap,a9=new WeakMap,a8=new WeakMap,a7=new WeakMap,se=new WeakMap,st=new WeakMap,si=new WeakSet,sn=new WeakSet,sr=new WeakSet,sa=new WeakSet,ss=new WeakSet,sl=new WeakSet,so=new WeakSet,sh=new WeakSet,sc=new WeakSet,su=new WeakSet,sd=new WeakSet,sp=new WeakSet,sf=new WeakSet,sg=new WeakSet,sm=new WeakSet,sv=new WeakSet,sb=new WeakSet,sw=new WeakSet,sy=new WeakMap,sx=new WeakSet,sA=new WeakSet;class sk{static get _keyboardManager(){let e=sk.prototype,t=e=>n_(e,a7).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),i=(e,t)=>{let{target:i}=t;if(i instanceof HTMLInputElement){let{type:e}=i;return"text"!==e&&"number"!==e}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return re(this,"_keyboardManager",new ax([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&n_(e,a7).contains(i)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&n_(e,a7).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,n,r;for(let i of(null==(e=n_(this,st))||e.resolve(),nC(this,st,null),null==(t=n_(this,a_))||t.abort(),nC(this,a_,null),this._signal=null,n_(this,aM).values()))i.destroy();n_(this,aM).clear(),n_(this,aE).clear(),n_(this,aW).clear(),nC(this,aS,null),n_(this,a2).clear(),n_(this,aR).destroy(),null==(i=n_(this,aC))||i.destroy(),null==(n=n_(this,aX))||n.hide(),nC(this,aX,null),n_(this,aU)&&(clearTimeout(n_(this,aU)),nC(this,aU,null)),n_(this,a8)&&(clearTimeout(n_(this,a8)),nC(this,a8,null)),null==(r=this._editorUndoBar)||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return n_(this,a0)}get useNewAltTextFlow(){return n_(this,aB)}get useNewAltTextWhenAddingImage(){return n_(this,az)}get hcmFilter(){return re(this,"hcmFilter",n_(this,a4)?n_(this,aH).addHCMFilter(n_(this,a4).foreground,n_(this,a4).background):"none")}get direction(){return re(this,"direction",getComputedStyle(n_(this,a7)).direction)}get highlightColors(){return re(this,"highlightColors",n_(this,aV)?new Map(n_(this,aV).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return re(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),nC(this,aL,e)}setMainHighlightColorPicker(e){nC(this,a$,e)}editAltText(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==(t=n_(this,aC))||t.editAltText(this,e,i)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:i}=e;"enableNewAltTextWhenAddingImage"===t&&nC(this,az,i)}onPageChanging(e){let{pageNumber:t}=e;nC(this,aD,t-1)}focusMainContainer(){n_(this,a7).focus()}findParent(e,t){for(let i of n_(this,aM).values()){let{x:n,y:r,width:a,height:s}=i.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+s)return i}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n_(this,se).classList.toggle("noUserSelect",e)}addShouldRescale(e){n_(this,aW).add(e)}removeShouldRescale(e){n_(this,aW).delete(e)}onScaleChanging(e){var t;let{scale:i}=e;for(let e of(this.commitOrRemove(),this.viewParameters.realScale=i*rA.PDF_TO_CSS_UNITS,n_(this,aW)))e.onScaleChanging();null==(t=n_(this,aL))||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getSelection();if(!t||t.isCollapsed)return;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a}=t,s=t.toString(),l=nR(this,si,s_).call(this,t).closest(".textLayer"),o=this.getSelectionBoxes(l);if(!o)return;t.empty();let h=nR(this,sn,sS).call(this,l),c=n_(this,a1)===nK.NONE,u=()=>{null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:o,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a,text:s}),c&&this.showAllEditors("highlight",!0,!0)};if(c)return void this.switchToMode(nK.HIGHLIGHT,u);u()}addToAnnotationStorage(e){!e.isEmpty()&&n_(this,aT)&&!n_(this,aT).has(e.id)&&n_(this,aT).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,n_(this,aq)&&(nC(this,aq,!1),nR(this,ss,sC).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of n_(this,a2))if(t.div.contains(e)){nC(this,aZ,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!n_(this,aZ))return;let[e,t]=n_(this,aZ);nC(this,aZ,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){nR(this,sc,sI).call(this),nR(this,sd,sD).call(this)}removeEditListeners(){nR(this,su,sL).call(this),nR(this,sp,sF).call(this)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let i of n_(this,aO))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let i of n_(this,aO))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var t;if(e.preventDefault(),null==(t=n_(this,aS))||t.commitOrRemove(),!this.hasSelection)return;let i=[];for(let e of n_(this,a2)){let t=e.serialize(!0);t&&i.push(t)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of n_(this,aO))if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(e){n6('paste: "'.concat(e.message,'".'));return}if(!Array.isArray(i))return;this.unselectAll();let n=this.currentLayer;try{let e=[];for(let t of i){let i=await n.deserialize(t);if(!i)return;e.push(i)}let t=()=>{for(let t of e)nR(this,sw,sz).call(this,t);nR(this,sA,sG).call(this,e)};this.addCommands({cmd:t,undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){n6('paste: "'.concat(e.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),n_(this,a1)===nK.NONE||this.isEditorHandlingKeyboard||sk._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,n_(this,aq)&&(nC(this,aq,!1),nR(this,ss,sC).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(nR(this,so,sP).call(this),nR(this,sd,sD).call(this),nR(this,sg,sO).call(this,{isEditing:n_(this,a1)!==nK.NONE,isEmpty:nR(this,sx,sU).call(this),hasSomethingToUndo:n_(this,aR).hasSomethingToUndo(),hasSomethingToRedo:n_(this,aR).hasSomethingToRedo(),hasSelectedEditor:!1})):(nR(this,sh,sR).call(this),nR(this,sp,sF).call(this),nR(this,sg,sO).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!n_(this,aO))for(let t of(nC(this,aO,e),n_(this,aO)))nR(this,sm,sW).call(this,t.defaultPropertiesToUpdate)}getId(){return n_(this,aK).id}get currentLayer(){return n_(this,aM).get(n_(this,aD))}getLayer(e){return n_(this,aM).get(e)}get currentPageIndex(){return n_(this,aD)}addLayer(e){n_(this,aM).set(e.pageIndex,e),n_(this,aY)?e.enable():e.disable()}removeLayer(e){n_(this,aM).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n_(this,a1)!==e){if(n_(this,st)&&(await n_(this,st).promise,!n_(this,st)))return;if(nC(this,st,Promise.withResolvers()),nC(this,a1,e),e===nK.NONE){var n;this.setEditingState(!1),nR(this,sb,sB).call(this),null==(n=this._editorUndoBar)||n.hide(),n_(this,st).resolve();return}for(let t of(this.setEditingState(!0),await nR(this,sv,sj).call(this),this.unselectAll(),n_(this,aM).values()))t.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),n_(this,st).resolve();return}for(let e of n_(this,aE).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();n_(this,st).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==n_(this,a1)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(n_(this,aO)){switch(e){case nY.CREATE:this.currentLayer.addNewEditor();return;case nY.HIGHLIGHT_DEFAULT_COLOR:var i;null==(i=n_(this,a$))||i.updateColor(t);break;case nY.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),nC(this,a5,n_(this,a5)||new Map).set(e,t),this.showAllEditors("highlight",t)}for(let i of n_(this,a2))i.updateParams(e,t);for(let i of n_(this,aO))i.updateDefaultParams(e,t)}}showAllEditors(e,t){var i,n;for(let i of(arguments.length>2&&void 0!==arguments[2]&&arguments[2],n_(this,aE).values()))i.editorType===e&&i.show(t);(null==(n=null==(i=n_(this,a5))?void 0:i.get(nY.HIGHLIGHT_SHOW_ALL))||n)!==t&&nR(this,sm,sW).call(this,[[nY.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n_(this,aQ)!==e)for(let t of(nC(this,aQ,e),n_(this,aM).values()))e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}getEditors(e){let t=[];for(let i of n_(this,aE).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return n_(this,aE).get(e)}addEditor(e){n_(this,aE).set(e.id,e)}removeEditor(e){if(e.div.contains(document.activeElement)&&(n_(this,aU)&&clearTimeout(n_(this,aU)),nC(this,aU,setTimeout(()=>{this.focusMainContainer(),nC(this,aU,null)},0))),n_(this,aE).delete(e.id),this.unselect(e),!e.annotationElementId||!n_(this,aF).has(e.annotationElementId)){var t;null==(t=n_(this,aT))||t.remove(e.id)}}addDeletedAnnotationElement(e){n_(this,aF).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return n_(this,aF).has(e)}removeDeletedAnnotationElement(e){n_(this,aF).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){n_(this,aS)!==e&&(nC(this,aS,e),e&&nR(this,sm,sW).call(this,e.propertiesToUpdate))}updateUI(e){n_(this,sy)===e&&nR(this,sm,sW).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){nR(this,sm,sW).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(n_(this,a2).has(e)){n_(this,a2).delete(e),e.unselect(),nR(this,sg,sO).call(this,{hasSelectedEditor:this.hasSelection});return}n_(this,a2).add(e),e.select(),nR(this,sm,sW).call(this,e.propertiesToUpdate),nR(this,sg,sO).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;for(let i of(null==(t=n_(this,aL))||t.commitOrRemove(),n_(this,a2)))i!==e&&i.unselect();n_(this,a2).clear(),n_(this,a2).add(e),e.select(),nR(this,sm,sW).call(this,e.propertiesToUpdate),nR(this,sg,sO).call(this,{hasSelectedEditor:!0})}isSelected(e){return n_(this,a2).has(e)}get firstSelectedEditor(){return n_(this,a2).values().next().value}unselect(e){e.unselect(),n_(this,a2).delete(e),nR(this,sg,sO).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==n_(this,a2).size}get isEnterHandled(){return 1===n_(this,a2).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;n_(this,aR).undo(),nR(this,sg,sO).call(this,{hasSomethingToUndo:n_(this,aR).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nR(this,sx,sU).call(this)}),null==(e=this._editorUndoBar)||e.hide()}redo(){n_(this,aR).redo(),nR(this,sg,sO).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:n_(this,aR).hasSomethingToRedo(),isEmpty:nR(this,sx,sU).call(this)})}addCommands(e){n_(this,aR).add(e),nR(this,sg,sO).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nR(this,sx,sU).call(this)})}cleanUndoStack(e){n_(this,aR).cleanType(e)}delete(){var e;this.commitOrRemove();let t=null==(e=this.currentLayer)?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let i=t?[t]:[...n_(this,a2)],n=()=>{var e;for(let t of(null==(e=this._editorUndoBar)||e.show(r,1===i.length?i[0].editorType:i.length),i))t.remove()},r=()=>{for(let e of i)nR(this,sw,sz).call(this,e)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;null==(e=n_(this,aS))||e.commitOrRemove()}hasSomethingToControl(){return n_(this,aS)||this.hasSelection}selectAll(){for(let e of n_(this,a2))e.commit();nR(this,sA,sG).call(this,n_(this,aE).values())}unselectAll(){var e;if(!n_(this,aS)||(n_(this,aS).commitOrRemove(),n_(this,a1)===nK.NONE)){if((null==(e=n_(this,aL))||!e.commitOrRemove())&&this.hasSelection){for(let e of n_(this,a2))e.unselect();n_(this,a2).clear(),nR(this,sg,sO).call(this,{hasSelectedEditor:!1})}}}translateSelectedEditors(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i||this.commitOrRemove(),!this.hasSelection)return;n_(this,a9)[0]+=e,n_(this,a9)[1]+=t;let[n,r]=n_(this,a9),a=[...n_(this,a2)];for(let i of(n_(this,a8)&&clearTimeout(n_(this,a8)),nC(this,a8,setTimeout(()=>{nC(this,a8,null),n_(this,a9)[0]=n_(this,a9)[1]=0,this.addCommands({cmd:()=>{for(let e of a)n_(this,aE).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(let e of a)n_(this,aE).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})},1e3)),a))i.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection)for(let e of(this.disableUserSelect(!0),nC(this,aN,new Map),n_(this,a2)))n_(this,aN).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!n_(this,aN))return!1;this.disableUserSelect(!1);let e=n_(this,aN);nC(this,aN,null);let t=!1;for(let[{x:i,y:n,pageIndex:r},a]of e)a.newX=i,a.newY=n,a.newPageIndex=r,t||(t=i!==a.savedX||n!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;let i=(e,t,i,n)=>{if(n_(this,aE).has(e.id)){let r=n_(this,aM).get(n);r?e._setParentAndPosition(r,t,i):(e.pageIndex=n,e.x=t,e.y=i)}};return this.addCommands({cmd:()=>{for(let[t,{newX:n,newY:r,newPageIndex:a}]of e)i(t,n,r,a)},undo:()=>{for(let[t,{savedX:n,savedY:r,savedPageIndex:a}]of e)i(t,n,r,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(n_(this,aN))for(let i of n_(this,aN).keys())i.drag(e,t)}rebuild(e){if(null===e.parent){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===n_(this,a2).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return n_(this,aS)===e}getActive(){return n_(this,aS)}getMode(){return n_(this,a1)}get imageManager(){return re(this,"imageManager",new ap)}getSelectionBoxes(e){let t;if(!e)return null;let i=document.getSelection();for(let t=0,n=i.rangeCount;t<n;t++)if(!e.contains(i.getRangeAt(t).commonAncestorContainer))return null;let{x:n,y:r,width:a,height:s}=e.getBoundingClientRect();switch(e.getAttribute("data-main-rotation")){case"90":t=(e,t,i,l)=>({x:(t-r)/s,y:1-(e+i-n)/a,width:l/s,height:i/a});break;case"180":t=(e,t,i,l)=>({x:1-(e+i-n)/a,y:1-(t+l-r)/s,width:i/a,height:l/s});break;case"270":t=(e,t,i,l)=>({x:1-(t+l-r)/s,y:(e-n)/a,width:l/s,height:i/a});break;default:t=(e,t,i,l)=>({x:(e-n)/a,y:(t-r)/s,width:i/a,height:l/s})}let l=[];for(let e=0,n=i.rangeCount;e<n;e++){let n=i.getRangeAt(e);if(!n.collapsed)for(let{x:e,y:i,width:r,height:a}of n.getClientRects())0!==r&&0!==a&&l.push(t(e,i,r,a))}return 0===l.length?null:l}addChangedExistingAnnotation(e){let{annotationElementId:t,id:i}=e;nC(this,aP,n_(this,aP)||new Map).set(t,i)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:i}=e;null==(t=n_(this,aP))||t.delete(i)}renderAnnotationElement(e){var t;let i=null==(t=n_(this,aP))?void 0:t.get(e.data.id);if(!i)return;let n=n_(this,aT).getRawValue(i);n&&(n_(this,a1)!==nK.NONE||n.hasBeenModified)&&n.renderAnnotationElement(e)}constructor(e,t,i,n,r,a,s,l,o,h,c,u,d){nI(this,si),nI(this,sn),nI(this,sr),nI(this,sa),nI(this,ss),nI(this,sl),nI(this,so),nI(this,sh),nI(this,sc),nI(this,su),nI(this,sd),nI(this,sp),nI(this,sf),nI(this,sg),nI(this,sm),nI(this,sv),nI(this,sb),nI(this,sw),nE(this,sy,{get:sH,set:void 0}),nI(this,sx),nI(this,sA),nE(this,a_,{writable:!0,value:new AbortController}),nE(this,aS,{writable:!0,value:null}),nE(this,aE,{writable:!0,value:new Map}),nE(this,aM,{writable:!0,value:new Map}),nE(this,aC,{writable:!0,value:null}),nE(this,aT,{writable:!0,value:null}),nE(this,aP,{writable:!0,value:null}),nE(this,aR,{writable:!0,value:new aw}),nE(this,aI,{writable:!0,value:null}),nE(this,aL,{writable:!0,value:null}),nE(this,aD,{writable:!0,value:0}),nE(this,aF,{writable:!0,value:new Set}),nE(this,aN,{writable:!0,value:null}),nE(this,aO,{writable:!0,value:null}),nE(this,aW,{writable:!0,value:new Set}),(0,nW._)(this,"_editorUndoBar",null),nE(this,aj,{writable:!0,value:!1}),nE(this,aB,{writable:!0,value:!1}),nE(this,az,{writable:!0,value:!1}),nE(this,aH,{writable:!0,value:null}),nE(this,aU,{writable:!0,value:null}),nE(this,aG,{writable:!0,value:null}),nE(this,aV,{writable:!0,value:null}),nE(this,aq,{writable:!0,value:!1}),nE(this,aX,{writable:!0,value:null}),nE(this,aK,{writable:!0,value:new ao}),nE(this,aY,{writable:!0,value:!1}),nE(this,aQ,{writable:!0,value:!1}),nE(this,aJ,{writable:!0,value:null}),nE(this,aZ,{writable:!0,value:null}),nE(this,a$,{writable:!0,value:null}),nE(this,a0,{writable:!0,value:null}),nE(this,a1,{writable:!0,value:nK.NONE}),nE(this,a2,{writable:!0,value:new Set}),nE(this,a3,{writable:!0,value:null}),nE(this,a4,{writable:!0,value:null}),nE(this,a5,{writable:!0,value:null}),nE(this,a6,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}}),nE(this,a9,{writable:!0,value:[0,0]}),nE(this,a8,{writable:!0,value:null}),nE(this,a7,{writable:!0,value:null}),nE(this,se,{writable:!0,value:null}),nE(this,st,{writable:!0,value:null});let p=this._signal=n_(this,a_).signal;nC(this,a7,e),nC(this,se,t),nC(this,aC,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:p}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),n._on("setpreference",this.onSetPreference.bind(this),{signal:p}),n._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:p}),nR(this,sl,sT).call(this),nR(this,sf,sN).call(this),nR(this,sc,sI).call(this),nC(this,aT,r.annotationStorage),nC(this,aH,r.filterFactory),nC(this,a4,a),nC(this,aV,s||null),nC(this,aj,l),nC(this,aB,o),nC(this,az,h),nC(this,a0,c||null),this.viewParameters={realScale:rA.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=u||null,this._supportsPinchToZoom=!1!==d}}function s_(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function sS(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let t of n_(this,aM).values())if(t.hasTextLayer(e))return t;return null}function sE(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=nR(this,si,s_).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(t);i&&(nC(this,aX,n_(this,aX)||new ai(this)),n_(this,aX).show(t,i,"ltr"===this.direction))}function sM(){var e,t,i;let n=document.getSelection();if(!n||n.isCollapsed){n_(this,a3)&&(null==(t=n_(this,aX))||t.hide(),nC(this,a3,null),nR(this,sg,sO).call(this,{hasSelectedText:!1}));return}let{anchorNode:r}=n;if(r===n_(this,a3))return;let a=nR(this,si,s_).call(this,n).closest(".textLayer");if(!a){n_(this,a3)&&(null==(i=n_(this,aX))||i.hide(),nC(this,a3,null),nR(this,sg,sO).call(this,{hasSelectedText:!1}));return}if(null==(e=n_(this,aX))||e.hide(),nC(this,a3,r),nR(this,sg,sO).call(this,{hasSelectedText:!0}),(n_(this,a1)===nK.HIGHLIGHT||n_(this,a1)===nK.NONE)&&(n_(this,a1)===nK.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),nC(this,aq,this.isShiftKeyDown),!this.isShiftKeyDown)){let e=n_(this,a1)===nK.HIGHLIGHT?nR(this,sn,sS).call(this,a):null;null==e||e.toggleDrawing();let t=new AbortController,i=this.combinedSignal(t),n=i=>{("pointerup"!==i.type||0===i.button)&&(t.abort(),null==e||e.toggleDrawing(!0),"pointerup"===i.type&&nR(this,ss,sC).call(this,"main_toolbar"))};window.addEventListener("pointerup",n,{signal:i}),window.addEventListener("blur",n,{signal:i})}}function sC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n_(this,a1)===nK.HIGHLIGHT?this.highlightSelection(e):n_(this,aj)&&nR(this,sr,sE).call(this)}function sT(){document.addEventListener("selectionchange",nR(this,sa,sM).bind(this),{signal:this._signal})}function sP(){if(n_(this,aG))return;nC(this,aG,new AbortController);let e=this.combinedSignal(n_(this,aG));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function sR(){var e;null==(e=n_(this,aG))||e.abort(),nC(this,aG,null)}function sI(){if(n_(this,aJ))return;nC(this,aJ,new AbortController);let e=this.combinedSignal(n_(this,aJ));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function sL(){var e;null==(e=n_(this,aJ))||e.abort(),nC(this,aJ,null)}function sD(){if(n_(this,aI))return;nC(this,aI,new AbortController);let e=this.combinedSignal(n_(this,aI));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function sF(){var e;null==(e=n_(this,aI))||e.abort(),nC(this,aI,null)}function sN(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function sO(e){Object.entries(e).some(e=>{let[t,i]=e;return n_(this,a6)[t]!==i})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(n_(this,a6),e)}),n_(this,a1)===nK.HIGHLIGHT&&!1===e.hasSelectedEditor&&nR(this,sm,sW).call(this,[[nY.HIGHLIGHT_FREE,!0]]))}function sW(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function sj(){if(!n_(this,aY)){nC(this,aY,!0);let e=[];for(let t of n_(this,aM).values())e.push(t.enable());for(let t of(await Promise.all(e),n_(this,aE).values()))t.enable()}}function sB(){if(this.unselectAll(),n_(this,aY)){for(let e of(nC(this,aY,!1),n_(this,aM).values()))e.disable();for(let e of n_(this,aE).values())e.disable()}}function sz(e){let t=n_(this,aM).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function sH(){let e=null;for(e of n_(this,a2));return e}function sU(){if(0===n_(this,aE).size)return!0;if(1===n_(this,aE).size)for(let e of n_(this,aE).values())return e.isEmpty();return!1}function sG(e){for(let e of n_(this,a2))e.unselect();for(let t of(n_(this,a2).clear(),e))t.isEmpty()||(n_(this,a2).add(t),t.select());nR(this,sg,sO).call(this,{hasSelectedEditor:this.hasSelection})}(0,nW._)(sk,"TRANSLATE_SMALL",1),(0,nW._)(sk,"TRANSLATE_BIG",10);var sV=new WeakMap,sq=new WeakMap,sX=new WeakMap,sK=new WeakMap,sY=new WeakMap,sQ=new WeakMap,sJ=new WeakMap,sZ=new WeakMap,s$=new WeakMap,s0=new WeakMap,s1=new WeakMap,s2=new WeakMap,s3=new WeakMap,s4=new WeakSet;class s5{static initialize(e){null!=s5._l10n||(s5._l10n=e)}async render(){let e=nC(this,sX,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=nC(this,sK,document.createElement("span"));e.append(t),n_(this,s2)?(e.classList.add("new"),e.setAttribute("data-l10n-id",nF(s5,s5,s6).missing),t.setAttribute("data-l10n-id",nF(s5,s5,s6)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=n_(this,s$)._uiManager._signal;e.addEventListener("contextmenu",rI,{signal:i}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:i});let n=e=>{e.preventDefault(),n_(this,s$)._uiManager.editAltText(n_(this,s$)),n_(this,s2)&&n_(this,s$)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:n_(this,s3)}})};return e.addEventListener("click",n,{capture:!0,signal:i}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(nC(this,sJ,!0),n(t))},{signal:i}),await nR(this,s4,s8).call(this),e}finish(){n_(this,sX)&&(n_(this,sX).focus({focusVisible:n_(this,sJ)}),nC(this,sJ,!1))}isEmpty(){return n_(this,s2)?null===n_(this,sV):!n_(this,sV)&&!n_(this,sq)}hasData(){return n_(this,s2)?null!==n_(this,sV)||!!n_(this,s0):this.isEmpty()}get guessedText(){return n_(this,s0)}async setGuessedText(e){null===n_(this,sV)&&(nC(this,s0,e),nC(this,s1,await s5._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),nR(this,s4,s8).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n_(this,s2)||n_(this,sV)){var t;null==(t=n_(this,sZ))||t.remove(),nC(this,sZ,null);return}if(!n_(this,sZ)){let e=nC(this,sZ,document.createElement("div"));e.className="noAltTextBadge",n_(this,s$).div.append(e)}n_(this,sZ).classList.toggle("hidden",!e)}serialize(e){let t=n_(this,sV);return e||n_(this,s0)!==t||(t=n_(this,s1)),{altText:t,decorative:n_(this,sq),guessedText:n_(this,s0),textWithDisclaimer:n_(this,s1)}}get data(){return{altText:n_(this,sV),decorative:n_(this,sq)}}set data(e){let{altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:a=!1}=e;n&&(nC(this,s0,n),nC(this,s1,r)),(n_(this,sV)!==t||n_(this,sq)!==i)&&(a||(nC(this,sV,t),nC(this,sq,i)),nR(this,s4,s8).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n_(this,sX)&&(!e&&n_(this,sQ)&&(clearTimeout(n_(this,sQ)),nC(this,sQ,null)),n_(this,sX).disabled=!e)}shown(){n_(this,s$)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:n_(this,s3)}})}destroy(){var e,t;null==(e=n_(this,sX))||e.remove(),nC(this,sX,null),nC(this,sK,null),nC(this,sY,null),null==(t=n_(this,sZ))||t.remove(),nC(this,sZ,null)}constructor(e){nE(this,s3,{get:s9,set:void 0}),nI(this,s4),nE(this,sV,{writable:!0,value:null}),nE(this,sq,{writable:!0,value:!1}),nE(this,sX,{writable:!0,value:null}),nE(this,sK,{writable:!0,value:null}),nE(this,sY,{writable:!0,value:null}),nE(this,sQ,{writable:!0,value:null}),nE(this,sJ,{writable:!0,value:!1}),nE(this,sZ,{writable:!0,value:null}),nE(this,s$,{writable:!0,value:null}),nE(this,s0,{writable:!0,value:null}),nE(this,s1,{writable:!0,value:null}),nE(this,s2,{writable:!0,value:!1}),nC(this,s$,e),nC(this,s2,e._uiManager.useNewAltTextFlow),nN(s5,s5,s6,nF(s5,s5,s6)||Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}}var s6={writable:!0,value:null};function s9(){return n_(this,sV)&&"added"||null===n_(this,sV)&&this.guessedText&&"review"||"missing"}async function s8(){var e,t,i;let n=n_(this,sX);if(!n)return;if(n_(this,s2)){if(n.classList.toggle("done",!!n_(this,sV)),n.setAttribute("data-l10n-id",nF(s5,s5,s6)[n_(this,s3)]),null==(e=n_(this,sK))||e.setAttribute("data-l10n-id",nF(s5,s5,s6)["".concat(n_(this,s3),"-label")]),!n_(this,sV)){null==(t=n_(this,sY))||t.remove();return}}else{if(!n_(this,sV)&&!n_(this,sq)){n.classList.remove("done"),null==(i=n_(this,sY))||i.remove();return}n.classList.add("done"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=n_(this,sY);if(!r){nC(this,sY,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(n_(this,s$).id);let e=n_(this,s$)._uiManager._signal;e.addEventListener("abort",()=>{clearTimeout(n_(this,sQ)),nC(this,sQ,null)},{once:!0}),n.addEventListener("mouseenter",()=>{nC(this,sQ,setTimeout(()=>{nC(this,sQ,null),n_(this,sY).classList.add("show"),n_(this,s$)._reportTelemetry({action:"alt_text_tooltip"})},100))},{signal:e}),n.addEventListener("mouseleave",()=>{var e;n_(this,sQ)&&(clearTimeout(n_(this,sQ)),nC(this,sQ,null)),null==(e=n_(this,sY))||e.classList.remove("show")},{signal:e})}n_(this,sq)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=n_(this,sV)),r.parentNode||n.append(r);let a=n_(this,s$).getImageForAltText();null==a||a.setAttribute("aria-describedby",r.id)}(0,nW._)(s5,"_l10n",null);var s7=new WeakMap,le=new WeakMap,lt=new WeakMap,li=new WeakMap,ln=new WeakMap,lr=new WeakMap,la=new WeakMap,ls=new WeakMap,ll=new WeakMap,lo=new WeakMap,lh=new WeakMap,lc=new WeakSet,lu=new WeakSet,ld=new WeakSet;class lp{get MIN_TOUCH_DISTANCE_TO_PINCH(){return re(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;null==(e=n_(this,lo))||e.abort(),nC(this,lo,null)}constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:a=null,signal:s}){nI(this,lc),nI(this,lu),nI(this,ld),nE(this,s7,{writable:!0,value:void 0}),nE(this,le,{writable:!0,value:!1}),nE(this,lt,{writable:!0,value:null}),nE(this,li,{writable:!0,value:void 0}),nE(this,ln,{writable:!0,value:void 0}),nE(this,lr,{writable:!0,value:void 0}),nE(this,la,{writable:!0,value:void 0}),nE(this,ls,{writable:!0,value:void 0}),nE(this,ll,{writable:!0,value:null}),nE(this,lo,{writable:!0,value:void 0}),nE(this,lh,{writable:!0,value:null}),nC(this,s7,e),nC(this,lt,i),nC(this,li,t),nC(this,ln,n),nC(this,lr,r),nC(this,la,a),nC(this,lo,new AbortController),nC(this,ls,AbortSignal.any([s,n_(this,lo).signal])),e.addEventListener("touchstart",nR(this,lc,lf).bind(this),{passive:!1,signal:n_(this,ls)})}}function lf(e){var t,i,n;if((null==(t=n_(this,li))?void 0:t.call(this))||e.touches.length<2)return;if(!n_(this,lh)){nC(this,lh,new AbortController);let e=AbortSignal.any([n_(this,ls),n_(this,lh).signal]),t=n_(this,s7),n={signal:e,passive:!1};t.addEventListener("touchmove",nR(this,lu,lg).bind(this),n),t.addEventListener("touchend",nR(this,ld,lm).bind(this),n),t.addEventListener("touchcancel",nR(this,ld,lm).bind(this),n),null==(i=n_(this,ln))||i.call(this)}if(rL(e),2!==e.touches.length||(null==(n=n_(this,lt))?void 0:n.call(this)))return void nC(this,ll,null);let[r,a]=e.touches;r.identifier>a.identifier&&([r,a]=[a,r]),nC(this,ll,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:a.screenX,touch1Y:a.screenY})}function lg(e){var t;if(!n_(this,ll)||2!==e.touches.length)return;let[i,n]=e.touches;i.identifier>n.identifier&&([i,n]=[n,i]);let{screenX:r,screenY:a}=i,{screenX:s,screenY:l}=n,o=n_(this,ll),{touch0X:h,touch0Y:c,touch1X:u,touch1Y:d}=o,p=Math.hypot(s-r,l-a)||1,f=Math.hypot(u-h,d-c)||1;if(!n_(this,le)&&Math.abs(f-p)<=lp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=r,o.touch0Y=a,o.touch1X=s,o.touch1Y=l,e.preventDefault(),!n_(this,le))return void nC(this,le,!0);let g=[(r+s)/2,(a+l)/2];null==(t=n_(this,lr))||t.call(this,g,f,p)}function lm(e){var t;n_(this,lh).abort(),nC(this,lh,null),null==(t=n_(this,la))||t.call(this),n_(this,ll)&&(e.preventDefault(),nC(this,ll,null),nC(this,le,!1))}var lv=new WeakMap,lb=new WeakMap,lw=new WeakMap,ly=new WeakMap,lx=new WeakMap,lA=new WeakMap,lk=new WeakMap,l_=new WeakMap,lS=new WeakMap,lE=new WeakMap,lM=new WeakMap,lC=new WeakMap,lT=new WeakMap,lP=new WeakMap,lR=new WeakMap,lI=new WeakMap,lL=new WeakMap,lD=new WeakMap,lF=new WeakMap,lN=new WeakMap,lO=new WeakMap,lW=new WeakMap,lj=new WeakMap,lB=new WeakMap,lz=new WeakSet,lH=new WeakSet,lU=new WeakSet,lG=new WeakSet,lV=new WeakSet,lq=new WeakSet,lX=new WeakSet,lK=new WeakSet,lY=new WeakSet,lQ=new WeakSet,lJ=new WeakSet,lZ=new WeakSet,l$=new WeakSet,l0=new WeakSet,l1=new WeakSet,l2=new WeakSet,l3=new WeakSet,l4=new WeakSet;class l5{static get _resizerKeyboardManager(){let e=l5.prototype._resizeWithKeyboard,t=sk.TRANSLATE_SMALL,i=sk.TRANSLATE_BIG;return re(this,"_resizerKeyboardManager",new ax([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],l5.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return re(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new og({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(null!=l5._l10n||(l5._l10n=e),l5._l10nResizer||(l5._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==l5._borderLineWidth)return;let i=getComputedStyle(document.documentElement);l5._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){n9("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return n_(this,lj)}set _isDraggable(e){var t;nC(this,lj,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=n_(this,lB)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):nR(this,l4,of).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(n_(this,lT)?nC(this,lT,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let i=e.relatedTarget;(null==i||!i.closest("#".concat(this.id)))&&(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){let[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/r,this.y=(t+n)/a,this.fixAndSetPosition()}translate(e,t){nR(this,lz,l6).call(this,this.parentDimensions,e,t)}translateInPage(e,t){nC(this,lP,n_(this,lP)||[this.x,this.y,this.width,this.height]),nR(this,lz,l6).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){nC(this,lP,n_(this,lP)||[this.x,this.y,this.width,this.height]);let{div:i,parentDimensions:[n,r]}=this;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:s}=this,[l,o]=this.getBaseTranslation();a+=l,s+=o;let{style:h}=i;h.left="".concat((100*a).toFixed(2),"%"),h.top="".concat((100*s).toFixed(2),"%"),this._onTranslating(a,s),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!n_(this,lP)&&(n_(this,lP)[0]!==this.x||n_(this,lP)[1]!==this.y)}get _hasBeenResized(){return!!n_(this,lP)&&(n_(this,lP)[2]!==this.width||n_(this,lP)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:i}=l5,n=i/e,r=i/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,{div:{style:t},pageDimensions:[i,n]}=this,{x:r,y:a,width:s,height:l}=this;if(s*=i,l*=n,r*=i,a*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-s,r)),a=Math.max(0,Math.min(n-l,a));break;case 90:r=Math.max(0,Math.min(i-l,r)),a=Math.min(n,Math.max(s,a));break;case 180:r=Math.min(i,Math.max(s,r)),a=Math.min(n,Math.max(l,a));break;case 270:r=Math.min(i,Math.max(l,r)),a=Math.max(0,Math.min(n-s,a))}this.x=r/=i,this.y=a/=n;let[o,h]=this.getBaseTranslation();r+=o,a+=h,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*a).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return(nL(l5,l5),l9).call(l5,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return(nL(l5,l5),l9).call(l5,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){let[i,n]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*e/i).toFixed(2),"%"),n_(this,lk)||(r.height="".concat((100*t/n).toFixed(2),"%"))}fixDims(){let{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),r=!n_(this,lk)&&t.endsWith("%");if(n&&r)return;let[a,s]=this.parentDimensions;n||(e.width="".concat((100*parseFloat(i)/a).toFixed(2),"%")),n_(this,lk)||r||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null==(e=n_(this,lw))||e.finish()}async addEditToolbar(){return this._editToolbar||n_(this,lI)||(this._editToolbar=new rZ(this),this.div.append(this._editToolbar.render()),n_(this,lw)&&await this._editToolbar.addAltText(n_(this,lw))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null==(e=n_(this,lw))||e.destroy())}addContainer(e){var t;let i=null==(t=this._editToolbar)?void 0:t.div;i?i.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){n_(this,lw)||(s5.initialize(l5._l10n),nC(this,lw,new s5(this)),n_(this,lv)&&(n_(this,lw).data=n_(this,lv),nC(this,lv,null)),await this.addEditToolbar())}get altTextData(){var e;return null==(e=n_(this,lw))?void 0:e.data}set altTextData(e){n_(this,lw)&&(n_(this,lw).data=e)}get guessedAltText(){var e;return null==(e=n_(this,lw))?void 0:e.guessedText}async setGuessedAltText(e){var t;await (null==(t=n_(this,lw))?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null==(t=n_(this,lw))?void 0:t.serialize(e)}hasAltText(){return!!n_(this,lw)&&!n_(this,lw).isEmpty()}hasAltTextData(){var e,t;return null!=(t=null==(e=n_(this,lw))?void 0:e.hasData())&&t}render(){var e;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=n_(this,ly)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),nR(this,l$,oh).call(this);let[t,i]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*i/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/i).toFixed(2),"%"));let[n,r]=this.getInitialTranslation();return this.translate(n,r),as(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&nC(this,lW,n_(this,lW)||new lp({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:nR(this,lK,or).bind(this),onPinching:nR(this,lY,oa).bind(this),onPinchEnd:nR(this,lQ,os).bind(this),signal:this._uiManager._signal})),null==(e=this._uiManager._editorUndoBar)||e.hide(),this.div}pointerdown(e){let{isMac:t}=rd.platform;return 0!==e.button||e.ctrlKey&&t?void e.preventDefault():(nC(this,lT,!0),this._isDraggable)?void nR(this,lZ,oo).call(this,e):void nR(this,lJ,ol).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){n_(this,lD)&&clearTimeout(n_(this,lD)),nC(this,lD,setTimeout(()=>{var e;nC(this,lD,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,n=this.parentScale,[r,a]=this.pageDimensions,[s,l]=this.pageTranslation,o=e/n,h=t/n,c=this.x*r,u=this.y*a,d=this.width*r,p=this.height*a;switch(i){case 0:return[c+o+s,a-u-h-p+l,c+o+d+s,a-u-h+l];case 90:return[c+h+s,a-u+o+l,c+h+p+s,a-u+o+d+l];case 180:return[c-o-d+s,a-u+h+l,c-o+s,a-u+h+p+l];case 270:return[c-h-p+s,a-u-o-d+l,c-h+s,a-u-o+l];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[i,n,r,a]=e,s=r-i,l=a-n;switch(this.rotation){case 0:return[i,t-a,s,l];case 90:return[i,t-n,l,s];case 180:return[r,t-n,s,l];case 270:return[r,t-a,l,s];default:throw Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){nC(this,lI,!0)}disableEditMode(){nC(this,lI,!1)}isInEditMode(){return n_(this,lI)}shouldGetKeyboardEvents(){return n_(this,lL)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&n>0&&e<r&&i>0}rebuild(){nR(this,l$,oh).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(e=this._initialData)?void 0:e.popupRef)||""}}serialize(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],n9("An editor must be serializable")}static async deserialize(e,t,i){let n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,nC(n,lv,e.accessibilityData);let[r,a]=n.pageDimensions,[s,l,o,h]=n.getRectInCurrentCoords(e.rect,a);return n.x=s/r,n.y=l/a,n.width=o/r,n.height=h/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null==(e=n_(this,lM))||e.abort(),nC(this,lM,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),n_(this,lD)&&(clearTimeout(n_(this,lD)),nC(this,lD,null)),nR(this,l4,of).call(this),this.removeEditToolbar(),n_(this,lO)){for(let e of n_(this,lO).values())clearTimeout(e);nC(this,lO,null)}this.parent=null,null==(t=n_(this,lW))||t.destroy(),nC(this,lW,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(nR(this,lU,l7).call(this),n_(this,l_).classList.remove("hidden"),as(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),nC(this,lE,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=n_(this,l_).children;if(!n_(this,lb)){nC(this,lb,Array.from(t));let e=nR(this,l0,oc).bind(this),i=nR(this,l1,ou).bind(this),n=this._uiManager._signal;for(let t of n_(this,lb)){let r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:n}),t.addEventListener("blur",i,{signal:n}),t.addEventListener("focus",nR(this,l2,od).bind(this,r),{signal:n}),t.setAttribute("data-l10n-id",l5._l10nResizer[r])}}let i=n_(this,lb)[0],n=0;for(let e of t){if(e===i)break;n++}let r=(360-this.rotation+this.parentRotation)%360/90*(n_(this,lb).length/4);if(r!==n){if(r<n)for(let e=0;e<n-r;e++)n_(this,l_).append(n_(this,l_).firstChild);else if(r>n)for(let e=0;e<r-n;e++)n_(this,l_).firstChild.before(n_(this,l_).lastChild);let e=0;for(let i of t){let t=n_(this,lb)[e++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",l5._l10nResizer[t])}}nR(this,l3,op).call(this,0),nC(this,lL,!0),n_(this,l_).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){n_(this,lL)&&nR(this,lX,on).call(this,n_(this,lC),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){nR(this,l4,of).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),!this._editToolbar)return void this.addEditToolbar().then(()=>{var e,t;(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))&&(null==(t=this._editToolbar)||t.show())});null==(t=this._editToolbar)||t.show(),null==(i=n_(this,lw))||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,n,r;null==(e=n_(this,l_))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(i=this.div)?void 0:i.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(n=this._editToolbar)||n.hide(),null==(r=n_(this,lw))||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return n_(this,lR)}set isEditing(e){nC(this,lR,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){nC(this,lk,!0);let{style:i}=this.div;i.aspectRatio=e/t,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){nC(this,lO,n_(this,lO)||new Map);let{action:t}=e,i=n_(this,lO).get(t);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),n_(this,lO).delete(t),0===n_(this,lO).size&&nC(this,lO,null)},l5._telemetryTimeout),n_(this,lO).set(t,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),nC(this,ly,!1)}disable(){this.div&&(this.div.tabIndex=-1),nC(this,ly,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){let e=t;(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.before(t)}}else(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){let{firstChild:t}=e.container;(null==t?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}constructor(e){nI(this,lz),nI(this,lH),nI(this,lU),nI(this,lG),nI(this,lV),nI(this,lq),nI(this,lX),nI(this,lK),nI(this,lY),nI(this,lQ),nI(this,lJ),nI(this,lZ),nI(this,l$),nI(this,l0),nI(this,l1),nI(this,l2),nI(this,l3),nI(this,l4),nE(this,lv,{writable:!0,value:null}),nE(this,lb,{writable:!0,value:null}),nE(this,lw,{writable:!0,value:null}),nE(this,ly,{writable:!0,value:!1}),nE(this,lx,{writable:!0,value:null}),nE(this,lA,{writable:!0,value:""}),nE(this,lk,{writable:!0,value:!1}),nE(this,l_,{writable:!0,value:null}),nE(this,lS,{writable:!0,value:null}),nE(this,lE,{writable:!0,value:null}),nE(this,lM,{writable:!0,value:null}),nE(this,lC,{writable:!0,value:""}),nE(this,lT,{writable:!0,value:!1}),nE(this,lP,{writable:!0,value:null}),nE(this,lR,{writable:!0,value:!1}),nE(this,lI,{writable:!0,value:!1}),nE(this,lL,{writable:!0,value:!1}),nE(this,lD,{writable:!0,value:null}),nE(this,lF,{writable:!0,value:0}),nE(this,lN,{writable:!0,value:0}),nE(this,lO,{writable:!0,value:null}),nE(this,lW,{writable:!0,value:null}),(0,nW._)(this,"_editToolbar",null),(0,nW._)(this,"_initialOptions",Object.create(null)),(0,nW._)(this,"_initialData",null),(0,nW._)(this,"_isVisible",!0),(0,nW._)(this,"_uiManager",null),(0,nW._)(this,"_focusEventsAllowed",!0),nE(this,lj,{writable:!0,value:!1}),nE(this,lB,{writable:!0,value:l5._zIndex++}),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];let[s,l]=this.parentDimensions;this.x=e.x/s,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}}function l6(e,t,i){let[n,r]=e;[t,i]=this.screenToPageTranslation(t,i),this.x+=t/n,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function l9(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function l8(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function l7(){if(n_(this,l_))return;nC(this,l_,document.createElement("div")),n_(this,l_).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let i of e){let e=document.createElement("div");n_(this,l_).append(e),e.classList.add("resizer",i),e.setAttribute("data-resizer-name",i),e.addEventListener("pointerdown",nR(this,lG,oe).bind(this,i),{signal:t}),e.addEventListener("contextmenu",rI,{signal:t}),e.tabIndex=-1}this.div.prepend(n_(this,l_))}function oe(e,t){var i;t.preventDefault();let{isMac:n}=rd.platform;if(0!==t.button||t.ctrlKey&&n)return;null==(i=n_(this,lw))||i.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,nC(this,lS,[t.screenX,t.screenY]);let a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",nR(this,lX,on).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",rL,{passive:!1,signal:s}),window.addEventListener("contextmenu",rI,{signal:s}),nC(this,lE,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let l=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let h=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null==(e=n_(this,lw))||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=o,nR(this,lq,oi).call(this)};window.addEventListener("pointerup",h,{signal:s}),window.addEventListener("blur",h,{signal:s})}function ot(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;let[r,a]=this.parentDimensions;this.setDims(r*i,a*n),this.fixAndSetPosition(),this._onResized()}function oi(){if(!n_(this,lE))return;let{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=n_(this,lE);nC(this,lE,null);let r=this.x,a=this.y,s=this.width,l=this.height;(r!==e||a!==t||s!==i||l!==n)&&this.addCommands({cmd:nR(this,lV,ot).bind(this,r,a,s,l),undo:nR(this,lV,ot).bind(this,e,t,i,n),mustExec:!0})}function on(e,t){let i,n,r,a,s,l,[o,h]=this.parentDimensions,c=this.x,u=this.y,d=this.width,p=this.height,f=l5.MIN_SIZE/o,g=l5.MIN_SIZE/h,m=nR(this,lH,l8).call(this,this.rotation),b=(e,t)=>[m[0]*e+m[2]*t,m[1]*e+m[3]*t],w=nR(this,lH,l8).call(this,360-this.rotation),y=!1,x=!1;switch(e){case"topLeft":y=!0,i=(e,t)=>[0,0],n=(e,t)=>[e,t];break;case"topMiddle":i=(e,t)=>[e/2,0],n=(e,t)=>[e/2,t];break;case"topRight":y=!0,i=(e,t)=>[e,0],n=(e,t)=>[0,t];break;case"middleRight":x=!0,i=(e,t)=>[e,t/2],n=(e,t)=>[0,t/2];break;case"bottomRight":y=!0,i=(e,t)=>[e,t],n=(e,t)=>[0,0];break;case"bottomMiddle":i=(e,t)=>[e/2,t],n=(e,t)=>[e/2,0];break;case"bottomLeft":y=!0,i=(e,t)=>[0,t],n=(e,t)=>[e,0];break;case"middleLeft":x=!0,i=(e,t)=>[0,t/2],n=(e,t)=>[e,t/2]}let A=i(d,p),k=n(d,p),_=b(...k),S=l5._round(c+_[0]),E=l5._round(u+_[1]),M=1,C=1;if(t.fromKeyboard)({deltaX:r,deltaY:a}=t);else{let{screenX:e,screenY:i}=t,[n,s]=n_(this,lS);[r,a]=this.screenToPageTranslation(e-n,i-s),n_(this,lS)[0]=e,n_(this,lS)[1]=i}if([r,a]=(s=r/o,l=a/h,[w[0]*s+w[2]*l,w[1]*s+w[3]*l]),y){let e=Math.hypot(d,p);M=C=Math.max(Math.min(Math.hypot(k[0]-A[0]-r,k[1]-A[1]-a)/e,1/d,1/p),f/d,g/p)}else x?M=Math.max(f,Math.min(1,Math.abs(k[0]-A[0]-r)))/d:C=Math.max(g,Math.min(1,Math.abs(k[1]-A[1]-a)))/p;let T=l5._round(d*M),P=l5._round(p*C),R=S-(_=b(...n(T,P)))[0],I=E-_[1];nC(this,lP,n_(this,lP)||[this.x,this.y,this.width,this.height]),this.width=T,this.height=P,this.x=R,this.y=I,this.setDims(o*T,h*P),this.fixAndSetPosition(),this._onResizing()}function or(){var e;nC(this,lE,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(e=n_(this,lw))||e.toggle(!1),this.parent.togglePointerEvents(!1)}function oa(e,t,i){let n=i/t*.7+1-.7;if(1===n)return;let r=nR(this,lH,l8).call(this,this.rotation),a=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[s,l]=this.parentDimensions,o=this.x,h=this.y,c=this.width,u=this.height;n=Math.max(Math.min(n,1/c,1/u),l5.MIN_SIZE/s/c,l5.MIN_SIZE/l/u);let d=l5._round(c*n),p=l5._round(u*n);if(d===c&&p===u)return;nC(this,lP,n_(this,lP)||[o,h,c,u]);let f=a(c/2,u/2),g=l5._round(o+f[0]),m=l5._round(h+f[1]),b=a(d/2,p/2);this.x=g-b[0],this.y=m-b[1],this.width=d,this.height=p,this.setDims(s*d,l*p),this.fixAndSetPosition(),this._onResizing()}function os(){var e;null==(e=n_(this,lw))||e.toggle(!0),this.parent.togglePointerEvents(!0),nR(this,lq,oi).call(this)}function ol(e){let{isMac:t}=rd.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function oo(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1,n=new AbortController,r=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:r},s=e=>{n.abort(),nC(this,lx,null),nC(this,lT,!1),this._uiManager.endDragSession()||nR(this,lJ,ol).call(this,e),i&&this._onStopDragging()};t&&(nC(this,lF,e.clientX),nC(this,lN,e.clientY),nC(this,lx,e.pointerId),nC(this,lA,e.pointerType),window.addEventListener("pointermove",e=>{i||(i=!0,this._onStartDragging());let{clientX:t,clientY:n,pointerId:r}=e;if(r!==n_(this,lx))return void rL(e);let[a,s]=this.screenToPageTranslation(t-n_(this,lF),n-n_(this,lN));nC(this,lF,t),nC(this,lN,n),this._uiManager.dragSelectedEditors(a,s)},a),window.addEventListener("touchmove",rL,a),window.addEventListener("pointerdown",e=>{e.pointerType===n_(this,lA)&&(n_(this,lW)||e.isPrimary)&&s(e),rL(e)},a));let l=e=>{if(!n_(this,lx)||n_(this,lx)===e.pointerId)return void s(e);rL(e)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}function oh(){if(n_(this,lM)||!this.div)return;nC(this,lM,new AbortController);let e=this._uiManager.combinedSignal(n_(this,lM));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function oc(e){l5._resizerKeyboardManager.exec(this,e)}function ou(e){var t;n_(this,lL)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==n_(this,l_)&&nR(this,l4,of).call(this)}function od(e){nC(this,lC,n_(this,lL)?e:"")}function op(e){if(n_(this,lb))for(let t of n_(this,lb))t.tabIndex=e}function of(){nC(this,lL,!1),nR(this,l3,op).call(this,-1),nR(this,lq,oi).call(this)}(0,nW._)(l5,"_l10n",null),(0,nW._)(l5,"_l10nResizer",null),(0,nW._)(l5,"_borderLineWidth",-1),(0,nW._)(l5,"_colorManager",new ak),(0,nW._)(l5,"_zIndex",1),(0,nW._)(l5,"_telemetryTimeout",1e3);class og extends l5{serialize(){return this.serializeDeleted()}constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}}class om{update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<=255?t[i++]=r:(t[i++]=r>>>8,t[i++]=255&r)}}else if(ArrayBuffer.isView(e))i=(t=e.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,r=i-4*n,a=new Uint32Array(t.buffer,0,n),s=0,l=0,o=this.h1,h=this.h2;for(let e=0;e<n;e++)1&e?(o^=s=0x1b873593*(s=(s=0xcc9e2d51*(s=a[e])&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,o=5*(o=o<<13|o>>>19)+0xe6546b64):(h^=l=0x1b873593*(l=(l=0xcc9e2d51*(l=a[e])&0xffff0000|11601*l&65535)<<15|l>>>17)&0xffff0000|13715*l&65535,h=5*(h=h<<13|h>>>19)+0xe6546b64);switch(s=0,r){case 3:s^=t[4*n+2]<<16;case 2:s^=t[4*n+1]<<8;case 1:s^=t[4*n],s=0x1b873593*(s=(s=0xcc9e2d51*s&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,1&n?o^=s:h^=s}this.h1=o,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,t=0xff51afd7*t&0xffff0000|((t<<16|(e=0xed558ccd*e&0xffff0000|36045*e&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,e^=t>>>1,t=0xc4ceb9fe*t&0xffff0000|((t<<16|(e=0x1a85ec53*e&0xffff0000|60499*e&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((e^=t>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}constructor(e){this.h1=e?0|e:0xc3d2e1f0,this.h2=e?0|e:0xc3d2e1f0}}let ov=Object.freeze({map:null,hash:"",transfer:void 0});var ob=new WeakMap,ow=new WeakMap,oy=new WeakMap,ox=new WeakSet;class oA{getValue(e,t){let i=n_(this,oy).get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return n_(this,oy).get(e)}remove(e){if(n_(this,oy).delete(e),0===n_(this,oy).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let e of n_(this,oy).values())if(e instanceof l5)return;this.onAnnotationEditor(null)}}setValue(e,t){let i=n_(this,oy).get(e),n=!1;if(void 0!==i)for(let[e,r]of Object.entries(t))i[e]!==r&&(n=!0,i[e]=r);else n=!0,n_(this,oy).set(e,t);n&&nR(this,ox,ok).call(this),t instanceof l5&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return n_(this,oy).has(e)}getAll(){return n_(this,oy).size>0?ru(n_(this,oy)):null}setAll(e){for(let[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return n_(this,oy).size}resetModified(){n_(this,ob)&&(nC(this,ob,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new oS(this)}get serializable(){if(0===n_(this,oy).size)return ov;let e=new Map,t=new om,i=[],n=Object.create(null),r=!1;for(let[i,a]of n_(this,oy)){let s=a instanceof l5?a.serialize(!1,n):a;s&&(e.set(i,s),t.update("".concat(i,":").concat(JSON.stringify(s))),r||(r=!!s.bitmap))}if(r)for(let t of e.values())t.bitmap&&i.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:ov}get editorStats(){let e=null,t=new Map;for(let r of n_(this,oy).values()){var i,n;if(!(r instanceof l5))continue;let a=r.telemetryFinalData;if(!a)continue;let{type:s}=a;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));let l=(i=e)[s]||(i[s]=new Map);for(let[e,t]of Object.entries(a)){if("type"===e)continue;let i=l.get(e);i||(i=new Map,l.set(e,i));let r=null!=(n=i.get(t))?n:0;i.set(t,r+1)}}for(let[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){nC(this,ow,null)}get modifiedIds(){if(n_(this,ow))return n_(this,ow);let e=[];for(let t of n_(this,oy).values())t instanceof l5&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return nC(this,ow,{ids:new Set(e),hash:e.join(",")})}constructor(){nI(this,ox),nE(this,ob,{writable:!0,value:!1}),nE(this,ow,{writable:!0,value:null}),nE(this,oy,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}}function ok(){n_(this,ob)||(nC(this,ob,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var o_=new WeakMap;class oS extends oA{get print(){n9("Should not call PrintAnnotationStorage.print")}get serializable(){return n_(this,o_)}get modifiedIds(){return re(this,"modifiedIds",{ids:new Set,hash:""})}constructor(e){super(),nE(this,o_,{writable:!0,value:void 0});let{map:t,hash:i,transfer:n}=e.serializable;nC(this,o_,{map:structuredClone(t,n?{transfer:n}:null),hash:i,transfer:n})}}var oE=new WeakMap;class oM{addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),n_(this,oE).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:i}=e;if(!(!t||n_(this,oE).has(t.loadedName))){if(n8(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),n_(this,oE).add(e),null==i||i(t)}catch(e){n6("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}n9("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){throw n6("Failed to load font '".concat(t.family,"': '").concat(i,"'.")),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let i=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var e;return re(this,"isFontLoadingAPISupported",!!(null==(e=this._document)?void 0:e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return nU?t=!0:"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(t=!0),re(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){let{loadingRequests:t}=this,i={done:!1,complete:function(){for(n8(!i.done,"completeRequest() cannot be called twice."),i.done=!0;t.length>0&&t[0].done;)setTimeout(t.shift().callback,0)},callback:e};return t.push(i),i}get _loadTestFont(){return re(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){var i;let n,r;function a(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,i,n){return e.substring(0,t)+n+e.substring(t+i)}let l=this._document.createElement("canvas");l.width=1,l.height=1;let o=l.getContext("2d"),h=0,c="lt".concat(Date.now()).concat(this.loadTestFontId++),u=this._loadTestFont,d=a(u=s(u,976,c.length,c),16);for(n=0,r=c.length-3;n<r;n+=4)d=d-0x58585858+a(c,n)|0;n<c.length&&(d=d-0x58585858+a(c+"XXX",n)|0),u=s(u,16,4,String.fromCharCode((i=d)>>24&255,i>>16&255,i>>8&255,255&i));let p="url(data:font/opentype;base64,".concat(btoa(u),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);let g=this._document.createElement("div");for(let t of(g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px",[e.loadedName,c])){let e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,g.append(e)}this._document.body.append(g),function e(t,i){if(++h>30){n6("Load test font never loaded."),i();return}if(o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0)return void i();setTimeout(e.bind(null,t,i))}(c,()=>{g.remove(),t.complete()})}constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){nE(this,oE,{writable:!0,value:new Set}),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}}class oC{createNativeFontFace(){var e;let t;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e,t;let i;if(!this.data||this.disableFontFace)return null;let n="url(data:".concat(this.mimetype,";base64,").concat((t=this.data,Uint8Array.prototype.toBase64?t.toBase64():btoa(rh(t))),");");if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null==(e=this._inspectFont)||e.call(this,this,n),i}getPathGenerator(e,t){let i;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t;try{i=e.get(n)}catch(e){n6('getPathGenerator - ignoring character: "'.concat(e,'".'))}let r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:n=null}){for(let t in this.compiledGlyphs=Object.create(null),e)this[t]=e[t];this.disableFontFace=!0===t,this.fontExtraProperties=!0===i,this._inspectFont=n}}let oT={DATA:1,ERROR:2},oP={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function oR(){}function oI(e){if(e instanceof ro||e instanceof rr||e instanceof ra||e instanceof ri||e instanceof rs||e instanceof rn)return e;switch(!(e instanceof Error||"object"==typeof e&&null!==e)&&n9('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new ro(e.message);case"InvalidPDFException":return new rr(e.message);case"MissingPDFException":return new ra(e.message);case"PasswordException":return new ri(e.message,e.code);case"UnexpectedResponseException":return new rs(e.message,e.status);case"UnknownErrorException":return new rn(e.message,e.details)}return new rn(e.message,e.toString())}var oL=new WeakMap,oD=new WeakSet,oF=new WeakSet,oN=new WeakSet,oO=new WeakSet;class oW{on(e,t){let i=this.actionHandler;if(i[e])throw Error('There is already an actionName called "'.concat(e,'"'));i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){let n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(e){r.reject(e)}return r.promise}sendWithStream(e,t,i,n){let r=this.streamId++,a=this.sourceName,s=this.targetName,l=this.comObj;return new ReadableStream({start:i=>{let o=Promise.withResolvers();return this.streamControllers[r]={controller:i,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:s,action:e,streamId:r,data:t,desiredSize:i.desiredSize},n),o.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,l.postMessage({sourceName:a,targetName:s,stream:oP.PULL,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{n8(e instanceof Error,"cancel must have a valid reason");let t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:s,stream:oP.CANCEL,streamId:r,reason:oI(e)}),t.promise}},i)}destroy(){var e;null==(e=n_(this,oL))||e.abort(),nC(this,oL,null)}constructor(e,t,i){nI(this,oD),nI(this,oF),nI(this,oN),nI(this,oO),nE(this,oL,{writable:!0,value:new AbortController}),this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",nR(this,oD,oj).bind(this),{signal:n_(this,oL).signal})}}function oj(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void nR(this,oN,oz).call(this,t);if(t.callback){let e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===oT.DATA)i.resolve(t.data);else if(t.callback===oT.ERROR)i.reject(oI(t.reason));else throw Error("Unexpected callback case");return}let i=this.actionHandler[t.action];if(!i)throw Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){let e=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(i,t.data).then(function(i){r.postMessage({sourceName:e,targetName:n,callback:oT.DATA,callbackId:t.callbackId,data:i})},function(i){r.postMessage({sourceName:e,targetName:n,callback:oT.ERROR,callbackId:t.callbackId,reason:oI(i)})});return}if(t.streamId)return void nR(this,oF,oB).call(this,t);i(t.data)}function oB(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this,s=this.actionHandler[e.action],l={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;let l=this.desiredSize;this.desiredSize-=a,l>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:oP.ENQUEUE,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:oP.CLOSE,streamId:t}),delete a.streamSinks[t])},error(e){n8(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:oP.ERROR,streamId:t,reason:oI(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(s,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:oP.START_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:oP.START_COMPLETE,streamId:t,reason:oI(e)})})}function oz(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case oP.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(oI(e.reason));break;case oP.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(oI(e.reason));break;case oP.PULL:if(!s){r.postMessage({sourceName:i,targetName:n,stream:oP.PULL_COMPLETE,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||oR).then(function(){r.postMessage({sourceName:i,targetName:n,stream:oP.PULL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:oP.PULL_COMPLETE,streamId:t,reason:oI(e)})});break;case oP.ENQUEUE:if(n8(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case oP.CLOSE:if(n8(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),nR(this,oO,oH).call(this,a,t);break;case oP.ERROR:n8(a,"error should have stream controller"),a.controller.error(oI(e.reason)),nR(this,oO,oH).call(this,a,t);break;case oP.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(oI(e.reason)),nR(this,oO,oH).call(this,a,t);break;case oP.CANCEL:if(!s)break;let l=oI(e.reason);Promise.try(s.onCancel||oR,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:oP.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:oP.CANCEL_COMPLETE,streamId:t,reason:oI(e)})}),s.sinkCapability.reject(l),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error("Unexpected stream case")}}async function oH(e,t){var i,n,r;await Promise.allSettled([null==(i=e.startCall)?void 0:i.promise,null==(n=e.pullCall)?void 0:n.promise,null==(r=e.cancelCall)?void 0:r.promise]),delete this.streamControllers[t]}var oU=new WeakMap;class oG{create(e,t){if(e<=0||t<=0)throw Error("Invalid canvas size");let i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!n_(this,oU)})}}reset(e,t,i){if(!e.canvas)throw Error("Canvas is not specified");if(t<=0||i<=0)throw Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){n9("Abstract method `_createCanvas` called.")}constructor({enableHWA:e=!1}){nE(this,oU,{writable:!0,value:!1}),nC(this,oU,e)}}class oV{async fetch(e){let{name:t}=e;if(!this.baseUrl)throw Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(i))})}async _fetch(e){n9("Abstract method `_fetch` called.")}constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}}class oq extends oV{async _fetch(e){let t=await rk(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):rc(t)}}class oX{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,r){return"none"}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}var oK=new WeakMap,oY=new WeakMap,oQ=new WeakMap,oJ=new WeakMap,oZ=new WeakMap,o$=new WeakMap,o0=new WeakMap,o1=new WeakMap,o2=new WeakMap,o3=new WeakMap,o4=new WeakSet,o5=new WeakSet,o6=new WeakSet,o9=new WeakSet,o8=new WeakSet,o7=new WeakSet,he=new WeakSet,ht=new WeakSet,hi=new WeakSet;function hn(){return nC(this,oY,n_(this,oY)||new Map)}function hr(){return nC(this,o$,n_(this,o$)||new Map)}function ha(){if(!n_(this,oQ)){let e=n_(this,oZ).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let i=n_(this,oZ).createElementNS(rx,"svg");i.setAttribute("width",0),i.setAttribute("height",0),nC(this,oQ,n_(this,oZ).createElementNS(rx,"defs")),e.append(i),i.append(n_(this,oQ)),n_(this,oZ).body.append(e)}return n_(this,oQ)}function hs(e){if(1===e.length){let t=e[0],i=Array(256);for(let e=0;e<256;e++)i[e]=t[e]/255;let n=i.join(",");return[n,n,n]}let[t,i,n]=e,r=Array(256),a=Array(256),s=Array(256);for(let e=0;e<256;e++)r[e]=t[e]/255,a[e]=i[e]/255,s[e]=n[e]/255;return[r.join(","),a.join(","),s.join(",")]}function hl(e){if(void 0===n_(this,oK)){nC(this,oK,"");let e=n_(this,oZ).URL;e!==n_(this,oZ).baseURI&&(rE(e)?n6('#createUrl: ignore "data:"-URL for performance reasons.'):nC(this,oK,e.split("#",1)[0]))}return"url(".concat(n_(this,oK),"#").concat(e,")")}function ho(e){let t=n_(this,oZ).createElementNS(rx,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function hh(e){let t=n_(this,oZ).createElementNS(rx,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function hc(e){let t=n_(this,oZ).createElementNS(rx,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),n_(this,o3).append(t),t}function hu(e,t,i){let n=n_(this,oZ).createElementNS(rx,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),e.append(n)}function hd(e,t,i,n){let r=n_(this,oZ).createElementNS(rx,"feComponentTransfer");n.append(r),nR(this,o7,hu).call(this,r,"feFuncR",e),nR(this,o7,hu).call(this,r,"feFuncG",t),nR(this,o7,hu).call(this,r,"feFuncB",i)}function hp(e,t){let i=n_(this,oZ).createElementNS(rx,"feComponentTransfer");t.append(i),nR(this,o7,hu).call(this,i,"feFuncA",e)}function hf(e){return n_(this,o3).style.color=e,rO(getComputedStyle(n_(this,o3)).getPropertyValue("color"))}class hg{async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw Error("Font filename must be specified.");let i="".concat(this.baseUrl).concat(t);return this._fetch(i).catch(e=>{throw Error("Unable to load font data at: ".concat(i))})}async _fetch(e){n9("Abstract method `_fetch` called.")}constructor({baseUrl:e=null}){this.baseUrl=e}}class hm extends hg{async _fetch(e){return new Uint8Array(await rk(e,"arraybuffer"))}}async function hv(e){let t=i7.default.getBuiltinModule("fs");return new Uint8Array(await t.promises.readFile(e))}nU&&n6("Please use the `legacy` build in Node.js environments.");let hb={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hw(e,t){if(!t)return;let i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),e.clip(r)}class hy{getPattern(){n9("Abstract method `getPattern` called.")}}class hx extends hy{_createGradient(e){let t;for(let i of("axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let r;if(n===hb.STROKE||n===hb.FILL){let a=t.current.getClippedPathBoundingBox(n,rW(e))||[0,0,0,0],s=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,o=t.cachedCanvases.getCanvas("pattern",s,l),h=o.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=rf.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),hw(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(o.canvas,"no-repeat");let c=new DOMMatrix(i);r.setTransform(c)}else hw(e,this._bbox),r=this._createGradient(e);return r}constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}}function hA(e,t,i,n,r,a,s,l){let o,h,c,u,d,p,f,g,m,b=t.coords,w=t.colors,y=e.data,x=4*e.width;b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o),b[n+1]>b[r+1]&&(o=n,n=r,r=o,o=s,s=l,l=o),b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o);let A=(b[i]+t.offsetX)*t.scaleX,k=(b[i+1]+t.offsetY)*t.scaleY,_=(b[n]+t.offsetX)*t.scaleX,S=(b[n+1]+t.offsetY)*t.scaleY,E=(b[r]+t.offsetX)*t.scaleX,M=(b[r+1]+t.offsetY)*t.scaleY;if(k>=M)return;let C=w[a],T=w[a+1],P=w[a+2],R=w[s],I=w[s+1],L=w[s+2],D=w[l],F=w[l+1],N=w[l+2],O=Math.round(k),W=Math.round(M);for(let e=O;e<=W;e++){let t;if(e<S){let t=e<k?0:(k-e)/(k-S);h=A-(A-_)*t,c=C-(C-R)*t,u=T-(T-I)*t,d=P-(P-L)*t}else{let t;h=_-(_-E)*(t=e>M?1:S===M?0:(S-e)/(S-M)),c=R-(R-D)*t,u=I-(I-F)*t,d=L-(L-N)*t}p=A-(A-E)*(t=e<k?0:e>M?1:(k-e)/(k-M)),f=C-(C-D)*t,g=T-(T-F)*t,m=P-(P-N)*t;let i=Math.round(Math.min(h,p)),n=Math.round(Math.max(h,p)),r=x*e+4*i;for(let e=i;e<=n;e++)(t=(h-e)/(h-p))<0?t=0:t>1&&(t=1),y[r++]=c-(c-f)*t|0,y[r++]=u-(u-g)*t|0,y[r++]=d-(d-m)*t|0,y[r++]=255}}class hk extends hy{_createMeshCanvas(e,t,i){let n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-r,l=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),o=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),h=a/l,c=s/o,u={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/h,scaleY:1/c},d=l+4,p=o+4,f=i.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(l,o);if(t){let e=m.data;for(let i=0,n=e.length;i<n;i+=4)e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=255}for(let e of this._figures)!function(e,t,i){let n,r,a=t.coords,s=t.colors;switch(t.type){case"lattice":let l=t.verticesPerRow,o=Math.floor(a.length/l)-1,h=l-1;for(n=0;n<o;n++){let t=n*l;for(let n=0;n<h;n++,t++)hA(e,i,a[t],a[t+1],a[t+l],s[t],s[t+1],s[t+l]),hA(e,i,a[t+l+1],a[t+1],a[t+l],s[t+l+1],s[t+1],s[t+l])}break;case"triangles":for(n=0,r=a.length;n<r;n+=3)hA(e,i,a[n],a[n+1],a[n+2],s[n],s[n+1],s[n+2]);break;default:throw Error("illegal figure")}}(m,e,u);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:n-2*h,offsetY:r-2*c,scaleX:h,scaleY:c}}getPattern(e,t,i,n){let r;if(hw(e,this._bbox),n===hb.SHADING)r=rf.singularValueDecompose2dScale(rW(e));else if(r=rf.singularValueDecompose2dScale(t.baseTransform),this.matrix){let e=rf.singularValueDecompose2dScale(this.matrix);r=[r[0]*e[0],r[1]*e[1]]}let a=this._createMeshCanvas(r,n===hb.SHADING?null:this._background,t.cachedCanvases);return n!==hb.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}}class h_ extends hy{getPattern(){return"hotpink"}}let hS={COLORED:1,UNCOLORED:2};class hE{createPatternCanvas(e){let{bbox:t,operatorList:i,paintType:n,tilingType:r,color:a,canvasGraphicsFactory:s}=this,{xstep:l,ystep:o}=this;l=Math.abs(l),o=Math.abs(o),n5("TilingType: "+r);let h=t[0],c=t[1],u=t[2],d=t[3],p=u-h,f=d-c,g=rf.singularValueDecompose2dScale(this.matrix),m=rf.singularValueDecompose2dScale(this.baseTransform),b=g[0]*m[0],w=g[1]*m[1],y=p,x=f,A=!1,k=!1,_=Math.ceil(o*w),S=Math.ceil(f*w);Math.ceil(l*b)>=Math.ceil(p*b)?y=l:A=!0,_>=S?x=o:k=!0;let E=this.getSizeAndScale(y,this.ctx.canvas.width,b),M=this.getSizeAndScale(x,this.ctx.canvas.height,w),C=e.cachedCanvases.getCanvas("pattern",E.size,M.size),T=C.context,P=s.createCanvasGraphics(T);if(P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,n,a),T.translate(-E.scale*h,-M.scale*c),P.transform(E.scale,0,0,M.scale,0,0),T.save(),this.clipBbox(P,h,c,u,d),P.baseTransform=rW(P.ctx),P.executeOperatorList(i),P.endDrawing(),T.restore(),A||k){let t=C.canvas;A&&(y=l),k&&(x=o);let i=this.getSizeAndScale(y,this.ctx.canvas.width,b),n=this.getSizeAndScale(x,this.ctx.canvas.height,w),r=i.size,a=n.size,s=e.cachedCanvases.getCanvas("pattern-workaround",r,a),u=s.context,d=A?Math.floor(p/l):0,g=k?Math.floor(f/o):0;for(let e=0;e<=d;e++)for(let i=0;i<=g;i++)u.drawImage(t,r*e,a*i,r,a,0,0,r,a);return{canvas:s.canvas,scaleX:i.scale,scaleY:n.scale,offsetX:h,offsetY:c}}return{canvas:C.canvas,scaleX:E.scale,scaleY:M.scale,offsetX:h,offsetY:c}}getSizeAndScale(e,t,i){let n=Math.max(hE.MAX_PATTERN_SIZE,t),r=Math.ceil(e*i);return r>=n?r=n:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,n,r){let a=n-t,s=r-i;e.ctx.rect(t,i,a,s),e.current.updateRectMinMax(rW(e.ctx),[t,i,n,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){let n=e.ctx,r=e.current;switch(t){case hS.COLORED:let a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case hS.UNCOLORED:let s=rf.makeHexColor(i[0],i[1],i[2]);n.fillStyle=s,n.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new rl("Unsupported paint type: ".concat(t))}}getPattern(e,t,i,n){let r=i;n!==hb.SHADING&&(r=rf.transform(r,t.baseTransform),this.matrix&&(r=rf.transform(r,this.matrix)));let a=this.createPatternCanvas(t),s=new DOMMatrix(r);s=(s=s.translate(a.offsetX,a.offsetY)).scale(1/a.scaleX,1/a.scaleY);let l=e.createPattern(a.canvas,"repeat");return l.setTransform(s),l}constructor(e,t,i,n,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}}(0,nW._)(hE,"MAX_PATTERN_SIZE",3e3);class hM{getCanvas(e,t,i){let n;return void 0!==this.cache[e]?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}}function hC(e,t,i,n,r,a,s,l,o,h){let[c,u,d,p,f,g]=rW(e);if(0===u&&0===d){let m=Math.round(s*c+f),b=Math.round(l*p+g),w=Math.abs(Math.round((s+o)*c+f)-m)||1,y=Math.abs(Math.round((l+h)*p+g)-b)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),m,b),e.drawImage(t,i,n,r,a,0,0,w,y),e.setTransform(c,u,d,p,f,g),[w,y]}if(0===c&&0===p){let m=Math.round(l*d+f),b=Math.round(s*u+g),w=Math.abs(Math.round((l+h)*d+f)-m)||1,y=Math.abs(Math.round((s+o)*u+g)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(d),0,m,b),e.drawImage(t,i,n,r,a,0,0,y,w),e.setTransform(c,u,d,p,f,g),[y,w]}return e.drawImage(t,i,n,r,a,s,l,o,h),[Math.hypot(c,u)*o,Math.hypot(d,p)*h]}class hT{clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=rf.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){let i=rf.applyTransform(t,e),n=rf.applyTransform(t.slice(2),e),r=rf.applyTransform([t[0],t[3]],e),a=rf.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(e,t){rf.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,r,a,s,l,o,h){let c=rf.bezierBoundingBox(t,i,n,r,a,s,l,o,h);h||this.updateRectMinMax(e,c)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hb.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(e===hb.STROKE){t||n9("Stroke bounding box must include transform.");let e=rf.singularValueDecompose2dScale(t),n=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;i[0]-=n,i[1]-=r,i[2]+=n,i[3]+=r}return i}updateClipFromPath(){let e=rf.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hb.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return rf.intersect(this.clipBox,this.getPathBoundingBox(e,t))}constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nG,this.textMatrixScale=1,this.fontMatrix=nV,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nJ.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}}function hP(e,t){let i,n,r,a;if(t instanceof ImageData)return void e.putImageData(t,0,0);let s=t.height,l=t.width,o=s%16,h=(s-o)/16,c=0===o?h:h+1,u=e.createImageData(l,16),d=0,p,f=t.data,g=u.data;if(t.kind===nZ.GRAYSCALE_1BPP){let t=f.byteLength,a=new Uint32Array(g.buffer,0,g.byteLength>>2),s=a.length,m=l+7>>3,b=rd.isLittleEndian?0xff000000:255;for(i=0;i<c;i++){for(n=0,r=i<h?16:o,p=0;n<r;n++){let e=t-d,i=0,n=e>m?l:8*e-7,r=-8&n,s=0,o=0;for(;i<r;i+=8)o=f[d++],a[p++]=128&o?0xffffffff:b,a[p++]=64&o?0xffffffff:b,a[p++]=32&o?0xffffffff:b,a[p++]=16&o?0xffffffff:b,a[p++]=8&o?0xffffffff:b,a[p++]=4&o?0xffffffff:b,a[p++]=2&o?0xffffffff:b,a[p++]=1&o?0xffffffff:b;for(;i<n;i++)0===s&&(o=f[d++],s=128),a[p++]=o&s?0xffffffff:b,s>>=1}for(;p<s;)a[p++]=0;e.putImageData(u,0,16*i)}}else if(t.kind===nZ.RGBA_32BPP){for(i=0,n=0,a=16*l*4;i<h;i++)g.set(f.subarray(d,d+a)),d+=a,e.putImageData(u,0,n),n+=16;i<c&&(a=l*o*4,g.set(f.subarray(d,d+a)),e.putImageData(u,0,n))}else if(t.kind===nZ.RGB_24BPP)for(i=0,a=l*(r=16);i<c;i++){for(i>=h&&(a=l*(r=o)),p=0,n=a;n--;)g[p++]=f[d++],g[p++]=f[d++],g[p++]=f[d++],g[p++]=255;e.putImageData(u,0,16*i)}else throw Error("bad image kind: ".concat(t.kind))}function hR(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);let i=t.height,n=t.width,r=i%16,a=(i-r)/16,s=0===r?a:a+1,l=e.createImageData(n,16),o=0,h=t.data,c=l.data;for(let t=0;t<s;t++){let i=t<a?16:r;({srcPos:o}=function(e){let{src:t,srcPos:i=0,dest:n,width:r,height:a,nonBlackColor:s=0xffffffff,inverseDecode:l=!1}=e,o=rd.isLittleEndian?0xff000000:255,[h,c]=l?[s,o]:[o,s],u=r>>3,d=7&r,p=t.length;n=new Uint32Array(n.buffer);let f=0;for(let e=0;e<a;e++){for(let e=i+u;i<e;i++){let e=i<p?t[i]:255;n[f++]=128&e?c:h,n[f++]=64&e?c:h,n[f++]=32&e?c:h,n[f++]=16&e?c:h,n[f++]=8&e?c:h,n[f++]=4&e?c:h,n[f++]=2&e?c:h,n[f++]=1&e?c:h}if(0===d)continue;let e=i<p?t[i++]:255;for(let t=0;t<d;t++)n[f++]=e&1<<7-t?c:h}return{srcPos:i,destPos:f}}({src:h,srcPos:o,dest:c,width:n,height:i,nonBlackColor:0})),e.putImageData(l,0,16*t)}}function hI(e,t){for(let i of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function hL(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!nU){let{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function hD(e,t){if(t)return!0;let i=rf.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*rA.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}let hF=["butt","round","square"],hN=["miter","round","bevel"],hO={},hW={};var hj=new WeakSet,hB=new WeakSet,hz=new WeakSet;class hH{getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:i,transparency:n=!1,background:r=null}=e,a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,n){let e=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...rW(this.compositeCtx))}this.ctx.save(),hL(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=rW(this.ctx)}executeOperatorList(e,t,i,n){let r,a=e.argsArray,s=e.fnArray,l=t||0,o=a.length;if(o===l)return l;let h=o-l>10&&"function"==typeof i,c=h?Date.now()+15:0,u=0,d=this.commonObjs,p=this.objs;for(;;){if(void 0!==n&&l===n.nextBreakPoint)return n.breakIt(l,i),l;if((r=s[l])!==n2.dependency)this[r].apply(this,a[l]);else for(let e of a[l]){let t=e.startsWith("g_")?d:p;if(!t.has(e))return t.get(e,i),l}if(++l===o)return l;if(h&&++u>10){if(Date.now()>c)return i(),l;u=0}}}endDrawing(){for(let e of(nR(this,hj,hU).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),nR(this,hB,hG).call(this)}_scaleImage(e,t){var i,n;let r,a,s=null!=(i=e.width)?i:e.displayWidth,l=null!=(n=e.height)?n:e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),h=Math.max(Math.hypot(t[2],t[3]),1),c=s,u=l,d="prescale1";for(;o>2&&c>1||h>2&&u>1;){let t=c,i=u;o>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/t),h>2&&u>1&&(i=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,h/=u/i),(a=(r=this.cachedCanvases.getCanvas(d,t,i)).context).clearRect(0,0,t,i),a.drawImage(e,0,0,c,u,0,0,t,i),e=r.canvas,c=t,u=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e){let t,i,n,r,a=this.ctx,{width:s,height:l}=e,o=this.current.fillColor,h=this.current.patternFill,c=rW(a);if((e.bitmap||e.data)&&e.count>1){let r=e.bitmap||e.data.buffer;i=JSON.stringify(h?c:[c.slice(0,4),o]),(t=this._cachedBitmapsMap.get(r))||(t=new Map,this._cachedBitmapsMap.set(r,t));let a=t.get(i);if(a&&!h)return{canvas:a,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};n=a}n||hR((r=this.cachedCanvases.getCanvas("maskCanvas",s,l)).context,e);let u=rf.transform(c,[1/s,0,0,-1/l,0,0]);u=rf.transform(u,[1,0,0,1,0,-l]);let[d,p,f,g]=rf.getAxialAlignedBoundingBox([0,0,s,l],u),m=Math.round(f-d)||1,b=Math.round(g-p)||1,w=this.cachedCanvases.getCanvas("fillCanvas",m,b),y=w.context;y.translate(-d,-p),y.transform(...u),!n&&(n=(n=this._scaleImage(r.canvas,rj(y))).img,t&&h&&t.set(i,n)),y.imageSmoothingEnabled=hD(rW(y),e.interpolate),hC(y,n,0,0,n.width,n.height,0,0,s,l),y.globalCompositeOperation="source-in";let x=rf.transform(rj(y),[1,0,0,1,-d,-p]);return y.fillStyle=h?o.getPattern(a,this,x,hb.FILL):o,y.fillRect(0,0,s,l),t&&!h&&(this.cachedCanvases.delete("fillCanvas"),t.set(i,w.canvas)),{canvas:w.canvas,offsetX:Math.round(d),offsetY:Math.round(p)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=hF[e]}setLineJoin(e){this.ctx.lineJoin=hN[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;let r=this.ctx;r.setTransform(...rW(this.suspendedCtx)),hI(this.suspendedCtx,r);var a=this.suspendedCtx;if(r._removeMirroring)throw Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){a.save(),this.__originalSave()},r.restore=function(){a.restore(),this.__originalRestore()},r.translate=function(e,t){a.translate(e,t),this.__originalTranslate(e,t)},r.scale=function(e,t){a.scale(e,t),this.__originalScale(e,t)},r.transform=function(e,t,i,n,r,s){a.transform(e,t,i,n,r,s),this.__originalTransform(e,t,i,n,r,s)},r.setTransform=function(e,t,i,n,r,s){a.setTransform(e,t,i,n,r,s),this.__originalSetTransform(e,t,i,n,r,s)},r.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){a.rotate(e),this.__originalRotate(e)},r.clip=function(e){a.clip(e),this.__originalClip(e)},r.moveTo=function(e,t){a.moveTo(e,t),this.__originalMoveTo(e,t)},r.lineTo=function(e,t){a.lineTo(e,t),this.__originalLineTo(e,t)},r.bezierCurveTo=function(e,t,i,n,r,s){a.bezierCurveTo(e,t,i,n,r,s),this.__originalBezierCurveTo(e,t,i,n,r,s)},r.rect=function(e,t,i,n){a.rect(e,t,i,n),this.__originalRect(e,t,i,n)},r.closePath=function(){a.closePath(),this.__originalClosePath()},r.beginPath=function(){a.beginPath(),this.__originalBeginPath()},this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hI(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){let r=n[0],a=n[1],s=n[2]-r,l=n[3]-a;0!==s&&0!==l&&(this.genericComposeSMask(t.context,i,s,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,r,a,s,l,o,h,c){let u=e.canvas,d=l-h,p=o-c;if(a){let t=rf.makeHexColor(...a);if(d<0||p<0||d+i>u.width||p+n>u.height){let e=this.cachedCanvases.getCanvas("maskExtension",i,n),r=e.context;r.drawImage(u,-d,-p),r.globalCompositeOperation="destination-atop",r.fillStyle=t,r.fillRect(0,0,i,n),r.globalCompositeOperation="source-over",u=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let r=new Path2D;r.rect(d,p,i,n),e.clip(r),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(d,p,i,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&s?t.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(s));let f=new Path2D;f.rect(l,o,i,n),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,d,p,i,n,l,o,i,n),t.restore()}save(){this.inSMaskMode?(hI(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hI(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,r,a){this.ctx.transform(e,t,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let n,r,a=this.ctx,s=this.current,l=s.x,o=s.y,h=rW(a),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],u=c?i.slice(0):null;for(let i=0,d=0,p=e.length;i<p;i++)switch(0|e[i]){case n2.rectangle:l=t[d++],o=t[d++];let p=t[d++],f=t[d++],g=l+p,m=o+f;a.moveTo(l,o),0===p||0===f?a.lineTo(g,m):(a.lineTo(g,o),a.lineTo(g,m),a.lineTo(l,m)),c||s.updateRectMinMax(h,[l,o,g,m]),a.closePath();break;case n2.moveTo:l=t[d++],o=t[d++],a.moveTo(l,o),c||s.updatePathMinMax(h,l,o);break;case n2.lineTo:l=t[d++],o=t[d++],a.lineTo(l,o),c||s.updatePathMinMax(h,l,o);break;case n2.curveTo:n=l,r=o,l=t[d+4],o=t[d+5],a.bezierCurveTo(t[d],t[d+1],t[d+2],t[d+3],l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],t[d+2],t[d+3],l,o,u),d+=6;break;case n2.curveTo2:n=l,r=o,a.bezierCurveTo(l,o,t[d],t[d+1],t[d+2],t[d+3]),s.updateCurvePathMinMax(h,n,r,l,o,t[d],t[d+1],t[d+2],t[d+3],u),l=t[d+2],o=t[d+3],d+=4;break;case n2.curveTo3:n=l,r=o,l=t[d+2],o=t[d+3],a.bezierCurveTo(t[d],t[d+1],l,o,l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],l,o,l,o,u),d+=4;break;case n2.closePath:a.closePath()}c&&s.updateScalingPathMinMax(h,u),s.setCurrentPoint(l,o)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&(null==i?void 0:i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,rj(t),hb.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.fillColor,n=this.current.patternFill,r=!1;n&&(t.save(),t.fillStyle=i.getPattern(t,this,rj(t),hb.FILL),r=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=hO}eoClip(){this.pendingClip=hW}beginText(){this.current.textMatrix=nG,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();let i=new Path2D,n=t.getTransform().invertSelf();for(let{transform:t,x:r,y:a,fontSize:s,path:l}of e)i.addPath(l,new DOMMatrix(t).preMultiplySelf(n).translate(r,a).scale(s,-s));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var i;let n=this.commonObjs.get(e),r=this.current;if(!n)throw Error("Can't find font for ".concat(e));if(r.fontMatrix=n.fontMatrix||nV,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&n6("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let a=n.loadedName||"sans-serif",s=(null==(i=n.systemFontInfo)?void 0:i.css)||'"'.concat(a,'", ').concat(n.fallbackName),l="normal";n.black?l="900":n.bold&&(l="bold");let o=n.italic?"italic":"normal",h=t;t<16?h=16:t>100&&(h=100),this.current.fontSizeScale=t/h,this.ctx.font="".concat(o," ").concat(l," ").concat(h,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,r,a){this.current.textMatrix=[e,t,i,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,r){let a,s=this.ctx,l=this.current,o=l.font,h=l.textRenderingMode,c=l.fontSize/l.fontSizeScale,u=h&nJ.FILL_STROKE_MASK,d=!!(h&nJ.ADD_TO_PATH_FLAG),p=l.patternFill&&!o.missingFile,f=l.patternStroke&&!o.missingFile;if((o.disableFontFace||d||p||f)&&(a=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||p||f){if(s.save(),s.translate(t,i),s.scale(c,-c),u===nJ.FILL||u===nJ.FILL_STROKE)if(n){let e=s.getTransform();s.setTransform(...n),s.fill(nR(this,hz,hV).call(this,a,e,n))}else s.fill(a);if(u===nJ.STROKE||u===nJ.FILL_STROKE)if(r){let e=s.getTransform();s.setTransform(...r),s.stroke(nR(this,hz,hV).call(this,a,e,r))}else s.lineWidth/=c,s.stroke(a);s.restore()}else(u===nJ.FILL||u===nJ.FILL_STROKE)&&s.fillText(e,t,i),(u===nJ.STROKE||u===nJ.FILL_STROKE)&&s.strokeText(e,t,i);d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:rW(s),x:t,y:i,fontSize:c,path:a})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,i=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){i=!0;break}return re(this,"isFontSubpixelAAEnabled",i)}showText(e){let t,i,n=this.current,r=n.font;if(r.isType3Font)return this.showType3Text(e);let a=n.fontSize;if(0===a)return;let s=this.ctx,l=n.fontSizeScale,o=n.charSpacing,h=n.wordSpacing,c=n.fontDirection,u=n.textHScale*c,d=e.length,p=r.vertical,f=p?1:-1,g=r.defaultVMetrics,m=a*n.fontMatrix[0],b=n.textRenderingMode===nJ.FILL&&!r.disableFontFace&&!n.patternFill;if(s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(u,-1):s.scale(u,1),n.patternFill){s.save();let e=n.fillColor.getPattern(s,this,rj(s),hb.FILL);t=rW(s),s.restore(),s.fillStyle=e}if(n.patternStroke){s.save();let e=n.strokeColor.getPattern(s,this,rj(s),hb.STROKE);i=rW(s),s.restore(),s.strokeStyle=e}let w=n.lineWidth,y=n.textMatrixScale;if(0===y||0===w){let e=n.textRenderingMode&nJ.FILL_STROKE_MASK;(e===nJ.STROKE||e===nJ.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=y;if(1!==l&&(s.scale(l,l),w/=l),s.lineWidth=w,r.isInvalidPDFjsFont){let t=[],i=0;for(let n of e)t.push(n.unicode),i+=n.width;s.fillText(t.join(""),0,0),n.x+=i*m*u,s.restore(),this.compose();return}let x=0,A;for(A=0;A<d;++A){let n,u,d=e[A];if("number"==typeof d){x+=f*d*a/1e3;continue}let w=!1,y=(d.isSpace?h:0)+o,k=d.fontChar,_=d.accent,S=d.width;if(p){let e=d.vmetric||g,t=-(d.vmetric?e[1]:.5*S)*m,i=e[2]*m;S=e?-e[0]:S,n=t/l,u=(x+i)/l}else n=x/l,u=0;if(r.remeasure&&S>0){let e=1e3*s.measureText(k).width/a*l;if(S<e&&this.isFontSubpixelAAEnabled){let t=S/e;w=!0,s.save(),s.scale(t,1),n/=t}else S!==e&&(n+=(S-e)/2e3*a/l)}if(this.contentVisible&&(d.isInFont||r.missingFile)){if(b&&!_)s.fillText(k,n,u);else if(this.paintChar(k,n,u,t,i),_){let e=n+a*_.offset.x/l,r=u-a*_.offset.y/l;this.paintChar(_.fontChar,e,r,t,i)}}x+=p?S*m-y*c:S*m+y*c,w&&s.restore()}p?n.y-=x:n.x+=x*u,s.restore(),this.compose()}showType3Text(e){let t,i,n,r,a=this.ctx,s=this.current,l=s.font,o=s.fontSize,h=s.fontDirection,c=l.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,p=s.textHScale*h,f=s.fontMatrix||nV,g=e.length;if(s.textRenderingMode!==nJ.INVISIBLE&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...s.textMatrix),a.translate(s.x,s.y),a.scale(p,h),t=0;t<g;++t){if("number"==typeof(i=e[t])){r=c*i*o/1e3,this.ctx.translate(r,0),s.x+=r*p;continue}let h=(i.isSpace?d:0)+u,g=l.charProcOperatorList[i.operatorListId];if(!g){n6('Type3 character "'.concat(i.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=i,this.save(),a.scale(o,o),a.transform(...f),this.executeOperatorList(g),this.restore()),n=rf.applyTransform([i.width,0],f)[0]*o+h,a.translate(n,0),s.x+=n*p}a.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){let i=e[1],n=this.baseTransform||rW(this.ctx);t=new hE(e,i,this.ctx,{createCanvasGraphics:e=>new hH(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=rf.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=rf.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new hx(e);case"Mesh":return new hk(e);case"Dummy":return new h_}throw Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),i&&(t.matrix=i),t}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save(),t.fillStyle=this._getPattern(e).getPattern(t,this,rj(t),hb.SHADING);let i=rj(t);{let{width:e,height:n}=t.canvas,[r,a,s,l]=rf.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(r,a,s-r,l-a)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){n9("Should not call beginInlineImage")}beginImageData(){n9("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=rW(this.ctx),t)){let e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i),this.current.updateRectMinMax(rW(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||n5("TODO: Support non-isolated groups."),e.knockout&&n6("Knockout groups not supported.");let i=rW(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw Error("Bounding box is required.");let n=rf.getAxialAlignedBoundingBox(e.bbox,rW(t)),r=[0,0,t.canvas.width,t.canvas.height],a=Math.floor((n=rf.intersect(n,r)||[0,0,0,0])[0]),s=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),o=Math.max(Math.ceil(n[3])-s,1);this.current.startNewPathAndClipBox([0,0,l,o]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);let c=this.cachedCanvases.getCanvas(h,l,o),u=c.context;u.translate(-a,-s),u.transform(...i),e.smask?this.smaskStack.push({canvas:c.canvas,context:u,offsetX:a,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,s),t.save()),hI(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let e=rW(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);let i=rf.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,i,n,r){if(nR(this,hj,hU).call(this),hL(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let n=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=n,t[3]=a;let[r,s]=rf.singularValueDecompose2dScale(rW(this.ctx)),{viewportScale:l}=this,o=Math.ceil(n*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(o,h);let{canvas:c,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(r,0,0,-s,0,a*s),hL(this.ctx)}else hL(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],n,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new hT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nR(this,hB,hG).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;(e=this.getObject(e.data,e)).count=t;let i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(e){let t,i,n,{width:r,height:a}=e;if(r>1e3||a>1e3)return null;let s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=r+1,o=new Uint8Array(l*(a+1)),h=r+7&-8,c=new Uint8Array(h*a),u=0;for(let t of e.data){let e=128;for(;e>0;)c[u++]=t&e?0:255,e>>=1}let d=0;for(0!==c[u=0]&&(o[0]=1,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[i]=c[u]?2:1,++d),u++;for(0!==c[u]&&(o[i]=2,++d),t=1;t<a;t++){u=t*h,n=t*l,c[u-h]!==c[u]&&(o[n]=c[u]?1:8,++d);let e=4*!!c[u]+8*!!c[u-h];for(i=1;i<r;i++)s[e=(e>>2)+4*!!c[u+1]+8*!!c[u-h+1]]&&(o[n+i]=s[e],++d),u++;if(c[u-h]!==c[u]&&(o[n+i]=c[u]?2:4,++d),d>1e3)return null}for(u=h*(a-1),n=t*l,0!==c[u]&&(o[n]=8,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[n+i]=c[u]?4:8,++d),u++;if(0!==c[u]&&(o[n+i]=4,++d),d>1e3)return null;let p=new Int32Array([0,l,-1,0,-l,0,0,0,1]),f=new Path2D;for(t=0;d&&t<=a;t++){let e=t*l,i=e+r;for(;e<i&&!o[e];)e++;if(e===i)continue;f.moveTo(e%l,t);let n=e,a=o[e];do{let t=p[a];do e+=t;while(!o[e])let i=o[e];5!==i&&10!==i?(a=i,o[e]=0):(a=i&51*a>>4,o[e]&=a>>2|a<<2),f.lineTo(e%l,e/l|0),!o[e]&&--d}while(n!==e)--t}return c=null,o=null,function(e){e.save(),e.scale(1/r,-1/a),e.translate(0,-a),e.fill(f),e.beginPath(),e.restore()}}(e)),n.compiled))return void n.compiled(i);let r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);let s=this.ctx;s.save();let l=rW(s);s.transform(t,i,n,r,0,0);let o=this._createMaskCanvas(e);s.setTransform(1,0,0,1,o.offsetX-l[4],o.offsetY-l[5]);for(let e=0,h=a.length;e<h;e+=2){let h=rf.transform(l,[t,i,n,r,a[e],a[e+1]]),[c,u]=rf.applyTransform([0,0],h);s.drawImage(o.canvas,c,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let r of e){let{data:e,width:a,height:s,transform:l}=r,o=this.cachedCanvases.getCanvas("maskCanvas",a,s),h=o.context;h.save(),hR(h,this.getObject(e,r)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,rj(t),hb.FILL):i,h.fillRect(0,0,a,s),h.restore(),t.save(),t.transform(...l),t.scale(1,-1),hC(t,o.canvas,0,0,a,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t)return void n6("Dependent image isn't ready yet");this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;let r=this.getObject(e);if(!r)return void n6("Dependent image isn't ready yet");let a=r.width,s=r.height,l=[];for(let e=0,r=n.length;e<r;e+=2)l.push({transform:[t,0,0,i,n[e],n[e+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;let{bitmap:t,width:i,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){let t;if(!this.contentVisible)return;let i=e.width,n=e.height,r=this.ctx;if(this.save(),!nU){let{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}if(r.scale(1/i,-1/n),e.bitmap)t=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{let r=this.cachedCanvases.getCanvas("inlineImage",i,n).context;hP(r,e),t=this.applyTransferMapsToCanvas(r)}let a=this._scaleImage(t,rj(r));r.imageSmoothingEnabled=hD(rW(r),e.interpolate),hC(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){let i;if(!this.contentVisible)return;let n=this.ctx;if(e.bitmap)i=e.bitmap;else{let t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;hP(r,e),i=this.applyTransferMapsToCanvas(r)}for(let e of t)n.save(),n.transform(...e.transform),n.scale(1,-1),hC(n,i,e.x,e.y,e.w,e.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let i=this.ctx;this.pendingClip&&(t||(this.pendingClip===hW?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=rW(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let e,t,{lineWidth:i}=this.current,{a:n,b:r,c:a,d:s}=this.ctx.getTransform();if(0===r&&0===a){let r=Math.abs(n),a=Math.abs(s);if(r===a)if(0===i)e=t=1/r;else{let n=r*i;e=t=n<1?1/n:1}else if(0===i)e=1/r,t=1/a;else{let n=r*i,s=a*i;e=n<1?1/n:1,t=s<1?1/s:1}}else{let l=Math.abs(n*s-r*a),o=Math.hypot(n,r),h=Math.hypot(a,s);if(0===i)e=h/l,t=o/l;else{let n=i*l;e=h>n?h/n:1,t=o>n?o/n:1}}this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=i||1,1===n&&1===r)return void t.stroke();let a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){let e=Math.max(n,r);t.setLineDash(a.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}constructor(e,t,i,n,r,{optionalContentConfig:a,markedContentStack:s=null},l,o){nI(this,hj),nI(this,hB),nI(this,hz),this.ctx=e,this.current=new hT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=a,this.cachedCanvases=new hM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}}function hU(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function hG(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function hV(e,t,i){let n=new Path2D;return n.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),n}for(let e in n2)void 0!==hH.prototype[e]&&(hH.prototype[n2[e]]=hH.prototype[e]);class hq{static get workerPort(){return nF(this,hq,hX)}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw Error("Invalid `workerPort` type.");nN(this,hq,hX,e)}static get workerSrc(){return nF(this,hq,hK)}static set workerSrc(e){if("string"!=typeof e)throw Error("Invalid `workerSrc` type.");nN(this,hq,hK,e)}}var hX={writable:!0,value:null},hK={writable:!0,value:""},hY=new WeakMap,hQ=new WeakMap;class hJ{getRaw(){return n_(this,hQ)}get(e){var t;return null!=(t=n_(this,hY).get(e))?t:null}getAll(){return ru(n_(this,hY))}has(e){return n_(this,hY).has(e)}constructor({parsedData:e,rawData:t}){nE(this,hY,{writable:!0,value:void 0}),nE(this,hQ,{writable:!0,value:void 0}),nC(this,hY,e),nC(this,hQ,t)}}let hZ=Symbol("INTERNAL");var h$=new WeakMap,h0=new WeakMap,h1=new WeakMap,h2=new WeakMap;class h3{get visible(){if(n_(this,h1))return n_(this,h2);if(!n_(this,h2))return!1;let{print:e,view:t}=this.usage;return n_(this,h$)?(null==t?void 0:t.viewState)!=="OFF":!n_(this,h0)||(null==e?void 0:e.printState)!=="OFF"}_setVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==hZ&&n9("Internal method `_setVisible` called."),nC(this,h1,i),nC(this,h2,t)}constructor(e,{name:t,intent:i,usage:n,rbGroups:r}){nE(this,h$,{writable:!0,value:!1}),nE(this,h0,{writable:!0,value:!1}),nE(this,h1,{writable:!0,value:!1}),nE(this,h2,{writable:!0,value:!0}),nC(this,h$,!!(e&nq.DISPLAY)),nC(this,h0,!!(e&nq.PRINT)),this.name=t,this.intent=i,this.usage=n,this.rbGroups=r}}var h4=new WeakMap,h5=new WeakMap,h6=new WeakMap,h9=new WeakMap,h8=new WeakSet;class h7{isVisible(e){if(0===n_(this,h5).size)return!0;if(!e)return n5("Optional content group not defined."),!0;if("OCG"===e.type)return n_(this,h5).has(e.id)?n_(this,h5).get(e.id).visible:(n6("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return nR(this,h8,ce).call(this,e.expression);if(e.policy&&"AnyOn"!==e.policy){if("AllOn"===e.policy){for(let t of e.ids){if(!n_(this,h5).has(t)){n6("Optional content group not found: ".concat(t));break}if(!n_(this,h5).get(t).visible)return!1}return!0}else if("AnyOff"===e.policy){for(let t of e.ids){if(!n_(this,h5).has(t))return n6("Optional content group not found: ".concat(t)),!0;if(!n_(this,h5).get(t).visible)return!0}return!1}else if("AllOff"===e.policy){for(let t of e.ids){if(!n_(this,h5).has(t)){n6("Optional content group not found: ".concat(t));break}if(n_(this,h5).get(t).visible)return!1}return!0}}else{for(let t of e.ids){if(!n_(this,h5).has(t))return n6("Optional content group not found: ".concat(t)),!0;if(n_(this,h5).get(t).visible)return!0}return!1}return n6("Unknown optional content policy ".concat(e.policy,".")),!0}return n6("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=n_(this,h5).get(e);if(!n)return void n6("Optional content group not found: ".concat(e));if(i&&t&&n.rbGroups.length){for(let t of n.rbGroups)for(let i of t)if(i!==e){var r;null==(r=n_(this,h5).get(i))||r._setVisible(hZ,!1,!0)}}n._setVisible(hZ,!!t,!0),nC(this,h4,null)}setOCGState(e){let t,{state:i,preserveRB:n}=e;for(let e of i){switch(e){case"ON":case"OFF":case"Toggle":t=e;continue}let i=n_(this,h5).get(e);if(i)switch(t){case"ON":this.setVisibility(e,!0,n);break;case"OFF":this.setVisibility(e,!1,n);break;case"Toggle":this.setVisibility(e,!i.visible,n)}}nC(this,h4,null)}get hasInitialVisibility(){return null===n_(this,h6)||this.getHash()===n_(this,h6)}getOrder(){return n_(this,h5).size?n_(this,h9)?n_(this,h9).slice():[...n_(this,h5).keys()]:null}getGroups(){return n_(this,h5).size>0?ru(n_(this,h5)):null}getGroup(e){return n_(this,h5).get(e)||null}getHash(){if(null!==n_(this,h4))return n_(this,h4);let e=new om;for(let[t,i]of n_(this,h5))e.update("".concat(t,":").concat(i.visible));return nC(this,h4,e.hexdigest())}constructor(e,t=nq.DISPLAY){if(nI(this,h8),nE(this,h4,{writable:!0,value:null}),nE(this,h5,{writable:!0,value:new Map}),nE(this,h6,{writable:!0,value:null}),nE(this,h9,{writable:!0,value:null}),this.renderingIntent=t,this.name=null,this.creator=null,null===e)return;for(let i of(this.name=e.name,this.creator=e.creator,nC(this,h9,e.order),e.groups))n_(this,h5).set(i.id,new h3(t,i));if("OFF"===e.baseState)for(let e of n_(this,h5).values())e._setVisible(hZ,!1);for(let t of e.on)n_(this,h5).get(t)._setVisible(hZ,!0);for(let t of e.off)n_(this,h5).get(t)._setVisible(hZ,!1);nC(this,h6,this.getHash())}}function ce(e){let t=e.length;if(t<2)return!0;let i=e[0];for(let n=1;n<t;n++){let t,r=e[n];if(Array.isArray(r))t=nR(this,h8,ce).call(this,r);else{if(!n_(this,h5).has(r))return n6("Optional content group not found: ".concat(r)),!0;t=n_(this,h5).get(r).visible}switch(i){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===i}class ct{_onReceiveData(e){let{begin:t,chunk:i}=e,n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):n8(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}_onProgress(e){var t,i,n,r;void 0===e.total?null==(i=this._rangeReaders[0])||null==(t=i.onProgress)||t.call(i,{loaded:e.loaded}):null==(r=this._fullRequestReader)||null==(n=r.onProgress)||n.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){n8(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new ci(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new cn(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeReaders.slice(0)))i.cancel(e);this._pdfDataRangeTransport.abort()}constructor(e,{disableRange:t=!1,disableStream:i=!1}){n8(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:s}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=s,(null==r?void 0:r.length)>0){let e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}}class ci{_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}constructor(e,t,i=!1,n=null){for(let r of(this._stream=e,this._done=i||!1,this._filename=rM(n)?n:null,this._queuedChunks=t||[],this._loaded=0,this._queuedChunks))this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}}class cn{_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{for(let t of(this._requests.shift().resolve({value:e,done:!1}),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}}function cr(e,t){let i=new Headers;if(!e||!t||"object"!=typeof t)return i;for(let e in t){let n=t[e];void 0!==n&&i.append(e,n)}return i}function ca(e){try{return new URL(e).origin}catch(e){}return null}function cs(e){let{responseHeaders:t,isHttp:i,rangeChunkSize:n,disableRange:r}=e,a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return Number.isInteger(s)&&(a.suggestedLength=s,s<=2*n||r||!i||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0)),a}function cl(e){let t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,i=n("filename\\*","i").exec(e);if(i){let e=s(i=i[1]);return a(e=o(e=l(e=unescape(e))))}if(i=function(e){let t,i=[],r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=r.exec(e));){let[,e,n,r]=t;if((e=parseInt(e,10))in i){if(0===e)break;continue}i[e]=[n,r]}let a=[];for(let e=0;e<i.length&&e in i;++e){let[t,n]=i[e];n=s(n),t&&(n=unescape(n),0===e&&(n=l(n))),a.push(n)}return a.join("")}(e))return a(o(i));if(i=n("filename","i").exec(e)){let e=s(i=i[1]);return a(e=o(e))}function n(e,t){return RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{let n=new TextDecoder(e,{fatal:!0}),r=rc(i);i=n.decode(r),t=!1}catch(e){}}return i}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){let t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){let i=t[e].indexOf('"');-1!==i&&(t[e]=t[e].slice(0,i),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){let t=e.indexOf("'");return -1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function o(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,i,n){if("q"===i||"Q"===i)return r(t,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{n=atob(n)}catch(e){}return r(t,n)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(rM(e))return e}return null}function co(e,t){return 404===e||0===e&&t.startsWith("file:")?new ra('Missing PDF "'+t+'".'):new rs("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function ch(e){return 200===e||206===e}function cc(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function cu(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(n6("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class cd{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return n8(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new cp(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new cf(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){(0,nW._)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=cr(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class cp{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:cu(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let i=new Headers(e.headers),n=t.url;fetch(n,cc(i,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=ca(t.url),!ch(t.status))throw co(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();let i=t.headers,{allowRangeRequests:r,suggestedLength:a}=cs({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=cl(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ro("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}}class cf{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:cu(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;let n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(i-1));let a=n.url;fetch(a,cc(r,this._withCredentials,this._abortController)).then(t=>{let i=ca(t.url);if(i!==e._responseOrigin)throw Error('Expected range response-origin "'.concat(i,'" to match "').concat(e._responseOrigin,'".'));if(!ch(t.status))throw co(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}}class cg{request(e){let t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};for(let[e,i]of(t.open("GET",this.url),t.withCredentials=this.withCredentials,this.headers))t.setRequestHeader(e,i);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),n.expectedStatus=206):n.expectedStatus=200,t.responseType="arraybuffer",n8(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var i;let n=this.pendingRequests[e];n&&(null==(i=n.onProgress)||i.call(n,t))}onStateChange(e,t){let i=this.pendingRequests[e];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===n.status&&this.isHttp)return void i.onError(n.status);let r=n.status||200;if((200!==r||206!==i.expectedStatus)&&r!==i.expectedStatus)return void i.onError(n.status);let a=function(e){let t=e.response;return"string"!=typeof t?t:rc(t).buffer}(n);if(206===r){let e=n.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?i.onDone({begin:parseInt(t[1],10),chunk:a}):(n6('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}constructor({url:e,httpHeaders:t,withCredentials:i}){(0,nW._)(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=cr(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}}class cm{_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return n8(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cv(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let i=new cb(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this._source=e,this._manager=new cg(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}}class cv{_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ca(t.responseURL);let i=t.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{let[t,...i]=e.split(": ");return[t,i.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=cs({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=cl(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){for(let t of(this._storedError=co(e,this._url),this._headersCapability.reject(this._storedError),this._requests))t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let t of(this._done=!0,this._headersCapability.reject(e),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}}class cb{_onHeadersReceived(){var e;let t=ca(null==(e=this._manager.getRequestXhr(this._requestId))?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){let t=e.chunk;for(let e of(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){for(let t of(null!=this._storedError||(this._storedError=co(e,this._url)),this._requests))t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){if(!this.isStreamingSupported){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}}let cw=/^[a-z][a-z0-9\-+.]+:/i;class cy{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return n8(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new cx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new cA(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this.source=e,this.url=function(e){return new URL(cw.test(e)?e:i7.default.getBuiltinModule("url").pathToFileURL(e))}(e.url),n8("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class cx{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ro("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=i7.default.getBuiltinModule("fs");i.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new ra('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)})}}class cA{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let n=e.source;this._isStreamingSupported=!n.disableStream;let r=i7.default.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}var ck=new WeakMap,c_=new WeakMap,cS=new WeakMap,cE=new WeakMap,cM=new WeakMap,cC=new WeakMap,cT=new WeakMap,cP=new WeakMap,cR=new WeakMap,cI=new WeakMap,cL=new WeakMap,cD=new WeakMap,cF=new WeakMap,cN=new WeakMap,cO=new WeakMap,cW=new WeakMap,cj=new WeakMap,cB=new WeakMap,cz=new WeakSet,cH=new WeakSet,cU=new WeakSet;class cG{static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=rd.platform;return re(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){let e=()=>{n_(this,cR).read().then(t=>{var i;let{value:n,done:r}=t;if(r)return void n_(this,ck).resolve();nC(this,cM,null!=(i=n_(this,cM))?i:n.lang),Object.assign(n_(this,cF),n.styles),nR(this,cz,cQ).call(this,n.items),e()},n_(this,ck).reject)};return nC(this,cR,n_(this,cO).getReader()),nF(cG,cG,cY).add(this),e(),n_(this,ck).promise}update(e){let{viewport:t,onBefore:i=null}=e,n=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==n_(this,cL)&&(null==i||i(),nC(this,cL,r),rB(n_(this,cI),{rotation:r})),n!==n_(this,cD)){null==i||i(),nC(this,cD,n);let e={div:null,properties:null,ctx:(nL(cG,cG),c$).call(cG,n_(this,cM))};for(let t of n_(this,cW))e.properties=n_(this,cj).get(t),e.div=t,nR(this,cU,cZ).call(this,e)}}cancel(){var e;let t=new ro("TextLayer task cancelled.");null==(e=n_(this,cR))||e.cancel(t).catch(()=>{}),nC(this,cR,null),n_(this,ck).reject(t)}get textDivs(){return n_(this,cW)}get textContentItemsStr(){return n_(this,cN)}static cleanup(){if(!(nF(this,cG,cY).size>0)){for(let{canvas:e}of(nF(this,cG,cV).clear(),nF(this,cG,cq).values()))e.remove();nF(this,cG,cq).clear()}}constructor({textContentSource:e,container:t,viewport:i}){var n;if(nI(this,cz),nI(this,cH),nI(this,cU),nE(this,ck,{writable:!0,value:Promise.withResolvers()}),nE(this,c_,{writable:!0,value:null}),nE(this,cS,{writable:!0,value:!1}),nE(this,cE,{writable:!0,value:!!(null==(n=globalThis.FontInspector)?void 0:n.enabled)}),nE(this,cM,{writable:!0,value:null}),nE(this,cC,{writable:!0,value:null}),nE(this,cT,{writable:!0,value:0}),nE(this,cP,{writable:!0,value:0}),nE(this,cR,{writable:!0,value:null}),nE(this,cI,{writable:!0,value:null}),nE(this,cL,{writable:!0,value:0}),nE(this,cD,{writable:!0,value:0}),nE(this,cF,{writable:!0,value:Object.create(null)}),nE(this,cN,{writable:!0,value:[]}),nE(this,cO,{writable:!0,value:null}),nE(this,cW,{writable:!0,value:[]}),nE(this,cj,{writable:!0,value:new WeakMap}),nE(this,cB,{writable:!0,value:null}),e instanceof ReadableStream)nC(this,cO,e);else if("object"==typeof e)nC(this,cO,new ReadableStream({start(t){t.enqueue(e),t.close()}}));else throw Error('No "textContentSource" parameter specified.');nC(this,c_,nC(this,cI,t)),nC(this,cD,i.scale*(globalThis.devicePixelRatio||1)),nC(this,cL,i.rotation),nC(this,cC,{div:null,properties:null,ctx:null});let{pageWidth:r,pageHeight:a,pageX:s,pageY:l}=i.rawDims;nC(this,cB,[1,0,0,-1,-s,l+a]),nC(this,cP,r),nC(this,cT,a),(nL(cG,cG),c1).call(cG),rB(t,i),n_(this,ck).promise.finally(()=>{nF(cG,cG,cY).delete(this),nC(this,cC,null),nC(this,cF,null)}).catch(()=>{})}}var cV={writable:!0,value:new Map},cq={writable:!0,value:new Map},cX={writable:!0,value:new WeakMap},cK={writable:!0,value:null},cY={writable:!0,value:new Set};function cQ(e){var t;if(n_(this,cS))return;null!=(t=n_(this,cC)).ctx||(t.ctx=(nL(cG,cG),c$).call(cG,n_(this,cM)));let i=n_(this,cW),n=n_(this,cN);for(let t of e){if(i.length>1e5){n6("Ignoring additional textDivs for performance reasons."),nC(this,cS,!0);return}if(void 0===t.str){if("beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type){let e=n_(this,c_);nC(this,c_,document.createElement("span")),n_(this,c_).classList.add("markedContent"),null!==t.id&&n_(this,c_).setAttribute("id","".concat(t.id)),e.append(n_(this,c_))}else"endMarkedContent"===t.type&&nC(this,c_,n_(this,c_).parentNode);continue}n.push(t.str),nR(this,cH,cJ).call(this,t)}}function cJ(e){let t,i,n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};n_(this,cW).push(n);let a=rf.transform(n_(this,cB),e.transform),s=Math.atan2(a[1],a[0]),l=n_(this,cF)[e.fontName];l.vertical&&(s+=Math.PI/2);let o=n_(this,cE)&&l.fontSubstitution||l.fontFamily;o=cG.fontFamilyMap.get(o)||o;let h=Math.hypot(a[2],a[3]),c=h*(nL(cG,cG),c2).call(cG,o,n_(this,cM));0===s?(t=a[4],i=a[5]-c):(t=a[4]+c*Math.sin(s),i=a[5]-c*Math.cos(s));let u="calc(var(--scale-factor)*",d=n.style;n_(this,c_)===n_(this,cI)?(d.left="".concat((100*t/n_(this,cP)).toFixed(2),"%"),d.top="".concat((100*i/n_(this,cT)).toFixed(2),"%")):(d.left="".concat(u).concat(t.toFixed(2),"px)"),d.top="".concat(u).concat(i.toFixed(2),"px)")),d.fontSize="".concat(u).concat((nF(cG,cG,cK)*h).toFixed(2),"px)"),d.fontFamily=o,r.fontSize=h,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,n_(this,cE)&&(n.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),0!==s&&(r.angle=180/Math.PI*s);let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(p=!0)}if(p&&(r.canvasWidth=l.vertical?e.height:e.width),n_(this,cj).set(n,r),n_(this,cC).div=n,n_(this,cC).properties=r,nR(this,cU,cZ).call(this,n_(this,cC)),r.hasText&&n_(this,c_).append(n),r.hasEOL){let e=document.createElement("br");e.setAttribute("role","presentation"),n_(this,c_).append(e)}}function cZ(e){let{div:t,properties:i,ctx:n}=e,{style:r}=t,a="";if(nF(cG,cG,cK)>1&&(a="scale(".concat(1/nF(cG,cG,cK),")")),0!==i.canvasWidth&&i.hasText){let{fontFamily:e}=r,{canvasWidth:s,fontSize:l}=i;(nL(cG,cG),c0).call(cG,n,l*n_(this,cD),e);let{width:o}=n.measureText(t.textContent);o>0&&(a="scaleX(".concat(s*n_(this,cD)/o,") ").concat(a))}0!==i.angle&&(a="rotate(".concat(i.angle,"deg) ").concat(a)),a.length>0&&(r.transform=a)}function c$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=nF(this,cG,cq).get(e||(e=""));if(!t){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),nF(this,cG,cq).set(e,t),nF(this,cG,cX).set(t,{size:0,family:""})}return t}function c0(e,t,i){let n=nF(this,cG,cX).get(e);(t!==n.size||i!==n.family)&&(e.font="".concat(t,"px ").concat(i),n.size=t,n.family=i)}function c1(){if(null!==nF(this,cG,cK))return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),nN(this,cG,cK,e.getBoundingClientRect().height),e.remove()}function c2(e,t){let i=nF(this,cG,cV).get(e);if(i)return i;let n=(nL(this,cG),c$).call(cG,t);n.canvas.width=n.canvas.height=30,(nL(this,cG),c0).call(cG,n,30,e);let r=n.measureText(""),a=r.fontBoundingBoxAscent,s=Math.abs(r.fontBoundingBoxDescent);if(a){let t=a/(a+s);return nF(this,cG,cV).set(e,t),n.canvas.width=n.canvas.height=0,t}n.strokeStyle="red",n.clearRect(0,0,30,30),n.strokeText("g",0,0);let l=n.getImageData(0,0,30,30).data;s=0;for(let e=l.length-1-3;e>=0;e-=4)if(l[e]>0){s=Math.ceil(e/4/30);break}n.clearRect(0,0,30,30),n.strokeText("A",0,30),l=n.getImageData(0,0,30,30).data,a=0;for(let e=0,t=l.length;e<t;e+=4)if(l[e]>0){a=30-Math.floor(e/4/30);break}n.canvas.width=n.canvas.height=0;let o=a?a/(a+s):.8;return nF(this,cG,cV).set(e,o),o}class c3{static textContent(e){let t=[],i={items:t,styles:Object.create(null)};return!function e(i){var n;if(!i)return;let r=null,a=i.name;if("#text"===a)r=i.value;else{if(!c3.shouldBuildText(a))return;(null==i||null==(n=i.attributes)?void 0:n.textContent)?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&t.push({str:r}),i.children)for(let t of i.children)e(t)}(e),i}static shouldBuildText(e){return"textarea"!==e&&"input"!==e&&"option"!==e&&"select"!==e}}let c4=nU?class extends oG{_createCanvas(e,t){return i7.default.getBuiltinModule("module").createRequire(nB.url)("@napi-rs/canvas").createCanvas(e,t)}}:class extends oG{_createCanvas(e,t){let i=this._document.createElement("canvas");return i.width=e,i.height=t,i}constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}},c5=nU?class extends oV{async _fetch(e){return hv(e)}}:oq,c6=nU?class extends oX{}:class extends oX{addFilter(e){if(!e)return"none";let t=n_(this,o1).get(e);if(t)return t;let[i,n,r]=nR(this,o4,hs).call(this,e),a=1===e.length?i:"".concat(i).concat(n).concat(r);if(t=n_(this,o1).get(a))return n_(this,o1).set(e,t),t;let s="g_".concat(n_(this,oJ),"_transfer_map_").concat(nP(this,o0).value++),l=nR(this,o5,hl).call(this,s);n_(this,o1).set(e,l),n_(this,o1).set(a,l);let o=nR(this,o8,hc).call(this,s);return nR(this,he,hd).call(this,i,n,r,o),l}addHCMFilter(e,t){let i="".concat(e,"-").concat(t),n="base",r=n_(this,o2).get(n);if((null==r?void 0:r.key)===i)return r.url;if(r){var a;null==(a=r.filter)||a.remove(),r.key=i,r.url="none",r.filter=null}else r={key:i,url:"none",filter:null},n_(this,o2).set(n,r);if(!e||!t)return r.url;let s=nR(this,hi,hf).call(this,e);e=rf.makeHexColor(...s);let l=nR(this,hi,hf).call(this,t);if(t=rf.makeHexColor(...l),n_(this,o3).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;let o=Array(256);for(let e=0;e<=255;e++){let t=e/255;o[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let h=o.join(","),c="g_".concat(n_(this,oJ),"_hcm_filter"),u=r.filter=nR(this,o8,hc).call(this,c);nR(this,he,hd).call(this,h,h,h,u),nR(this,o9,hh).call(this,u);let d=(e,t)=>{let i=s[e]/255,n=l[e]/255,r=Array(t+1);for(let e=0;e<=t;e++)r[e]=i+e/t*(n-i);return r.join(",")};return nR(this,he,hd).call(this,d(0,5),d(1,5),d(2,5),u),r.url=nR(this,o5,hl).call(this,c),r.url}addAlphaFilter(e){let t=n_(this,o1).get(e);if(t)return t;let[i]=nR(this,o4,hs).call(this,[e]),n="alpha_".concat(i);if(t=n_(this,o1).get(n))return n_(this,o1).set(e,t),t;let r="g_".concat(n_(this,oJ),"_alpha_map_").concat(nP(this,o0).value++),a=nR(this,o5,hl).call(this,r);n_(this,o1).set(e,a),n_(this,o1).set(n,a);let s=nR(this,o8,hc).call(this,r);return nR(this,ht,hp).call(this,i,s),a}addLuminosityFilter(e){let t,i,n=n_(this,o1).get(e||"luminosity");if(n)return n;if(e?([t]=nR(this,o4,hs).call(this,[e]),i="luminosity_".concat(t)):i="luminosity",n=n_(this,o1).get(i))return n_(this,o1).set(e,n),n;let r="g_".concat(n_(this,oJ),"_luminosity_map_").concat(nP(this,o0).value++),a=nR(this,o5,hl).call(this,r);n_(this,o1).set(e,a),n_(this,o1).set(i,a);let s=nR(this,o8,hc).call(this,r);return nR(this,o6,ho).call(this,s),e&&nR(this,ht,hp).call(this,t,s),a}addHighlightHCMFilter(e,t,i,n,r){let a="".concat(t,"-").concat(i,"-").concat(n,"-").concat(r),s=n_(this,o2).get(e);if((null==s?void 0:s.key)===a)return s.url;if(s){var l;null==(l=s.filter)||l.remove(),s.key=a,s.url="none",s.filter=null}else s={key:a,url:"none",filter:null},n_(this,o2).set(e,s);if(!t||!i)return s.url;let[o,h]=[t,i].map(nR(this,hi,hf).bind(this)),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,p]=[n,r].map(nR(this,hi,hf).bind(this));u<c&&([c,u,d,p]=[u,c,p,d]),n_(this,o3).style.color="";let f=(e,t,i)=>{let n=Array(256),r=(u-c)/i,a=e/255,s=(t-e)/(255*i),l=0;for(let e=0;e<=i;e++){let t=Math.round(c+e*r),i=a+e*s;for(let e=l;e<=t;e++)n[e]=i;l=t+1}for(let e=l;e<256;e++)n[e]=n[l-1];return n.join(",")},g="g_".concat(n_(this,oJ),"_hcm_").concat(e,"_filter"),m=s.filter=nR(this,o8,hc).call(this,g);return nR(this,o9,hh).call(this,m),nR(this,he,hd).call(this,f(d[0],p[0],5),f(d[1],p[1],5),f(d[2],p[2],5),m),s.url=nR(this,o5,hl).call(this,g),s.url}destroy(){var e,t,i,n;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r&&null!=(e=n_(this,o$))&&e.size||(null==(t=n_(this,oQ))||t.parentNode.parentNode.remove(),nC(this,oQ,null),null==(i=n_(this,oY))||i.clear(),nC(this,oY,null),null==(n=n_(this,o$))||n.clear(),nC(this,o$,null),nC(this,o0,0))}constructor({docId:e,ownerDocument:t=globalThis.document}){super(),nE(this,o1,{get:hn,set:void 0}),nE(this,o2,{get:hr,set:void 0}),nE(this,o3,{get:ha,set:void 0}),nI(this,o4),nI(this,o5),nI(this,o6),nI(this,o9),nI(this,o8),nI(this,o7),nI(this,he),nI(this,ht),nI(this,hi),nE(this,oK,{writable:!0,value:void 0}),nE(this,oY,{writable:!0,value:void 0}),nE(this,oQ,{writable:!0,value:void 0}),nE(this,oJ,{writable:!0,value:void 0}),nE(this,oZ,{writable:!0,value:void 0}),nE(this,o$,{writable:!0,value:void 0}),nE(this,o0,{writable:!0,value:0}),nC(this,oJ,e),nC(this,oZ,t)}},c9=nU?class extends hg{async _fetch(e){return hv(e)}}:hm;function c8(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof i||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let n=new ue,{docId:r}=n,a=i.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(nU&&"string"==typeof e)return e}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(i.url):null,s=i.data?function(e){if(nU&&void 0!==nx.Buffer&&e instanceof nx.Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return rc(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(i.data):null,l=i.httpHeaders||null,o=!0===i.withCredentials,h=null!=(e=i.password)?e:null,c=i.range instanceof ui?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:65536,d=i.worker instanceof ug?i.worker:null,p=i.verbosity,f="string"!=typeof i.docBaseUrl||rE(i.docBaseUrl)?null:i.docBaseUrl,g="string"==typeof i.cMapUrl?i.cMapUrl:null,m=!1!==i.cMapPacked,b=i.CMapReaderFactory||c5,w="string"==typeof i.standardFontDataUrl?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||c9,x=!0!==i.stopAtErrors,A=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=!1!==i.isEvalSupported,_="boolean"==typeof i.isOffscreenCanvasSupported?i.isOffscreenCanvasSupported:!nU,S="boolean"==typeof i.isImageDecoderSupported?i.isImageDecoderSupported:!nU&&(rd.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M="boolean"==typeof i.disableFontFace?i.disableFontFace:nU,C=!0===i.fontExtraProperties,T=!0===i.enableXfa,P=i.ownerDocument||globalThis.document,R=!0===i.disableRange,I=!0===i.disableStream,L=!0===i.disableAutoFetch,D=!0===i.pdfBug,F=i.CanvasFactory||c4,N=i.FilterFactory||c6,O=!0===i.enableHWA,W=c?c.length:null!=(t=i.length)?t:NaN,j="boolean"==typeof i.useSystemFonts?i.useSystemFonts:!nU&&!M,B="boolean"==typeof i.useWorkerFetch?i.useWorkerFetch:b===oq&&y===hm&&g&&w&&rR(g,document.baseURI)&&rR(w,document.baseURI);Number.isInteger(p)&&(n4=p);let z={canvasFactory:new F({ownerDocument:P,enableHWA:O}),filterFactory:new N({docId:r,ownerDocument:P}),cMapReaderFactory:B?null:new b({baseUrl:g,isCompressed:m}),standardFontDataFactory:B?null:new y({baseUrl:w})};if(!d){let e={verbosity:p,port:hq.workerPort};n._worker=d=e.port?ug.fromPort(e):new ug(e)}let H={docId:r,apiVersion:"4.10.38",data:s,password:h,disableAutoFetch:L,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:T,evaluatorOptions:{maxImageSize:A,disableFontFace:M,ignoreErrors:x,isEvalSupported:k,isOffscreenCanvasSupported:_,isImageDecoderSupported:S,canvasMaxAreaInBytes:E,fontExtraProperties:C,useSystemFonts:j,cMapUrl:B?g:null,standardFontDataUrl:B?w:null}},U={disableFontFace:M,fontExtraProperties:C,ownerDocument:P,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:L,enableXfa:T}};return d.promise.then(function(){let e;if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let t=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);if(c)e=new ct(c,{disableRange:R,disableStream:I});else if(!s){let t;if(!a)throw Error("getDocument - no `url` parameter provided.");if(nU)if(rR(a)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");t=cd}else t=cy;else t=rR(a)?cd:cm;e=new t({url:a,length:W,httpHeaders:l,withCredentials:o,rangeChunkSize:u,disableRange:R,disableStream:I})}return t.then(t=>{if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let i=new oW(r,t,d.port),a=new uM(i,n,e,U,z);n._transport=a,i.send("Ready",null)})}).catch(n._capability.reject),n}function c7(e){return"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0}class ue{get promise(){return this._capability.promise}async destroy(){var e,t,i,n;this.destroyed=!0;try{(null==(t=this._worker)?void 0:t.port)&&(this._worker._pendingDestroy=!0),await (null==(i=this._transport)?void 0:i.destroy())}catch(e){throw(null==(n=this._worker)?void 0:n.port)&&delete this._worker._pendingDestroy,e}this._transport=null,null==(e=this._worker)||e.destroy(),this._worker=null}constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat(nO(ue,ue,ut).value++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}}var ut={writable:!0,value:0};class ui{addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){n9("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}}class un{get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return re(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}constructor(e,t){this._pdfInfo=e,this._transport=t}}var ur=new WeakMap,ua=new WeakMap,us=new WeakSet,ul=new WeakSet;class uo{get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r_({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return re(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render(e){var t,i,n;let{canvasContext:r,viewport:a,intent:s="display",annotationMode:l=nX.ENABLE,transform:o=null,background:h=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:p=null,isEditing:f=!1}=e;null==(t=this._stats)||t.time("Overall");let g=this._transport.getRenderingIntent(s,l,p,f),{renderingIntent:m,cacheKey:b}=g;nC(this,ua,!1),nR(this,ul,uc).call(this),c||(c=this._transport.getOptionalContentConfig(m));let w=this._intentStates.get(b);w||(w=Object.create(null),this._intentStates.set(b,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);let y=!!(m&nq.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(n=this._stats)||n.time("Page Request"),this._pumpOperatorList(g));let x=e=>{if(w.renderTasks.delete(A),(this._maybeCleanupAfterRender||y)&&nC(this,ua,!0),nR(this,us,uh).call(this,!y),e?(A.capability.reject(e),this._abortOperatorList({intentState:w,reason:e instanceof Error?e:Error(e)})):A.capability.resolve(),this._stats){var t;this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(t=globalThis.Stats)?void 0:t.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats)}},A=new uO({callback:x,params:{canvasContext:r,viewport:a,transform:o,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d});((i=w).renderTasks||(i.renderTasks=new Set)).add(A);let k=A.task;return Promise.all([w.displayReadyCapability.promise,c]).then(e=>{var t;let[i,n]=e;if(this.destroyed)return void x();if(null==(t=this._stats)||t.time("Rendering"),!(n.renderingIntent&m))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:i,optionalContentConfig:n}),A.operatorListChanged()}).catch(x),k}getOperatorList(){let e,{intent:t="display",annotationMode:i=nX.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this._transport.getRenderingIntent(t,i,n,r,!0),s=this._intentStates.get(a.cacheKey);if(s||(s=Object.create(null),this._intentStates.set(a.cacheKey,s)),!s.opListReadCapability){var l,o;(e=Object.create(null)).operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(e))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(e),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(l=this._stats)||l.time("Page Request"),this._pumpOperatorList(a)}return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>c3.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,i){let n=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){n.read().then(function(i){let{value:n,done:a}=i;if(a)return void e(r);null!=r.lang||(r.lang=n.lang),Object.assign(r.styles,n.styles),r.items.push(...n.items),t()},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),nC(this,ua,!1),nR(this,ul,uc).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nC(this,ua,!0);let t=nR(this,us,uh).call(this,!1);return e&&t&&this._stats&&(this._stats=new rP),t}_startRenderPage(e,t){var i,n;let r=this._intentStates.get(t);r&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(n=r.displayReadyCapability)||n.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);for(let i of(t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots,t.renderTasks))i.operatorListChanged();e.lastChunk&&nR(this,us,uh).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:r}=e,{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:a,modifiedIds:r},s).getReader(),o=this._intentStates.get(i);o.streamReader=l;let h=()=>{l.read().then(e=>{let{value:t,done:i}=e;if(i){o.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,o),h())},e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){for(let e of(o.operatorList.lastChunk=!0,o.renderTasks))e.operatorListChanged();nR(this,us,uh).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else if(o.opListReadCapability)o.opListReadCapability.reject(e);else throw e}})};h()}_abortOperatorList(e){let{intentState:t,reason:i,force:n=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof rS){let e=100;i.extraDelay>0&&i.extraDelay<1e3&&(e+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},e);return}}if(t.streamReader.cancel(new ro(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}constructor(e,t,i,n=!1){nI(this,us),nI(this,ul),nE(this,ur,{writable:!0,value:null}),nE(this,ua,{writable:!0,value:!1}),this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new rP:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new uI,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}}function uh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(nR(this,ul,uc).call(this),!n_(this,ua)||this.destroyed)return!1;if(e)return nC(this,ur,setTimeout(()=>{nC(this,ur,null),nR(this,us,uh).call(this,!1)},5e3)),!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),nC(this,ua,!1),!0}function uc(){n_(this,ur)&&(clearTimeout(n_(this,ur)),nC(this,ur,null))}var uu=new WeakMap,ud=new WeakMap;class up{postMessage(e,t){let i={data:structuredClone(e,t?{transfer:t}:null)};n_(this,ud).then(()=>{for(let[e]of n_(this,uu))e.call(this,i)})}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;if((null==i?void 0:i.signal)instanceof AbortSignal){let{signal:r}=i;if(r.aborted)return void n6("LoopbackPort - cannot use an `aborted` signal.");let a=()=>this.removeEventListener(e,t);n=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}n_(this,uu).set(t,n)}removeEventListener(e,t){let i=n_(this,uu).get(t);null==i||i(),n_(this,uu).delete(t)}terminate(){for(let[,e]of n_(this,uu))null==e||e();n_(this,uu).clear()}constructor(){nE(this,uu,{writable:!0,value:new Map}),nE(this,ud,{writable:!0,value:Promise.resolve()})}}var uf=new WeakSet;class ug{get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new oW("main","worker",e),this._messageHandler.on("ready",function(){}),nR(this,uf,uy).call(this)}_initialize(){if(nF(ug,ug,ub)||nF(ug,ug,um))return void this._setupFakeWorker();let{workerSrc:e}=ug;try{ug._isSameOrigin(window.location.href,e)||(e=ug._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),i=new oW("main","worker",t),n=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",e=>{if(r.abort(),this.destroyed||!e)return void n();this._messageHandler=i,this._port=t,this._webWorker=t,nR(this,uf,uy).call(this)}),i.on("ready",e=>{if(r.abort(),this.destroyed)return void n();try{a()}catch(e){this._setupFakeWorker()}});let a=()=>{let e=new Uint8Array;i.send("test",e,[e.buffer])};a();return}catch(e){n5("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){nF(ug,ug,ub)||(n6("Setting up fake worker."),nN(ug,ug,ub,!0)),ug._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let t=new up;this._port=t;let i="fake".concat(nO(ug,ug,uv).value++),n=new oW(i+"_worker",i,t);e.setup(n,t),this._messageHandler=new oW(i,i+"_worker",t),nR(this,uf,uy).call(this)}).catch(e=>{this._readyCapability.reject(Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}destroy(){var e,t,i;this.destroyed=!0,null==(e=this._webWorker)||e.terminate(),this._webWorker=null,null==(t=nF(ug,ug,uw))||t.delete(this._port),this._port=null,null==(i=this._messageHandler)||i.destroy(),this._messageHandler=null}static fromPort(e){var t;if(!(null==e?void 0:e.port))throw Error("PDFWorker.fromPort - invalid method signature.");let i=null==(t=nF(this,ug,uw))?void 0:t.get(e.port);if(i){if(i._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new ug(e)}static get workerSrc(){if(hq.workerSrc)return hq.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return re(this,"_setupFakeWorkerGlobal",(async()=>nF(this,ug,um)?nF(this,ug,um):(await import(this.workerSrc)).WorkerMessageHandler)())}constructor({name:e=null,port:t=null,verbosity:i=n4}={}){if(nI(this,uf),this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var n;if(null==(n=nF(ug,ug,uw))?void 0:n.has(t))throw Error("Cannot use more than one PDFWorker per port.");nN(ug,ug,uw,nF(ug,ug,uw)||new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}}var um={get:function(){try{var e;return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(e){return null}},set:void 0},uv={writable:!0,value:0},ub={writable:!0,value:!1},uw={writable:!0,value:void 0};function uy(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}nU&&(nN(ug,ug,ub,!0),hq.workerSrc||(hq.workerSrc="./pdf.worker.mjs")),ug._isSameOrigin=(e,t)=>{let i;try{if(!(i=new URL(e)).origin||"null"===i.origin)return!1}catch(e){return!1}let n=new URL(t,i);return i.origin===n.origin},ug._createCDNWrapper=e=>URL.createObjectURL(new Blob(['await import("'.concat(e,'");')],{type:"text/javascript"}));var ux=new WeakMap,uA=new WeakMap,uk=new WeakMap,u_=new WeakMap,uS=new WeakMap,uE=new WeakSet;class uM{get annotationStorage(){return re(this,"annotationStorage",new oA)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nX.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=nq.DISPLAY,s=ov;switch(e){case"any":a=nq.ANY;break;case"display":break;case"print":a=nq.PRINT;break;default:n6("getRenderingIntent - invalid intent: ".concat(e))}let l=a&nq.PRINT&&i instanceof oS?i:this.annotationStorage;switch(t){case nX.DISABLE:a+=nq.ANNOTATIONS_DISABLE;break;case nX.ENABLE:break;case nX.ENABLE_FORMS:a+=nq.ANNOTATIONS_FORMS;break;case nX.ENABLE_STORAGE:a+=nq.ANNOTATIONS_STORAGE,s=l.serializable;break;default:n6("getRenderingIntent - invalid annotationMode: ".concat(t))}n&&(a+=nq.IS_EDITING),r&&(a+=nq.OPLIST);let{ids:o,hash:h}=l.modifiedIds,c=[a,s.hash,h];return{renderingIntent:a,cacheKey:c.join("_"),annotationStorageSerializable:s,modifiedIds:o}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=n_(this,uS))||e.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of n_(this,uA).values())t.push(e._destroy());n_(this,uA).clear(),n_(this,uk).clear(),n_(this,u_).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),n_(this,ux).clear(),this.filterFactory.destroy(),cG.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new ro("Worker was terminated.")),null==(t=this.messageHandler)||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{n8(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();n8(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:n,contentLength:r}=this._fullReader;if(!i||!n){if(this._lastProgress){var a;null==(a=t.onProgress)||a.call(t,this._lastProgress)}this._fullReader.onProgress=e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:i,isRangeSupported:n,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{n8(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let i=this._networkStream.getRangeReader(e.begin,e.end);if(!i)return void t.close();t.onPull=()=>{i.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();n8(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{i.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("GetDoc",e=>{let{pdfInfo:i}=e;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new un(i,this))}),e.on("DocException",e=>{t._capability.reject(oI(e))}),e.on("PasswordRequest",e=>{nC(this,uS,Promise.withResolvers());try{if(!t.onPassword)throw oI(e);let i=e=>{e instanceof Error?n_(this,uS).reject(e):n_(this,uS).resolve({password:e})};t.onPassword(i,e.code)}catch(e){n_(this,uS).reject(e)}return n_(this,uS).promise}),e.on("DataLoaded",e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||n_(this,uA).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{let[i,n,r]=t;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":var a;let{disableFontFace:s,fontExtraProperties:l,pdfBug:o}=this._params;if("error"in r){let e=r.error;n6("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}let h=new oC(r,{disableFontFace:s,fontExtraProperties:l,inspectFont:o&&(null==(a=globalThis.FontInspector)?void 0:a.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":let{imageRef:c}=r;for(let e of(n8(c,"The imageRef must be defined."),n_(this,uA).values()))for(let[,t]of e.objs)if((null==t?void 0:t.ref)===c){if(!t.dataLen)return null;return this.commonObjs.resolve(i,structuredClone(t)),t.dataLen}break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw Error("Got unknown common object type ".concat(n))}return null}),e.on("obj",e=>{let[t,i,n,r]=e;if(this.destroyed)return;let a=n_(this,uA).get(i);if(!a.objs.has(t)){if(0===a._intentStates.size){var s;null==r||null==(s=r.bitmap)||s.close();return}switch(n){case"Image":a.objs.resolve(t,r),(null==r?void 0:r.dataLen)>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(t,r);break;default:throw Error("Got unknown object type ".concat(n))}}}),e.on("DocProgress",e=>{var i;this.destroyed||null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)}),e.on("FetchStandardFontData",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&n6("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:i,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:i,filename:null!=(t=null==(e=this._fullReader)?void 0:e.filename)?t:null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error("Invalid page request."));let t=e-1,i=n_(this,uk).get(t);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw Error("Transport destroyed");i.refStr&&n_(this,u_).set(i.refStr,e);let n=new uo(t,i,this,this._params.pdfBug);return n_(this,uA).set(t,n),n});return n_(this,uk).set(t,n),n}getPageIndex(e){return c7(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return nR(this,uE,uC).call(this,"GetFieldObjects")}hasJSActions(){return nR(this,uE,uC).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return nR(this,uE,uC).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return nR(this,uE,uC).call(this,"GetOptionalContentConfig").then(t=>new h7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=n_(this,ux).get(e);if(t)return t;let i=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,i,n,r;return{info:e[0],metadata:e[1]?new hJ(e[1]):null,contentDispositionFilename:null!=(n=null==(t=this._fullReader)?void 0:t.filename)?n:null,contentLength:null!=(r=null==(i=this._fullReader)?void 0:i.contentLength)?r:null}});return n_(this,ux).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){for(let e of(await this.messageHandler.sendWithPromise("Cleanup",null),n_(this,uA).values()))if(!e.cleanup())throw Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),n_(this,ux).clear(),this.filterFactory.destroy(!0),cG.cleanup()}}cachedPageNumber(e){var t;if(!c7(e))return null;let i=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!=(t=n_(this,u_).get(i))?t:null}constructor(e,t,i,n,r){nI(this,uE),nE(this,ux,{writable:!0,value:new Map}),nE(this,uA,{writable:!0,value:new Map}),nE(this,uk,{writable:!0,value:new Map}),nE(this,u_,{writable:!0,value:new Map}),nE(this,uS,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new uI,this.fontLoader=new oM({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}}function uC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=n_(this,ux).get(e);if(i)return i;let n=this.messageHandler.sendWithPromise(e,t);return n_(this,ux).set(e,n),n}let uT=Symbol("INITIAL_DATA");var uP=new WeakMap,uR=new WeakSet;class uI{get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){let i=nR(this,uR,uL).call(this,e);return i.promise.then(()=>t(i.data)),null}let i=n_(this,uP)[e];if(!i||i.data===uT)throw Error("Requesting object that isn't resolved yet ".concat(e,"."));return i.data}has(e){let t=n_(this,uP)[e];return!!t&&t.data!==uT}delete(e){let t=n_(this,uP)[e];return!!t&&t.data!==uT&&(delete n_(this,uP)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=nR(this,uR,uL).call(this,e);i.data=t,i.resolve()}clear(){for(let t in n_(this,uP)){var e;let{data:i}=n_(this,uP)[t];null==i||null==(e=i.bitmap)||e.close()}nC(this,uP,Object.create(null))}*[Symbol.iterator](){for(let e in n_(this,uP)){let{data:t}=n_(this,uP)[e];t!==uT&&(yield[e,t])}}constructor(){nI(this,uR),nE(this,uP,{writable:!0,value:Object.create(null)})}}function uL(e){var t;return(t=n_(this,uP))[e]||(t[e]={...Promise.withResolvers(),data:uT})}var uD=new WeakMap;class uF{get promise(){return n_(this,uD).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n_(this,uD).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=n_(this,uD).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=n_(this,uD);return e.form||e.canvas&&(null==t?void 0:t.size)>0}constructor(e){nE(this,uD,{writable:!0,value:null}),nC(this,uD,e),this.onContinue=null}}var uN=new WeakMap;class uO{get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,i;let{transparency:n=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(nF(uO,uO,uW).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");nF(uO,uO,uW).add(this._canvas)}this._pdfBug&&(null==(t=globalThis.StepperManager)?void 0:t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:a,viewport:s,transform:l,background:o}=this.params;this.gfx=new hH(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:s,transparency:n,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null==(i=this.graphicsReadyCallback)||i.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null==(e=this.gfx)||e.endDrawing(),n_(this,uN)&&(window.cancelAnimationFrame(n_(this,uN)),nC(this,uN,null)),nF(uO,uO,uW).delete(this._canvas),this.callback(t||new rS("Rendering cancelled, page ".concat(this._pageIndex+1),i))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?nC(this,uN,window.requestAnimationFrame(()=>{nC(this,uN,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),nF(uO,uO,uW).delete(this._canvas),this.callback())))}constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:s,canvasFactory:l,filterFactory:o,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:u=null}){nE(this,uN,{writable:!0,value:null}),this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=s,this.canvasFactory=l,this.filterFactory=o,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uF(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}}var uW={writable:!0,value:new WeakSet};let uj="4.10.38",uB="f9bea397f";function uz(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function uH(e){return Math.max(0,Math.min(255,255*e))}class uU{static CMYK_G(e){let[t,i,n,r]=e;return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return[t=uH(t),t,t]}static G_HTML(e){let[t]=e,i=uz(t);return"#".concat(i).concat(i).concat(i)}static RGB_G(e){let[t,i,n]=e;return["G",.3*t+.59*i+.11*n]}static RGB_rgb(e){return e.map(uH)}static RGB_HTML(e){return"#".concat(e.map(uz).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,i,n,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_rgb(e){let[t,i,n,r]=e;return[uH(1-Math.min(1,t+r)),uH(1-Math.min(1,n+r)),uH(1-Math.min(1,i+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,i,n]=e,r=1-t,a=1-i,s=1-n,l=Math.min(r,a,s);return["CMYK",r,a,s,l]}}class uG{create(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width","".concat(e,"px")),n.setAttribute("height","".concat(t,"px"))),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),n}createElement(e){if("string"!=typeof e)throw Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){n9("Abstract method `_createSVG` called.")}}class uV extends uG{_createSVG(e){return document.createElementNS(rx,e)}}class uq{static setupStorage(e,t,i,n,r){let a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value)for(let t of(e.setAttribute("value",a.value),i.children))t.attributes.value===a.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected;e.addEventListener("input",e=>{let i=e.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:i,storage:n=null,intent:r,linkService:a}=e,{attributes:s}=i,l=t instanceof HTMLAnchorElement;for(let[e,i]of("radio"===s.type&&(s.name="".concat(s.name,"-").concat(r)),Object.entries(s)))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:l&&("href"===e||"newWindow"===e)||t.setAttribute(e,i)}l&&a.addLinkAttributes(t,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(t,s.dataId,i,n)}static render(e){let t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});let s="richText"!==r,l=e.div;if(l.append(a),e.viewport){let t="matrix(".concat(e.viewport.transform.join(","),")");l.style.transform=t}s&&l.setAttribute("class","xfaLayer xfaFont");let o=[];if(0===n.children.length){if(n.value){let e=document.createTextNode(n.value);a.append(e),s&&c3.shouldBuildText(n.name)&&o.push(e)}return{textDivs:o}}let h=[[n,-1,a]];for(;h.length>0;){var c,u;let[e,n,a]=h.at(-1);if(n+1===e.children.length){h.pop();continue}let l=e.children[++h.at(-1)[1]];if(null===l)continue;let{name:d}=l;if("#text"===d){let e=document.createTextNode(l.value);o.push(e),a.append(e);continue}let p=(null==l||null==(c=l.attributes)?void 0:c.xmlns)?document.createElementNS(l.attributes.xmlns,d):document.createElement(d);if(a.append(p),l.attributes&&this.setAttributes({html:p,element:l,storage:t,intent:r,linkService:i}),(null==(u=l.children)?void 0:u.length)>0)h.push([l,-1,p]);else if(l.value){let e=document.createTextNode(l.value);s&&c3.shouldBuildText(d)&&o.push(e),p.append(e)}}for(let e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:o}}static update(e){let t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}let uX=new WeakSet;function uK(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class uY{static create(e){switch(e.data.annotationType){case n$.LINK:return new u5(e);case n$.TEXT:return new u7(e);case n$.WIDGET:switch(e.data.fieldType){case"Tx":return new dt(e);case"Btn":if(e.data.radioButton)return new dr(e);if(e.data.checkBox)return new dn(e);return new da(e);case"Ch":return new ds(e);case"Sig":return new di(e)}return new de(e);case n$.POPUP:return new dl(e);case n$.FREETEXT:return new dX(e);case n$.LINE:return new dY(e);case n$.SQUARE:return new dJ(e);case n$.CIRCLE:return new d$(e);case n$.POLYLINE:return new d1(e);case n$.CARET:return new d3(e);case n$.INK:return new d9(e);case n$.POLYGON:return new d2(e);case n$.HIGHLIGHT:return new d7(e);case n$.UNDERLINE:return new pe(e);case n$.SQUIGGLY:return new pt(e);case n$.STRIKEOUT:return new pi(e);case n$.STAMP:return new pn(e);case n$.FILEATTACHMENT:return new ps(e);default:return new u0(e)}}}var uQ=new WeakMap,uJ=new WeakMap,uZ=new WeakMap,u$=new WeakSet;class u0{static _hasPopupData(e){let{titleObj:t,contentsObj:i,richText:n}=e;return!!((null==t?void 0:t.str)||(null==i?void 0:i.str)||(null==n?void 0:n.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return u0._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;nC(this,uQ,n_(this,uQ)||{rect:this.data.rect.slice(0)});let{rect:i}=e;i&&nR(this,u$,u1).call(this,i),null==(t=n_(this,uZ))||t.popup.updateEdited(e)}resetEdited(){var e;n_(this,uQ)&&(nR(this,u$,u1).call(this,n_(this,uQ).rect),null==(e=n_(this,uZ))||e.popup.resetEdited(),nC(this,uQ,null))}_createContainer(e){let{data:t,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof de||(r.tabIndex=1e3);let{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof dl){let{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}let{width:s,height:l}=uK(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth="".concat(t.borderStyle.width,"px");let e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;switch(e>0||i>0?a.borderRadius="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(i,"px * var(--scale-factor))"):this instanceof dr&&(a.borderRadius="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(l,"px * var(--scale-factor))")),t.borderStyle.style){case n0.SOLID:a.borderStyle="solid";break;case n0.DASHED:a.borderStyle="dashed";break;case n0.BEVELED:n6("Unimplemented border style: beveled");break;case n0.INSET:n6("Unimplemented border style: inset");break;case n0.UNDERLINE:a.borderBottomStyle="solid"}let n=t.borderColor||null;n?(nC(this,uJ,!0),a.borderColor=rf.makeHexColor(0|n[0],0|n[1],0|n[2])):a.borderWidth=0}let o=rf.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:u,pageY:d}=n.rawDims;a.left="".concat(100*(o[0]-u)/h,"%"),a.top="".concat(100*(o[1]-d)/c,"%");let{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width="".concat(100*s/h,"%"),a.height="".concat(100*l/c,"%")):this.setRotation(p,r),r}setRotation(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;let{pageWidth:r,pageHeight:a}=this.parent.viewport.rawDims,{width:s,height:l}=uK(this.data.rect);e%180==0?(t=100*s/r,i=100*l/a):(t=100*l/r,i=100*s/a),n.style.width="".concat(t,"%"),n.style.height="".concat(i,"%"),n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(e,t,i)=>{let n=i.detail[e],r=n[0],a=n.slice(1);i.target.style[t]=uU["".concat(r,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:uU["".concat(r,"_rgb")](a)})};return re(this,"_commonActions",{display:e=>{let{display:t}=e.detail,i=t%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let i=this._commonActions;for(let n of Object.keys(t.detail)){let r=e[n]||i[n];null==r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let i=this._commonActions;for(let[n,r]of Object.entries(t)){let a=i[n];a&&(a({detail:{[n]:r},target:e}),delete t[n])}}_createQuadrilaterals(){let e;if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[i,n,r,a]=this.data.rect.map(e=>Math.fround(e));if(8===t.length){let[e,s,l,o]=t.subarray(2,6);if(r===e&&a===s&&i===l&&n===o)return}let{style:s}=this.container;if(n_(this,uJ)){let{borderColor:t,borderWidth:i}=s;s.borderWidth=0,e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(i,'">')],this.container.classList.add("hasBorder")}let l=r-i,o=a-n,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);let u=h.createElement("defs");c.append(u);let d=h.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(let n=2,r=t.length;n<r;n+=8){let r=t[n],s=t[n+1],c=t[n+2],u=t[n+3],p=h.createElement("rect"),f=(c-i)/l,g=(a-s)/o,m=(r-c)/l,b=(s-u)/o;p.setAttribute("x",f),p.setAttribute("y",g),p.setAttribute("width",m),p.setAttribute("height",b),d.append(p),null==e||e.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(g,'" width="').concat(m,'" height="').concat(b,'"/>'))}n_(this,uJ)&&(e.push("</g></svg>')"),s.backgroundImage=e.join("")),this.container.append(c),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let{data:e}=this,t=nC(this,uZ,new dl({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){n9("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){let n=this._fieldObjects[e];if(n)for(let{page:e,id:r,exportValues:a}of n){if(-1===e||r===t)continue;let n="string"==typeof a?a:null,s=document.querySelector('[data-element-id="'.concat(r,'"]'));if(s&&!uX.has(s)){n6("_getElementsByName - element not allowed: ".concat(r));continue}i.push({id:r,exportValue:n,domElement:s})}return i}for(let n of document.getElementsByName(e)){let{exportValue:e}=n,r=n.getAttribute("data-element-id");r!==t&&uX.has(n)&&i.push({id:r,exportValue:e,domElement:n})}return i}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){nI(this,u$),nE(this,uQ,{writable:!0,value:null}),nE(this,uJ,{writable:!0,value:!1}),nE(this,uZ,{writable:!0,value:null}),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}}function u1(e){let{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:s,pageY:l}}}}=this;null==i||i.splice(0,4,...e);let{width:o,height:h}=uK(e);t.left="".concat(100*(e[0]-s)/r,"%"),t.top="".concat(100*(a-e[3]+l)/a,"%"),0===n?(t.width="".concat(100*o/r,"%"),t.height="".concat(100*h/a,"%")):this.setRotation(n)}var u2=new WeakSet,u3=new WeakSet,u4=new WeakSet;class u5 extends u0{render(){let{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(i,e.action),n=!0):e.attachment?(nR(this,u3,u9).call(this,i,e.attachment,e.attachmentDest),n=!0):e.setOCGState?(nR(this,u4,u8).call(this,i,e.setOCGState),n=!0):e.dest?(this._bindLink(i,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),n=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&nR(this,u2,u6).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),nR(this,u2,u6).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(t.actions)){let r=i.get(n);r&&(e[r]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1})}e.onclick||(e.onclick=()=>!1),nR(this,u2,u6).call(this)}_bindResetFormAction(e,t){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),nR(this,u2,u6).call(this),!this._fieldObjects){n6('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{null==i||i();let{fields:e,refs:n,include:r}=t,a=[];if(0!==e.length||0!==n.length){let t=new Set(n);for(let i of e)for(let{id:e}of this._fieldObjects[i]||[])t.add(e);for(let e of Object.values(this._fieldObjects))for(let i of e)t.has(i.id)===r&&a.push(i)}else for(let e of Object.values(this._fieldObjects))a.push(...e);let s=this.annotationStorage,l=[];for(let e of a){let{id:t}=e;switch(l.push(t),e.type){case"text":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{let i=e.defaultValue===e.exportValues;s.setValue(t,{value:i});break}case"combobox":case"listbox":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}default:continue}let i=document.querySelector('[data-element-id="'.concat(t,'"]'));if(i){if(!uX.has(i)){n6("_bindResetFormAction - element not allowed: ".concat(t));continue}i.dispatchEvent(new Event("resetform"))}}if(this.enableScripting){var o;null==(o=this.linkService.eventBus)||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})}return!1}}constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),nI(this,u2),nI(this,u3),nI(this,u4),this.isTooltipOnly=e.data.isTooltipOnly}}function u6(){this.container.setAttribute("data-internal-link","")}function u9(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,i),!1},nR(this,u2,u6).call(this)}function u8(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),nR(this,u2,u6).call(this)}class u7 extends u0{render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}constructor(e){super(e,{isRenderable:!0})}}class de extends u0{render(){return this.container}showElementAndHideCanvas(e){if(this.data.hasOwnCanvas){var t;(null==(t=e.previousSibling)?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1}}_getKeyModifier(e){return rd.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,r){i.includes("mouse")?e.addEventListener(i,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(i,e=>{var a;if("blur"===i){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}r&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e)}}))})}_setEventListeners(e,t,i,n){for(let[l,o]of i){var r,a,s;("Action"===o||(null==(r=this.data.actions)?void 0:r[o]))&&(("Focus"===o||"Blur"===o)&&(t||(t={focused:!1})),this._setEventListener(e,t,l,o,n),"Focus"!==o||(null==(a=this.data.actions)?void 0:a.Blur)?"Blur"!==o||(null==(s=this.data.actions)?void 0:s.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":rf.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t,{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,r=e.style,a=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),i=Math.round(e/(1.35*n))||1;t=Math.min(n,a(e/i/1.35))}else t=Math.min(n,a(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));r.fontSize="calc(".concat(t,"px * var(--scale-factor))"),r.color=rf.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class dt extends de{setPropertyOnSiblings(e,t,i,n){let r=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[n]:i})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var n,r;let a=e.getValue(t,{value:this.data.fieldValue}),s=a.value||"",l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&s.length>l&&(s=s.slice(0,l));let o=a.formattedValue||(null==(n=this.data.textContent)?void 0:n.join("\n"))||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let h={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=null!=o?o:s,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",null!=o?o:s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),uX.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=1e3,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",n=>{e.setValue(t,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",e=>{var t;let n=null!=(t=this.data.defaultFieldValue)?t:"";i.value=h.userValue=n,h.formattedValue=null});let c=e=>{let{formattedValue:t}=h;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",e=>{var t;if(h.focused)return;let{target:i}=e;h.userValue&&(i.value=h.userValue),h.lastCommittedValue=i.value,h.commitKey=1,(null==(t=this.data.actions)?void 0:t.Focus)||(h.focused=!0)}),i.addEventListener("updatefromsandbox",i=>{this.showElementAndHideCanvas(i.target),this._dispatchEventFromSandbox({value(i){var n;h.userValue=null!=(n=i.detail.value)?n:"",e.setValue(t,{value:h.userValue.toString()}),i.target.value=h.userValue},formattedValue(i){let{formattedValue:n}=i.detail;h.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),e.setValue(t,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:i=>{var n;let{charLimit:r}=i.detail,{target:a}=i;if(0===r)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",r);let s=h.userValue;s&&!(s.length<=r)&&(a.value=h.userValue=s=s.slice(0,r),e.setValue(t,{value:s}),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}},i)}),i.addEventListener("keydown",e=>{var i;h.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(h.commitKey=3):n=2,-1===n)return;let{value:r}=e.target;h.lastCommittedValue!==r&&(h.lastCommittedValue=r,h.userValue=r,null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let n=c;c=null,i.addEventListener("blur",e=>{var i,r;if(!h.focused||!e.relatedTarget)return;(null==(i=this.data.actions)?void 0:i.Blur)||(h.focused=!1);let{value:a}=e.target;h.userValue=a,h.lastCommittedValue!==a&&(null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:h.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),n(e)}),(null==(r=this.data.actions)?void 0:r.Keystroke)&&i.addEventListener("beforeinput",e=>{var i;h.lastCommittedValue=null;let{data:n,target:r}=e,{value:a,selectionStart:s,selectionEnd:l}=r,o=s,c=l;switch(e.inputType){case"deleteWordBackward":{let e=a.substring(0,s).match(/\w*[^\w]*$/);e&&(o-=e[0].length);break}case"deleteWordForward":{let e=a.substring(s).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":s===l&&(o-=1);break;case"deleteContentForward":s===l&&(c+=1)}e.preventDefault(),null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:n||"",willCommit:!1,selStart:o,selEnd:c}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}}class di extends de{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class dn extends de{render(){let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let r=document.createElement("input");return uX.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=1e3,r.addEventListener("change",n=>{let{name:r,checked:a}=n.target;for(let n of this._getElementsByName(r,i)){let i=a&&n.exportValue===t.exportValue;n.domElement&&(n.domElement.checked=i),e.setValue(n.id,{value:i})}e.setValue(i,{value:a})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class dr extends de{render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof n&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(let n of this._getElementsByName(t.fieldName,i))e.setValue(n.id,{value:!1});let r=document.createElement("input");if(uX.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=1e3,r.addEventListener("change",t=>{let{name:n,checked:r}=t.target;for(let t of this._getElementsByName(n,i))e.setValue(t.id,{value:!1});e.setValue(i,{value:r})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue}),this.enableScripting&&this.hasJSActions){let n=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value:t=>{let r=n===t.detail.value;for(let n of this._getElementsByName(t.target.name)){let t=r&&n.id===i;n.domElement&&(n.domElement.checked=t),e.setValue(n.id,{value:t})}}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class da extends u5{render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}}class ds extends de{render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");uX.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=1e3;let r=this.data.combo&&this.data.options.length>0;for(let e of(!this.data.combo&&(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue;for(let e of n.options)e.selected=e.value===t}),this.data.options)){let t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,i.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),r=!1),n.append(t)}let a=null;if(r){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),n.prepend(e),a=()=>{e.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}let s=e=>{let t=e?"value":"textContent",{options:i,multiple:r}=n;return r?Array.prototype.filter.call(i,e=>e.selected).map(e=>e[t]):-1===i.selectedIndex?null:i[i.selectedIndex][t]},l=s(!1),o=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({value(i){null==a||a();let r=i.detail.value,o=new Set(Array.isArray(r)?r:[r]);for(let e of n.options)e.selected=o.has(e.value);e.setValue(t,{value:s(!0)}),l=s(!1)},multipleSelection(e){n.multiple=!0},remove(i){let r=n.options,a=i.detail.remove;r[a].selected=!1,n.remove(a),r.length>0&&-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},clear(i){for(;0!==n.length;)n.remove(0);e.setValue(t,{value:null,items:[]}),l=s(!1)},insert(i){let{index:r,displayValue:a,exportValue:h}=i.detail.insert,c=n.children[r],u=document.createElement("option");u.textContent=a,u.value=h,c?c.before(u):n.append(u),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},items(i){let{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(let e of r){let{displayValue:t,exportValue:i}=e,r=document.createElement("option");r.textContent=t,r.value=i,n.append(r)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},indices(i){let n=new Set(i.detail.indices);for(let e of i.target.options)e.selected=n.has(e.index);e.setValue(t,{value:s(!0)}),l=s(!1)},editable(e){e.target.disabled=!e.detail.editable}},i)}),n.addEventListener("input",i=>{var n;let r=s(!0),a=s(!1);e.setValue(t,{value:r}),i.preventDefault(),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:a,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):n.addEventListener("input",function(i){e.setValue(t,{value:s(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class dl extends u0{render(){this.container.classList.add("popupAnnotation");let e=this.popup=new dO({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(ry).concat(e)).join(",")),this.container}constructor(e){let{data:t,elements:i}=e;super(e,{isRenderable:u0._hasPopupData(t)}),this.elements=i,this.popup=null}}var dh=new WeakMap,dc=new WeakMap,du=new WeakMap,dd=new WeakMap,dp=new WeakMap,df=new WeakMap,dg=new WeakMap,dm=new WeakMap,dv=new WeakMap,db=new WeakMap,dw=new WeakMap,dy=new WeakMap,dx=new WeakMap,dA=new WeakMap,dk=new WeakMap,d_=new WeakMap,dS=new WeakMap,dE=new WeakMap,dM=new WeakMap,dC=new WeakMap,dT=new WeakMap,dP=new WeakMap,dR=new WeakSet,dI=new WeakSet,dL=new WeakSet,dD=new WeakSet,dF=new WeakSet,dN=new WeakSet;class dO{render(){if(n_(this,dx))return;let e=nC(this,dx,document.createElement("div"));if(e.className="popup",n_(this,dp)){let t=e.style.outlineColor=rf.makeHexColor(...n_(this,dp));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)"):e.style.backgroundColor=rf.makeHexColor(...n_(this,dp).map(e=>Math.floor(.7*(255-e)+e)))}let t=document.createElement("span");t.className="header";let i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=n_(this,dS),e.append(t),n_(this,dm)){let e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:n_(this,dm).valueOf()})),t.append(e)}let n=n_(this,dC);if(n)uq.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let t=this._formatContents(n_(this,dg));e.append(t)}n_(this,df).append(e)}_formatContents(e){let{str:t,dir:i}=e,n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;let r=t.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){let i=r[e];n.append(document.createTextNode(i)),e<t-1&&n.append(document.createElement("br"))}return n}updateEdited(e){var t;let{rect:i,popupContent:n}=e;nC(this,dE,n_(this,dE)||{contentsObj:n_(this,dg),richText:n_(this,d_)}),i&&nC(this,dA,null),n&&(nC(this,d_,nR(this,dR,dz).call(this,n)),nC(this,dg,null)),null==(t=n_(this,dx))||t.remove(),nC(this,dx,null)}resetEdited(){var e;n_(this,dE)&&({contentsObj:nj(this,dg).value,richText:nj(this,d_).value}=n_(this,dE),nC(this,dE,null),null==(e=n_(this,dx))||e.remove(),nC(this,dx,null),nC(this,dA,null))}forceHide(){nC(this,dM,this.isVisible),n_(this,dM)&&(n_(this,df).hidden=!0)}maybeShow(){n_(this,dM)&&(n_(this,dx)||nR(this,dF,dV).call(this),nC(this,dM,!1),n_(this,df).hidden=!1)}get isVisible(){return!1===n_(this,df).hidden}constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:s,parent:l,rect:o,parentRect:h,open:c}){for(let c of(nE(this,dC,{get:dW,set:void 0}),nE(this,dT,{get:dj,set:void 0}),nE(this,dP,{get:dB,set:void 0}),nI(this,dR),nI(this,dI),nI(this,dL),nI(this,dD),nI(this,dF),nI(this,dN),nE(this,dh,{writable:!0,value:nR(this,dI,dH).bind(this)}),nE(this,dc,{writable:!0,value:nR(this,dN,dq).bind(this)}),nE(this,du,{writable:!0,value:nR(this,dF,dV).bind(this)}),nE(this,dd,{writable:!0,value:nR(this,dD,dG).bind(this)}),nE(this,dp,{writable:!0,value:null}),nE(this,df,{writable:!0,value:null}),nE(this,dg,{writable:!0,value:null}),nE(this,dm,{writable:!0,value:null}),nE(this,dv,{writable:!0,value:null}),nE(this,db,{writable:!0,value:null}),nE(this,dw,{writable:!0,value:null}),nE(this,dy,{writable:!0,value:!1}),nE(this,dx,{writable:!0,value:null}),nE(this,dA,{writable:!0,value:null}),nE(this,dk,{writable:!0,value:null}),nE(this,d_,{writable:!0,value:null}),nE(this,dS,{writable:!0,value:null}),nE(this,dE,{writable:!0,value:null}),nE(this,dM,{writable:!0,value:!1}),nC(this,df,e),nC(this,dS,n),nC(this,dg,a),nC(this,d_,s),nC(this,db,l),nC(this,dp,t),nC(this,dk,o),nC(this,dw,h),nC(this,dv,i),nC(this,dm,rD.toDateObject(r)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),this.trigger))c.addEventListener("click",n_(this,dd)),c.addEventListener("mouseenter",n_(this,du)),c.addEventListener("mouseleave",n_(this,dc)),c.classList.add("popupTriggerArea");for(let e of i){var u;null==(u=e.container)||u.addEventListener("keydown",n_(this,dh))}n_(this,df).hidden=!0,c&&nR(this,dD,dG).call(this)}}function dW(){let e=n_(this,d_),t=n_(this,dg);return(null==e?void 0:e.str)&&(!(null==t?void 0:t.str)||t.str===e.str)&&n_(this,d_).html||null}function dj(){var e,t,i;return(null==(i=n_(this,dC))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.fontSize)||0}function dB(){var e,t,i;return(null==(i=n_(this,dC))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.color)||null}function dz(e){let t=[],i={style:{color:n_(this,dP),fontSize:n_(this,dT)?"calc(".concat(n_(this,dT),"px * var(--scale-factor))"):""}};for(let n of e.split("\n"))t.push({name:"span",value:n,attributes:i});return{str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}}}function dH(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&n_(this,dy))&&nR(this,dD,dG).call(this)}function dU(){if(null!==n_(this,dA))return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:r}}}=n_(this,db),a=!!n_(this,dw),s=a?n_(this,dw):n_(this,dk);for(let e of n_(this,dv))if(!s||null!==rf.intersect(e.data.rect,s)){s=e.data.rect,a=!0;break}let l=rf.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),o=a?s[2]-s[0]+5:0;nC(this,dA,[100*(l[0]+o-n)/t,100*(l[1]-r)/i]);let{style:h}=n_(this,df);h.left="".concat(n_(this,dA)[0],"%"),h.top="".concat(n_(this,dA)[1],"%")}function dG(){nC(this,dy,!n_(this,dy)),n_(this,dy)?(nR(this,dF,dV).call(this),n_(this,df).addEventListener("click",n_(this,dd)),n_(this,df).addEventListener("keydown",n_(this,dh))):(nR(this,dN,dq).call(this),n_(this,df).removeEventListener("click",n_(this,dd)),n_(this,df).removeEventListener("keydown",n_(this,dh)))}function dV(){n_(this,dx)||this.render(),this.isVisible?n_(this,dy)&&n_(this,df).classList.add("focused"):(nR(this,dL,dU).call(this),n_(this,df).hidden=!1,n_(this,df).style.zIndex=parseInt(n_(this,df).style.zIndex)+1e3)}function dq(){n_(this,df).classList.remove("focused"),!n_(this,dy)&&this.isVisible&&(n_(this,df).hidden=!0,n_(this,df).style.zIndex=parseInt(n_(this,df).style.zIndex)-1e3)}class dX extends u0{render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");for(let t of(e.classList.add("annotationTextContent"),e.setAttribute("role","comment"),this.textContent)){let i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=nK.FREETEXT}}var dK=new WeakMap;class dY extends u0{render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:i}=uK(e.rect),n=this.svgFactory.create(t,i,!0),r=nC(this,dK,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n_(this,dK)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nE(this,dK,{writable:!0,value:null})}}var dQ=new WeakMap;class dJ extends u0{render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:i}=uK(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nC(this,dQ,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n_(this,dQ)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nE(this,dQ,{writable:!0,value:null})}}var dZ=new WeakMap;class d$ extends u0{render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:i}=uK(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nC(this,dZ,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n_(this,dZ)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nE(this,dZ,{writable:!0,value:null})}}var d0=new WeakMap;class d1 extends u0{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:i,popupRef:n}}=this;if(!t)return this.container;let{width:r,height:a}=uK(e),s=this.svgFactory.create(r,a,!0),l=[];for(let i=0,n=t.length;i<n;i+=2){let n=t[i]-e[0],r=e[3]-t[i+1];l.push("".concat(n,",").concat(r))}l=l.join(" ");let o=nC(this,d0,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",l),o.setAttribute("stroke-width",i.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n_(this,d0)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nE(this,d0,{writable:!0,value:null}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}}class d2 extends d1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class d3 extends u0{render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}}var d4=new WeakMap,d5=new WeakMap,d6=new WeakSet;class d9 extends u0{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:i,borderStyle:n,popupRef:r}}=this,{transform:a,width:s,height:l}=nR(this,d6,d8).call(this,t,e),o=this.svgFactory.create(s,l,!0),h=nC(this,d4,this.svgFactory.createElement("svg:g"));o.append(h),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let e=0,t=i.length;e<t;e++){let t=this.svgFactory.createElement(this.svgElementName);n_(this,d5).push(t),t.setAttribute("points",i[e].join(",")),h.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:i,rect:n}=e,r=n_(this,d4);if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let e=0,t=n_(this,d5).length;e<t;e++)n_(this,d5)[e].setAttribute("points",i[e].join(","));if(n){let{transform:e,width:t,height:i}=nR(this,d6,d8).call(this,this.data.rotation,n);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(i)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return n_(this,d5)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nI(this,d6),nE(this,d4,{writable:!0,value:null}),nE(this,d5,{writable:!0,value:[]}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?nK.HIGHLIGHT:nK.INK}}function d8(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class d7 extends u0{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=nK.HIGHLIGHT}}class pe extends u0{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class pt extends u0{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class pi extends u0{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class pn extends u0{render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=nK.STAMP}}var pr=new WeakMap,pa=new WeakSet;class ps extends u0{render(){let e;this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:i}=this;i.hasAppearance||0===i.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*i.fillAlpha),"%);"))),e.addEventListener("dblclick",nR(this,pa,pl).bind(this)),nC(this,pr,e);let{isMac:n}=rd.platform;return t.addEventListener("keydown",e=>{"Enter"===e.key&&(n?e.metaKey:e.ctrlKey)&&nR(this,pa,pl).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),t.append(e),t}getElementsToTriggerPopup(){return n_(this,pr)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){var t;super(e,{isRenderable:!0}),nI(this,pa),nE(this,pr,{writable:!0,value:null});let{file:i}=this.data;this.filename=i.filename,this.content=i.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...i})}}function pl(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)}var po=new WeakMap,ph=new WeakMap,pc=new WeakMap,pu=new WeakMap,pd=new WeakSet,pp=new WeakSet;class pf{hasEditableAnnotations(){return n_(this,pc).size>0}async render(e){let{annotations:t}=e,i=this.div;rB(i,this.viewport);let n=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new uV,annotationStorage:e.annotationStorage||new oA,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of t){if(e.noHTML)continue;let t=e.annotationType===n$.POPUP;if(t){let t=n.get(e.id);if(!t)continue;r.elements=t}else{let{width:t,height:i}=uK(e.rect);if(t<=0||i<=0)continue}r.data=e;let i=uY.create(r);if(!i.isRenderable)continue;if(!t&&e.popupRef){let t=n.get(e.popupRef);t?t.push(i):n.set(e.popupRef,[i])}let s=i.render();if(e.hidden&&(s.style.visibility="hidden"),await nR(this,pd,pg).call(this,s,e.id),i._isEditable){var a;n_(this,pc).set(i.data.id,i),null==(a=this._annotationEditorUIManager)||a.renderAnnotationElement(i)}}nR(this,pp,pm).call(this)}update(e){let{viewport:t}=e,i=this.div;this.viewport=t,rB(i,{rotation:t.rotation}),nR(this,pp,pm).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(n_(this,pc).values())}getEditableAnnotation(e){return n_(this,pc).get(e)}constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:s}){nI(this,pd),nI(this,pp),nE(this,po,{writable:!0,value:null}),nE(this,ph,{writable:!0,value:null}),nE(this,pc,{writable:!0,value:new Map}),nE(this,pu,{writable:!0,value:null}),this.div=e,nC(this,po,t),nC(this,ph,i),nC(this,pu,s||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}}async function pg(e,t){var i,n;let r=e.firstChild||e,a=r.id="".concat(ry).concat(t),s=await (null==(i=n_(this,pu))?void 0:i.getAriaAttributes(a));if(s)for(let[e,t]of s)r.setAttribute(e,t);this.div.append(e),null==(n=n_(this,po))||n.moveElementInDOM(this.div,e,r,!1)}function pm(){if(!n_(this,ph))return;let e=this.div;for(let[t,i]of n_(this,ph)){let n=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!n)continue;i.className="annotationContent";let{firstChild:r}=n;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}n_(this,ph).clear()}let pv=/\r\n?|\n/g;var pb=new WeakMap,pw=new WeakMap,py=new WeakMap,px=new WeakMap,pA=new WeakMap,pk=new WeakSet,p_=new WeakSet,pS=new WeakSet,pE=new WeakSet,pM=new WeakSet,pC=new WeakSet,pT=new WeakSet;class pP extends l5{static get _keyboardManager(){let e=pP.prototype,t=e=>e.isEmpty(),i=sk.TRANSLATE_SMALL,n=sk.TRANSLATE_BIG;return re(this,"_keyboardManager",new ax([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}]]))}static initialize(e,t){l5.initialize(e,t);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case nY.FREETEXT_SIZE:pP._defaultFontSize=t;break;case nY.FREETEXT_COLOR:pP._defaultColor=t}}updateParams(e,t){switch(e){case nY.FREETEXT_SIZE:nR(this,pk,pR).call(this,t);break;case nY.FREETEXT_COLOR:nR(this,p_,pI).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nY.FREETEXT_SIZE,pP._defaultFontSize],[nY.FREETEXT_COLOR,pP._defaultColor||l5._defaultLineColor]]}get propertiesToUpdate(){return[[nY.FREETEXT_SIZE,n_(this,pA)],[nY.FREETEXT_COLOR,n_(this,pb)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-pP._internalPadding*e,-(pP._internalPadding+n_(this,pA))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(nK.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),nC(this,px,new AbortController);let e=this._uiManager.combinedSignal(n_(this,px));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",n_(this,py)),this._isDraggable=!0,null==(e=n_(this,px))||e.abort(),nC(this,px,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(null==(t=this._initialOptions)?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=n_(this,pw),t=nC(this,pw,nR(this,pS,pL).call(this).trimEnd());if(e===t)return;let i=e=>{if(nC(this,pw,e),!e)return void this.remove();nR(this,pM,pN).call(this),this._uiManager.rebuild(this),nR(this,pE,pD).call(this)};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),nR(this,pE,pD).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pP._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",n_(this,py)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize="calc(".concat(n_(this,pA),"px * var(--scale-factor))"),i.color=n_(this,pb),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),as(this,this.div,["dblclick","keydown"]),this.width){let[i,n]=this.parentDimensions;if(this.annotationElementId){let r,a,{position:s}=this._initialData,[l,o]=this.getInitialTranslation();[l,o]=this.pageTranslationToScreen(l,o);let[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;switch(this.rotation){case 0:r=e+(s[0]-u)/h,a=t+this.height-(s[1]-d)/c;break;case 90:r=e+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[o,-l];break;case 180:r=e-this.width+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[-l,-o];break;case 270:r=e+(s[0]-u-this.height*c)/h,a=t+(s[1]-d-this.width*h)/c,[l,o]=[-o,l]}this.setAt(r*i,a*n,l,o)}else this.setAt(e*i,t*n,this.width*i,this.height*n);nR(this,pM,pN).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();let n=(nL(pP,pP),pW).call(pP,t.getData("text")||"").replaceAll(pv,"\n");if(!n)return;let r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();let a=r.getRangeAt(0);if(!n.includes("\n")){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}let{startContainer:s,startOffset:l}=a,o=[],h=[];if(s.nodeType===Node.TEXT_NODE){let e=s.parentElement;if(h.push(s.nodeValue.slice(l).replaceAll(pv,"")),e!==this.editorDiv){let t=o;for(let i of this.editorDiv.childNodes){if(i===e){t=h;continue}t.push((nL(pP,pP),pF).call(pP,i))}}o.push(s.nodeValue.slice(0,l).replaceAll(pv,""))}else if(s===this.editorDiv){let e=o,t=0;for(let i of this.editorDiv.childNodes)t++===l&&(e=h),e.push((nL(pP,pP),pF).call(pP,i))}nC(this,pw,"".concat(o.join("\n")).concat(n).concat(h.join("\n"))),nR(this,pM,pN).call(this);let c=new Range,u=o.reduce((e,t)=>e+t.length,0);for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(u<=t){c.setStart(e,u),c.setEnd(e,u);break}u-=t}r.removeAllRanges(),r.addRange(c)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,i){let n=null;if(e instanceof dX){let{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:r,rotation:a,id:s,popupRef:l},textContent:o,textPosition:h,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;n=e={annotationType:nK.FREETEXT,color:Array.from(i),fontSize:t,value:o.join("\n"),position:h,pageIndex:c-1,rect:r.slice(0),rotation:a,id:s,deleted:!1,popupRef:l}}let r=await super.deserialize(e,t,i);return nC(r,pA,e.fontSize),nC(r,pb,rf.makeHexColor(...e.color)),nC(r,pw,(nL(pP,pP),pW).call(pP,e.value)),r.annotationElementId=e.id||null,r._initialData=n,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=pP._internalPadding*this.parentScale,i=this.getRect(t,t),n=l5._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:n_(this,pb)),r={annotationType:nK.FREETEXT,color:n,fontSize:n_(this,pA),value:nR(this,pC,pO).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!nR(this,pT,pj).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:i}=t;for(let e of(i.fontSize="calc(".concat(n_(this,pA),"px * var(--scale-factor))"),i.color=n_(this,pb),t.replaceChildren(),n_(this,pw).split("\n"))){let i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),t.append(i)}let n=pP._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:n_(this,pw)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}constructor(e){super({...e,name:"freeTextEditor"}),nI(this,pk),nI(this,p_),nI(this,pS),nI(this,pE),nI(this,pM),nI(this,pC),nI(this,pT),nE(this,pb,{writable:!0,value:void 0}),nE(this,pw,{writable:!0,value:""}),nE(this,py,{writable:!0,value:"".concat(this.id,"-editor")}),nE(this,px,{writable:!0,value:null}),nE(this,pA,{writable:!0,value:void 0}),nC(this,pb,e.color||pP._defaultColor||l5._defaultLineColor),nC(this,pA,e.fontSize||pP._defaultFontSize)}}function pR(e){let t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-n_(this,pA))*this.parentScale),nC(this,pA,e),nR(this,pE,pD).call(this)},i=n_(this,pA);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nY.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function pI(e){let t=e=>{nC(this,pb,this.editorDiv.style.color=e)},i=n_(this,pb);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nY.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function pL(){let e=[];this.editorDiv.normalize();let t=null;for(let i of this.editorDiv.childNodes)((null==t?void 0:t.nodeType)!==Node.TEXT_NODE||"BR"!==i.nodeName)&&(e.push((nL(pP,pP),pF).call(pP,i)),t=i);return e.join("\n")}function pD(){let e,[t,i]=this.parentDimensions;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{let{currentLayer:t,div:i}=this,n=i.style.display,r=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",t.div.append(this.div),e=i.getBoundingClientRect(),i.remove(),i.style.display=n,i.classList.toggle("hidden",r)}this.rotation%180==this.parentRotation%180?(this.width=e.width/t,this.height=e.height/i):(this.width=e.height/t,this.height=e.width/i),this.fixAndSetPosition()}function pF(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(pv,"")}function pN(){if(this.editorDiv.replaceChildren(),n_(this,pw))for(let e of n_(this,pw).split("\n")){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function pO(){return n_(this,pw).replaceAll(""," ")}function pW(e){return e.replaceAll(" ","")}function pj(e){let{value:t,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((e,t)=>e!==n[t])||e.pageIndex!==r}(0,nW._)(pP,"_freeTextDefaultContent",""),(0,nW._)(pP,"_internalPadding",0),(0,nW._)(pP,"_defaultColor",null),(0,nW._)(pP,"_defaultFontSize",10),(0,nW._)(pP,"_type","freetext"),(0,nW._)(pP,"_editorType",nK.FREETEXT);class pB{toSVGPath(){n9("Abstract method `toSVGPath` must be implemented.")}get box(){n9("Abstract getter `box` must be implemented.")}serialize(e,t){n9("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s]*n,a[s+1]=i+e[s+1]*r;return a}static _rescaleAndSwap(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s+1]*n,a[s+1]=i+e[s]*r;return a}static _translate(e,t,i,n){n||(n=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)n[r]=t+e[r],n[r+1]=i+e[r+1];return n}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,i,n,r){switch(r){case 90:return[1-t/i,e/n];case 180:return[1-e/i,1-t/n];case 270:return[t/i,1-e/n];default:return[e/i,t/n]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,n,r,a){return[(e+5*i)/6,(t+5*n)/6,(5*i+r)/6,(5*n+a)/6,(i+r)/2,(n+a)/2]}}(0,nW._)(pB,"PRECISION",1e-4);var pz=new WeakMap,pH=new WeakMap,pU=new WeakMap,pG=new WeakMap,pV=new WeakMap,pq=new WeakMap,pX=new WeakMap,pK=new WeakMap,pY=new WeakMap,pQ=new WeakMap,pJ=new WeakMap,pZ=new WeakMap,p$=new WeakMap,p0=new WeakSet,p1=new WeakSet,p2=new WeakSet,p3=new WeakSet,p4=new WeakSet,p5=new WeakSet,p6=new WeakSet;class p9{isEmpty(){return isNaN(n_(this,pq)[8])}add(e){var t;let{x:i,y:n}=e;nC(this,pX,i),nC(this,pK,n);let[r,a,s,l]=n_(this,pz),[o,h,c,u]=n_(this,pq).subarray(8,12),d=i-c,p=n-u,f=Math.hypot(d,p);if(f<n_(this,pY))return!1;let g=f-n_(this,pQ),m=g/f,b=m*d,w=m*p,y=o,x=h;o=c,h=u,c+=b,u+=w,null==(t=n_(this,p$))||t.push(i,n);let A=-w/g*n_(this,pZ),k=b/g*n_(this,pZ);return(n_(this,pq).set(n_(this,pq).subarray(2,8),0),n_(this,pq).set([c+A,u+k],4),n_(this,pq).set(n_(this,pq).subarray(14,18),12),n_(this,pq).set([c-A,u-k],16),isNaN(n_(this,pq)[6]))?(0===n_(this,pV).length&&(n_(this,pq).set([o+A,h+k],2),n_(this,pV).push(NaN,NaN,NaN,NaN,(o+A-r)/s,(h+k-a)/l),n_(this,pq).set([o-A,h-k],14),n_(this,pH).push(NaN,NaN,NaN,NaN,(o-A-r)/s,(h-k-a)/l)),n_(this,pq).set([y,x,o,h,c,u],6),!this.isEmpty()):((n_(this,pq).set([y,x,o,h,c,u],6),Math.abs(Math.atan2(x-h,y-o)-Math.atan2(w,b))<Math.PI/2)?([o,h,c,u]=n_(this,pq).subarray(2,6),n_(this,pV).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((h+u)/2-a)/l),[o,h,y,x]=n_(this,pq).subarray(14,18),n_(this,pH).push(NaN,NaN,NaN,NaN,((y+o)/2-r)/s,((x+h)/2-a)/l)):([y,x,o,h,c,u]=n_(this,pq).subarray(0,6),n_(this,pV).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l),[c,u,o,h,y,x]=n_(this,pq).subarray(12,18),n_(this,pH).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l)),!0)}toSVGPath(){if(this.isEmpty())return"";let e=n_(this,pV),t=n_(this,pH);if(isNaN(n_(this,pq)[6])&&!this.isEmpty())return nR(this,p1,ft).call(this);let i=[];i.push("M".concat(e[4]," ").concat(e[5]));for(let t=6;t<e.length;t+=6)isNaN(e[t])?i.push("L".concat(e[t+4]," ").concat(e[t+5])):i.push("C".concat(e[t]," ").concat(e[t+1]," ").concat(e[t+2]," ").concat(e[t+3]," ").concat(e[t+4]," ").concat(e[t+5]));nR(this,p3,fn).call(this,i);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?i.push("L".concat(t[e+4]," ").concat(t[e+5])):i.push("C".concat(t[e]," ").concat(t[e+1]," ").concat(t[e+2]," ").concat(t[e+3]," ").concat(t[e+4]," ").concat(t[e+5]));return nR(this,p2,fi).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,n,r,a){return new fg(e,t,i,n,r,a)}getOutlines(){var e,t;let i=n_(this,pV),n=n_(this,pH),r=n_(this,pq),[a,s,l,o]=n_(this,pz),h=new Float32Array((null!=(t=null==(e=n_(this,p$))?void 0:e.length)?t:0)+2);for(let e=0,t=h.length-2;e<t;e+=2)h[e]=(n_(this,p$)[e]-a)/l,h[e+1]=(n_(this,p$)[e+1]-s)/o;if(h[h.length-2]=(n_(this,pX)-a)/l,h[h.length-1]=(n_(this,pK)-s)/o,isNaN(r[6])&&!this.isEmpty())return nR(this,p4,fr).call(this,h);let c=new Float32Array(n_(this,pV).length+24+n_(this,pH).length),u=i.length;for(let e=0;e<u;e+=2){if(isNaN(i[e])){c[e]=c[e+1]=NaN;continue}c[e]=i[e],c[e+1]=i[e+1]}u=nR(this,p6,fs).call(this,c,u);for(let e=n.length-6;e>=6;e-=6)for(let t=0;t<6;t+=2){if(isNaN(n[e+t])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[e+t],c[u+1]=n[e+t+1],u+=2}return nR(this,p5,fa).call(this,c,u),this.newFreeDrawOutline(c,h,n_(this,pz),n_(this,pJ),n_(this,pU),n_(this,pG))}constructor({x:e,y:t},i,n,r,a,s=0){nI(this,p0),nI(this,p1),nI(this,p2),nI(this,p3),nI(this,p4),nI(this,p5),nI(this,p6),nE(this,pz,{writable:!0,value:void 0}),nE(this,pH,{writable:!0,value:[]}),nE(this,pU,{writable:!0,value:void 0}),nE(this,pG,{writable:!0,value:void 0}),nE(this,pV,{writable:!0,value:[]}),nE(this,pq,{writable:!0,value:new Float32Array(18)}),nE(this,pX,{writable:!0,value:void 0}),nE(this,pK,{writable:!0,value:void 0}),nE(this,pY,{writable:!0,value:void 0}),nE(this,pQ,{writable:!0,value:void 0}),nE(this,pJ,{writable:!0,value:void 0}),nE(this,pZ,{writable:!0,value:void 0}),nE(this,p$,{writable:!0,value:[]}),nC(this,pz,i),nC(this,pZ,r*n),nC(this,pG,a),n_(this,pq).set([NaN,NaN,NaN,NaN,e,t],6),nC(this,pU,s),nC(this,pQ,nF(p9,p9,p8)*n),nC(this,pY,nF(p9,p9,p7)*n),nC(this,pJ,n),n_(this,p$).push(e,t)}}var p8={writable:!0,value:8},p7={writable:!0,value:nF(p9,p9,p8)+nF(p9,p9,{writable:!0,value:2})};function fe(){let e=n_(this,pq).subarray(4,6),t=n_(this,pq).subarray(16,18),[i,n,r,a]=n_(this,pz);return[(n_(this,pX)+(e[0]-t[0])/2-i)/r,(n_(this,pK)+(e[1]-t[1])/2-n)/a,(n_(this,pX)+(t[0]-e[0])/2-i)/r,(n_(this,pK)+(t[1]-e[1])/2-n)/a]}function ft(){let[e,t,i,n]=n_(this,pz),[r,a,s,l]=nR(this,p0,fe).call(this);return"M".concat((n_(this,pq)[2]-e)/i," ").concat((n_(this,pq)[3]-t)/n," L").concat((n_(this,pq)[4]-e)/i," ").concat((n_(this,pq)[5]-t)/n," L").concat(r," ").concat(a," L").concat(s," ").concat(l," L").concat((n_(this,pq)[16]-e)/i," ").concat((n_(this,pq)[17]-t)/n," L").concat((n_(this,pq)[14]-e)/i," ").concat((n_(this,pq)[15]-t)/n," Z")}function fi(e){let t=n_(this,pH);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function fn(e){let[t,i,n,r]=n_(this,pz),a=n_(this,pq).subarray(4,6),s=n_(this,pq).subarray(16,18),[l,o,h,c]=nR(this,p0,fe).call(this);e.push("L".concat((a[0]-t)/n," ").concat((a[1]-i)/r," L").concat(l," ").concat(o," L").concat(h," ").concat(c," L").concat((s[0]-t)/n," ").concat((s[1]-i)/r))}function fr(e){let t=n_(this,pq),[i,n,r,a]=n_(this,pz),[s,l,o,h]=nR(this,p0,fe).call(this),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-n)/a,NaN,NaN,NaN,NaN,s,l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-n)/a],0),this.newFreeDrawOutline(c,e,n_(this,pz),n_(this,pJ),n_(this,pU),n_(this,pG))}function fa(e,t){let i=n_(this,pH);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+6}function fs(e,t){let i=n_(this,pq).subarray(4,6),n=n_(this,pq).subarray(16,18),[r,a,s,l]=n_(this,pz),[o,h,c,u]=nR(this,p0,fe).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/s,(i[1]-a)/l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[0]-r)/s,(n[1]-a)/l],t),t+24}var fl=new WeakMap,fo=new WeakMap,fh=new WeakMap,fc=new WeakMap,fu=new WeakMap,fd=new WeakMap,fp=new WeakMap,ff=new WeakSet;class fg extends pB{toSVGPath(){let e=["M".concat(n_(this,fp)[4]," ").concat(n_(this,fp)[5])];for(let t=6,i=n_(this,fp).length;t<i;t+=6){if(isNaN(n_(this,fp)[t])){e.push("L".concat(n_(this,fp)[t+4]," ").concat(n_(this,fp)[t+5]));continue}e.push("C".concat(n_(this,fp)[t]," ").concat(n_(this,fp)[t+1]," ").concat(n_(this,fp)[t+2]," ").concat(n_(this,fp)[t+3]," ").concat(n_(this,fp)[t+4]," ").concat(n_(this,fp)[t+5]))}return e.push("Z"),e.join(" ")}serialize(e,t){let i,n,[r,a,s,l]=e,o=s-r,h=l-a;switch(t){case 0:i=pB._rescale(n_(this,fp),r,l,o,-h),n=pB._rescale(n_(this,fu),r,l,o,-h);break;case 90:i=pB._rescaleAndSwap(n_(this,fp),r,a,o,h),n=pB._rescaleAndSwap(n_(this,fu),r,a,o,h);break;case 180:i=pB._rescale(n_(this,fp),s,a,-o,h),n=pB._rescale(n_(this,fu),s,a,-o,h);break;case 270:i=pB._rescaleAndSwap(n_(this,fp),s,l,-o,-h),n=pB._rescaleAndSwap(n_(this,fu),s,l,-o,-h)}return{outline:Array.from(i),points:[Array.from(n)]}}get box(){return n_(this,fo)}newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new p9(e,t,i,n,r,a)}getNewOutline(e,t){let[i,n,r,a]=n_(this,fo),[s,l,o,h]=n_(this,fl),c=r*o,u=a*h,d=i*o+s,p=n*h+l,f=this.newOutliner({x:n_(this,fu)[0]*c+d,y:n_(this,fu)[1]*u+p},n_(this,fl),n_(this,fd),e,n_(this,fc),null!=t?t:n_(this,fh));for(let e=2;e<n_(this,fu).length;e+=2)f.add({x:n_(this,fu)[e]*c+d,y:n_(this,fu)[e+1]*u+p});return f.getOutlines()}constructor(e,t,i,n,r,a){super(),nI(this,ff),nE(this,fl,{writable:!0,value:void 0}),nE(this,fo,{writable:!0,value:new Float32Array(4)}),nE(this,fh,{writable:!0,value:void 0}),nE(this,fc,{writable:!0,value:void 0}),nE(this,fu,{writable:!0,value:void 0}),nE(this,fd,{writable:!0,value:void 0}),nE(this,fp,{writable:!0,value:void 0}),nC(this,fp,e),nC(this,fu,t),nC(this,fl,i),nC(this,fd,n),nC(this,fh,r),nC(this,fc,a),this.lastPoint=[NaN,NaN],nR(this,ff,fm).call(this,a);let[s,l,o,h]=n_(this,fo);for(let t=0,i=e.length;t<i;t+=2)e[t]=(e[t]-s)/o,e[t+1]=(e[t+1]-l)/h;for(let e=0,i=t.length;e<i;e+=2)t[e]=(t[e]-s)/o,t[e+1]=(t[e+1]-l)/h}}function fm(e){let t=n_(this,fp),i=t[4],n=t[5],r=i,a=n,s=i,l=n,o=i,h=n,c=e?Math.max:Math.min;for(let e=6,u=t.length;e<u;e+=6){if(isNaN(t[e]))r=Math.min(r,t[e+4]),a=Math.min(a,t[e+5]),s=Math.max(s,t[e+4]),l=Math.max(l,t[e+5]),h<t[e+5]?(o=t[e+4],h=t[e+5]):h===t[e+5]&&(o=c(o,t[e+4]));else{let u=rf.bezierBoundingBox(i,n,...t.slice(e,e+6));r=Math.min(r,u[0]),a=Math.min(a,u[1]),s=Math.max(s,u[2]),l=Math.max(l,u[3]),h<u[3]?(o=u[2],h=u[3]):h===u[3]&&(o=c(o,u[2]))}i=t[e+4],n=t[e+5]}let u=n_(this,fo);u[0]=r-n_(this,fh),u[1]=a-n_(this,fh),u[2]=s-r+2*n_(this,fh),u[3]=l-a+2*n_(this,fh),this.lastPoint=[o,h]}var fv=new WeakMap,fb=new WeakMap,fw=new WeakMap,fy=new WeakMap,fx=new WeakSet,fA=new WeakSet,fk=new WeakSet,f_=new WeakSet,fS=new WeakSet;class fE{getOutlines(){n_(this,fw).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of n_(this,fw))t[3]?(e.push(...nR(this,fS,fR).call(this,t)),nR(this,fk,fT).call(this,t)):(nR(this,f_,fP).call(this,t),e.push(...nR(this,fS,fR).call(this,t)));return nR(this,fx,fM).call(this,e)}constructor(e,t=0,i=0,n=!0){nI(this,fx),nI(this,fA),nI(this,fk),nI(this,f_),nI(this,fS),nE(this,fv,{writable:!0,value:void 0}),nE(this,fb,{writable:!0,value:void 0}),nE(this,fw,{writable:!0,value:[]}),nE(this,fy,{writable:!0,value:[]});let r=1/0,a=-1/0,s=1/0,l=-1/0;for(let{x:i,y:n,width:o,height:h}of e){let e=1e-4*Math.floor((i-t)/1e-4),c=1e-4*Math.ceil((i+o+t)/1e-4),u=1e-4*Math.floor((n-t)/1e-4),d=1e-4*Math.ceil((n+h+t)/1e-4),p=[e,u,d,!0],f=[c,u,d,!1];n_(this,fw).push(p,f),r=Math.min(r,e),a=Math.max(a,c),s=Math.min(s,u),l=Math.max(l,d)}let o=a-r+2*i,h=l-s+2*i,c=r-i,u=s-i,d=n_(this,fw).at(n?-1:-2),p=[d[0],d[2]];for(let e of n_(this,fw)){let[t,i,n]=e;e[0]=(t-c)/o,e[1]=(i-u)/h,e[2]=(n-u)/h}nC(this,fv,new Float32Array([c,u,o,h])),nC(this,fb,p)}}function fM(e){let t,i=[],n=new Set;for(let t of e){let[e,n,r]=t;i.push([e,n,t],[e,r,t])}i.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=i.length;e<t;e+=2){let t=i[e][2],r=i[e+1][2];t.push(r),r.push(t),n.add(t),n.add(r)}let r=[];for(;n.size>0;){let e=n.values().next().value,[i,a,s,l,o]=e;n.delete(e);let h=i,c=a;for(t=[i,s],r.push(t);;){let e;if(n.has(l))e=l;else if(n.has(o))e=o;else break;n.delete(e),[i,a,s,l,o]=e,h!==i&&(t.push(h,c,i,c===a?a:s),h=i),c=c===a?s:a}t.push(h,c)}return new fD(r,n_(this,fv),n_(this,fb))}function fC(e){let t=n_(this,fy),i=0,n=t.length-1;for(;i<=n;){let r=i+n>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:n=r-1}return n+1}function fT(e){let[,t,i]=e,n=nR(this,fA,fC).call(this,t);n_(this,fy).splice(n,0,[t,i])}function fP(e){let[,t,i]=e,n=nR(this,fA,fC).call(this,t);for(let e=n;e<n_(this,fy).length;e++){let[n,r]=n_(this,fy)[e];if(n!==t)break;if(n===t&&r===i)return void n_(this,fy).splice(e,1)}for(let e=n-1;e>=0;e--){let[n,r]=n_(this,fy)[e];if(n!==t)break;if(n===t&&r===i)return void n_(this,fy).splice(e,1)}}function fR(e){let[t,i,n]=e,r=[[t,i,n]],a=nR(this,fA,fC).call(this,n);for(let e=0;e<a;e++){let[i,n]=n_(this,fy)[e];for(let e=0,a=r.length;e<a;e++){let[,s,l]=r[e];if(!(n<=s)&&!(l<=i)){if(s>=i){if(l>n)r[e][1]=n;else{if(1===a)return[];r.splice(e,1),e--,a--}continue}r[e][2]=i,l>n&&r.push([t,n,l])}}}return r}var fI=new WeakMap,fL=new WeakMap;class fD extends pB{toSVGPath(){let e=[];for(let t of n_(this,fL)){let[i,n]=t;e.push("M".concat(i," ").concat(n));for(let r=2;r<t.length;r+=2){let a=t[r],s=t[r+1];a===i?(e.push("V".concat(s)),n=s):s===n&&(e.push("H".concat(a)),i=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[i,n,r,a]=e,s=[],l=r-i,o=a-n;for(let e of n_(this,fL)){let t=Array(e.length);for(let n=0;n<e.length;n+=2)t[n]=i+e[n]*l,t[n+1]=a-e[n+1]*o;s.push(t)}return s}get box(){return n_(this,fI)}get classNamesForOutlining(){return["highlightOutline"]}constructor(e,t,i){super(),nE(this,fI,{writable:!0,value:void 0}),nE(this,fL,{writable:!0,value:void 0}),nC(this,fL,e),nC(this,fI,t),this.lastPoint=i}}class fF extends p9{newFreeDrawOutline(e,t,i,n,r,a){return new fN(e,t,i,n,r,a)}}class fN extends fg{newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new fF(e,t,i,n,r,a)}}var fO=new WeakMap,fW=new WeakMap,fj=new WeakMap,fB=new WeakMap,fz=new WeakMap,fH=new WeakMap,fU=new WeakMap,fG=new WeakMap,fV=new WeakMap,fq=new WeakMap,fX=new WeakMap,fK=new WeakSet,fY=new WeakSet,fQ=new WeakSet,fJ=new WeakSet,fZ=new WeakSet,f$=new WeakMap;class f0{static get _keyboardManager(){return re(this,"_keyboardManager",new ax([[["Escape","mac+Escape"],f0.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],f0.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],f0.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],f0.prototype._moveToPrevious],[["Home","mac+Home"],f0.prototype._moveToBeginning],[["End","mac+End"],f0.prototype._moveToEnd]]))}renderButton(){let e=nC(this,fO,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=n_(this,fq)._signal;e.addEventListener("click",nR(this,fJ,f5).bind(this),{signal:t}),e.addEventListener("keydown",nR(this,fQ,f4).bind(this),{signal:t});let i=nC(this,fW,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=n_(this,fj),e.append(i),e}renderMainDropdown(){let e=nC(this,fB,nR(this,fK,f2).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===n_(this,fO))return void nR(this,fJ,f5).call(this,e);let t=e.target.getAttribute("data-color");t&&nR(this,fY,f3).call(this,t,e)}_moveToNext(e){var t,i;if(!n_(this,f$))return void nR(this,fJ,f5).call(this,e);if(e.target===n_(this,fO)){null==(i=n_(this,fB).firstChild)||i.focus();return}null==(t=e.target.nextSibling)||t.focus()}_moveToPrevious(e){var t,i;if(e.target===(null==(t=n_(this,fB))?void 0:t.firstChild)||e.target===n_(this,fO)){n_(this,f$)&&this._hideDropdownFromKeyboard();return}n_(this,f$)||nR(this,fJ,f5).call(this,e),null==(i=e.target.previousSibling)||i.focus()}_moveToBeginning(e){var t;if(!n_(this,f$))return void nR(this,fJ,f5).call(this,e);null==(t=n_(this,fB).firstChild)||t.focus()}_moveToEnd(e){var t;if(!n_(this,f$))return void nR(this,fJ,f5).call(this,e);null==(t=n_(this,fB).lastChild)||t.focus()}hideDropdown(){var e,t;null==(e=n_(this,fB))||e.classList.add("hidden"),null==(t=n_(this,fV))||t.abort(),nC(this,fV,null)}_hideDropdownFromKeyboard(){if(!n_(this,fH)){if(!n_(this,f$)){var e;null==(e=n_(this,fU))||e.unselect();return}this.hideDropdown(),n_(this,fO).focus({preventScroll:!0,focusVisible:n_(this,fz)})}}updateColor(e){if(n_(this,fW)&&(n_(this,fW).style.backgroundColor=e),!n_(this,fB))return;let t=n_(this,fq).highlightColors.values();for(let i of n_(this,fB).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null==(e=n_(this,fO))||e.remove(),nC(this,fO,null),nC(this,fW,null),null==(t=n_(this,fB))||t.remove(),nC(this,fB,null)}constructor({editor:e=null,uiManager:t=null}){var i;nI(this,fK),nI(this,fY),nI(this,fQ),nI(this,fJ),nI(this,fZ),nE(this,f$,{get:f9,set:void 0}),nE(this,fO,{writable:!0,value:null}),nE(this,fW,{writable:!0,value:null}),nE(this,fj,{writable:!0,value:void 0}),nE(this,fB,{writable:!0,value:null}),nE(this,fz,{writable:!0,value:!1}),nE(this,fH,{writable:!0,value:!1}),nE(this,fU,{writable:!0,value:null}),nE(this,fG,{writable:!0,value:void 0}),nE(this,fV,{writable:!0,value:null}),nE(this,fq,{writable:!0,value:null}),nE(this,fX,{writable:!0,value:void 0}),e?(nC(this,fH,!1),nC(this,fX,nY.HIGHLIGHT_COLOR),nC(this,fU,e)):(nC(this,fH,!0),nC(this,fX,nY.HIGHLIGHT_DEFAULT_COLOR)),nC(this,fq,(null==e?void 0:e._uiManager)||t),nC(this,fG,n_(this,fq)._eventBus),nC(this,fj,(null==e?void 0:e.color)||(null==(i=n_(this,fq))?void 0:i.highlightColors.values().next().value)||"#FFFF98"),nN(f0,f0,f1,nF(f0,f0,f1)||Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}}var f1={writable:!0,value:null};function f2(){let e=document.createElement("div"),t=n_(this,fq)._signal;for(let[i,n]of(e.addEventListener("contextmenu",rI,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),n_(this,fq).highlightColors)){let r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",nF(f0,f0,f1)[i]);let a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===n_(this,fj)),r.addEventListener("click",nR(this,fY,f3).bind(this,n),{signal:t}),e.append(r)}return e.addEventListener("keydown",nR(this,fQ,f4).bind(this),{signal:t}),e}function f3(e,t){t.stopPropagation(),n_(this,fG).dispatch("switchannotationeditorparams",{source:this,type:n_(this,fX),value:e})}function f4(e){f0._keyboardManager.exec(this,e)}function f5(e){if(n_(this,f$))return void this.hideDropdown();if(nC(this,fz,0===e.detail),n_(this,fV)||(nC(this,fV,new AbortController),window.addEventListener("pointerdown",nR(this,fZ,f6).bind(this),{signal:n_(this,fq).combinedSignal(n_(this,fV))})),n_(this,fB))return void n_(this,fB).classList.remove("hidden");let t=nC(this,fB,nR(this,fK,f2).call(this));n_(this,fO).append(t)}function f6(e){var t;null!=(t=n_(this,fB))&&t.contains(e.target)||this.hideDropdown()}function f9(){return n_(this,fB)&&!n_(this,fB).classList.contains("hidden")}var f8=new WeakMap,f7=new WeakMap,ge=new WeakMap,gt=new WeakMap,gi=new WeakMap,gn=new WeakMap,gr=new WeakMap,ga=new WeakMap,gs=new WeakMap,gl=new WeakMap,go=new WeakMap,gh=new WeakMap,gc=new WeakMap,gu=new WeakMap,gd=new WeakMap,gp=new WeakMap,gf=new WeakMap,gg=new WeakMap,gm=new WeakSet,gv=new WeakSet,gb=new WeakSet,gw=new WeakSet,gy=new WeakSet,gx=new WeakSet,gA=new WeakSet,gk=new WeakSet,g_=new WeakSet,gS=new WeakSet,gE=new WeakSet,gM=new WeakSet,gC=new WeakSet;class gT extends l5{static get _keyboardManager(){let e=gT.prototype;return re(this,"_keyboardManager",new ax([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:n_(this,gh)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:n_(this,gf),methodOfCreation:n_(this,gg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var i;l5.initialize(e,t),gT._defaultColor||(gT._defaultColor=(null==(i=t.highlightColors)?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case nY.HIGHLIGHT_DEFAULT_COLOR:gT._defaultColor=t;break;case nY.HIGHLIGHT_THICKNESS:gT._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return n_(this,gc)}updateParams(e,t){switch(e){case nY.HIGHLIGHT_COLOR:nR(this,gb,gI).call(this,t);break;case nY.HIGHLIGHT_THICKNESS:nR(this,gw,gL).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nY.HIGHLIGHT_DEFAULT_COLOR,gT._defaultColor],[nY.HIGHLIGHT_THICKNESS,gT._defaultThickness]]}get propertiesToUpdate(){return[[nY.HIGHLIGHT_COLOR,this.color||gT._defaultColor],[nY.HIGHLIGHT_THICKNESS,n_(this,gf)||gT._defaultThickness],[nY.HIGHLIGHT_FREE,n_(this,gh)]]}async addEditToolbar(){let e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(nC(this,gi,new f0({editor:this})),e.addColorPicker(n_(this,gi))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(nR(this,gS,gB).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,nR(this,gS,gB).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){nR(this,gx,gF).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(nR(this,gA,gN).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)nR(this,gx,gF).call(this);else if(e){var i;nR(this,gA,gN).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){let t,{drawLayer:i}=this.parent;n_(this,gh)?(e=(e-this.rotation+360)%360,t=(nL(gT,gT),gO).call(gT,n_(this,gl).box,e)):t=(nL(gT,gT),gO).call(gT,[this.x,this.y,this.width,this.height],e),i.updateProperties(n_(this,go),{bbox:t,root:{"data-main-rotation":e}}),i.updateProperties(n_(this,gd),{bbox:(nL(gT,gT),gO).call(gT,n_(this,gn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();n_(this,gp)&&(e.setAttribute("aria-label",n_(this,gp)),e.setAttribute("role","mark")),n_(this,gh)?e.classList.add("free"):this.div.addEventListener("keydown",nR(this,gk,gW).bind(this),{signal:this._uiManager._signal});let t=nC(this,gs,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=n_(this,gt);let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),as(this,n_(this,gs),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(n_(this,gd),{rootClass:{hovered:!0}})}}pointerleave(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(n_(this,gd),{rootClass:{hovered:!1}})}}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:nR(this,g_,gj).call(this,!0);break;case 1:case 3:nR(this,g_,gj).call(this,!1)}}select(){var e;super.select(),n_(this,gd)&&(null==(e=this.parent)||e.drawLayer.updateProperties(n_(this,gd),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),n_(this,gd)&&(null==(e=this.parent)||e.drawLayer.updateProperties(n_(this,gd),{rootClass:{selected:!1}}),n_(this,gh)||nR(this,g_,gj).call(this,!1))}get _mustFixPosition(){return!n_(this,gh)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(n_(this,go),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(n_(this,gd),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,i){let{target:n,x:r,y:a}=i,{x:s,y:l,width:o,height:h}=n.getBoundingClientRect(),c=new AbortController,u=e.combinedSignal(c),d=t=>{c.abort(),(nL(this,gT),gG).call(gT,e,t)};window.addEventListener("blur",d,{signal:u}),window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("pointerdown",rL,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",rI,{signal:u}),n.addEventListener("pointermove",(nL(this,gT),gU).bind(this,e),{signal:u}),this._freeHighlight=new fF({x:r,y:a},[s,l,o,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,t,i){let n=null;if(e instanceof d7){let{data:{quadPoints:t,rect:i,rotation:r,id:a,color:s,opacity:l,popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nK.HIGHLIGHT,color:Array.from(s),opacity:l,quadPoints:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}else if(e instanceof d9){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,borderStyle:{rawWidth:l},popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nK.HIGHLIGHT,color:Array.from(s),thickness:l,inkLists:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}let{color:r,quadPoints:a,inkLists:s,opacity:l}=e,o=await super.deserialize(e,t,i);o.color=rf.makeHexColor(...r),nC(o,gu,l||1),s&&nC(o,gf,e.thickness),o.annotationElementId=e.id||null,o._initialData=n;let[h,c]=o.pageDimensions,[u,d]=o.pageTranslation;if(a){let e=nC(o,ge,[]);for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-u)/h,y:1-(a[t+1]-d)/c,width:(a[t+2]-a[t])/h,height:(a[t+1]-a[t+5])/c});nR(o,gm,gP).call(o),nR(o,gA,gN).call(o),o.rotate(o.rotation)}else if(s){nC(o,gh,!0);let e=s[0],i={x:e[0]-u,y:c-(e[1]-d)},n=new fF(i,[0,0,h,c],1,n_(o,gf)/2,!0,.001);for(let t=0,r=e.length;t<r;t+=2)i.x=e[t]-u,i.y=c-(e[t+1]-d),n.add(i);let{id:r,clipPathId:a}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:o.color,"fill-opacity":o._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:n.toSVGPath()}},!0,!0);nR(o,gv,gR).call(o,{highlightOutlines:n.getOutlines(),highlightId:r,clipPathId:a}),nR(o,gA,gN).call(o)}return o}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),i=l5._colorManager.convert(this.color),n={annotationType:nK.HIGHLIGHT,color:i,opacity:n_(this,gu),thickness:n_(this,gf),quadPoints:nR(this,gE,gz).call(this),outlines:nR(this,gM,gH).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:nR(this,gS,gB).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!nR(this,gC,gV).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super({...e,name:"highlightEditor"}),nI(this,gm),nI(this,gv),nI(this,gb),nI(this,gw),nI(this,gy),nI(this,gx),nI(this,gA),nI(this,gk),nI(this,g_),nI(this,gS),nI(this,gE),nI(this,gM),nI(this,gC),nE(this,f8,{writable:!0,value:null}),nE(this,f7,{writable:!0,value:0}),nE(this,ge,{writable:!0,value:void 0}),nE(this,gt,{writable:!0,value:null}),nE(this,gi,{writable:!0,value:null}),nE(this,gn,{writable:!0,value:null}),nE(this,gr,{writable:!0,value:null}),nE(this,ga,{writable:!0,value:0}),nE(this,gs,{writable:!0,value:null}),nE(this,gl,{writable:!0,value:null}),nE(this,go,{writable:!0,value:null}),nE(this,gh,{writable:!0,value:!1}),nE(this,gc,{writable:!0,value:null}),nE(this,gu,{writable:!0,value:void 0}),nE(this,gd,{writable:!0,value:null}),nE(this,gp,{writable:!0,value:""}),nE(this,gf,{writable:!0,value:void 0}),nE(this,gg,{writable:!0,value:""}),this.color=e.color||gT._defaultColor,nC(this,gf,e.thickness||gT._defaultThickness),nC(this,gu,e.opacity||gT._defaultOpacity),nC(this,ge,e.boxes||null),nC(this,gg,e.methodOfCreation||""),nC(this,gp,e.text||""),this._isDraggable=!1,e.highlightId>-1?(nC(this,gh,!0),nR(this,gv,gR).call(this,e),nR(this,gA,gN).call(this)):n_(this,ge)&&(nC(this,f8,e.anchorNode),nC(this,f7,e.anchorOffset),nC(this,gr,e.focusNode),nC(this,ga,e.focusOffset),nR(this,gm,gP).call(this),nR(this,gA,gN).call(this),this.rotate(this.rotation))}}function gP(){nC(this,gl,new fE(n_(this,ge),.001).getOutlines()),[this.x,this.y,this.width,this.height]=n_(this,gl).box,nC(this,gn,new fE(n_(this,ge),.0025,.001,"ltr"===this._uiManager.direction).getOutlines());let{lastPoint:e}=n_(this,gn);nC(this,gc,[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height])}function gR(e){let{highlightOutlines:t,highlightId:i,clipPathId:n}=e;if(nC(this,gl,t),nC(this,gn,t.getNewOutline(n_(this,gf)/2+1.5,.0025)),i>=0)nC(this,go,i),nC(this,gt,n),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),nC(this,gd,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:n_(this,gn).box,path:{d:n_(this,gn).toSVGPath()}},!0));else if(this.parent){let e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(n_(this,go),{bbox:(nL(gT,gT),gO).call(gT,n_(this,gl).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(n_(this,gd),{bbox:(nL(gT,gT),gO).call(gT,n_(this,gn).box,e),path:{d:n_(this,gn).toSVGPath()}})}let[r,a,s,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=s,this.height=l;break;case 90:{let[e,t]=this.parentDimensions;this.x=a,this.y=1-r,this.width=s*t/e,this.height=l*e/t;break}case 180:this.x=1-r,this.y=1-a,this.width=s,this.height=l;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-a,this.y=r,this.width=s*t/e,this.height=l*e/t}}let{lastPoint:o}=n_(this,gn);nC(this,gc,[(o[0]-r)/s,(o[1]-a)/l])}function gI(e){let t=(e,t)=>{var i,n;this.color=e,nC(this,gu,t),null==(i=this.parent)||i.drawLayer.updateProperties(n_(this,go),{root:{fill:e,"fill-opacity":t}}),null==(n=n_(this,gi))||n.updateColor(e)},i=this.color,n=n_(this,gu);this.addCommands({cmd:t.bind(this,e,gT._defaultOpacity),undo:t.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nY.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function gL(e){let t=n_(this,gf),i=e=>{nC(this,gf,e),nR(this,gy,gD).call(this,e)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nY.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function gD(e){if(!n_(this,gh))return;nR(this,gv,gR).call(this,{highlightOutlines:n_(this,gl).getNewOutline(e/2)}),this.fixAndSetPosition();let[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}function gF(){null!==n_(this,go)&&this.parent&&(this.parent.drawLayer.remove(n_(this,go)),nC(this,go,null),this.parent.drawLayer.remove(n_(this,gd)),nC(this,gd,null))}function gN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===n_(this,go)&&({id:nj(this,go).value,clipPathId:nj(this,gt).value}=e.drawLayer.draw({bbox:n_(this,gl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":n_(this,gu)},rootClass:{highlight:!0,free:n_(this,gh)},path:{d:n_(this,gl).toSVGPath()}},!1,!0),nC(this,gd,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:n_(this,gh)},bbox:n_(this,gn).box,path:{d:n_(this,gn).toSVGPath()}},n_(this,gh))),n_(this,gs)&&(n_(this,gs).style.clipPath=n_(this,gt)))}function gO(e,t){let[i,n,r,a]=e;switch(t){case 90:return[1-n-a,i,a,r];case 180:return[1-i-r,1-n-a,r,a];case 270:return[n,1-i-r,a,r]}return[i,n,r,a]}function gW(e){gT._keyboardManager.exec(this,e)}function gj(e){if(!n_(this,f8))return;let t=window.getSelection();e?t.setPosition(n_(this,f8),n_(this,f7)):t.setPosition(n_(this,gr),n_(this,ga))}function gB(){return n_(this,gh)?this.rotation:0}function gz(){if(n_(this,gh))return null;let[e,t]=this.pageDimensions,[i,n]=this.pageTranslation,r=n_(this,ge),a=new Float32Array(8*r.length),s=0;for(let{x:l,y:o,width:h,height:c}of r){let r=l*e+i,u=(1-o)*t+n;a[s]=a[s+4]=r,a[s+1]=a[s+3]=u,a[s+2]=a[s+6]=r+h*e,a[s+5]=a[s+7]=u-c*t,s+=8}return a}function gH(e){return n_(this,gl).serialize(e,nR(this,gS,gB).call(this))}function gU(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function gG(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function gV(e){let{color:t}=this._initialData;return e.color.some((e,i)=>e!==t[i])}(0,nW._)(gT,"_defaultColor",null),(0,nW._)(gT,"_defaultOpacity",1),(0,nW._)(gT,"_defaultThickness",12),(0,nW._)(gT,"_type","highlight"),(0,nW._)(gT,"_editorType",nK.HIGHLIGHT),(0,nW._)(gT,"_freeHighlightId",-1),(0,nW._)(gT,"_freeHighlight",null),(0,nW._)(gT,"_freeHighlightClipId","");var gq=new WeakMap;class gX{updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){n_(this,gq)[e]=t}toSVGProperties(){let e=n_(this,gq);return nC(this,gq,Object.create(null)),{root:e}}reset(){nC(this,gq,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){n9("Not implemented")}constructor(){nE(this,gq,{writable:!0,value:Object.create(null)})}}var gK=new WeakMap,gY=new WeakMap,gQ=new WeakSet,gJ=new WeakSet,gZ=new WeakSet,g$=new WeakSet,g0=new WeakSet,g1=new WeakSet,g2=new WeakSet,g3=new WeakSet;class g4 extends l5{static _mergeSVGProperties(e,t){let i=new Set(Object.keys(e));for(let[n,r]of Object.entries(t))i.has(n)?Object.assign(e[n],r):e[n]=r;return e}static getDefaultDrawingOptions(e){n9("Not implemented")}static get typesMap(){n9("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(nF(g4,g4,g5).updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){let e=[],t=this._defaultDrawingOptions;for(let[i,n]of this.typesMap)e.push([i,t[n]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:t}=this;for(let[i,n]of this.constructor.typesMap)e.push([i,t[n]]);return e}_updateProperty(e,t,i){let n=this._drawingOptions,r=n[t],a=e=>{var i;n.updateProperty(t,e);let r=n_(this,gK).updateProperty(t,e);r&&nR(this,g2,mo).call(this,r),null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,n.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,g4._mergeSVGProperties(n_(this,gK).getPathResizingSVGProperties(nR(this,g1,ml).call(this)),{bbox:nR(this,g3,mh).call(this)}))}_onResized(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,g4._mergeSVGProperties(n_(this,gK).getPathResizedSVGProperties(nR(this,g1,ml).call(this)),{bbox:nR(this,g3,mh).call(this)}))}_onTranslating(e,t){var i;null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,{bbox:nR(this,g3,mh).call(this,e,t)})}_onTranslated(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,g4._mergeSVGProperties(n_(this,gK).getPathTranslatedSVGProperties(nR(this,g1,ml).call(this),this.parentDimensions),{bbox:nR(this,g3,mh).call(this)}))}_onStartDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,n_(this,gY)&&(nC(this,gY,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){nR(this,gZ,mr).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(nR(this,g$,ma).call(this),nR(this,g2,mo).call(this,n_(this,gK).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),nR(this,gZ,mr).call(this);else if(e){var i;this._uiManager.addShouldRescale(this),nR(this,g$,ma).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,g4._mergeSVGProperties({bbox:nR(this,g3,mh).call(this)},n_(this,gK).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&nR(this,g2,mo).call(this,n_(this,gK).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e=super.render();e.classList.add("draw");let t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,i,n,r){n9("Not implemented")}static startDrawing(e,t,i,n){var r,a;let{target:s,offsetX:l,offsetY:o,pointerId:h,pointerType:c}=n;if(nF(g4,g4,g7)&&nF(g4,g4,g7)!==c)return;let{viewport:{rotation:u}}=e,{width:d,height:p}=s.getBoundingClientRect(),f=nN(g4,g4,g6,new AbortController),g=e.combinedSignal(f);if(nN(g4,g4,g8,nF(g4,g4,g8)||h),nN(g4,g4,g7,null!=(a=nF(g4,g4,g7))?a:c),window.addEventListener("pointerup",e=>{if(nF(g4,g4,g8)===e.pointerId)this._endDraw(e);else{var t;null==(t=nF(g4,g4,me))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointercancel",e=>{if(nF(g4,g4,g8)===e.pointerId)this._currentParent.endDrawingSession();else{var t;null==(t=nF(g4,g4,me))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointerdown",e=>{nF(g4,g4,g7)===e.pointerType&&(nN(g4,g4,me,nF(g4,g4,me)||new Set).add(e.pointerId),nF(g4,g4,g5).isCancellable()&&(nF(g4,g4,g5).removeLastElement(),nF(g4,g4,g5).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",rI,{signal:g}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),s.addEventListener("touchmove",e=>{e.timeStamp===nF(g4,g4,mt)&&rL(e)},{signal:g}),e.toggleDrawing(),null==(r=t._editorUndoBar)||r.hide(),nF(g4,g4,g5))return void e.drawLayer.updateProperties(this._currentDrawId,nF(g4,g4,g5).startNew(l,o,d,p,u));t.updateUIForDefaultProperties(this),nN(g4,g4,g5,this.createDrawerInstance(l,o,d,p,u)),nN(g4,g4,g9,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(nF(g4,g4,g9).toSVGProperties(),nF(g4,g4,g5).defaultSVGProperties),!0,!1)}static _drawMove(e){var t;if(nN(g4,g4,mt,-1),!nF(g4,g4,g5))return;let{offsetX:i,offsetY:n,pointerId:r}=e;if(nF(g4,g4,g8)===r){if((null==(t=nF(g4,g4,me))?void 0:t.size)>=1)return void this._endDraw(e);this._currentParent.drawLayer.updateProperties(this._currentDrawId,nF(g4,g4,g5).add(i,n)),nN(g4,g4,mt,e.timeStamp),rL(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,nN(g4,g4,g5,null),nN(g4,g4,g9,null),nN(g4,g4,g7,null),nN(g4,g4,mt,NaN)),nF(g4,g4,g6)&&(nF(g4,g4,g6).abort(),nN(g4,g4,g6,null),nN(g4,g4,g8,NaN),nN(g4,g4,me,null))}static _endDraw(e){let t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,nF(g4,g4,g5).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let e=nF(g4,g4,g5),i=this._currentDrawId,n=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,e.setLastElement(n))},undo:()=>{t.drawLayer.updateProperties(i,e.removeLastElement())},mustExec:!1,type:nY.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(nY.DRAW_STEP),!nF(g4,g4,g5).isEmpty()){let{pageDimensions:[i,n],scale:r}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:nF(g4,g4,g5).getOutlines(i*r,n*r,r,this._INNER_MARGIN),drawingOptions:nF(g4,g4,g9),mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,n,r,a){n9("Not implemented")}static async deserialize(e,t,i){let{rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:s}}=t.viewport,l=this.deserializeDraw(a,s,n,r,this._INNER_MARGIN,e),o=await super.deserialize(e,t,i);return o.createDrawingOptions(e),nR(o,gQ,mi).call(o,{drawOutlines:l}),nR(o,g$,ma).call(o),o.onScaleChanging(),o.rotate(),o}serializeDraw(e){let[t,i]=this.pageTranslation,[n,r]=this.pageDimensions;return n_(this,gK).serialize([t,i,n,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super(e),nI(this,gQ),nI(this,gJ),nI(this,gZ),nI(this,g$),nI(this,g0),nI(this,g1),nI(this,g2),nI(this,g3),nE(this,gK,{writable:!0,value:null}),nE(this,gY,{writable:!0,value:void 0}),(0,nW._)(this,"_drawId",null),nC(this,gY,e.mustBeCommitted||!1),e.drawOutlines&&(nR(this,gQ,mi).call(this,e),nR(this,g$,ma).call(this))}}(0,nW._)(g4,"_currentDrawId",-1),(0,nW._)(g4,"_currentParent",null);var g5={writable:!0,value:null},g6={writable:!0,value:null},g9={writable:!0,value:null},g8={writable:!0,value:NaN},g7={writable:!0,value:null},me={writable:!0,value:null},mt={writable:!0,value:NaN};function mi(e){let{drawOutlines:t,drawId:i,drawingOptions:n}=e;nC(this,gK,t),this._drawingOptions||(this._drawingOptions=n),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=nR(this,gJ,mn).call(this,t,this.parent),nR(this,g2,mo).call(this,t.box)}function mn(e,t){let{id:i}=t.drawLayer.draw(g4._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}function mr(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===this._drawId||this.parent!==e){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);this._drawingOptions.updateAll(),this._drawId=nR(this,gJ,mn).call(this,n_(this,gK),e)}}function ms(e){let[t,i,n,r]=e,{parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[i,1-t,s/a*n,a/s*r];case 180:return[1-t,1-i,n,r];case 270:return[1-i,t,s/a*n,a/s*r];default:return[t,i,n,r]}}function ml(){let{x:e,y:t,width:i,height:n,parentDimensions:[r,a],rotation:s}=this;switch(s){case 90:return[1-t,e,r/a*i,a/r*n];case 180:return[1-e,1-t,i,n];case 270:return[t,1-e,r/a*i,a/r*n];default:return[e,t,i,n]}}function mo(e){if([this.x,this.y,this.width,this.height]=nR(this,g0,ms).call(this,e),this.div){this.fixAndSetPosition();let[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function mh(){let{x:e,y:t,width:i,height:n,rotation:r,parentRotation:a,parentDimensions:[s,l]}=this;switch((4*r+a)/90){case 1:return[1-t-n,e,n,i];case 2:return[1-e-i,1-t-n,i,n];case 3:return[t,1-e-i,n,i];case 4:return[e,t-s/l*i,l/s*n,s/l*i];case 5:return[1-t,e,s/l*i,l/s*n];case 6:return[1-e-l/s*n,1-t,l/s*n,s/l*i];case 7:return[t-s/l*i,1-e-l/s*n,s/l*i,l/s*n];case 8:return[e-i,t-n,i,n];case 9:return[1-t,e-i,n,i];case 10:return[1-e,1-t,i,n];case 11:return[t-n,1-e,n,i];case 12:return[e-l/s*n,t,l/s*n,s/l*i];case 13:return[1-t-s/l*i,e-l/s*n,s/l*i,l/s*n];case 14:return[1-e,1-t-s/l*i,l/s*n,s/l*i];case 15:return[t,1-e,s/l*i,l/s*n];default:return[e,t,i,n]}}(0,nW._)(g4,"_INNER_MARGIN",3);var mc=new WeakMap,mu=new WeakMap,md=new WeakMap,mp=new WeakMap,mf=new WeakMap,mg=new WeakMap,mm=new WeakMap,mv=new WeakMap,mb=new WeakMap,mw=new WeakMap,my=new WeakMap,mx=new WeakSet;class mA{updateProperty(e,t){"stroke-width"===e&&nC(this,mf,t)}isEmpty(){return!n_(this,md)||0===n_(this,md).length}isCancellable(){return n_(this,mg).length<=10}add(e,t){[e,t]=nR(this,mx,mk).call(this,e,t);let[i,n,r,a]=n_(this,mc).subarray(2,6),s=e-r,l=t-a;return 2>=Math.hypot(n_(this,mw)*s,n_(this,my)*l)?null:((n_(this,mg).push(e,t),isNaN(i))?(n_(this,mc).set([r,a,e,t],2),n_(this,mu).push(NaN,NaN,NaN,NaN,e,t)):(isNaN(n_(this,mc)[0])&&n_(this,mu).splice(6,6),n_(this,mc).set([i,n,r,a,e,t],0),n_(this,mu).push(...pB.createBezierPoints(i,n,r,a,e,t))),{path:{d:this.toSVGPath()}})}end(e,t){let i=this.add(e,t);return i||(2===n_(this,mg).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,r){nC(this,mw,i),nC(this,my,n),nC(this,mp,r),[e,t]=nR(this,mx,mk).call(this,e,t);let a=nC(this,mu,[NaN,NaN,NaN,NaN,e,t]);nC(this,mg,[e,t]);let s=n_(this,md).at(-1);return s&&(s.line=new Float32Array(s.line),s.points=new Float32Array(s.points)),n_(this,md).push({line:a,points:n_(this,mg)}),n_(this,mc).set(a,0),nC(this,mv,0),this.toSVGPath(),null}getLastElement(){return n_(this,md).at(-1)}setLastElement(e){return n_(this,md)?(n_(this,md).push(e),nC(this,mu,e.line),nC(this,mg,e.points),nC(this,mv,0),{path:{d:this.toSVGPath()}}):n_(this,mb).setLastElement(e)}removeLastElement(){if(!n_(this,md))return n_(this,mb).removeLastElement();n_(this,md).pop(),nC(this,mm,"");for(let e=0,t=n_(this,md).length;e<t;e++){let{line:t,points:i}=n_(this,md)[e];nC(this,mu,t),nC(this,mg,i),nC(this,mv,0),this.toSVGPath()}return{path:{d:n_(this,mm)}}}toSVGPath(){let e=pB.svgRound(n_(this,mu)[4]),t=pB.svgRound(n_(this,mu)[5]);if(2===n_(this,mg).length)return nC(this,mm,"".concat(n_(this,mm)," M ").concat(e," ").concat(t," Z")),n_(this,mm);if(n_(this,mg).length<=6){let i=n_(this,mm).lastIndexOf("M");nC(this,mm,"".concat(n_(this,mm).slice(0,i)," M ").concat(e," ").concat(t)),nC(this,mv,6)}if(4===n_(this,mg).length){let e=pB.svgRound(n_(this,mu)[10]),t=pB.svgRound(n_(this,mu)[11]);return nC(this,mm,"".concat(n_(this,mm)," L ").concat(e," ").concat(t)),nC(this,mv,12),n_(this,mm)}let i=[];0===n_(this,mv)&&(i.push("M ".concat(e," ").concat(t)),nC(this,mv,6));for(let e=n_(this,mv),t=n_(this,mu).length;e<t;e+=6){let[t,n,r,a,s,l]=n_(this,mu).slice(e,e+6).map(pB.svgRound);i.push("C".concat(t," ").concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l))}return nC(this,mm,n_(this,mm)+i.join(" ")),nC(this,mv,n_(this,mu).length),n_(this,mm)}getOutlines(e,t,i,n){let r=n_(this,md).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),n_(this,mb).build(n_(this,md),e,t,i,n_(this,mp),n_(this,mf),n),nC(this,mc,null),nC(this,mu,null),nC(this,md,null),nC(this,mm,null),n_(this,mb)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}constructor(e,t,i,n,r,a){nI(this,mx),nE(this,mc,{writable:!0,value:new Float64Array(6)}),nE(this,mu,{writable:!0,value:void 0}),nE(this,md,{writable:!0,value:void 0}),nE(this,mp,{writable:!0,value:void 0}),nE(this,mf,{writable:!0,value:void 0}),nE(this,mg,{writable:!0,value:void 0}),nE(this,mm,{writable:!0,value:""}),nE(this,mv,{writable:!0,value:0}),nE(this,mb,{writable:!0,value:new mO}),nE(this,mw,{writable:!0,value:void 0}),nE(this,my,{writable:!0,value:void 0}),nC(this,mw,i),nC(this,my,n),nC(this,mp,r),nC(this,mf,a),[e,t]=nR(this,mx,mk).call(this,e,t);let s=nC(this,mu,[NaN,NaN,NaN,NaN,e,t]);nC(this,mg,[e,t]),nC(this,md,[{line:s,points:n_(this,mg)}]),n_(this,mc).set(s,0)}}function mk(e,t){return pB._normalizePoint(e,t,n_(this,mw),n_(this,my),n_(this,mp))}var m_=new WeakMap,mS=new WeakMap,mE=new WeakMap,mM=new WeakMap,mC=new WeakMap,mT=new WeakMap,mP=new WeakMap,mR=new WeakMap,mI=new WeakMap,mL=new WeakSet,mD=new WeakSet,mF=new WeakSet,mN=new WeakSet;class mO extends pB{build(e,t,i,n,r,a,s){nC(this,mC,t),nC(this,mT,i),nC(this,mP,n),nC(this,mR,r),nC(this,mI,a),nC(this,mE,null!=s?s:0),nC(this,mM,e),nR(this,mF,mB).call(this)}setLastElement(e){return n_(this,mM).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return n_(this,mM).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of n_(this,mM)){if(e.push("M".concat(pB.svgRound(t[4])," ").concat(pB.svgRound(t[5]))),6===t.length){e.push("Z");continue}if(12===t.length){e.push("L".concat(pB.svgRound(t[10])," ").concat(pB.svgRound(t[11])));continue}for(let i=6,n=t.length;i<n;i+=6){let[n,r,a,s,l,o]=t.subarray(i,i+6).map(pB.svgRound);e.push("C".concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l," ").concat(o))}}return e.join("")}serialize(e,t){let i,n,r,a,s,l,o,h,c,[u,d,p,f]=e,g=[],m=[],[b,w,y,x]=nR(this,mD,mj).call(this);switch(n_(this,mR)){case 0:c=pB._rescale,i=u,n=d+f,r=p,a=-f,s=u+b*p,l=d+(1-w-x)*f,o=u+(b+y)*p,h=d+(1-w)*f;break;case 90:c=pB._rescaleAndSwap,i=u,n=d,r=p,a=f,s=u+w*p,l=d+b*f,o=u+(w+x)*p,h=d+(b+y)*f;break;case 180:c=pB._rescale,i=u+p,n=d,r=-p,a=f,s=u+(1-b-y)*p,l=d+w*f,o=u+(1-b)*p,h=d+(w+x)*f;break;case 270:c=pB._rescaleAndSwap,i=u+p,n=d+f,r=-p,a=-f,s=u+(1-w-x)*p,l=d+(1-b-y)*f,o=u+(1-w)*p,h=d+(1-b)*f}for(let{line:e,points:s}of n_(this,mM))g.push(c(e,i,n,r,a,t?Array(e.length):null)),m.push(c(s,i,n,r,a,t?Array(s.length):null));return{lines:g,points:m,rect:[s,l,o,h]}}static deserialize(e,t,i,n,r,a){let s,l,o,h,c,{paths:{lines:u,points:d},rotation:p,thickness:f}=a,g=[];switch(p){case 0:c=pB._rescale,s=-e/i,l=t/n+1,o=1/i,h=-1/n;break;case 90:c=pB._rescaleAndSwap,s=-t/n,l=-e/i,o=1/n,h=1/i;break;case 180:c=pB._rescale,s=e/i+1,l=-t/n,o=-1/i,h=1/n;break;case 270:c=pB._rescaleAndSwap,s=t/n+1,l=e/i+1,o=-1/n,h=-1/i}if(!u)for(let e of(u=[],d)){let t=e.length;if(2===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}let i=new Float32Array(3*(t-2));u.push(i);let[n,r,a,s]=e.subarray(0,4);i.set([NaN,NaN,NaN,NaN,n,r],0);for(let l=4;l<t;l+=2){let t=e[l],o=e[l+1];i.set(pB.createBezierPoints(n,r,a,s,t,o),(l-2)*3),[n,r,a,s]=[a,s,t,o]}}for(let e=0,t=u.length;e<t;e++)g.push({line:c(u[e].map(e=>null!=e?e:NaN),s,l,o,h),points:c(d[e].map(e=>null!=e?e:NaN),s,l,o,h)});let m=new mO;return m.build(g,i,n,1,p,f,r),m}get box(){return n_(this,m_)}updateProperty(e,t){return"stroke-width"===e?nR(this,mN,mz).call(this,t):null}updateParentDimensions(e,t){let[i,n]=e,[r,a]=nR(this,mL,mW).call(this);nC(this,mC,i),nC(this,mT,n),nC(this,mP,t);let[s,l]=nR(this,mL,mW).call(this),o=s-r,h=l-a,c=n_(this,m_);return c[0]-=o,c[1]-=h,c[2]+=2*o,c[3]+=2*h,c}updateRotation(e){return nC(this,mS,e),{path:{transform:this.rotationTransform}}}get viewBox(){return n_(this,m_).map(pB.svgRound).join(" ")}get defaultProperties(){let[e,t]=n_(this,m_);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pB.svgRound(e)," ").concat(pB.svgRound(t))}}}get rotationTransform(){let[,,e,t]=n_(this,m_),i=0,n=0,r=0,a=0,s=0,l=0;switch(n_(this,mS)){case 90:n=t/e,r=-e/t,s=e;break;case 180:i=-1,a=-1,s=e,l=t;break;case 270:n=-t/e,r=e/t,l=t;break;default:return""}return"matrix(".concat(i," ").concat(n," ").concat(r," ").concat(a," ").concat(pB.svgRound(s)," ").concat(pB.svgRound(l),")")}getPathResizingSVGProperties(e){let[t,i,n,r]=e,[a,s]=nR(this,mL,mW).call(this),[l,o,h,c]=n_(this,m_);return Math.abs(h-a)<=pB.PRECISION||Math.abs(c-s)<=pB.PRECISION?{path:{"transform-origin":"".concat(pB.svgRound(t)," ").concat(pB.svgRound(i)),transform:"".concat(this.rotationTransform," translate(").concat(t+n/2-(l+h/2)," ").concat(i+r/2-(o+c/2),")")}}:{path:{"transform-origin":"".concat(pB.svgRound(l)," ").concat(pB.svgRound(o)),transform:"".concat(this.rotationTransform," scale(").concat(h/n," ").concat(c/r,") ")+"translate(".concat(pB.svgRound(a)," ").concat(pB.svgRound(s),") scale(").concat((n-2*a)/(h-2*a)," ").concat((r-2*s)/(c-2*s),") ")+"translate(".concat(pB.svgRound(-a)," ").concat(pB.svgRound(-s),")")}}}getPathResizedSVGProperties(e){let[t,i,n,r]=e,[a,s]=nR(this,mL,mW).call(this),l=n_(this,m_),[o,h,c,u]=l;if(l[0]=t,l[1]=i,l[2]=n,l[3]=r,Math.abs(c-a)<=pB.PRECISION||Math.abs(u-s)<=pB.PRECISION){let e=t+n/2-(o+c/2),a=i+r/2-(h+u/2);for(let{line:t,points:i}of n_(this,mM))pB._translate(t,e,a,t),pB._translate(i,e,a,i);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pB.svgRound(t)," ").concat(pB.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(n-2*a)/(c-2*a),p=(r-2*s)/(u-2*s),f=-d*(o+a)+t+a,g=-p*(h+s)+i+s;if(1!==d||1!==p||0!==f||0!==g)for(let{line:e,points:t}of n_(this,mM))pB._rescale(e,f,g,d,p,e),pB._rescale(t,f,g,d,p,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pB.svgRound(t)," ").concat(pB.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[i,n]=e,[r,a]=t,s=n_(this,m_),l=i-s[0],o=n-s[1];if(n_(this,mC)===r&&n_(this,mT)===a)for(let{line:e,points:t}of n_(this,mM))pB._translate(e,l,o,e),pB._translate(t,l,o,t);else{let e=n_(this,mC)/r,t=n_(this,mT)/a;for(let{line:i,points:n}of(nC(this,mC,r),nC(this,mT,a),n_(this,mM)))pB._rescale(i,l,o,e,t,i),pB._rescale(n,l,o,e,t,n);s[2]*=e,s[3]*=t}return s[0]=i,s[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(pB.svgRound(i)," ").concat(pB.svgRound(n))}}}get defaultSVGProperties(){let e=n_(this,m_);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(pB.svgRound(e[0])," ").concat(pB.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}constructor(...e){super(...e),nI(this,mL),nI(this,mD),nI(this,mF),nI(this,mN),nE(this,m_,{writable:!0,value:void 0}),nE(this,mS,{writable:!0,value:0}),nE(this,mE,{writable:!0,value:void 0}),nE(this,mM,{writable:!0,value:void 0}),nE(this,mC,{writable:!0,value:void 0}),nE(this,mT,{writable:!0,value:void 0}),nE(this,mP,{writable:!0,value:void 0}),nE(this,mR,{writable:!0,value:void 0}),nE(this,mI,{writable:!0,value:void 0})}}function mW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n_(this,mI),t=n_(this,mE)+e/2*n_(this,mP);return n_(this,mR)%180==0?[t/n_(this,mC),t/n_(this,mT)]:[t/n_(this,mT),t/n_(this,mC)]}function mj(){let[e,t,i,n]=n_(this,m_),[r,a]=nR(this,mL,mW).call(this,0);return[e+r,t+a,i-2*r,n-2*a]}function mB(){let e=nC(this,m_,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:t}of n_(this,mM)){if(t.length<=12){for(let i=4,n=t.length;i<n;i+=6){let[n,r]=t.subarray(i,i+2);e[0]=Math.min(e[0],n),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],n),e[3]=Math.max(e[3],r)}continue}let i=t[4],n=t[5];for(let r=6,a=t.length;r<a;r+=6){let[a,s,l,o,h,c]=t.subarray(r,r+6);rf.bezierBoundingBox(i,n,a,s,l,o,h,c,e),i=h,n=c}}let[t,i]=nR(this,mL,mW).call(this);e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}function mz(e){let[t,i]=nR(this,mL,mW).call(this);nC(this,mI,e);let[n,r]=nR(this,mL,mW).call(this),[a,s]=[n-t,r-i],l=n_(this,m_);return l[0]-=a,l[1]-=s,l[2]+=2*a,l[3]+=2*s,l}var mH=new WeakMap;class mU extends gX{updateSVGProperty(e,t){"stroke-width"===e&&(null!=t||(t=this["stroke-width"]),t*=n_(this,mH).realScale),super.updateSVGProperty(e,t)}clone(){let e=new mU(n_(this,mH));return e.updateAll(this),e}constructor(e){super(),nE(this,mH,{writable:!0,value:void 0}),nC(this,mH,e),super.updateProperties({fill:"none",stroke:l5._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}}var mG=new WeakSet;class mV extends g4{static initialize(e,t){l5.initialize(e,t),this._defaultDrawingOptions=new mU(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return re(this,"typesMap",new Map([[nY.INK_THICKNESS,"stroke-width"],[nY.INK_COLOR,"stroke"],[nY.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,n,r){return new mA(e,t,i,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,n,r,a){return mO.deserialize(e,t,i,n,r,a)}static async deserialize(e,t,i){let n=null;if(e instanceof d9){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,opacity:l,borderStyle:{rawWidth:o},popupRef:h},parent:{page:{pageNumber:c}}}=e;n=e={annotationType:nK.INK,color:Array.from(s),thickness:o,opacity:l,paths:{points:t},boxes:null,pageIndex:c-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:h}}let r=await super.deserialize(e,t,i);return r.annotationElementId=e.id||null,r._initialData=n,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:i,opacity:n}=e;this._drawingOptions=mV.getDefaultDrawingOptions({stroke:rf.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:i,rect:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":s}}=this,l={annotationType:nK.INK,color:l5._colorManager.convert(r),opacity:a,thickness:s,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!nR(this,mG,mq).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){let{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}constructor(e){super({...e,name:"inkEditor"}),nI(this,mG),this._willKeepAspectRatio=!0}}function mq(e){let{color:t,thickness:i,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,i)=>e!==t[i])||e.thickness!==i||e.opacity!==n||e.pageIndex!==r}(0,nW._)(mV,"_type","ink"),(0,nW._)(mV,"_editorType",nK.INK),(0,nW._)(mV,"_defaultDrawingOptions",null);var mX=new WeakMap,mK=new WeakMap,mY=new WeakMap,mQ=new WeakMap,mJ=new WeakMap,mZ=new WeakMap,m$=new WeakMap,m0=new WeakMap,m1=new WeakMap,m2=new WeakMap,m3=new WeakSet,m4=new WeakSet,m5=new WeakSet,m6=new WeakSet,m9=new WeakSet,m8=new WeakSet,m7=new WeakSet,ve=new WeakSet;class vt extends l5{static initialize(e,t){l5.initialize(e,t)}static get supportedTypes(){return re(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/".concat(e)))}static get supportedTypesStr(){return re(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(nK.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!(null==(e=this.altTextData)?void 0:e.altText)}}static computeTelemetryFinalData(e){var t,i;let n=e.get("hasAltText");return{hasAltText:null!=(t=n.get(!0))?t:0,hasNoAltText:null!=(i=n.get(!1))?i:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw Error("No ML.");if(!await i.isEnabledFor("altText"))throw Error("ML isn't enabled for alt text.");let{data:n,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,s=await i.guess({name:"altText",request:{data:n,width:r,height:a,channels:n.length/(r*a)}});if(!s)throw Error("No response from the AI service.");if(s.error)throw Error("Error from the AI service.");if(s.cancel)return null;if(!s.output)throw Error("No valid response from the AI service.");let l=s.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){if(n_(this,mK)){var e;nC(this,mX,null),this._uiManager.imageManager.deleteId(n_(this,mK)),null==(e=n_(this,m$))||e.remove(),nC(this,m$,null),n_(this,m0)&&(clearTimeout(n_(this,m0)),nC(this,m0,null))}super.remove()}rebuild(){if(!this.parent){n_(this,mK)&&nR(this,m5,vr).call(this);return}super.rebuild(),null!==this.div&&(n_(this,mK)&&null===n_(this,m$)&&nR(this,m5,vr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(n_(this,mY)||n_(this,mX)||n_(this,mQ)||n_(this,mJ)||n_(this,mK))}get isResizable(){return!0}render(){let e,t;if(this.div)return this.div;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),n_(this,mX)?nR(this,m6,va).call(this):nR(this,m5,vr).call(this),this.width&&!this.annotationElementId){let[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==n_(this,m0)&&clearTimeout(n_(this,m0)),nC(this,m0,setTimeout(()=>{nC(this,m0,null),nR(this,m8,vl).call(this)},200)))}copyCanvas(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);let{width:n,height:r}=n_(this,mX),a=new rz,s=n_(this,mX),l=n,o=r,h=null;if(t){var c,u;if(n>t||r>t){let e=Math.min(t/n,t/r);l=Math.floor(n*e),o=Math.floor(r*e)}let e=(h=document.createElement("canvas")).width=Math.ceil(l*a.sx),i=h.height=Math.ceil(o*a.sy);n_(this,m1)||(s=nR(this,m9,vs).call(this,e,i));let d=h.getContext("2d");d.filter=this._uiManager.hcmFilter;let p="white",f="#cfcfd8";"none"!==this._uiManager.hcmFilter?f="black":(null==(c=(u=window).matchMedia)?void 0:c.call(u,"(prefers-color-scheme: dark)").matches)&&(p="#8f8f9d",f="#42414d");let g=15*a.sx,m=15*a.sy,b=new OffscreenCanvas(2*g,2*m),w=b.getContext("2d");w.fillStyle=p,w.fillRect(0,0,2*g,2*m),w.fillStyle=f,w.fillRect(0,0,g,m),w.fillRect(g,m,g,m),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,e,i),d.drawImage(s,0,0,s.width,s.height,0,0,e,i)}let d=null;if(i){let t,i;if(a.symmetric&&s.width<e&&s.height<e)t=s.width,i=s.height;else if(s=n_(this,mX),n>e||r>e){let a=Math.min(e/n,e/r);t=Math.floor(n*a),i=Math.floor(r*a),n_(this,m1)||(s=nR(this,m9,vs).call(this,t,i))}let l=new OffscreenCanvas(t,i).getContext("2d",{willReadFrequently:!0});l.drawImage(s,0,0,s.width,s.height,0,0,t,i),d={width:t,height:i,data:l.getImageData(0,0,t,i).data}}return{canvas:h,width:l,height:o,imageData:d}}getImageForAltText(){return n_(this,m$)}static async deserialize(e,t,i){let n=null;if(e instanceof pn){var r;let{data:{rect:a,rotation:s,id:l,structParent:o,popupRef:h},container:c,parent:{page:{pageNumber:u}}}=e,d=c.querySelector("canvas"),p=i.imageManager.getFromCanvas(c.id,d);d.remove();let f=(null==(r=await t._structTree.getAriaAttributes("".concat(ry).concat(l)))?void 0:r.get("aria-label"))||"";n=e={annotationType:nK.STAMP,bitmapId:p.id,bitmap:p.bitmap,pageIndex:u-1,rect:a.slice(0),rotation:s,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:f},isSvg:!1,structParent:o,popupRef:h}}let a=await super.deserialize(e,t,i),{rect:s,bitmap:l,bitmapUrl:o,bitmapId:h,isSvg:c,accessibilityData:u}=e;h&&i.imageManager.isValidId(h)?(nC(a,mK,h),l&&nC(a,mX,l)):nC(a,mQ,o),nC(a,m1,c);let[d,p]=a.pageDimensions;return a.width=(s[2]-s[0])/d,a.height=(s[3]-s[1])/p,a.annotationElementId=e.id||null,u&&(a.altTextData=u),a._initialData=n,nC(a,m2,!!n),a}serialize(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:nK.STAMP,bitmapId:n_(this,mK),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:n_(this,m1),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=nR(this,m7,vo).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let t=nR(this,ve,vh).call(this,n);if(t.isSame)return null;t.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=null!=(e=this._initialData.structParent)?e:-1}if(n.id=this.annotationElementId,null===i)return n;i.stamps||(i.stamps=new Map);let s=n_(this,m1)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(i.stamps.has(n_(this,mK))){if(n_(this,m1)){let e=i.stamps.get(n_(this,mK));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=nR(this,m7,vo).call(this,!1))}}else i.stamps.set(n_(this,mK),{area:s,serialized:n}),n.bitmap=nR(this,m7,vo).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}constructor(e){super({...e,name:"stampEditor"}),nI(this,m3),nI(this,m4),nI(this,m5),nI(this,m6),nI(this,m9),nI(this,m8),nI(this,m7),nI(this,ve),nE(this,mX,{writable:!0,value:null}),nE(this,mK,{writable:!0,value:null}),nE(this,mY,{writable:!0,value:null}),nE(this,mQ,{writable:!0,value:null}),nE(this,mJ,{writable:!0,value:null}),nE(this,mZ,{writable:!0,value:""}),nE(this,m$,{writable:!0,value:null}),nE(this,m0,{writable:!0,value:null}),nE(this,m1,{writable:!0,value:!1}),nE(this,m2,{writable:!0,value:!1}),nC(this,mQ,e.bitmapUrl),nC(this,mJ,e.bitmapFile)}}function vi(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void this.remove();nC(this,mX,e.bitmap),t||(nC(this,mK,e.id),nC(this,m1,e.isSvg)),e.file&&nC(this,mZ,e.file.name),nR(this,m6,va).call(this)}function vn(){if(nC(this,mY,null),this._uiManager.enableWaiting(!1),n_(this,m$)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&n_(this,mX)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&n_(this,mX)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function vr(){if(n_(this,mK)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(n_(this,mK)).then(e=>nR(this,m3,vi).call(this,e,!0)).finally(()=>nR(this,m4,vn).call(this));return}if(n_(this,mQ)){let e=n_(this,mQ);nC(this,mQ,null),this._uiManager.enableWaiting(!0),nC(this,mY,this._uiManager.imageManager.getFromUrl(e).then(e=>nR(this,m3,vi).call(this,e)).finally(()=>nR(this,m4,vn).call(this)));return}if(n_(this,mJ)){let e=n_(this,mJ);nC(this,mJ,null),this._uiManager.enableWaiting(!0),nC(this,mY,this._uiManager.imageManager.getFromFile(e).then(e=>nR(this,m3,vi).call(this,e)).finally(()=>nR(this,m4,vn).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=vt.supportedTypesStr;let t=this._uiManager._signal;nC(this,mY,new Promise(i=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),nR(this,m3,vi).call(this,t)}else this.remove();i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>nR(this,m4,vn).call(this))),e.click()}function va(){var e;let{div:t}=this,{width:i,height:n}=n_(this,mX),[r,a]=this.pageDimensions;if(this.width)i=this.width*r,n=this.height*a;else if(i>.75*r||n>.75*a){let e=Math.min(.75*r/i,.75*a/n);i*=e,n*=e}let[s,l]=this.parentDimensions;this.setDims(i*s/r,n*l/a),this._uiManager.enableWaiting(!1);let o=nC(this,m$,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=i/r,this.height=n/a,(null==(e=this._initialOptions)?void 0:e.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),nR(this,m8,vl).call(this),n_(this,m2)||(this.parent.addUndoableEditor(this),nC(this,m2,!0)),this._reportTelemetry({action:"inserted_image"}),n_(this,mZ)&&o.setAttribute("aria-label",n_(this,mZ))}function vs(e,t){let{width:i,height:n}=n_(this,mX),r=i,a=n,s=n_(this,mX);for(;r>2*e||a>2*t;){let i=r,n=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let l=new OffscreenCanvas(r,a);l.getContext("2d").drawImage(s,0,0,i,n,0,0,r,a),s=l.transferToImageBitmap()}return s}function vl(){let[e,t]=this.parentDimensions,{width:i,height:n}=this,r=new rz,a=Math.ceil(i*e*r.sx),s=Math.ceil(n*t*r.sy),l=n_(this,m$);if(!l||l.width===a&&l.height===s)return;l.width=a,l.height=s;let o=n_(this,m1)?n_(this,mX):nR(this,m9,vs).call(this,a,s),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(o,0,0,o.width,o.height,0,0,a,s)}function vo(e){if(e){if(n_(this,m1)){let e=this._uiManager.imageManager.getSvgUrl(n_(this,mK));if(e)return e}let e=document.createElement("canvas");return{width:e.width,height:e.height}=n_(this,mX),e.getContext("2d").drawImage(n_(this,mX),0,0),e.toDataURL()}if(n_(this,m1)){let[e,t]=this.pageDimensions,i=Math.round(this.width*e*rA.PDF_TO_CSS_UNITS),n=Math.round(this.height*t*rA.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(i,n);return r.getContext("2d").drawImage(n_(this,mX),0,0,n_(this,mX).width,n_(this,mX).height,0,0,i,n),r.transferToImageBitmap()}return structuredClone(n_(this,mX))}function vh(e){var t;let{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===i,a=((null==(t=e.accessibilityData)?void 0:t.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}(0,nW._)(vt,"_type","stamp"),(0,nW._)(vt,"_editorType",nK.STAMP);var vc=new WeakMap,vu=new WeakMap,vd=new WeakMap,vp=new WeakMap,vf=new WeakMap,vg=new WeakMap,vm=new WeakMap,vv=new WeakMap,vb=new WeakMap,vw=new WeakMap,vy=new WeakMap,vx=new WeakMap,vA=new WeakMap,vk=new WeakMap,v_=new WeakSet,vS=new WeakMap,vE=new WeakSet,vM=new WeakSet,vC=new WeakSet;class vT{get isEmpty(){return 0===n_(this,vg).size}get isInvisible(){return this.isEmpty&&n_(this,vk).getMode()===nK.NONE}updateToolbar(e){n_(this,vk).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n_(this,vk).getMode();switch(nR(this,vC,vF).call(this),e){case nK.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case nK.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case nK.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;for(let i of nF(vT,vT,vP).values())t.toggle("".concat(i._type,"Editing"),e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=n_(this,vx))?void 0:t.div)}setEditingState(e){n_(this,vk).setEditingState(e)}addCommands(e){n_(this,vk).addCommands(e)}cleanUndoStack(e){n_(this,vk).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==(e=n_(this,vd))||e.div.classList.toggle("disabled",!t)}async enable(){nC(this,vb,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let t of n_(this,vg).values())t.enableEditing(),t.show(!0),t.annotationElementId&&(n_(this,vk).removeChangedExistingAnnotation(t),e.add(t.annotationElementId));if(!n_(this,vd))return void nC(this,vb,!1);for(let t of n_(this,vd).getEditableAnnotations()){if(t.hide(),n_(this,vk).isDeletedAnnotationElement(t.data.id)||e.has(t.data.id))continue;let i=await this.deserialize(t);i&&(this.addOrRebuild(i),i.enableEditing())}nC(this,vb,!1)}disable(){nC(this,vv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,t=new Map;for(let n of n_(this,vg).values()){var i;if(n.disableEditing(),n.annotationElementId){if(null!==n.serialize()){e.set(n.annotationElementId,n);continue}t.set(n.annotationElementId,n),null==(i=this.getEditableAnnotation(n.annotationElementId))||i.show(),n.remove()}}if(n_(this,vd))for(let i of n_(this,vd).getEditableAnnotations()){let{id:n}=i.data;if(n_(this,vk).isDeletedAnnotationElement(n))continue;let r=t.get(n);if(r){r.resetAnnotationElement(i),r.show(!1),i.show();continue}(r=e.get(n))&&(n_(this,vk).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show()}nR(this,vC,vF).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let e of nF(vT,vT,vP).values())n.remove("".concat(e._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),nC(this,vv,!1)}getEditableAnnotation(e){var t;return(null==(t=n_(this,vd))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){n_(this,vk).getActive()!==e&&n_(this,vk).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(null==(e=n_(this,vx))?void 0:e.div)&&!n_(this,vA)){nC(this,vA,new AbortController);let e=n_(this,vk).combinedSignal(n_(this,vA));n_(this,vx).div.addEventListener("pointerdown",nR(this,v_,vR).bind(this),{signal:e}),n_(this,vx).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(null==(e=n_(this,vx))?void 0:e.div)&&n_(this,vA)&&(n_(this,vA).abort(),nC(this,vA,null),n_(this,vx).div.classList.remove("highlighting"))}enableClick(){if(n_(this,vp))return;nC(this,vp,new AbortController);let e=n_(this,vk).combinedSignal(n_(this,vp));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null==(e=n_(this,vp))||e.abort(),nC(this,vp,null)}attach(e){n_(this,vg).set(e.id,e);let{annotationElementId:t}=e;t&&n_(this,vk).isDeletedAnnotationElement(t)&&n_(this,vk).removeDeletedAnnotationElement(e)}detach(e){var t;n_(this,vg).delete(e.id),null==(t=n_(this,vc))||t.removePointerInTextLayer(e.contentDiv),!n_(this,vv)&&e.annotationElementId&&n_(this,vk).addDeletedAnnotationElement(e)}remove(e){this.detach(e),n_(this,vk).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(n_(this,vk).addDeletedAnnotationElement(e.annotationElementId),l5.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),n_(this,vk).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!n_(this,vb)),n_(this,vk).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!n_(this,vf)&&(e._focusEventsAllowed=!1,nC(this,vf,setTimeout(()=>{nC(this,vf,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:n_(this,vk)._signal}),i.focus())},0))),e._structTreeParentId=null==(t=n_(this,vc))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return n_(this,vk).getId()}combinedSignal(e){return n_(this,vk).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null==(e=n_(this,vS))?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){n_(this,vk).updateToolbar(e),n_(this,vk).updateMode(e);let{offsetX:i,offsetY:n}=nR(this,vM,vD).call(this),r=this.getNextId(),a=nR(this,vE,vL).call(this,{parent:this,id:r,x:i,y:n,uiManager:n_(this,vk),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t,i;return await (null==(t=nF(vT,vT,vP).get(null!=(i=e.annotationType)?i:e.annotationEditorType))?void 0:t.deserialize(e,this,n_(this,vk)))||null}createAndAddNewEditor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getNextId(),r=nR(this,vE,vL).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:n_(this,vk),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(nR(this,vM,vD).call(this),!0)}setSelected(e){n_(this,vk).setSelected(e)}toggleSelected(e){n_(this,vk).toggleSelected(e)}unselect(e){n_(this,vk).unselect(e)}pointerup(e){var t;let{isMac:i}=rd.platform;if(0===e.button&&(!e.ctrlKey||!i)&&e.target===this.div&&n_(this,vm)&&(nC(this,vm,!1),null==(t=n_(this,vS))||!t.isDrawer||!n_(this,vS).supportMultipleDrawings)){if(!n_(this,vu))return void nC(this,vu,!0);if(n_(this,vk).getMode()===nK.STAMP)return void n_(this,vk).unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){var t;if(n_(this,vk).getMode()===nK.HIGHLIGHT&&this.enableTextSelection(),n_(this,vm))return void nC(this,vm,!1);let{isMac:i}=rd.platform;if(0!==e.button||e.ctrlKey&&i||e.target!==this.div)return;if(nC(this,vm,!0),null==(t=n_(this,vS))?void 0:t.isDrawer)return void this.startDrawingSession(e);let n=n_(this,vk).getActive();nC(this,vu,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),n_(this,vw))return void n_(this,vS).startDrawing(this,n_(this,vk),!1,e);n_(this,vk).setCurrentDrawingSession(this),nC(this,vw,new AbortController);let t=n_(this,vk).combinedSignal(n_(this,vw));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(nC(this,vy,null),this.commitOrRemove())},{signal:t}),n_(this,vS).startDrawing(this,n_(this,vk),!1,e)}pause(e){if(e){let{activeElement:e}=document;this.div.contains(e)&&nC(this,vy,e);return}n_(this,vy)&&setTimeout(()=>{var e;null==(e=n_(this,vy))||e.focus(),nC(this,vy,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n_(this,vw)?(n_(this,vk).setCurrentDrawingSession(null),n_(this,vw).abort(),nC(this,vw,null),nC(this,vy,null),n_(this,vS).endDrawing(e)):null}findNewParent(e,t,i){let n=n_(this,vk).findParent(t,i);return null!==n&&n!==this&&(n.changeParent(e),!0)}commitOrRemove(){return!!n_(this,vw)&&(this.endDrawingSession(),!0)}onScaleChanging(){n_(this,vw)&&n_(this,vS).onScaleChangingWhenDrawing(this)}destroy(){var e,t;for(let i of(this.commitOrRemove(),(null==(e=n_(this,vk).getActive())?void 0:e.parent)===this&&(n_(this,vk).commitOrRemove(),n_(this,vk).setActiveEditor(null)),n_(this,vf)&&(clearTimeout(n_(this,vf)),nC(this,vf,null)),n_(this,vg).values()))null==(t=n_(this,vc))||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,n_(this,vg).clear(),n_(this,vk).removeLayer(this)}render(e){let{viewport:t}=e;for(let e of(this.viewport=t,rB(this.div,t),n_(this,vk).getEditors(this.pageIndex)))this.add(e),e.rebuild();this.updateMode()}update(e){let{viewport:t}=e;n_(this,vk).commitOrRemove(),nR(this,vC,vF).call(this);let i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,rB(this.div,{rotation:n}),i!==n)for(let e of n_(this,vg).values())e.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return n_(this,vk).viewParameters.realScale}constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:n,accessibilityManager:r,annotationLayer:a,drawLayer:s,textLayer:l,viewport:o,l10n:h}){nI(this,v_),nE(this,vS,{get:vI,set:void 0}),nI(this,vE),nI(this,vM),nI(this,vC),nE(this,vc,{writable:!0,value:void 0}),nE(this,vu,{writable:!0,value:!1}),nE(this,vd,{writable:!0,value:null}),nE(this,vp,{writable:!0,value:null}),nE(this,vf,{writable:!0,value:null}),nE(this,vg,{writable:!0,value:new Map}),nE(this,vm,{writable:!0,value:!1}),nE(this,vv,{writable:!0,value:!1}),nE(this,vb,{writable:!0,value:!1}),nE(this,vw,{writable:!0,value:null}),nE(this,vy,{writable:!0,value:null}),nE(this,vx,{writable:!0,value:null}),nE(this,vA,{writable:!0,value:null}),nE(this,vk,{writable:!0,value:void 0});let c=[...nF(vT,vT,vP).values()];if(!vT._initialized)for(let t of(vT._initialized=!0,c))t.initialize(h,e);e.registerEditorTypes(c),nC(this,vk,e),this.pageIndex=t,this.div=i,nC(this,vc,r),nC(this,vd,a),this.viewport=o,nC(this,vx,l),this.drawLayer=s,this._structTree=n,n_(this,vk).addLayer(this)}}(0,nW._)(vT,"_initialized",!1);var vP={writable:!0,value:new Map([pP,mV,vt,gT].map(e=>[e._editorType,e]))};function vR(e){n_(this,vk).unselectAll();let{target:t}=e;if(t===n_(this,vx).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&n_(this,vx).div.contains(t)){let{isMac:t}=rd.platform;if(0!==e.button||e.ctrlKey&&t)return;n_(this,vk).showAllEditors("highlight",!0,!0),n_(this,vx).div.classList.add("free"),this.toggleDrawing(),gT.startHighlighting(this,"ltr"===n_(this,vk).direction,{target:n_(this,vx).div,x:e.x,y:e.y}),n_(this,vx).div.addEventListener("pointerup",()=>{n_(this,vx).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:n_(this,vk)._signal}),e.preventDefault()}}function vI(){return nF(vT,vT,vP).get(n_(this,vk).getMode())}function vL(e){let t=n_(this,vS);return t?new t.prototype.constructor(e):null}function vD(){let{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),s=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+n),o=(r+s)/2-e,h=(a+l)/2-t,[c,u]=this.viewport.rotation%180==0?[o,h]:[h,o];return{offsetX:c,offsetY:u}}function vF(){for(let e of n_(this,vg).values())e.isEmpty()&&e.remove()}var vN=new WeakMap,vO=new WeakMap,vW=new WeakMap,vj=new WeakMap,vB=new WeakSet,vz=new WeakSet,vH=new WeakSet;class vU{setParent(e){if(!n_(this,vN))return void nC(this,vN,e);if(n_(this,vN)!==e){if(n_(this,vW).size>0)for(let t of n_(this,vW).values())t.remove(),e.append(t);nC(this,vN,e)}}static get _svgFactory(){return re(this,"_svgFactory",new uV)}draw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=nP(this,vO).value++,r=nR(this,vB,vV).call(this),a=vU._svgFactory.createElement("defs");r.append(a);let s=vU._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t&&n_(this,vj).set(n,s);let o=i?nR(this,vz,vq).call(this,a,l):null,h=vU._svgFactory.createElement("use");return r.append(h),h.setAttribute("href","#".concat(l)),this.updateProperties(r,e),n_(this,vW).set(n,r),{id:n,clipPathId:"url(#".concat(o,")")}}drawOutline(e,t){let i,n=nP(this,vO).value++,r=nR(this,vB,vV).call(this),a=vU._svgFactory.createElement("defs");r.append(a);let s=vU._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);if(s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t){let e=vU._svgFactory.createElement("mask");a.append(e),i="mask_p".concat(this.pageIndex,"_").concat(n),e.setAttribute("id",i),e.setAttribute("maskUnits","objectBoundingBox");let t=vU._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");let r=vU._svgFactory.createElement("use");e.append(r),r.setAttribute("href","#".concat(l)),r.setAttribute("stroke","none"),r.setAttribute("fill","black"),r.setAttribute("fill-rule","nonzero"),r.classList.add("mask")}let o=vU._svgFactory.createElement("use");r.append(o),o.setAttribute("href","#".concat(l)),i&&o.setAttribute("mask","url(#".concat(i,")"));let h=o.cloneNode();return r.append(h),o.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),n_(this,vW).set(n,r),n}finalizeDraw(e,t){n_(this,vj).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:i,bbox:n,rootClass:r,path:a}=t,s="number"==typeof e?n_(this,vW).get(e):e;if(s){if(i&&nR(this,vH,vX).call(this,s,i),n&&(nL(vU,vU),vG).call(vU,s,n),r){let{classList:e}=s;for(let[t,i]of Object.entries(r))e.toggle(t,i)}if(a){let e=s.firstChild.firstChild;nR(this,vH,vX).call(this,e,a)}}}updateParent(e,t){if(t===this)return;let i=n_(this,vW).get(e);i&&(n_(t,vN).append(i),n_(this,vW).delete(e),n_(t,vW).set(e,i))}remove(e){n_(this,vj).delete(e),null!==n_(this,vN)&&(n_(this,vW).get(e).remove(),n_(this,vW).delete(e))}destroy(){for(let e of(nC(this,vN,null),n_(this,vW).values()))e.remove();n_(this,vW).clear(),n_(this,vj).clear()}constructor({pageIndex:e}){nI(this,vB),nI(this,vz),nI(this,vH),nE(this,vN,{writable:!0,value:null}),nE(this,vO,{writable:!0,value:0}),nE(this,vW,{writable:!0,value:new Map}),nE(this,vj,{writable:!0,value:new Map}),this.pageIndex=e}}function vG(e,t){let[i,n,r,a]=t,{style:s}=e;s.top="".concat(100*n,"%"),s.left="".concat(100*i,"%"),s.width="".concat(100*r,"%"),s.height="".concat(100*a,"%")}function vV(){let e=vU._svgFactory.create(1,1,!0);return n_(this,vN).append(e),e.setAttribute("aria-hidden",!0),e}function vq(e,t){let i=vU._svgFactory.createElement("clipPath");e.append(i);let n="clip_".concat(t);i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let r=vU._svgFactory.createElement("use");return i.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),n}function vX(e,t){for(let[i,n]of Object.entries(t))null===n?e.removeAttribute(i):e.setAttribute(i,n)}globalThis.pdfjsTestingUtils={HighlightOutliner:fE},nH.AbortException,nH.AnnotationEditorLayer,nH.AnnotationEditorParamsType,nH.AnnotationEditorType,nH.AnnotationEditorUIManager,nH.AnnotationLayer,nH.AnnotationMode,nH.ColorPicker,nH.DOMSVGFactory,nH.DrawLayer,nH.FeatureTest;var vK=nH.GlobalWorkerOptions;nH.ImageKind,nH.InvalidPDFException,nH.MissingPDFException,nH.OPS,nH.OutputScale,nH.PDFDataRangeTransport,nH.PDFDateString,nH.PDFWorker,nH.PasswordResponses,nH.PermissionFlag,nH.PixelsPerInch,nH.RenderingCancelledException,nH.TextLayer,nH.TouchManager,nH.UnexpectedResponseException,nH.Util,nH.VerbosityLevel,nH.XfaLayer,nH.build,nH.createValidAbsoluteUrl,nH.fetchData;var vY=nH.getDocument;nH.getFilenameFromUrl,nH.getPdfFilenameFromUrl,nH.getXfaPageViewport,nH.isDataScheme,nH.isPdfFile,nH.noContextMenu,nH.normalizeUnicode,nH.setLayerDimensions,nH.shadow,nH.stopEvent;var vQ=nH.version,vJ=e.i(43943);let vZ=i7.default.env.NEXT_PUBLIC_OPENAI_API_KEY||"",v$=async e=>{var t,i,n;let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(vZ)},body:JSON.stringify({model:"gpt-3.5-turbo",temperature:.5,top_p:.8,messages:[{role:"system",content:e}]})}),a=await r.json(),s=null==a||null==(n=a.choices)||null==(i=n[0])||null==(t=i.message)?void 0:t.content;return Array.isArray(s)?s.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&"text"in e&&e.text||"").join("")||"":s||""},v0=async e=>{var t,i;let{context:n,user:r,system:a,logMessagesToChatHistory:s=!0,returnFirstResponse:l=!1,chatHistory:o=[],onChatHistoryChange:h,onPDFProgressChange:c}=e,u=[...o,s?{role:"user",message:r||"",hasMore:!1}:null,{role:"assistant",message:s?"I'm thinking...":"Processing PDF...",hasMore:!0}];null==h||h([...u]);let d=u.length-1,p="".concat(n),f="";do{let e=n.substring(Math.min(20481,n.length));n=n.substring(0,Math.min(20480,n.length));let i="Question: ".concat(r,"\n\n")+a.replaceAll("{{context}}",n);if(f=await v$(i),u[d]={role:"assistant",message:(null==u||null==(t=u[d])?void 0:t.message.replaceAll(s?"I'm thinking...":"Processing PDF...",""))+(p.length>20480?f:null==f?void 0:f.substring(0,20480))+"\n\n",hasMore:!l&&e.length>0},n=e,null==c||c((p.length-e.length)/p.length*100),l&&f)break}while(n.length>0)if(!s&&null!==u&&null!==u[d]){let e=null==(i=u[d])?void 0:i.message;return u[d]={message:"Ready! Ask me anything about your PDF.",role:"assistant",hasMore:!1},null==h||h([...u]),{...u[d],message:e}}return null==h||h([...u]),u[d]};async function v1(e){let t=new FileReader;vK.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(vQ,"/pdf.worker.min.mjs");let i=new Promise((e,i)=>{t.onload=()=>{e(t.result)},t.onerror=i});t.readAsArrayBuffer(e);let n=new Uint8Array(await i),r=await vY({data:n}).promise,a=r.numPages,s="";for(let e=1;e<=a;e++){let t=await r.getPage(e);for(let e of(await t.getTextContent()).items)s+=e.str+"\n";s+="\n\n"}return s}window.Buffer=window.Buffer||vJ.Buffer;var b=a,i3=i3,nv=p;function v2(e){return(0,i.jsxs)(b.default,{sx:{position:"relative",display:"inline-flex"},children:[(0,i.jsx)(i3.default,{variant:"determinate",...e}),(0,i.jsx)(b.default,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(nv.default,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}let v3={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},v4=new Uint8Array(16),v5=[];for(let e=0;e<256;++e)v5.push((e+256).toString(16).slice(1));let v6=function(e,i,n){var r,a,s;if(v3.randomUUID&&!i&&!e)return v3.randomUUID();let l=null!=(s=null!=(a=(e=e||{}).random)?a:null==(r=e.rng)?void 0:r.call(e))?s:function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(v4)}();if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i){if((n=n||0)<0||n+16>i.length)throw RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)i[n+e]=l[e];return i}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(v5[e[t+0]]+v5[e[t+1]]+v5[e[t+2]]+v5[e[t+3]]+"-"+v5[e[t+4]]+v5[e[t+5]]+"-"+v5[e[t+6]]+v5[e[t+7]]+"-"+v5[e[t+8]]+v5[e[t+9]]+"-"+v5[e[t+10]]+v5[e[t+11]]+v5[e[t+12]]+v5[e[t+13]]+v5[e[t+14]]+v5[e[t+15]]).toLowerCase()}(l)};var b=a,w=u,v9=e.i(42789),nv=p,v8=e.i(55731),v8=v8,v7=e.i(96498),v7=v7,be=e.i(97576),be=be;function bt(e){let{id:t=v6(),label:r,helperText:a,input:s,...l}=e||{},o=t?"".concat(t,"-input"):void 0,h=a&&t?"".concat(t,"-helper-text"):void 0;return(0,i.jsxs)(v8.default,{...l,children:[r&&(0,i.jsx)(be.default,{htmlFor:o,children:r}),(0,n.cloneElement)(s,{id:o,"aria-describedby":h}),a&&(0,i.jsx)(v7.default,{id:h,children:a})]})}let bi=(0,y.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");function bn(e){let{id:t=v6(),accept:r,label:a,limit:s=1,maxFileSize:l=5e6,variant:o="text",onChange:h,outputType:c="content",...u}=e||{},[d,p]=(0,n.useState)([]),[f,g]=(0,n.useState)([...d]),[m,y]=(0,n.useState)({}),x=(0,n.useRef)(null),A=(0,n.useCallback)(e=>{e.stopPropagation(),e.preventDefault();let t=e.target;if(!t.files)return;let i=Object.values(t.files).map(e=>e);if(i){let e=[...f,...i],t={...m},n=[...d,...i];if(e.forEach(e=>{n.indexOf(e)>s-1?(t[e.name]="File not uploaded.  Maximum number of files exceeded. Must not be more than ".concat(s,"."),n=n.filter(t=>t.name!==e.name)):e.size>l?(t[e.name]="File not uploaded.  Maximum file size exceeded. Must not be more than ".concat(k(l),"."),n=n.filter(t=>t.name!==e.name)):n.indexOf(e)>-1&&(t[e.name]="")}),y(t),g(e),p(n),n&&n.length>0&&["text","dataUri"].includes(o)&&1===s){let e=new FileReader,t=n[0];e.onload=async e=>{var i,r,a,s;return null==h?void 0:h("content"===c?null==(r=e.target)||null==(i=r.result)?void 0:i.toString():"files"===c?n:{filename:t.name,type:t.type,content:(null==(s=e.target)||null==(a=s.result)?void 0:a.toString())||""})},"text"===o?e.readAsText(t):"dataUri"===o&&e.readAsDataURL(t)}}},[f,s,l,m,h,c,d,o]),k=e=>e<1e6?"".concat(Math.floor(e/1e3)," KB"):"".concat((e/1e6).toFixed(1)," MB"),_=e=>{if(!e)return"";let t=e.split(",").map(e=>"*.*"===e?"Any file":"audio/*"===e?"Any audio file":"video/*"===e?"Any video file":"image/*"===e?"Any image file":e.startsWith(".")?e.replace(".","").toUpperCase():e.includes("/")?e.split("/")[1].toUpperCase():e.toUpperCase());return t.length>1&&(t[t.length-1]="or ".concat(t[t.length-1])),t.join(", ")};return(0,i.jsx)(bt,{id:t,fullWidth:!0,...u,variant:"outlined",input:(0,i.jsx)(b.default,{id:t,sx:{border:"1px solid",borderRadius:"4px",display:"flex",p:2,width:"100%"},children:(0,i.jsxs)(v9.Grid,{container:!0,spacing:2,children:[(0,i.jsxs)(v9.Grid,{item:!0,xs:9,children:[a&&(0,i.jsx)(nv.default,{variant:"body1",children:a}),r?(0,i.jsx)(nv.default,{variant:"body1",children:"".concat(_(r)).concat(l?" (max. ".concat(k(l),")"):"")}):(0,i.jsx)(nv.default,{variant:"body1",children:"".concat(_("*.*")).concat(l?" (max. ".concat(k(l),")"):"")})]}),(0,i.jsxs)(v9.Grid,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,i.jsx)(w.default,{color:"primary",variant:"outlined",onClick:e=>{var t,i;e.stopPropagation(),e.preventDefault(),y({}),g([...d]),null==x||null==(i=x.current)||null==(t=i.click)||t.call(i)},sx:{p:1,zIndex:1},children:(0,i.jsx)(b.default,{sx:{p:1},children:"Browse"})}),(0,i.jsx)(b.default,{ref:x,htmlFor:"".concat(t,"__input"),component:"label",children:(0,i.jsx)("input",{type:"file",id:"".concat(t,"__input"),onChange:A,multiple:s>1,accept:r,style:{display:"none"}})})]}),f.length>0?(0,i.jsx)(nm,{sx:{ml:2,mt:2,width:"100%"},children:f.map((e,t)=>(0,i.jsxs)(b.default,{sx:{border:"1px solid",p:2,position:"relative"},children:[(0,i.jsx)(b.default,{display:"flex",children:(0,i.jsxs)(b.default,{sx:{ml:1},children:[(0,i.jsx)(nv.default,{variant:"body1",children:e.name}),(0,i.jsx)(nv.default,{variant:"body2",children:k(e.size)}),(null==m?void 0:m[e.name])&&(0,i.jsx)(nv.default,{variant:"body2",sx:{color:"red"},children:null==m?void 0:m[e.name]})]})}),(0,i.jsx)(w.default,{onClick:t=>{t.stopPropagation(),t.preventDefault();let i=[...d];i.splice(i.indexOf(e),1),g([...i]),p(i),y({}),("text"===o||"dataUri"===o)&&1===s&&(null==h||h("content"===c?"":{filename:"",type:"",content:""}))},startIcon:(0,i.jsx)(bi,{}),color:"info",sx:{border:"none",position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)"}})]},t))}):null]})})})}var br=e.i(57242),ba=e.i(90290),bs=e.i(25652),bl=e.i(41134),bo=e.i(74429),bh=e.i(40672);function bc(e){return(0,ni.default)("MuiDialog",e)}let bu=(0,bh.default)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),bd=n.createContext({});var bp=e.i(26933),bf=e.i(61722),bg=e.i(54512),bm=e.i(50915),bv=e.i(54072);let bb=(0,bf.styled)(bp.default,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),bw=(0,bf.styled)(bs.default,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),by=(0,bf.styled)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.container,t["scroll".concat((0,ba.default)(i.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),bx=(0,bf.styled)(bo.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.paper,t["scrollPaper".concat((0,ba.default)(i.scroll))],t["paperWidth".concat((0,ba.default)(String(i.maxWidth)))],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})((0,bm.default)(e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(bu.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>"xs"!==e).map(e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(bu.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(bu.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}})),bA=n.forwardRef(function(e,t){let r=(0,ng.useDefaultProps)({props:e,name:"MuiDialog"}),a=(0,bg.useTheme)(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":o,"aria-modal":h=!0,BackdropComponent:c,BackdropProps:u,children:d,className:p,disableEscapeKeyDown:f=!1,fullScreen:g=!1,fullWidth:m=!1,maxWidth:b="sm",onBackdropClick:w,onClick:y,onClose:x,open:A,PaperComponent:k=bo.default,PaperProps:_={},scroll:S="paper",slots:E={},slotProps:M={},TransitionComponent:C=bl.default,transitionDuration:T=s,TransitionProps:P,...R}=r,I={...r,disableEscapeKeyDown:f,fullScreen:g,fullWidth:m,maxWidth:b,scroll:S},L=(e=>{let{classes:t,scroll:i,maxWidth:n,fullWidth:r,fullScreen:a}=e,s={root:["root"],container:["container","scroll".concat((0,ba.default)(i))],paper:["paper","paperScroll".concat((0,ba.default)(i)),"paperWidth".concat((0,ba.default)(String(n))),r&&"paperFullWidth",a&&"paperFullScreen"]};return(0,nn.default)(s,bc,t)})(I),D=n.useRef(),F=(0,br.default)(o),N=n.useMemo(()=>({titleId:F}),[F]),O={slots:{transition:C,...E},slotProps:{transition:P,paper:_,backdrop:u,...M}},[W,j]=(0,bv.default)("root",{elementType:bw,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I,className:(0,ne.default)(L.root,p),ref:t}),[B,z]=(0,bv.default)("backdrop",{elementType:bb,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I}),[H,U]=(0,bv.default)("paper",{elementType:bx,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I,className:(0,ne.default)(L.paper,_.className)}),[G,V]=(0,bv.default)("container",{elementType:by,externalForwardedProps:O,ownerState:I,className:(0,ne.default)(L.container)}),[q,X]=(0,bv.default)("transition",{elementType:bl.default,externalForwardedProps:O,ownerState:I,additionalProps:{appear:!0,in:A,timeout:T,role:"presentation"}});return(0,i.jsx)(W,{closeAfterTransition:!0,slots:{backdrop:B},slotProps:{backdrop:{transitionDuration:T,as:c,...z}},disableEscapeKeyDown:f,onClose:x,open:A,onClick:e=>{y&&y(e),D.current&&(D.current=null,w&&w(e),x&&x(e,"backdropClick"))},...j,...R,children:(0,i.jsx)(q,{...X,children:(0,i.jsx)(G,{onMouseDown:e=>{D.current=e.target===e.currentTarget},...V,children:(0,i.jsx)(H,{as:k,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":F,"aria-modal":h,...U,children:(0,i.jsx)(bd.Provider,{value:N,children:d})})})})})});function bk(e){return(0,ni.default)("MuiDialogTitle",e)}let b_=(0,bh.default)("MuiDialogTitle",["root"]),bS=(0,bf.styled)(p.default,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),bE=n.forwardRef(function(e,t){let r=(0,ng.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:a,id:s,...l}=r,o=(e=>{let{classes:t}=e;return(0,nn.default)({root:["root"]},bk,t)})(r),{titleId:h=s}=n.useContext(bd);return(0,i.jsx)(bS,{component:"h2",className:(0,ne.default)(o.root,a),ownerState:r,ref:t,variant:"h6",id:null!=s?s:h,...l})});function bM(e){return(0,ni.default)("MuiDialogContent",e)}(0,bh.default)("MuiDialogContent",["root","dividers"]);let bC=(0,bf.styled)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})((0,bm.default)(e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(b_.root," + &")]:{paddingTop:0}}}]}})),bT=n.forwardRef(function(e,t){let n=(0,ng.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:r,dividers:a=!1,...s}=n,l={...n,dividers:a},o=(e=>{let{classes:t,dividers:i}=e;return(0,nn.default)({root:["root",i&&"dividers"]},bM,t)})(l);return(0,i.jsx)(bC,{className:(0,ne.default)(o.root,r),ownerState:l,ref:t,...s})});function bP(e){return(0,ni.default)("MuiDialogActions",e)}(0,bh.default)("MuiDialogActions",["root","spacing"]);let bR=(0,bf.styled)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),bI=n.forwardRef(function(e,t){let n=(0,ng.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:a=!1,...s}=n,l={...n,disableSpacing:a},o=(e=>{let{classes:t,disableSpacing:i}=e;return(0,nn.default)({root:["root",!i&&"spacing"]},bP,t)})(l);return(0,i.jsx)(bR,{className:(0,ne.default)(o.root,r),ownerState:l,ref:t,...s})});var w=u,i5=i5;let bL=(0,y.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function bD(e){let{open:t=!1,onClose:n}=e,r=()=>{null==n||n()};return(0,i.jsxs)(bA,{open:t,onClose:r,children:[(0,i.jsx)(bE,{children:"Terms of Use"}),(0,i.jsx)(i5.default,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bL,{})}),(0,i.jsx)(bT,{children:(0,i.jsx)(i1,{children:'\n\nWelcome to Bookworm! These Terms of Use govern your use of Bookworm, an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions.\n\nBy accessing or using Bookworm, you agree to be bound by these Terms of Use. If you do not agree with any part of these terms, you may not use Bookworm.\n\n### 1. Use of Bookworm\n\n** 1.1 Use License **\n\n- You may use Bookworm solely for your personal or internal business purposes in accordance with these Terms of Use.\n\n- You may not use Bookworm for any unlawful or unauthorized purpose, including but not limited to violating any applicable laws or regulations.\n\n- You agree not to reproduce, duplicate, copy, sell, resell, or exploit any portion of Bookworm without express written permission from the owner.\n\n### 2. User Content\n\n** 2.1 Ownership of User Content **\n\n- You retain ownership of any content you upload or submit to Bookworm ("User Content").\n\n- By uploading or submitting User Content, you grant Bookworm a worldwide, non-exclusive, royalty-free, transferable license to use, reproduce, distribute, modify, adapt, display, and perform the User Content in connection with Bookworm\'s operation and promotion.\n\n### 3. Privacy\n\n** 3.1 Privacy Policy **\n\n- Bookworm respects your privacy and handles your personal data in accordance with its Privacy Policy.\n\n- By using Bookworm, you consent to the collection, use, and sharing of your information as described in the Privacy Policy.\n\n### 4. Intellectual Property\n\n** 4.1 Ownership of Intellectual Property **\n\n- All content, trademarks, service marks, logos, and other intellectual property rights on Bookworm are the property of their respective owners.\n\n- You may not use any trademarks, service marks, or logos displayed on Bookworm without the prior written consent of the owner.\n\n### 5. Limitation of Liability\n\n** 5.1 Disclaimer of Warranties **\n\n- Bookworm is provided on an "as is" and "as available" basis. We make no warranties or representations about the accuracy or completeness of the content provided by Bookworm.\n\n- In no event shall Bookworm or its affiliates be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or in connection with your use of Bookworm.\n\n### 6. Changes to Terms of Use\n\n** 6.1 Modifications **\n\n- Bookworm reserves the right to modify or replace these Terms of Use at any time. Any changes will be effective immediately upon posting the revised Terms of Use on Bookworm.\n\n- Your continued use of Bookworm after any changes to these Terms of Use constitutes your acceptance of the revised terms.\n\n### 7. Governing Law\n\n** 7.1 Jurisdiction **\n\n- These Terms of Use shall be governed by and construed in accordance with the laws of the state of New Hampshire, without regard to its conflict of law provisions.\n\n### 8. Contact Us\n\n- If you have any questions about these Terms of Use, please contact us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com).\n'})}),(0,i.jsx)(bI,{children:(0,i.jsx)(w.default,{onClick:r,children:"OK"})})]})}function bF(){let[e,t]=n.useState([]),[r,a]=n.useState(""),[s,l]=n.useState(""),[o,h]=n.useState(""),[c,u]=n.useState(0),[d,p]=n.useState(null),[f,g]=n.useState(!1),m=e=>{t(e),u(null)},w=n.useRef(null),y=n.useRef(null),x=async()=>{v0({context:(null==r?void 0:r.length)>20480?s:r,user:"".concat(o),system:'\nBegin relevant content\n{{context}}\nEnd relevant content\n\nProvide relevant answers within the scope of the relevant content.\nAnswer the question only if it is based on the provided relevant content.\nIf the question is outside the scope of the relevant content, respond "I didn\'t see that in the PDF.  Try asking a different question.".\nRefrain from answering questions that are outside the scope of the relevant content.\nUse markdown markup to format your response for better readability.\nUse markdown to bold key points in your response, including names.\nUse markdown to italicize quotes or other key points in your response.\nRefrain from using the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from responding with questions.\nRefrain from including any additional questions in your response.\n',returnFirstResponse:!0,chatHistory:e,onChatHistoryChange:m}),h("")},A=(t,i)=>{if(null==i&&(i=null===c?e.length-1+t:c+t),u(i),null!==i&&i<e.length-1){let r=Math.max(i,2),a=e[r];if(null===a||(null==a?void 0:a.role)==="user"){var n;h((null==a?void 0:a.message)||""),null==y||null==(n=y.current)||n.focus()}else u(r),A(t,r+t)}else h(""),u(null)};return n.useEffect(()=>{if(w.current){var e;w.current.scrollTop=(null==w||null==(e=w.current)?void 0:e.scrollHeight)||0}}),(0,i.jsxs)(b.default,{id:"hero",sx:e=>({width:"100%",backgroundImage:"light"===e.palette.mode?"linear-gradient(180deg, #CEE5FD, #FFF)":"linear-gradient(#02294F, ".concat((0,nb.alpha)("#090E10",0),")"),backgroundSize:"100% 20%",backgroundRepeat:"no-repeat"}),children:[(0,i.jsx)(bD,{open:f,onClose:()=>g(!1)}),(0,i.jsxs)(i4.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",pt:{xs:10},pb:{xs:2}},children:[(0,i.jsxs)(nm,{spacing:2,useFlexGap:!0,sx:{width:{xs:"100%",sm:"70%"}},children:[(0,i.jsxs)(nv.default,{variant:"h1",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignSelf:"center",textAlign:"center",fontSize:"clamp(3.5rem, 10vw, 4rem)"},children:["Welcome to",(0,i.jsx)(nv.default,{variant:"h1",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})]}),(0,i.jsx)(nv.default,{textAlign:"center",color:"text.secondary",sx:{alignSelf:"center",width:{sm:"100%",md:"80%"}},children:"Introducing your AI-powered reading assistant designed to revolutionize the way you interact with PDFs."}),(0,i.jsx)(nm,{direction:{xs:"column",sm:"row"},alignSelf:"center",spacing:1,useFlexGap:!0,sx:{pt:2,width:{xs:"100%"}},children:(0,i.jsx)(bn,{accept:".pdf",label:"Upload your pdf",outputType:"files",sx:{width:{xs:"100%"}},onChange:async t=>{if(t&&t.length>0){var i;let n=await v1(t[0]);a(n);let r=await v0({context:n,user:"Summarize the markdown content.",system:'\nThe user uploaded a PDF file. The content of the file has been converted to markdown.\nHere is the markdown content:\n```\n{{context}}\n```\nRefrain from mentioning the PDF file or the markdown conversion process in your response.\nDo not say the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from omitting any important information in your response.\nRefrain from omitting quotes or key points in your response.\n',logMessagesToChatHistory:!1,chatHistory:e,onChatHistoryChange:m,onPDFProgressChange:p});l((null==r?void 0:r.message)||""),null==y||null==(i=y.current)||i.focus()}}})}),(0,i.jsxs)(nv.default,{variant:"caption",textAlign:"center",sx:{opacity:.8},children:["By using this site, you agree to our",(0,i.jsx)(i9.default,{onClick:()=>g(!0),color:"primary",sx:{cursor:"pointer"},children:"Terms & Conditions"}),"."]})]}),(0,i.jsx)(b.default,{ref:w,sx:e=>({mt:{xs:2},alignSelf:"center",height:{xs:200,sm:400},overflowY:"auto",width:"100%",backgroundImage:"light"===e.palette.mode?'url("/static/images/templates/templates-images/hero-light.png")':'url("/static/images/templates/templates-images/hero-dark.png")',backgroundSize:"cover",borderRadius:"10px",outline:"1px solid",outlineColor:"light"===e.palette.mode?(0,nb.alpha)("#BFCCD9",.5):(0,nb.alpha)("#9CCCFC",.1),boxShadow:"light"===e.palette.mode?"0 0 12px 8px ".concat((0,nb.alpha)("#9CCCFC",.2)):"0 0 24px 12px ".concat((0,nb.alpha)("#033363",.2)),p:2}),children:e.map((e,t)=>(null==e?void 0:e.message)?(0,i.jsxs)(b.default,{sx:{borderRadius:"10px",p:1,my:1,backgroundColor:(null==e?void 0:e.role)==="user"?(0,nb.alpha)("#BFCCD9",.5):(0,nb.alpha)("#9CCCFC",.5)},children:[(null==e?void 0:e.role)==="assistant"?(0,i.jsxs)(nv.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:[(0,i.jsx)(nv.default,{variant:"h6",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"says..."]}):(null==e?void 0:e.message)&&(0,i.jsx)(nv.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:"You..."}),(0,i.jsxs)(nv.default,{variant:"body2",component:"div",sx:{whiteSpace:"pre-wrap",color:(null==e?void 0:e.role)==="user"?"text.primary":"text.secondary"},children:[(0,i.jsx)(i1,{children:null==e?void 0:e.message}),(null==e?void 0:e.message)==="I'm thinking..."&&(null==e?void 0:e.hasMore)?(0,i.jsx)(i3.default,{size:12}):"",(null==e?void 0:e.message)==="Processing PDF..."&&(null==e?void 0:e.hasMore)&&(null!==d?(0,i.jsx)(v2,{value:d,size:18}):(0,i.jsx)(i3.default,{size:18}))]})]},t):null)}),(0,i.jsx)(i8.default,{ref:y,placeholder:"Ask bookworm anything about your PDF...",fullWidth:!0,value:o,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),x()):"ArrowUp"===e.key?A(-1):"ArrowDown"===e.key?A(1):u(null)},multiline:!0,sx:{mt:{xs:2}},endAdornment:(0,i.jsx)(i6.default,{position:"end",children:(0,i.jsxs)(nm,{direction:"row",alignSelf:"center",spacing:1,useFlexGap:!0,sx:{width:{xs:"100%",sm:"auto"}},children:[(0,i.jsx)(i5.default,{"aria-label":"submit user question",disabled:!o||!r,onClick:x,edge:"end",children:(0,i.jsx)(ny,{})}),(0,i.jsx)(i5.default,{"aria-label":"clear chat history",disabled:!(null==e?void 0:e.length),onClick:()=>m([]),edge:"end",children:(0,i.jsx)(nw,{})})]})})})]})]})}var bN=e.i(92527),bO=e.i(53174);let bW=(0,y.default)((0,i.jsx)("path",{d:"m20.45 6 .49-1.06L22 4.45c.39-.18.39-.73 0-.91l-1.06-.49L20.45 2c-.18-.39-.73-.39-.91 0l-.49 1.06-1.05.49c-.39.18-.39.73 0 .91l1.06.49.49 1.05c.17.39.73.39.9 0M8.95 6l.49-1.06 1.06-.49c.39-.18.39-.73 0-.91l-1.06-.48L8.95 2c-.17-.39-.73-.39-.9 0l-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49L8.05 6c.17.39.73.39.9 0m10.6 7.5-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49.49 1.06c.18.39.73.39.91 0l.49-1.06 1.05-.5c.39-.18.39-.73 0-.91l-1.06-.49-.49-1.06c-.17-.38-.73-.38-.9.01m-1.84-4.38-2.83-2.83a.996.996 0 0 0-1.41 0L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.39.39 1.02.39 1.41 0L17.7 10.53c.4-.38.4-1.02.01-1.41m-3.5 2.09L12.8 9.8l1.38-1.38 1.41 1.41z"}),"AutoFixHighRounded"),bj=(0,y.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),bB=(0,y.default)([(0,i.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,i.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),bz=[{icon:(0,i.jsx)(bj,{}),title:"Efficiency and Time-Saving",description:"Bookworm dramatically reduces the time you spend reading and comprehending long PDF documents. By providing concise summaries, it allows you to grasp the key points quickly, freeing up time for other tasks or deeper study on specific areas of interest."},{icon:(0,i.jsx)(bB,{}),title:"Enhanced Understanding",description:"With the ability to ask specific questions about the PDF content, Bookworm enhances your understanding by clarifying complex information and providing detailed insights. This feature is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."},{icon:(0,i.jsx)(bW,{}),title:"Accessibility and Convenience",description:"Bookworm is designed to be accessible anywhere and anytime. Whether youre on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages. This makes it an invaluable tool for students, professionals, and anyone who needs to process written content efficiently."}];function bH(){return(0,i.jsx)(a.default,{id:"highlights",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},color:"white",bgcolor:"#06090a"},children:(0,i.jsxs)(d.default,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsxs)(a.default,{sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:[(0,i.jsx)(p.default,{component:"h2",variant:"h4",children:"Highlights"}),(0,i.jsxs)(p.default,{variant:"body1",sx:{color:"grey.400"},children:[(0,i.jsx)(p.default,{variant:"body1",component:"span",color:"text.contrastText",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","stands out with its advanced AI that not only summarizes PDFs but also answers content-specific questions, offering an intuitive, user-friendly interface that improves over time, making it an essential tool for efficient document handling and deeper comprehension."]})]}),(0,i.jsx)(bO.default,{container:!0,spacing:2.5,children:bz.map((e,t)=>(0,i.jsx)(bO.default,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsxs)(nm,{direction:"column",color:"inherit",component:bN.default,spacing:1,useFlexGap:!0,sx:{p:3,height:"100%",border:"1px solid",borderColor:"grey.800",background:"transparent",backgroundColor:"grey.900"},children:[(0,i.jsx)(a.default,{sx:{opacity:"50%"},children:e.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p.default,{fontWeight:"medium",gutterBottom:!0,children:e.title}),(0,i.jsx)(p.default,{variant:"body2",sx:{color:"grey.400"},children:e.description})]})]})},t))})]})})}var bU=e.i(6586),bG=e.i(52836),bV=e.i(18827),bq=e.i(27001),bX=e.i(66352),bX=bX;function bK(e){return(0,ni.default)("MuiCollapse",e)}(0,bh.default)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let bY=(0,bf.styled)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],"entered"===i.state&&t.entered,"exited"===i.state&&!i.in&&"0px"===i.collapsedSize&&t.hidden]}})((0,bm.default)(e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}})),bQ=(0,bf.styled)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bJ=(0,bf.styled)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bZ=n.forwardRef(function(e,t){let r=(0,ng.useDefaultProps)({props:e,name:"MuiCollapse"}),{addEndListener:a,children:s,className:l,collapsedSize:o="0px",component:h,easing:c,in:u,onEnter:d,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:b,orientation:w="vertical",style:y,timeout:x=bV.duration.standard,TransitionComponent:A=bU.Transition,...k}=r,_={...r,orientation:w,collapsedSize:o},S=(e=>{let{orientation:t,classes:i}=e;return(0,nn.default)({root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]},bK,i)})(_),E=(0,bg.useTheme)(),M=(0,bG.default)(),C=n.useRef(null),T=n.useRef(),P="number"==typeof o?"".concat(o,"px"):o,R="horizontal"===w,I=R?"width":"height",L=n.useRef(null),D=(0,bX.default)(t,L),F=e=>t=>{if(e){let i=L.current;void 0===t?e(i):e(i,t)}},N=()=>C.current?C.current[R?"clientWidth":"clientHeight"]:0,O=F((e,t)=>{C.current&&R&&(C.current.style.position="absolute"),e.style[I]=P,d&&d(e,t)}),W=F((e,t)=>{let i=N();C.current&&R&&(C.current.style.position="");let{duration:n,easing:r}=(0,bq.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"enter"});if("auto"===x){let t=E.transitions.getAutoHeightDuration(i);e.style.transitionDuration="".concat(t,"ms"),T.current=t}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style[I]="".concat(i,"px"),e.style.transitionTimingFunction=r,f&&f(e,t)}),j=F((e,t)=>{e.style[I]="auto",p&&p(e,t)}),B=F(e=>{e.style[I]="".concat(N(),"px"),g&&g(e)}),z=F(m),H=F(e=>{let t=N(),{duration:i,easing:n}=(0,bq.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"exit"});if("auto"===x){let i=E.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(i,"ms"),T.current=i}else e.style.transitionDuration="string"==typeof i?i:"".concat(i,"ms");e.style[I]=P,e.style.transitionTimingFunction=n,b&&b(e)});return(0,i.jsx)(A,{in:u,onEnter:O,onEntered:j,onEntering:W,onExit:B,onExited:z,onExiting:H,addEndListener:e=>{"auto"===x&&M.start(T.current||0,e),a&&a(L.current,e)},nodeRef:L,timeout:"auto"===x?null:x,...k,children:(e,t)=>{let{ownerState:n,...r}=t;return(0,i.jsx)(bY,{as:h,className:(0,ne.default)(S.root,l,{entered:S.entered,exited:!u&&"0px"===P&&S.hidden}[e]),style:{[R?"minWidth":"minHeight"]:P,...y},ref:D,ownerState:{..._,state:e},...r,children:(0,i.jsx)(bQ,{ownerState:{..._,state:e},className:S.wrapper,ref:C,children:(0,i.jsx)(bJ,{ownerState:{..._,state:e},className:S.wrapperInner,children:s})})})}})});bZ&&(bZ.muiSupportAuto=!0);let b$=n.createContext({});var b0=e.i(16e3);function b1(e){return(0,ni.default)("MuiAccordion",e)}let b2=(0,bh.default)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),b3=(0,bf.styled)(bo.default,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{["& .".concat(b2.region)]:t.region},t.root,!i.square&&t.rounded,!i.disableGutters&&t.gutters]}})((0,bm.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],i),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],i)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(b2.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(b2.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(0,bm.default)(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(b2.expanded)]:{margin:"16px 0"}}}]}})),b4=(0,bf.styled)("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),b5=n.forwardRef(function(e,t){let r=(0,ng.useDefaultProps)({props:e,name:"MuiAccordion"}),{children:a,className:s,defaultExpanded:l=!1,disabled:o=!1,disableGutters:h=!1,expanded:c,onChange:u,square:d=!1,slots:p={},slotProps:f={},TransitionComponent:g,TransitionProps:m,...b}=r,[w,y]=(0,b0.default)({controlled:c,default:l,name:"Accordion",state:"expanded"}),x=n.useCallback(e=>{y(!w),u&&u(e,!w)},[w,u,y]),[A,...k]=n.Children.toArray(a),_=n.useMemo(()=>({expanded:w,disabled:o,disableGutters:h,toggle:x}),[w,o,h,x]),S={...r,square:d,disabled:o,disableGutters:h,expanded:w},E=(e=>{let{classes:t,square:i,expanded:n,disabled:r,disableGutters:a}=e;return(0,nn.default)({root:["root",!i&&"rounded",n&&"expanded",r&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},b1,t)})(S),M={slots:{transition:g,...p},slotProps:{transition:m,...f}},[C,T]=(0,bv.default)("root",{elementType:b3,externalForwardedProps:{...M,...b},className:(0,ne.default)(E.root,s),shouldForwardComponentProp:!0,ownerState:S,ref:t,additionalProps:{square:d}}),[P,R]=(0,bv.default)("heading",{elementType:b4,externalForwardedProps:M,className:E.heading,ownerState:S}),[I,L]=(0,bv.default)("transition",{elementType:bZ,externalForwardedProps:M,ownerState:S});return(0,i.jsxs)(C,{...T,children:[(0,i.jsx)(P,{...R,children:(0,i.jsx)(b$.Provider,{value:_,children:A})}),(0,i.jsx)(I,{in:w,timeout:"auto",...L,children:(0,i.jsx)("div",{"aria-labelledby":A.props.id,id:A.props["aria-controls"],role:"region",className:E.region,children:k})})]})});function b6(e){return(0,ni.default)("MuiAccordionDetails",e)}(0,bh.default)("MuiAccordionDetails",["root"]);let b9=(0,bf.styled)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bm.default)(e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),b8=n.forwardRef(function(e,t){let n=(0,ng.useDefaultProps)({props:e,name:"MuiAccordionDetails"}),{className:r,...a}=n,s=(e=>{let{classes:t}=e;return(0,nn.default)({root:["root"]},b6,t)})(n);return(0,i.jsx)(b9,{className:(0,ne.default)(s.root,r),ref:t,ownerState:n,...a})});var b7=e.i(20103);function we(e){return(0,ni.default)("MuiAccordionSummary",e)}let wt=(0,bh.default)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),wi=(0,bf.styled)(b7.default,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bm.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],i),["&.".concat(wt.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(wt.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(wt.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(wt.expanded)]:{minHeight:64}}}]}})),wn=(0,bf.styled)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,bm.default)(e=>{let{theme:t}=e;return{display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(wt.expanded)]:{margin:"20px 0"}}}]}})),wr=(0,bf.styled)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,bm.default)(e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(wt.expanded)]:{transform:"rotate(180deg)"}}})),wa=n.forwardRef(function(e,t){let r=(0,ng.useDefaultProps)({props:e,name:"MuiAccordionSummary"}),{children:a,className:s,expandIcon:l,focusVisibleClassName:o,onClick:h,slots:c,slotProps:u,...d}=r,{disabled:p=!1,disableGutters:f,expanded:g,toggle:m}=n.useContext(b$),b={...r,expanded:g,disabled:p,disableGutters:f},w=(e=>{let{classes:t,expanded:i,disabled:n,disableGutters:r}=e;return(0,nn.default)({root:["root",i&&"expanded",n&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},we,t)})(b),y={slots:c,slotProps:u},[x,A]=(0,bv.default)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,ne.default)(w.root,s),elementType:wi,externalForwardedProps:{...y,...d},ownerState:b,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":g,focusVisibleClassName:(0,ne.default)(w.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{var i;null==(i=e.onClick)||i.call(e,t),m&&m(t),h&&h(t)}})}),[k,_]=(0,bv.default)("content",{className:w.content,elementType:wn,externalForwardedProps:y,ownerState:b}),[S,E]=(0,bv.default)("expandIconWrapper",{className:w.expandIconWrapper,elementType:wr,externalForwardedProps:y,ownerState:b});return(0,i.jsxs)(x,{...A,children:[(0,i.jsx)(k,{..._,children:a}),l&&(0,i.jsx)(S,{...E,children:l})]})});var b=a,nv=p;let ws=(0,y.default)((0,i.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");function wl(){let[e,t]=n.useState(!1),r=e=>(i,n)=>{t(!!n&&e)};return(0,i.jsxs)(i4.Container,{id:"faq",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsx)(nv.default,{component:"h2",variant:"h4",color:"text.primary",sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:"Frequently asked questions"}),(0,i.jsxs)(b.default,{sx:{width:"100%"},children:[(0,i.jsxs)(b5,{expanded:"panel1"===e,onChange:r("panel1"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel1d-content",id:"panel1d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["What is"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions. It offers a user-friendly interface and continuously improves over time to provide efficient document handling and deeper comprehension."})})]}),(0,i.jsxs)(b5,{expanded:"panel2"===e,onChange:r("panel2"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel2d-content",id:"panel2d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","save time?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm dramatically reduces the time spent reading and comprehending long PDF documents by providing concise summaries. This allows users to quickly grasp key points, freeing up time for other tasks or deeper study on specific areas of interest."})})]}),(0,i.jsxs)(b5,{expanded:"panel3"===e,onChange:r("panel3"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","enhance understanding?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm enhances understanding by allowing users to ask specific questions about the PDF content. It clarifies complex information and provides detailed insights, which is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."})})]}),(0,i.jsxs)(b5,{expanded:"panel4"===e,onChange:r("panel4"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel4d-content",id:"panel4d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","accessible anywhere?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is designed to be accessible anywhere and anytime. Whether you're on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages."})})]}),(0,i.jsxs)(b5,{expanded:"panel5"===e,onChange:r("panel5"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel5d-content",id:"panel5d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Who can benefit from using"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is beneficial for students, professionals, and anyone who deals with large volumes of PDF documents. It helps streamline document handling, improve comprehension, and save time, making it an invaluable tool for various tasks and industries."})})]}),(0,i.jsxs)(b5,{expanded:"panel6"===e,onChange:r("panel6"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel6d-content",id:"panel6d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","handle different types of PDF documents?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is versatile and can handle various types of PDF documents, including academic papers, technical manuals, reports, and more. Its advanced AI capabilities adapt to different content structures and complexities to provide accurate summaries and insights."})})]}),(0,i.jsxs)(b5,{expanded:"panel7"===e,onChange:r("panel7"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel7d-content",id:"panel7d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","easy to use?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm offers an intuitive, user-friendly interface that is easy to navigate. Its features are designed to be accessible and straightforward, allowing users to upload documents, ask questions, and interact with the content seamlessly."})})]}),(0,i.jsxs)(b5,{expanded:"panel8"===e,onChange:r("panel8"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel8d-content",id:"panel8d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Does"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","require any installation?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"No, Bookworm is a web-based application that does not require any installation. Users can access it directly through their web browsers, making it convenient to use on any device with an internet connection."})})]}),(0,i.jsxs)(b5,{expanded:"panel9"===e,onChange:r("panel9"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel9d-content",id:"panel9d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","secure?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm takes user privacy and data security seriously. It uses encryption and other security measures to protect user data and ensure confidentiality while handling PDF documents. Additionally, Bookworm does not store uploaded documents after processing."})})]}),(0,i.jsxs)(b5,{expanded:"panel10"===e,onChange:r("panel10"),children:[(0,i.jsx)(wa,{expandIcon:(0,i.jsx)(ws,{}),"aria-controls":"panel10d-content",id:"panel10d-header",children:(0,i.jsxs)(nv.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(nv.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","be used for collaborative work?"]})}),(0,i.jsx)(b8,{children:(0,i.jsx)(nv.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Currently, Bookworm is primarily designed for individual use. However, future updates may include collaborative features to facilitate teamwork and document sharing among users."})})]})]})]})}var b=a,w=u,i5=i5,i9=i9,wo=e.i(15134),wo=wo,nv=p;let wh=(0,y.default)((0,i.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),wc=(0,y.default)((0,i.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),wu={width:"140px",height:"auto"};function wd(){return(0,i.jsxs)(nv.default,{variant:"body2",color:"text.secondary",mt:1,children:["Copyright  ",(0,i.jsx)(i9.default,{href:"https://github.com/rfranks/bookworm",children:(0,i.jsx)(nv.default,{variant:"body2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})})," ",new Date().getFullYear()]})}function wp(){let[e,t]=n.useState(""),r=e=>{let i=document.getElementById(e);if(i){let e=i.offsetTop-128;i.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),t("")}};return(0,i.jsxs)(i4.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:4,sm:8},py:{xs:8,sm:10},textAlign:{sm:"center",md:"left"}},children:[(0,i.jsx)(bD,{open:"terms"===e,onClose:()=>t("")}),(0,i.jsxs)(bA,{open:"aboutUs"===e,onClose:()=>t(""),children:[(0,i.jsx)(bE,{children:"About Us"}),(0,i.jsx)(i5.default,{"aria-label":"close",onClick:()=>t(""),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bL,{})}),(0,i.jsx)(bT,{children:(0,i.jsx)(i1,{children:"\nBookworm is an innovative AI-powered tool designed to revolutionize the way we interact with PDF documents. Our mission is to empower users to efficiently handle and comprehend large volumes of textual content with ease.\n\n## Our Vision\n\nAt Bookworm, we envision a future where accessing and understanding complex documents is effortless. By leveraging advanced artificial intelligence technologies, we aim to provide users with intelligent summaries, insightful analysis, and instant answers to content-specific questions.\n\n## Our Mission\n\nOur mission is to simplify the process of document handling and comprehension. We strive to save users time and effort by offering a user-friendly interface that allows for seamless interaction with PDF documents. Whether you're a student, professional, or researcher, Bookworm is your essential companion for unlocking the wealth of knowledge hidden within your documents.\n\n## Key Features\n\n- **Summarization**: Bookworm generates concise summaries of PDF documents, enabling users to grasp key points quickly.\n- **Question-Answering**: With Bookworm's question-answering capability, users can ask specific questions about the content and receive instant answers.\n- **Continuous Improvement**: Bookworm's AI algorithms continuously learn and improve over time, ensuring that users receive the most accurate and relevant information.\n- **Accessibility**: Bookworm is accessible anywhere, anytime, allowing users to upload and interact with documents on the go.\n\n## Meet the Team\n\nOur team consists of passionate individuals dedicated to making document handling and comprehension more efficient and accessible. With expertise in artificial intelligence, natural language processing, and user experience design, we're committed to delivering an exceptional user experience with Bookworm.\n\n## Contact Us\n\nHave questions or feedback? We'd love to hear from you! Feel free to reach out to us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com) and join us on our mission to revolutionize document handling and comprehension with Bookworm.\n"})}),(0,i.jsx)(bI,{children:(0,i.jsx)(w.default,{onClick:()=>t(""),children:"OK"})})]}),(0,i.jsxs)(b.default,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},width:"100%",justifyContent:"space-between"},children:[(0,i.jsx)(b.default,{sx:{display:"flex",flexDirection:"column",gap:4,minWidth:{xs:"100%",sm:"60%"}},children:(0,i.jsxs)(b.default,{sx:{width:{xs:"100%",sm:"60%"}},children:[(0,i.jsx)(b.default,{sx:{ml:"-15px"},children:(0,i.jsx)(_.default,{src:"/logo192.png",style:wu,alt:"bookworm logo",width:192,height:194})}),(0,i.jsx)(nv.default,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Newsletter"}),(0,i.jsx)(nv.default,{variant:"body2",color:"text.secondary",mb:2,children:"Subscribe to our newsletter for weekly updates and promotions."}),(0,i.jsxs)(nm,{direction:"row",spacing:1,useFlexGap:!0,children:[(0,i.jsx)(wo.default,{id:"outlined-basic",hiddenLabel:!0,size:"small",variant:"outlined",fullWidth:!0,"aria-label":"Enter your email address",placeholder:"Your email address",inputProps:{autoComplete:"off","aria-label":"Enter your email address"}}),(0,i.jsx)(w.default,{variant:"contained",color:"primary",sx:{flexShrink:0},children:"Subscribe"})]})]})}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("highlights"),children:"Highlights"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("pricing"),children:"Pricing"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("faq"),children:"FAQs"})]}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(nv.default,{variant:"body2",fontWeight:600,children:"Company"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("aboutUs"),children:"About us"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Careers"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Press"})]}),(0,i.jsxs)(b.default,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(nv.default,{variant:"body2",fontWeight:600,children:"Legal"}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Privacy"}),(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Contact"})]})]}),(0,i.jsxs)(b.default,{sx:{display:"flex",justifyContent:"space-between",pt:{xs:4,sm:8},width:"100%",borderTop:"1px solid",borderColor:"divider"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(i9.default,{color:"text.secondary",href:"#",children:"Privacy Policy"}),(0,i.jsx)(nv.default,{display:"inline",sx:{mx:.5,opacity:.5},children:""}),(0,i.jsx)(i9.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms of Service"}),(0,i.jsx)(wd,{})]}),(0,i.jsxs)(nm,{direction:"row",justifyContent:"left",spacing:1,useFlexGap:!0,sx:{color:"text.secondary"},children:[(0,i.jsx)(i5.default,{color:"inherit",href:"https://github.com/rfranks/bookworm","aria-label":"GitHub",sx:{alignSelf:"center"},children:(0,i.jsx)(wh,{})}),(0,i.jsx)(i5.default,{color:"inherit",href:"https://www.linkedin.com/in/richardfranksjr/","aria-label":"LinkedIn",sx:{alignSelf:"center"},children:(0,i.jsx)(wc,{})})]})]})]})}function wf(){let[e,t]=n.useState("light"),h=(0,o.createTheme)({palette:{mode:e}});return(0,i.jsxs)(l.ThemeProvider,{theme:h,children:[(0,i.jsx)(r.default,{}),(0,i.jsx)(E,{mode:e,toggleColorMode:()=>{t(e=>"dark"===e?"light":"dark")}}),(0,i.jsx)(bF,{}),(0,i.jsxs)(a.default,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(bH,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(wl,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(wp,{})]})]})}}]);