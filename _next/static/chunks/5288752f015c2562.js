(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95672,(e,t,i)=>{var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,r=/\n/g,a=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,h=/^[;\s]*/,c=/^\s+|\s+$/g;function u(e){return e?e.replace(c,""):""}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var i=1,c=1;function d(e){var t=e.match(r);t&&(i+=t.length);var n=e.lastIndexOf("\n");c=~n?e.length-n:c+e.length}function p(){var e={line:i,column:c};return function(t){return t.position=new f(e),b(a),t}}function f(e){this.start=e,this.end={line:i,column:c},this.source=t.source}f.prototype.content=e;var g=[];function m(n){var r=Error(t.source+":"+i+":"+c+": "+n);if(r.reason=n,r.filename=t.source,r.line=i,r.column=c,r.source=e,t.silent)g.push(r);else throw r}function b(t){var i=t.exec(e);if(i){var n=i[0];return d(n),e=e.slice(n.length),i}}function w(e){var t;for(e=e||[];t=y();)!1!==t&&e.push(t);return e}function y(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var i=2;""!=e.charAt(i)&&("*"!=e.charAt(i)||"/"!=e.charAt(i+1));)++i;if(i+=2,""===e.charAt(i-1))return m("End of comment missing");var n=e.slice(2,i-2);return c+=2,d(n),e=e.slice(i),c+=2,t({type:"comment",comment:n})}}b(a);var x,A=[];for(w(A);x=function(){var e=p(),t=b(s);if(t){if(y(),!b(l))return m("property missing ':'");var i=b(o),r=e({type:"declaration",property:u(t[0].replace(n,"")),value:i?u(i[0].replace(n,"")):""});return b(h),r}}();)!1!==x&&(A.push(x),w(A));return A}},70454,(e,t,i)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=null;if(!e||"string"!=typeof e)return i;var n=(0,r.default)(e),a="function"==typeof t;return n.forEach(function(e){if("declaration"===e.type){var n=e.property,r=e.value;a?t(n,r,e):r&&((i=i||{})[n]=r)}}),i};var r=n(e.r(95672))},65185,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,a=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},h=function(e,t){return"".concat(t,"-")};i.camelCase=function(e,t){var i;return(void 0===t&&(t={}),!(i=e)||a.test(i)||n.test(i))?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(l,h):e.replace(s,h)).replace(r,o))}},15511,(e,t,i)=>{"use strict";var n=(e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e.r(70454)),r=e.r(65185);function a(e,t){var i={};return e&&"string"==typeof e&&(0,n.default)(e,function(e,n){e&&n&&(i[(0,r.camelCase)(e,t)]=n)}),i}a.default=a,t.exports=a},4100,(e,t,i)=>{"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},o=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return void 0===t||n.call(e,t)},h=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;else if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,i,n,r,a,s,u=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},d=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});d<p;++d)if(t=arguments[d],null!=t)for(i in t)n=c(u,i),u!==(r=c(t,i))&&(f&&r&&(o(r)||(a=l(r)))?(a?(a=!1,s=n&&l(n)?n:[]):s=n&&o(n)?n:{},h(u,{name:i,newValue:e(f,s,r)})):void 0!==r&&h(u,{name:i,newValue:r}));return u}},1484,e=>{"use strict";let t;e.s(["default",()=>wt],1484);var i=e.i(43476),n=e.i(71645),r=e.i(62406),a=e.i(63665),s=e.i(98166),l=e.i(75756),o=e.i(84240),h=e.i(28885),c=e.i(72260),u=e.i(22030),d=e.i(54526),p=e.i(89820),f=e.i(51449),g=e.i(48251),m=e.i(31526),b=e.i(59946),w=e.i(57688);let y={width:"64px",height:"auto",cursor:"pointer"},x=function(e){let{mode:t,toggleColorMode:r}=e,[l,o]=n.useState(!1),x=e=>()=>{o(e)},A=e=>{let t=document.getElementById(e);if(t){let e=t.offsetTop-128;t.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),o(!1)}};return(0,i.jsx)("div",{children:(0,i.jsx)(h.default,{position:"fixed",sx:{boxShadow:0,bgcolor:"transparent",backgroundImage:"none",mt:2},children:(0,i.jsx)(d.default,{maxWidth:"lg",children:(0,i.jsxs)(c.default,{variant:"regular",sx:e=>({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,borderRadius:"999px",bgcolor:"light"===e.palette.mode?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(24px)",maxHeight:40,border:"1px solid",borderColor:"divider",boxShadow:"light"===e.palette.mode?"0 0 1px rgba(85, 166, 246, 0.1), 1px 1.5px 2px -1px rgba(85, 166, 246, 0.15), 4px 4px 12px -2.5px rgba(85, 166, 246, 0.15)":"0 0 1px rgba(2, 31, 59, 0.7), 1px 1.5px 2px -1px rgba(2, 31, 59, 0.65), 4px 4px 12px -2.5px rgba(2, 31, 59, 0.65)"}),children:[(0,i.jsxs)(a.default,{sx:{flexGrow:1,display:"flex",alignItems:"center",ml:"-18px",px:0},children:[(0,i.jsx)(w.default,{src:"/logo192.png",style:y,alt:"bookworm logo",width:192,height:194}),(0,i.jsx)(p.default,{onClick:()=>A("hero"),variant:"h4",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"}},children:[(0,i.jsx)(f.default,{onClick:()=>A("highlights"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Highlights"})}),(0,i.jsx)(f.default,{onClick:()=>A("pricing"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"Pricing"})}),(0,i.jsx)(f.default,{onClick:()=>A("faq"),sx:{py:"6px",px:"12px"},children:(0,i.jsx)(p.default,{variant:"body2",color:"text.primary",children:"FAQ"})})]})]}),(0,i.jsxs)(a.default,{sx:{display:{xs:"none",md:"flex"},gap:.5,alignItems:"center"},children:[(0,i.jsx)(b.default,{mode:t,toggleColorMode:r}),(0,i.jsx)(u.default,{color:"primary",variant:"text",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",children:"Sign in"}),(0,i.jsx)(u.default,{color:"primary",variant:"contained",size:"small",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",children:"Sign up"})]}),(0,i.jsxs)(a.default,{sx:{display:{sm:"",md:"none"}},children:[(0,i.jsx)(u.default,{variant:"text",color:"primary","aria-label":"menu",onClick:x(!0),sx:{minWidth:"30px",p:"4px"},children:(0,i.jsx)(m.default,{})}),(0,i.jsx)(g.default,{anchor:"right",open:l,onClose:x(!1),children:(0,i.jsxs)(a.default,{sx:{minWidth:"60dvw",p:2,backgroundColor:"background.paper",flexGrow:1},children:[(0,i.jsx)(a.default,{sx:{display:"flex",flexDirection:"column",alignItems:"end",flexGrow:1},children:(0,i.jsx)(b.default,{mode:t,toggleColorMode:r})}),(0,i.jsx)(f.default,{onClick:()=>A("features"),children:"Features"}),(0,i.jsx)(f.default,{onClick:()=>A("testimonials"),children:"Testimonials"}),(0,i.jsx)(f.default,{onClick:()=>A("highlights"),children:"Highlights"}),(0,i.jsx)(f.default,{onClick:()=>A("pricing"),children:"Pricing"}),(0,i.jsx)(f.default,{onClick:()=>A("faq"),children:"FAQ"}),(0,i.jsx)(s.default,{}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"contained",component:"a",href:"/material-ui/getting-started/templates/sign-up/",target:"_blank",sx:{width:"100%"},children:"Sign up"})}),(0,i.jsx)(f.default,{children:(0,i.jsx)(u.default,{color:"primary",variant:"outlined",component:"a",href:"/material-ui/getting-started/templates/sign-in/",target:"_blank",sx:{width:"100%"},children:"Sign in"})})]})})]})]})})})})};function A(){}function k(){}RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let _=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),S=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),E={};function M(e,t){return((t||E).jsx?S:_).test(e)}let C=/[ \t\n\f\r]/g;function T(e){return""===e.replace(C,"")}class P{constructor(e,t){this.attribute=t,this.property=e}}P.prototype.attribute="",P.prototype.booleanish=!1,P.prototype.boolean=!1,P.prototype.commaOrSpaceSeparated=!1,P.prototype.commaSeparated=!1,P.prototype.defined=!1,P.prototype.mustUseProperty=!1,P.prototype.number=!1,P.prototype.overloadedBoolean=!1,P.prototype.property="",P.prototype.spaceSeparated=!1,P.prototype.space=void 0,e.s(["boolean",()=>I,"booleanish",()=>L,"commaOrSpaceSeparated",()=>W,"commaSeparated",()=>O,"number",()=>F,"overloadedBoolean",()=>D,"spaceSeparated",()=>N],744);let R=0,I=j(),L=j(),D=j(),F=j(),N=j(),O=j(),W=j();function j(){return 2**++R}var B=e.i(744);let z=Object.keys(B);class H extends P{constructor(e,t,i,n){let r=-1;if(super(e,t),function(e,t,i){i&&(e[t]=i)}(this,"space",n),"number"==typeof i)for(;++r<z.length;){let e=z[r];!function(e,t,i){i&&(e[t]=i)}(this,z[r],(i&B[e])===B[e])}}}function U(e){return e.toLowerCase()}H.prototype.defined=!0;let G=/[A-Z]/g,V=/-[a-z]/g,q=/^data[-\w.:]+$/i;function X(e){return"-"+e.toLowerCase()}function K(e){return e.charAt(1).toUpperCase()}let Y={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};class Q{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}function J(e,t){let i={},n={};for(let t of e)Object.assign(i,t.property),Object.assign(n,t.normal);return new Q(i,n,t)}function Z(e){let t={},i={};for(let[n,r]of Object.entries(e.properties)){let a=new H(n,e.transform(e.attributes||{},n),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),t[n]=a,i[U(n)]=n,i[U(a.attribute)]=n}return new Q(t,i,e.space)}Q.prototype.normal={},Q.prototype.property={},Q.prototype.space=void 0;let $=Z({properties:{ariaActiveDescendant:null,ariaAtomic:L,ariaAutoComplete:null,ariaBusy:L,ariaChecked:L,ariaColCount:F,ariaColIndex:F,ariaColSpan:F,ariaControls:N,ariaCurrent:null,ariaDescribedBy:N,ariaDetails:null,ariaDisabled:L,ariaDropEffect:N,ariaErrorMessage:null,ariaExpanded:L,ariaFlowTo:N,ariaGrabbed:L,ariaHasPopup:null,ariaHidden:L,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:N,ariaLevel:F,ariaLive:null,ariaModal:L,ariaMultiLine:L,ariaMultiSelectable:L,ariaOrientation:null,ariaOwns:N,ariaPlaceholder:null,ariaPosInSet:F,ariaPressed:L,ariaReadOnly:L,ariaRelevant:null,ariaRequired:L,ariaRoleDescription:N,ariaRowCount:F,ariaRowIndex:F,ariaRowSpan:F,ariaSelected:L,ariaSetSize:F,ariaSort:null,ariaValueMax:F,ariaValueMin:F,ariaValueNow:F,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function ee(e,t){return t in e?e[t]:t}function et(e,t){return ee(e,t.toLowerCase())}let ei=Z({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:O,acceptCharset:N,accessKey:N,action:null,allow:null,allowFullScreen:I,allowPaymentRequest:I,allowUserMedia:I,alt:null,as:null,async:I,autoCapitalize:null,autoComplete:N,autoFocus:I,autoPlay:I,blocking:N,capture:null,charSet:null,checked:I,cite:null,className:N,cols:F,colSpan:null,content:null,contentEditable:L,controls:I,controlsList:N,coords:F|O,crossOrigin:null,data:null,dateTime:null,decoding:null,default:I,defer:I,dir:null,dirName:null,disabled:I,download:D,draggable:L,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:I,formTarget:null,headers:N,height:F,hidden:D,high:F,href:null,hrefLang:null,htmlFor:N,httpEquiv:N,id:null,imageSizes:null,imageSrcSet:null,inert:I,inputMode:null,integrity:null,is:null,isMap:I,itemId:null,itemProp:N,itemRef:N,itemScope:I,itemType:N,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:I,low:F,manifest:null,max:null,maxLength:F,media:null,method:null,min:null,minLength:F,multiple:I,muted:I,name:null,nonce:null,noModule:I,noValidate:I,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:I,optimum:F,pattern:null,ping:N,placeholder:null,playsInline:I,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:I,referrerPolicy:null,rel:N,required:I,reversed:I,rows:F,rowSpan:F,sandbox:N,scope:null,scoped:I,seamless:I,selected:I,shadowRootClonable:I,shadowRootDelegatesFocus:I,shadowRootMode:null,shape:null,size:F,sizes:null,slot:null,span:F,spellCheck:L,src:null,srcDoc:null,srcLang:null,srcSet:null,start:F,step:null,style:null,tabIndex:F,target:null,title:null,translate:null,type:null,typeMustMatch:I,useMap:null,value:L,width:F,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:N,axis:null,background:null,bgColor:null,border:F,borderColor:null,bottomMargin:F,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:I,declare:I,event:null,face:null,frame:null,frameBorder:null,hSpace:F,leftMargin:F,link:null,longDesc:null,lowSrc:null,marginHeight:F,marginWidth:F,noResize:I,noHref:I,noShade:I,noWrap:I,object:null,profile:null,prompt:null,rev:null,rightMargin:F,rules:null,scheme:null,scrolling:L,standby:null,summary:null,text:null,topMargin:F,valueType:null,version:null,vAlign:null,vLink:null,vSpace:F,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:I,disableRemotePlayback:I,prefix:null,property:null,results:F,security:null,unselectable:null},space:"html",transform:et}),en=Z({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:W,accentHeight:F,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:F,amplitude:F,arabicForm:null,ascent:F,attributeName:null,attributeType:null,azimuth:F,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:F,by:null,calcMode:null,capHeight:F,className:N,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:F,diffuseConstant:F,direction:null,display:null,dur:null,divisor:F,dominantBaseline:null,download:I,dx:null,dy:null,edgeMode:null,editable:null,elevation:F,enableBackground:null,end:null,event:null,exponent:F,externalResourcesRequired:null,fill:null,fillOpacity:F,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:O,g2:O,glyphName:O,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:F,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:F,horizOriginX:F,horizOriginY:F,id:null,ideographic:F,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:F,k:F,k1:F,k2:F,k3:F,k4:F,kernelMatrix:W,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:F,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:F,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:F,overlineThickness:F,paintOrder:null,panose1:null,path:null,pathLength:F,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:N,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:F,pointsAtY:F,pointsAtZ:F,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:W,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:W,rev:W,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:W,requiredFeatures:W,requiredFonts:W,requiredFormats:W,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:F,specularExponent:F,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:F,strikethroughThickness:F,string:null,stroke:null,strokeDashArray:W,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:F,strokeOpacity:F,strokeWidth:null,style:null,surfaceScale:F,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:W,tabIndex:F,tableValues:null,target:null,targetX:F,targetY:F,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:W,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:F,underlineThickness:F,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:F,values:null,vAlphabetic:F,vMathematical:F,vectorEffect:null,vHanging:F,vIdeographic:F,version:null,vertAdvY:F,vertOriginX:F,vertOriginY:F,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:F,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ee}),er=Z({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),ea=Z({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:et}),es=Z({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),el=J([$,ei,er,ea,es],"html"),eo=J([$,en,er,ea,es],"svg");var eh=e.i(15511);let ec=ed("end"),eu=ed("start");function ed(e){return function(t){let i=t&&t.position&&t.position[e]||{};if("number"==typeof i.line&&i.line>0&&"number"==typeof i.column&&i.column>0)return{line:i.line,column:i.column,offset:"number"==typeof i.offset&&i.offset>-1?i.offset:void 0}}}function ep(e){return e&&"object"==typeof e?"position"in e||"type"in e?eg(e.position):"start"in e||"end"in e?eg(e):"line"in e||"column"in e?ef(e):"":""}function ef(e){return em(e&&e.line)+":"+em(e&&e.column)}function eg(e){return ef(e&&e.start)+"-"+ef(e&&e.end)}function em(e){return e&&"number"==typeof e?e:1}class ev extends Error{constructor(e,t,i){super(),"string"==typeof t&&(i=t,t=void 0);let n="",r={},a=!1;if(t&&(r="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?n=e:!r.cause&&e&&(a=!0,n=e.message,r.cause=e),!r.ruleId&&!r.source&&"string"==typeof i){let e=i.indexOf(":");-1===e?r.ruleId=i:(r.source=i.slice(0,e),r.ruleId=i.slice(e+1))}if(!r.place&&r.ancestors&&r.ancestors){let e=r.ancestors[r.ancestors.length-1];e&&(r.place=e.position)}let s=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=n,this.line=s?s.line:void 0,this.name=ep(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=a&&r.cause&&"string"==typeof r.cause.stack?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ev.prototype.file="",ev.prototype.name="",ev.prototype.reason="",ev.prototype.message="",ev.prototype.stack="",ev.prototype.column=void 0,ev.prototype.line=void 0,ev.prototype.ancestors=void 0,ev.prototype.cause=void 0,ev.prototype.fatal=void 0,ev.prototype.place=void 0,ev.prototype.ruleId=void 0,ev.prototype.source=void 0;let eb={}.hasOwnProperty,ew=new Map,ey=/[A-Z]/g,ex=new Set(["table","tbody","thead","tfoot","tr"]),eA=new Set(["td","th"]),ek="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function e_(e,t,i){return"element"===t.type?function(e,t,i){let n=e.schema;"svg"===t.tagName.toLowerCase()&&"html"===n.space&&(e.schema=eo),e.ancestors.push(t);let r=eC(e,t.tagName,!1),a=function(e,t){let i,n,r={};for(n in t.properties)if("children"!==n&&eb.call(t.properties,n)){let a=function(e,t,i){let n=function(e,t){let i=U(t),n=t,r=P;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&"data"===i.slice(0,4)&&q.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(V,K);n="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!V.test(e)){let i=e.replace(G,X);"-"!==i.charAt(0)&&(i="-"+i),t="data"+i}}r=H}return new r(n,t)}(e.schema,t);if(!(null==i||"number"==typeof i&&Number.isNaN(i))){if(Array.isArray(i)&&(i=n.commaSeparated?function(e,t){let i={};return(""===e[e.length-1]?[...e,""]:e).join((i.padRight?" ":"")+","+(!1===i.padLeft?"":" ")).trim()}(i):i.join(" ").trim()),"style"===n.property){let t="object"==typeof i?i:function(e,t){try{return(0,eh.default)(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};let t=new ev("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=ek+"#cannot-parse-style-attribute",t}}(e,String(i));return"css"===e.stylePropertyNameCase&&(t=function(e){let t,i={};for(t in e)eb.call(e,t)&&(i[function(e){let t=e.replace(ey,eP);return"ms-"===t.slice(0,3)&&(t="-"+t),t}(t)]=e[t]);return i}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&n.space?Y[n.property]||n.property:n.attribute,i]}}(e,n,t.properties[n]);if(a){let[n,s]=a;e.tableCellAlignToStyle&&"align"===n&&"string"==typeof s&&eA.has(t.tagName)?i=s:r[n]=s}}return i&&((r.style||(r.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=i),r}(e,t),s=eM(e,t);return ex.has(t.tagName)&&(s=s.filter(function(e){return"string"!=typeof e||!("object"==typeof e?"text"===e.type&&T(e.value):T(e))})),eS(e,a,r,t),eE(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){let i=t.data.estree.body[0];return A("ExpressionStatement"===i.type),e.evaluater.evaluateExpression(i.expression)}eT(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,i){let n=e.schema;"svg"===t.name&&"html"===n.space&&(e.schema=eo),e.ancestors.push(t);let r=null===t.name?e.Fragment:eC(e,t.name,!0),a=function(e,t){let i={};for(let n of t.attributes)if("mdxJsxExpressionAttribute"===n.type)if(n.data&&n.data.estree&&e.evaluater){let t=n.data.estree.body[0];A("ExpressionStatement"===t.type);let r=t.expression;A("ObjectExpression"===r.type);let a=r.properties[0];A("SpreadElement"===a.type),Object.assign(i,e.evaluater.evaluateExpression(a.argument))}else eT(e,t.position);else{let r,a=n.name;if(n.value&&"object"==typeof n.value)if(n.value.data&&n.value.data.estree&&e.evaluater){let t=n.value.data.estree.body[0];A("ExpressionStatement"===t.type),r=e.evaluater.evaluateExpression(t.expression)}else eT(e,t.position);else r=null===n.value||n.value;i[a]=r}return i}(e,t),s=eM(e,t);return eS(e,a,r,t),eE(a,s),e.ancestors.pop(),e.schema=n,e.create(t,r,a,i)}(e,t,i):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);eT(e,t.position)}(e,t):"root"===t.type?function(e,t,i){let n={};return eE(n,eM(e,t)),e.create(t,e.Fragment,n,i)}(e,t,i):"text"===t.type?t.value:void 0}function eS(e,t,i,n){"string"!=typeof i&&i!==e.Fragment&&e.passNode&&(t.node=n)}function eE(e,t){if(t.length>0){let i=t.length>1?t:t[0];i&&(e.children=i)}}function eM(e,t){let i=[],n=-1,r=e.passKeys?new Map:ew;for(;++n<t.children.length;){let a,s=t.children[n];if(e.passKeys){let e="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(e){let t=r.get(e)||0;a=e+"-"+t,r.set(e,t+1)}}let l=e_(e,s,a);void 0!==l&&i.push(l)}return i}function eC(e,t,i){let n;if(i)if(t.includes(".")){let e,i=t.split("."),r=-1;for(;++r<i.length;){let t=M(i[r])?{type:"Identifier",name:i[r]}:{type:"Literal",value:i[r]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(r&&"Literal"===t.type),optional:!1}:t}A(e,"always a result"),n=e}else n=M(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else n={type:"Literal",value:t};if("Literal"===n.type){let t=n.value;return eb.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(n);eT(e)}function eT(e,t){let i=new ev("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=ek+"#cannot-handle-mdx-estrees-without-createevaluater",i}function eP(e){return"-"+e.toLowerCase()}let eR={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eI={};function eL(e,t,i){var n;if((n=e)&&"object"==typeof n){if("value"in e)return"html"!==e.type||i?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return eD(e.children,t,i)}return Array.isArray(e)?eD(e,t,i):""}function eD(e,t,i){let n=[],r=-1;for(;++r<e.length;)n[r]=eL(e[r],t,i);return n.join("")}function eF(e,t,i,n){let r,a=e.length,s=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,i=i>0?i:0,n.length<1e4)(r=Array.from(n)).unshift(t,i),e.splice(...r);else for(i&&e.splice(t,i);s<n.length;)(r=n.slice(s,s+1e4)).unshift(t,0),e.splice(...r),s+=1e4,t+=1e4}function eN(e,t){return e.length>0?(eF(e,e.length,0,t),e):t}let eO={}.hasOwnProperty,eW=eQ(/[A-Za-z]/),ej=eQ(/[\dA-Za-z]/),eB=eQ(/[#-'*+\--9=?A-Z^-~]/);function ez(e){return null!==e&&(e<32||127===e)}let eH=eQ(/\d/),eU=eQ(/[\dA-Fa-f]/),eG=eQ(/[!-/:-@[-`{-~]/);function eV(e){return null!==e&&e<-2}function eq(e){return null!==e&&(e<0||32===e)}function eX(e){return -2===e||-1===e||32===e}let eK=eQ(RegExp("\\p{P}|\\p{S}","u")),eY=eQ(/\s/);function eQ(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function eJ(e,t,i,n){let r=n?n-1:1/0,a=0;return function(n){return eX(n)?(e.enter(i),function n(s){return eX(s)&&a++<r?(e.consume(s),n):(e.exit(i),t(s))}(n)):t(n)}}let eZ={tokenize:function(e){let t,i=e.attempt(this.parser.constructs.contentInitial,function(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eJ(e,i,"linePrefix"))},function(i){return e.enter("paragraph"),function i(n){let r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,function t(n){if(null===n){e.exit("chunkText"),e.exit("paragraph"),e.consume(n);return}return eV(n)?(e.consume(n),e.exit("chunkText"),i):(e.consume(n),t)}(n)}(i)});return i}},e$={tokenize:function(e){let t,i,n,r=this,a=[],s=0;return l;function l(t){if(s<a.length){let i=a[s];return r.containerState=i[1],e.attempt(i[0].continuation,o,h)(t)}return h(t)}function o(e){if(s++,r.containerState._closeFlow){let i;r.containerState._closeFlow=void 0,t&&b();let n=r.events.length,a=n;for(;a--;)if("exit"===r.events[a][0]&&"chunkFlow"===r.events[a][1].type){i=r.events[a][1].end;break}m(s);let l=n;for(;l<r.events.length;)r.events[l][1].end={...i},l++;return eF(r.events,a+1,0,r.events.slice(n)),r.events.length=l,h(e)}return l(e)}function h(i){if(s===a.length){if(!t)return d(i);if(t.currentConstruct&&t.currentConstruct.concrete)return f(i);r.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return r.containerState={},e.check(e0,c,u)(i)}function c(e){return t&&b(),m(s),d(e)}function u(e){return r.parser.lazy[r.now().line]=s!==a.length,n=r.now().offset,f(e)}function d(t){return r.containerState={},e.attempt(e0,p,f)(t)}function p(e){return s++,a.push([r.currentConstruct,r.containerState]),d(e)}function f(n){if(null===n){t&&b(),m(0),e.consume(n);return}return t=t||r.parser.flow(r.now()),e.enter("chunkFlow",{_tokenizer:t,contentType:"flow",previous:i}),function t(i){if(null===i){g(e.exit("chunkFlow"),!0),m(0),e.consume(i);return}return eV(i)?(e.consume(i),g(e.exit("chunkFlow")),s=0,r.interrupt=void 0,l):(e.consume(i),t)}(n)}function g(e,a){let l=r.sliceStream(e);if(a&&l.push(null),e.previous=i,i&&(i.next=e),i=e,t.defineSkip(e.start),t.write(l),r.parser.lazy[e.start.line]){let e,i,a=t.events.length;for(;a--;)if(t.events[a][1].start.offset<n&&(!t.events[a][1].end||t.events[a][1].end.offset>n))return;let l=r.events.length,o=l;for(;o--;)if("exit"===r.events[o][0]&&"chunkFlow"===r.events[o][1].type){if(e){i=r.events[o][1].end;break}e=!0}for(m(s),a=l;a<r.events.length;)r.events[a][1].end={...i},a++;eF(r.events,o+1,0,r.events.slice(l)),r.events.length=a}}function m(t){let i=a.length;for(;i-- >t;){let t=a[i];r.containerState=t[1],t[0].exit.call(r,e)}a.length=t}function b(){t.write([null]),i=void 0,t=void 0,r.containerState._closeFlow=void 0}}},e0={tokenize:function(e,t,i){return eJ(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},e1={partial:!0,tokenize:function(e,t,i){return function(t){return eX(t)?eJ(e,n,"linePrefix")(t):n(t)};function n(e){return null===e||eV(e)?t(e):i(e)}}};class e2{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let i=null==t?1/0:t;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){this.setCursor(Math.trunc(e));let n=this.right.splice(this.right.length-(t||0),1/0);return i&&e3(this.left,i),n.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),e3(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),e3(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);e3(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);e3(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function e3(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function e4(e){let t,i,n,r,a,s,l,o={},h=-1,c=new e2(e);for(;++h<c.length;){for(;h in o;)h=o[h];if(t=c.get(h),h&&"chunkFlow"===t[1].type&&"listItemPrefix"===c.get(h-1)[1].type&&((n=0)<(s=t[1]._tokenizer.events).length&&"lineEndingBlank"===s[n][1].type&&(n+=2),n<s.length&&"content"===s[n][1].type))for(;++n<s.length&&"content"!==s[n][1].type;)"chunkText"===s[n][1].type&&(s[n][1]._isInFirstContentOfListItem=!0,n++);if("enter"===t[0])t[1].contentType&&(Object.assign(o,function(e,t){let i,n,r=e.get(t)[1],a=e.get(t)[2],s=t-1,l=[],o=r._tokenizer;!o&&(o=a.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let h=o.events,c=[],u={},d=-1,p=r,f=0,g=0,m=[0];for(;p;){for(;e.get(++s)[1]!==p;);l.push(s),!p._tokenizer&&(i=a.sliceStream(p),p.next||i.push(null),n&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(i),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),n=p,p=p.next}for(p=r;++d<h.length;)"exit"===h[d][0]&&"enter"===h[d-1][0]&&h[d][1].type===h[d-1][1].type&&h[d][1].start.line!==h[d][1].end.line&&(g=d+1,m.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):m.pop(),d=m.length;d--;){let t=h.slice(m[d],m[d+1]),i=l.pop();c.push([i,i+t.length-1]),e.splice(i,2,t)}for(c.reverse(),d=-1;++d<c.length;)u[f+c[d][0]]=f+c[d][1],f+=c[d][1]-c[d][0]-1;return u}(c,h)),h=o[h],l=!0);else if(t[1]._container){for(n=h,i=void 0;n--;)if("lineEnding"===(r=c.get(n))[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(i&&(c.get(i)[1].type="lineEndingBlank"),r[1].type="lineEnding",i=n);else if("linePrefix"===r[1].type||"listItemIndent"===r[1].type);else break;i&&(t[1].end={...c.get(i)[1].start},(a=c.slice(i,h)).unshift(t),c.splice(i,h-i+1,a))}}return eF(e,0,1/0,c.slice(0)),!l}let e5={resolve:function(e){return e4(e),e},tokenize:function(e,t){let i;return function(t){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),n(t)};function n(t){return null===t?r(t):eV(t)?e.check(e6,a,r)(t):(e.consume(t),n)}function r(i){return e.exit("chunkContent"),e.exit("content"),t(i)}function a(t){return e.consume(t),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,n}}},e6={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eJ(e,r,"linePrefix")};function r(r){if(null===r||eV(r))return i(r);let a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(r):e.interrupt(n.parser.constructs.flow,i,t)(r)}}},e9={tokenize:function(e){let t=this,i=e.attempt(e1,function(n){return null===n?void e.consume(n):(e.enter("lineEndingBlank"),e.consume(n),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i)},e.attempt(this.parser.constructs.flowInitial,n,eJ(e,e.attempt(this.parser.constructs.flow,n,e.attempt(e5,n)),"linePrefix")));return i;function n(n){return null===n?void e.consume(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),t.currentConstruct=void 0,i)}}},e8={resolveAll:ti()},e7=tt("string"),te=tt("text");function tt(e){return{resolveAll:ti("text"===e?tn:void 0),tokenize:function(t){let i=this,n=this.parser.constructs[e],r=t.attempt(n,a,s);return a;function a(e){return o(e)?r(e):s(e)}function s(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),l)}function l(e){return o(e)?(t.exit("data"),r(e)):(t.consume(e),l)}function o(e){if(null===e)return!0;let t=n[e],r=-1;if(t)for(;++r<t.length;){let e=t[r];if(!e.previous||e.previous.call(i,i.previous))return!0}return!1}}}}function ti(e){return function(t,i){let n,r=-1;for(;++r<=t.length;)void 0===n?t[r]&&"data"===t[r][1].type&&(n=r,r++):t[r]&&"data"===t[r][1].type||(r!==n+2&&(t[n][1].end=t[r-1][1].end,t.splice(n+2,r-n-2),r=n+2),n=void 0);return e?e(t,i):t}}function tn(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||"lineEnding"===e[i][1].type)&&"data"===e[i-1][1].type){let n,r=e[i-1][1],a=t.sliceStream(r),s=a.length,l=-1,o=0;for(;s--;){let e=a[s];if("string"==typeof e){for(l=e.length;32===e.charCodeAt(l-1);)o++,l--;if(l)break;l=-1}else if(-2===e)n=!0,o++;else if(-1===e);else{s++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(o=0),o){let a={type:i===e.length||n||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?l:r.start._bufferIndex+l,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...a.start},r.start.offset===r.end.offset?Object.assign(r,a):(e.splice(i,0,["enter",a,t],["exit",a,t]),i+=2)}i++}return e}function tr(e){return null===e||eq(e)||eY(e)?1:eK(e)?2:void 0}function ta(e,t,i){let n=[],r=-1;for(;++r<e.length;){let a=e[r].resolveAll;a&&!n.includes(a)&&(t=a(t,i),n.push(a))}return t}e.s(["attentionMarkers",()=>tq,"contentInitial",()=>tB,"disable",()=>tX,"document",()=>tj,"flow",()=>tH,"flowInitial",()=>tz,"insideSpan",()=>tV,"string",()=>tU,"text",()=>tG],4127);let ts={name:"attention",resolveAll:function(e,t){let i,n,r,a,s,l,o,h,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close){for(i=c;i--;)if("exit"===e[i][0]&&"attentionSequence"===e[i][1].type&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[i][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;l=e[i][1].end.offset-e[i][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;let u={...e[i][1].end},d={...e[c][1].start};tl(u,-l),tl(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...e[i][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[c][1].start},end:d},r={type:l>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[c][1].start}},n={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},e[i][1].end={...a.start},e[c][1].start={...s.end},o=[],e[i][1].end.offset-e[i][1].start.offset&&(o=eN(o,[["enter",e[i][1],t],["exit",e[i][1],t]])),o=eN(o,[["enter",n,t],["enter",a,t],["exit",a,t],["enter",r,t]]),o=eN(o,ta(t.parser.constructs.insideSpan.null,e.slice(i+1,c),t)),o=eN(o,[["exit",r,t],["enter",s,t],["exit",s,t],["exit",n,t]]),e[c][1].end.offset-e[c][1].start.offset?(h=2,o=eN(o,[["enter",e[c][1],t],["exit",e[c][1],t]])):h=0,eF(e,i-1,c-i+3,o),c=i+o.length-h-2;break}}for(c=-1;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e},tokenize:function(e,t){let i,n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=tr(r);return function(s){return i=s,e.enter("attentionSequence"),function s(l){if(l===i)return e.consume(l),s;let o=e.exit("attentionSequence"),h=tr(l),c=!h||2===h&&a||n.includes(l),u=!a||2===a&&h||n.includes(r);return o._open=!!(42===i?c:c&&(a||!u)),o._close=!!(42===i?u:u&&(h||!c)),t(l)}(s)}}};function tl(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let to={continuation:{tokenize:function(e,t,i){let n=this;return function(t){return eX(t)?eJ(e,r,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):r(t)};function r(n){return e.attempt(to,t,i)(n)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,i){let n=this;return function(t){if(62===t){let i=n.containerState;return i.open||(e.enter("blockQuote",{_container:!0}),i.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return i(t)};function r(i){return eX(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}},th={name:"characterEscape",tokenize:function(e,t,i){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),n};function n(n){return eG(n)?(e.enter("characterEscapeValue"),e.consume(n),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(n)}}},tc=document.createElement("i");function tu(e){let t="&"+e+";";tc.innerHTML=t;let i=tc.textContent;return(59!==i.charCodeAt(i.length-1)||"semi"===e)&&i!==t&&i}let td={name:"characterReference",tokenize:function(e,t,i){let n,r,a=this,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l};function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),o):(e.enter("characterReferenceValue"),n=31,r=ej,h(t))}function o(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),n=6,r=eU,h):(e.enter("characterReferenceValue"),n=7,r=eH,h(t))}function h(l){if(59===l&&s){let n=e.exit("characterReferenceValue");return r!==ej||tu(a.sliceSerialize(n))?(e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):i(l)}return r(l)&&s++<n?(e.consume(l),h):i(l)}}},tp={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return null===t?i(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tf={concrete:!0,name:"codeFenced",tokenize:function(e,t,i){let n,r=this,a={partial:!0,tokenize:function(e,t,i){let a=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(t){return e.enter("codeFencedFence"),eX(t)?eJ(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):o(t)}function o(t){return t===n?(e.enter("codeFencedFenceSequence"),function t(r){return r===n?(a++,e.consume(r),t):a>=l?(e.exit("codeFencedFenceSequence"),eX(r)?eJ(e,h,"whitespace")(r):h(r)):i(r)}(t)):i(t)}function h(n){return null===n||eV(n)?(e.exit("codeFencedFence"),t(n)):i(n)}}},s=0,l=0;return function(t){var a=t;let h=r.events[r.events.length-1];return s=h&&"linePrefix"===h[1].type?h[2].sliceSerialize(h[1],!0).length:0,n=a,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function t(r){return r===n?(l++,e.consume(r),t):l<3?i(r):(e.exit("codeFencedFenceSequence"),eX(r)?eJ(e,o,"whitespace")(r):o(r))}(a)};function o(a){return null===a||eV(a)?(e.exit("codeFencedFence"),r.interrupt?t(a):e.check(tp,c,f)(a)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eV(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),o(r)):eX(r)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),eJ(e,h,"whitespace")(r)):96===r&&r===n?i(r):(e.consume(r),t)}(a))}function h(t){return null===t||eV(t)?o(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||eV(r)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),o(r)):96===r&&r===n?i(r):(e.consume(r),t)}(t))}function c(t){return e.attempt(a,f,u)(t)}function u(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d}function d(t){return s>0&&eX(t)?eJ(e,p,"linePrefix",s+1)(t):p(t)}function p(t){return null===t||eV(t)?e.check(tp,c,f)(t):(e.enter("codeFlowValue"),function t(i){return null===i||eV(i)?(e.exit("codeFlowValue"),p(i)):(e.consume(i),t)}(t))}function f(i){return e.exit("codeFenced"),t(i)}}},tg={name:"codeIndented",tokenize:function(e,t,i){let n=this;return function(t){return e.enter("codeIndented"),eJ(e,r,"linePrefix",5)(t)};function r(t){let r=n.events[n.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?function t(i){return null===i?a(i):eV(i)?e.attempt(tm,t,a)(i):(e.enter("codeFlowValue"),function i(n){return null===n||eV(n)?(e.exit("codeFlowValue"),t(n)):(e.consume(n),i)}(i))}(t):i(t)}function a(i){return e.exit("codeIndented"),t(i)}}},tm={partial:!0,tokenize:function(e,t,i){let n=this;return r;function r(t){return n.parser.lazy[n.now().line]?i(t):eV(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):eJ(e,a,"linePrefix",5)(t)}function a(e){let a=n.events[n.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):eV(e)?r(e):i(e)}}};function tv(e,t,i,n,r,a,s,l,o){let h=o||1/0,c=0;return function(t){return 60===t?(e.enter(n),e.enter(r),e.enter(a),e.consume(t),e.exit(a),u):null===t||32===t||41===t||ez(t)?i(t):(e.enter(n),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),f(t))};function u(i){return 62===i?(e.enter(a),e.consume(i),e.exit(a),e.exit(r),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),d(i))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(l),u(t)):null===t||60===t||eV(t)?i(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(r){return!c&&(null===r||41===r||eq(r))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(n),t(r)):c<h&&40===r?(e.consume(r),c++,f):41===r?(e.consume(r),c--,f):null===r||32===r||40===r||ez(r)?i(r):(e.consume(r),92===r?g:f)}function g(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function tb(e,t,i,n,r,a){let s,l=this,o=0;return function(t){return e.enter(n),e.enter(r),e.consume(t),e.exit(r),e.enter(a),h};function h(u){return o>999||null===u||91===u||93===u&&!s||94===u&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?i(u):93===u?(e.exit(a),e.enter(r),e.consume(u),e.exit(r),e.exit(n),t):eV(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(t){return null===t||91===t||93===t||eV(t)||o++>999?(e.exit("chunkString"),h(t)):(e.consume(t),s||(s=!eX(t)),92===t?u:c)}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}}function tw(e,t,i,n,r,a){let s;return function(t){return 34===t||39===t||40===t?(e.enter(n),e.enter(r),e.consume(t),e.exit(r),s=40===t?41:t,l):i(t)};function l(i){return i===s?(e.enter(r),e.consume(i),e.exit(r),e.exit(n),t):(e.enter(a),o(i))}function o(t){return t===s?(e.exit(a),l(s)):null===t?i(t):eV(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),eJ(e,o,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return t===s||null===t||eV(t)?(e.exit("chunkString"),o(t)):(e.consume(t),92===t?c:h)}function c(t){return t===s||92===t?(e.consume(t),h):h(t)}}function ty(e,t){let i;return function n(r){return eV(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i=!0,n):eX(r)?eJ(e,n,i?"linePrefix":"lineSuffix")(r):t(r)}}function tx(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}let tA={partial:!0,tokenize:function(e,t,i){return function(t){return eq(t)?ty(e,n)(t):i(t)};function n(t){return tw(e,r,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return eX(t)?eJ(e,a,"whitespace")(t):a(t)}function a(e){return null===e||eV(e)?t(e):i(e)}}},tk=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],t_=["pre","script","style","textarea"],tS={partial:!0,tokenize:function(e,t,i){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e.attempt(e1,t,i)}}},tE={partial:!0,tokenize:function(e,t,i){let n=this;return function(t){return eV(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):i(t)};function r(e){return n.parser.lazy[n.now().line]?i(e):t(e)}}},tM={name:"labelEnd",resolveAll:function(e){let t=-1,i=[];for(;++t<e.length;){let n=e[t][1];if(i.push(e[t]),"labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type){let e="labelImage"===n.type?4:2;n.type="data",t+=e}}return e.length!==i.length&&eF(e,0,e.length,i),e},resolveTo:function(e,t){let i,n,r,a,s=e.length,l=0;for(;s--;)if(i=e[s][1],n){if("link"===i.type||"labelLink"===i.type&&i._inactive)break;"enter"===e[s][0]&&"labelLink"===i.type&&(i._inactive=!0)}else if(r){if("enter"===e[s][0]&&("labelImage"===i.type||"labelLink"===i.type)&&!i._balanced&&(n=s,"labelLink"!==i.type)){l=2;break}}else"labelEnd"===i.type&&(r=s);let o={type:"labelLink"===e[n][1].type?"link":"image",start:{...e[n][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[n][1].start},end:{...e[r][1].end}},c={type:"labelText",start:{...e[n+l+2][1].end},end:{...e[r-2][1].start}};return a=eN(a=[["enter",o,t],["enter",h,t]],e.slice(n+1,n+l+3)),a=eN(a,[["enter",c,t]]),a=eN(a,ta(t.parser.constructs.insideSpan.null,e.slice(n+l+4,r-3),t)),a=eN(a,[["exit",c,t],e[r-2],e[r-1],["exit",h,t]]),a=eN(a,e.slice(r+1)),a=eN(a,[["exit",o,t]]),eF(e,n,e.length,a),e},tokenize:function(e,t,i){let n,r,a=this,s=a.events.length;for(;s--;)if(("labelImage"===a.events[s][1].type||"labelLink"===a.events[s][1].type)&&!a.events[s][1]._balanced){n=a.events[s][1];break}return function(t){return n?n._inactive?c(t):(r=a.parser.defined.includes(tx(a.sliceSerialize({start:n.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):i(t)};function l(t){return 40===t?e.attempt(tC,h,r?h:c)(t):91===t?e.attempt(tT,h,r?o:c)(t):r?h(t):c(t)}function o(t){return e.attempt(tP,h,c)(t)}function h(e){return t(e)}function c(e){return n._balanced=!0,i(e)}}},tC={tokenize:function(e,t,i){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),n};function n(t){return eq(t)?ty(e,r)(t):r(t)}function r(t){return 41===t?h(t):tv(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return eq(t)?ty(e,l)(t):h(t)}function s(e){return i(e)}function l(t){return 34===t||39===t||40===t?tw(e,o,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):h(t)}function o(t){return eq(t)?ty(e,h)(t):h(t)}function h(n){return 41===n?(e.enter("resourceMarker"),e.consume(n),e.exit("resourceMarker"),e.exit("resource"),t):i(n)}}},tT={tokenize:function(e,t,i){let n=this;return function(t){return tb.call(n,e,r,a,"reference","referenceMarker","referenceString")(t)};function r(e){return n.parser.defined.includes(tx(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(e):i(e)}function a(e){return i(e)}}},tP={tokenize:function(e,t,i){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),n};function n(n){return 93===n?(e.enter("referenceMarker"),e.consume(n),e.exit("referenceMarker"),e.exit("reference"),t):i(n)}}},tR={name:"labelStartImage",resolveAll:tM.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):i(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tI={name:"labelStartLink",resolveAll:tM.resolveAll,tokenize:function(e,t,i){let n=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in n.parser.constructs?i(e):t(e)}}},tL={name:"lineEnding",tokenize:function(e,t){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),eJ(e,t,"linePrefix")}}},tD={name:"thematicBreak",tokenize:function(e,t,i){let n,r=0;return function(a){var s;return e.enter("thematicBreak"),n=s=a,function a(s){return s===n?(e.enter("thematicBreakSequence"),function t(i){return i===n?(e.consume(i),r++,t):(e.exit("thematicBreakSequence"),eX(i)?eJ(e,a,"whitespace")(i):a(i))}(s)):r>=3&&(null===s||eV(s))?(e.exit("thematicBreak"),t(s)):i(s)}(s)}}},tF={continuation:{tokenize:function(e,t,i){let n=this;return n.containerState._closeFlow=void 0,e.check(e1,function(i){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,eJ(e,t,"listItemIndent",n.containerState.size+1)(i)},function(i){return n.containerState.furtherBlankLines||!eX(i)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r(i)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(tO,t,r)(i))});function r(r){return n.containerState._closeFlow=!0,n.interrupt=void 0,eJ(e,e.attempt(tF,t,i),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,i){let n=this,r=n.events[n.events.length-1],a=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,s=0;return function(t){let r=n.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!n.containerState.marker||t===n.containerState.marker:eH(t)){if(n.containerState.type||(n.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(tD,i,l)(t):l(t);if(!n.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(r){return eH(r)&&++s<10?(e.consume(r),t):(!n.interrupt||s<2)&&(n.containerState.marker?r===n.containerState.marker:41===r||46===r)?(e.exit("listItemValue"),l(r)):i(r)}(t)}return i(t)};function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||t,e.check(e1,n.interrupt?i:o,e.attempt(tN,c,h))}function o(e){return n.containerState.initialBlankLine=!0,a++,c(e)}function h(t){return eX(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),c):i(t)}function c(i){return n.containerState.size=a+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(i)}}},tN={partial:!0,tokenize:function(e,t,i){let n=this;return eJ(e,function(e){let r=n.events[n.events.length-1];return!eX(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):i(e)},"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},tO={partial:!0,tokenize:function(e,t,i){let n=this;return eJ(e,function(e){let r=n.events[n.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===n.containerState.size?t(e):i(e)},"listItemIndent",n.containerState.size+1)}},tW={name:"setextUnderline",resolveTo:function(e,t){let i,n,r,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){i=a;break}"paragraph"===e[a][1].type&&(n=a)}else"content"===e[a][1].type&&e.splice(a,1),r||"definition"!==e[a][1].type||(r=a);let s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[n][1].type="setextHeadingText",r?(e.splice(n,0,["enter",s,t]),e.splice(r+1,0,["exit",e[i][1],t]),e[i][1].end={...e[r][1].end}):e[i][1]=s,e.push(["exit",s,t]),e},tokenize:function(e,t,i){let n,r=this;return function(t){var s;let l,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){l="paragraph"===r.events[o][1].type;break}return!r.parser.lazy[r.now().line]&&(r.interrupt||l)?(e.enter("setextHeadingLine"),n=t,s=t,e.enter("setextHeadingLineSequence"),function t(i){return i===n?(e.consume(i),t):(e.exit("setextHeadingLineSequence"),eX(i)?eJ(e,a,"lineSuffix")(i):a(i))}(s)):i(t)};function a(n){return null===n||eV(n)?(e.exit("setextHeadingLine"),t(n)):i(n)}}},tj={42:tF,43:tF,45:tF,48:tF,49:tF,50:tF,51:tF,52:tF,53:tF,54:tF,55:tF,56:tF,57:tF,62:to},tB={91:{name:"definition",tokenize:function(e,t,i){let n,r=this;return function(t){var n;return e.enter("definition"),n=t,tb.call(r,e,a,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(n)};function a(t){return(n=tx(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):i(t)}function s(t){return eq(t)?ty(e,l)(t):l(t)}function l(t){return tv(e,o,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function o(t){return e.attempt(tA,h,h)(t)}function h(t){return eX(t)?eJ(e,c,"whitespace")(t):c(t)}function c(a){return null===a||eV(a)?(e.exit("definition"),r.parser.defined.push(n),t(a)):i(a)}}}},tz={[-2]:tg,[-1]:tg,32:tg},tH={35:{name:"headingAtx",resolve:function(e,t){let i,n,r=e.length-2,a=3;return"whitespace"===e[3][1].type&&(a+=2),r-2>a&&"whitespace"===e[r][1].type&&(r-=2),"atxHeadingSequence"===e[r][1].type&&(a===r-1||r-4>a&&"whitespace"===e[r-2][1].type)&&(r-=a+1===r?2:4),r>a&&(i={type:"atxHeadingText",start:e[a][1].start,end:e[r][1].end},n={type:"chunkText",start:e[a][1].start,end:e[r][1].end,contentType:"text"},eF(e,a,r-a+1,[["enter",i,t],["enter",n,t],["exit",n,t],["exit",i,t]])),e},tokenize:function(e,t,i){let n=0;return function(r){var a;return e.enter("atxHeading"),a=r,e.enter("atxHeadingSequence"),function r(a){return 35===a&&n++<6?(e.consume(a),r):null===a||eq(a)?(e.exit("atxHeadingSequence"),function i(n){return 35===n?(e.enter("atxHeadingSequence"),function t(n){return 35===n?(e.consume(n),t):(e.exit("atxHeadingSequence"),i(n))}(n)):null===n||eV(n)?(e.exit("atxHeading"),t(n)):eX(n)?eJ(e,i,"whitespace")(n):(e.enter("atxHeadingText"),function t(n){return null===n||35===n||eq(n)?(e.exit("atxHeadingText"),i(n)):(e.consume(n),t)}(n))}(a)):i(a)}(a)}}},42:tD,45:[tW,tD],60:{concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},tokenize:function(e,t,i){let n,r,a,s,l,o=this;return function(t){var i;return i=t,e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(i),h};function h(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),r=!0,p):63===s?(e.consume(s),n=3,o.interrupt?t:L):eW(s)?(e.consume(s),a=String.fromCharCode(s),f):i(s)}function c(r){return 45===r?(e.consume(r),n=2,u):91===r?(e.consume(r),n=5,s=0,d):eW(r)?(e.consume(r),n=4,o.interrupt?t:L):i(r)}function u(n){return 45===n?(e.consume(n),o.interrupt?t:L):i(n)}function d(n){let r="CDATA[";return n===r.charCodeAt(s++)?(e.consume(n),s===r.length)?o.interrupt?t:S:d:i(n)}function p(t){return eW(t)?(e.consume(t),a=String.fromCharCode(t),f):i(t)}function f(s){if(null===s||47===s||62===s||eq(s)){let l=47===s,h=a.toLowerCase();return!l&&!r&&t_.includes(h)?(n=1,o.interrupt?t(s):S(s)):tk.includes(a.toLowerCase())?(n=6,l)?(e.consume(s),g):o.interrupt?t(s):S(s):(n=7,o.interrupt&&!o.parser.lazy[o.now().line]?i(s):r?function t(i){return eX(i)?(e.consume(i),t):k(i)}(s):m(s))}return 45===s||ej(s)?(e.consume(s),a+=String.fromCharCode(s),f):i(s)}function g(n){return 62===n?(e.consume(n),o.interrupt?t:S):i(n)}function m(t){return 47===t?(e.consume(t),k):58===t||95===t||eW(t)?(e.consume(t),b):eX(t)?(e.consume(t),m):k(t)}function b(t){return 45===t||46===t||58===t||95===t||ej(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),y):eX(t)?(e.consume(t),w):m(t)}function y(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),l=t,x):eX(t)?(e.consume(t),y):function t(i){return null===i||34===i||39===i||47===i||60===i||61===i||62===i||96===i||eq(i)?w(i):(e.consume(i),t)}(t)}function x(t){return t===l?(e.consume(t),l=null,A):null===t||eV(t)?i(t):(e.consume(t),x)}function A(e){return 47===e||62===e||eX(e)?m(e):i(e)}function k(t){return 62===t?(e.consume(t),_):i(t)}function _(t){return null===t||eV(t)?S(t):eX(t)?(e.consume(t),_):i(t)}function S(t){return 45===t&&2===n?(e.consume(t),T):60===t&&1===n?(e.consume(t),P):62===t&&4===n?(e.consume(t),D):63===t&&3===n?(e.consume(t),L):93===t&&5===n?(e.consume(t),I):eV(t)&&(6===n||7===n)?(e.exit("htmlFlowData"),e.check(tS,F,E)(t)):null===t||eV(t)?(e.exit("htmlFlowData"),E(t)):(e.consume(t),S)}function E(t){return e.check(tE,M,F)(t)}function M(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),C}function C(t){return null===t||eV(t)?E(t):(e.enter("htmlFlowData"),S(t))}function T(t){return 45===t?(e.consume(t),L):S(t)}function P(t){return 47===t?(e.consume(t),a="",R):S(t)}function R(t){if(62===t){let i=a.toLowerCase();return t_.includes(i)?(e.consume(t),D):S(t)}return eW(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),R):S(t)}function I(t){return 93===t?(e.consume(t),L):S(t)}function L(t){return 62===t?(e.consume(t),D):45===t&&2===n?(e.consume(t),L):S(t)}function D(t){return null===t||eV(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),D)}function F(i){return e.exit("htmlFlow"),t(i)}}},61:tW,95:tD,96:tf,126:tf},tU={38:td,92:th},tG={[-5]:tL,[-4]:tL,[-3]:tL,33:tR,38:td,42:ts,60:[{name:"autolink",tokenize:function(e,t,i){let n=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return eW(t)?(e.consume(t),a):64===t?i(t):l(t)}function a(t){return 43===t||45===t||46===t||ej(t)?(n=1,function t(i){return 58===i?(e.consume(i),n=0,s):(43===i||45===i||46===i||ej(i))&&n++<32?(e.consume(i),t):(n=0,l(i))}(t)):l(t)}function s(n){return 62===n?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):null===n||32===n||60===n||ez(n)?i(n):(e.consume(n),s)}function l(t){return 64===t?(e.consume(t),o):eB(t)?(e.consume(t),l):i(t)}function o(r){return ej(r)?function r(a){return 46===a?(e.consume(a),n=0,o):62===a?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(a),e.exit("autolinkMarker"),e.exit("autolink"),t):function t(a){if((45===a||ej(a))&&n++<63){let i=45===a?t:r;return e.consume(a),i}return i(a)}(a)}(r):i(r)}}},{name:"htmlText",tokenize:function(e,t,i){let n,r,a,s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l};function l(t){return 33===t?(e.consume(t),o):47===t?(e.consume(t),x):63===t?(e.consume(t),w):eW(t)?(e.consume(t),k):i(t)}function o(t){return 45===t?(e.consume(t),h):91===t?(e.consume(t),r=0,p):eW(t)?(e.consume(t),b):i(t)}function h(t){return 45===t?(e.consume(t),d):i(t)}function c(t){return null===t?i(t):45===t?(e.consume(t),u):eV(t)?(a=c,R(t)):(e.consume(t),c)}function u(t){return 45===t?(e.consume(t),d):c(t)}function d(e){return 62===e?P(e):45===e?u(e):c(e)}function p(t){let n="CDATA[";return t===n.charCodeAt(r++)?(e.consume(t),r===n.length?f:p):i(t)}function f(t){return null===t?i(t):93===t?(e.consume(t),g):eV(t)?(a=f,R(t)):(e.consume(t),f)}function g(t){return 93===t?(e.consume(t),m):f(t)}function m(t){return 62===t?P(t):93===t?(e.consume(t),m):f(t)}function b(t){return null===t||62===t?P(t):eV(t)?(a=b,R(t)):(e.consume(t),b)}function w(t){return null===t?i(t):63===t?(e.consume(t),y):eV(t)?(a=w,R(t)):(e.consume(t),w)}function y(e){return 62===e?P(e):w(e)}function x(t){return eW(t)?(e.consume(t),A):i(t)}function A(t){return 45===t||ej(t)?(e.consume(t),A):function t(i){return eV(i)?(a=t,R(i)):eX(i)?(e.consume(i),t):P(i)}(t)}function k(t){return 45===t||ej(t)?(e.consume(t),k):47===t||62===t||eq(t)?_(t):i(t)}function _(t){return 47===t?(e.consume(t),P):58===t||95===t||eW(t)?(e.consume(t),S):eV(t)?(a=_,R(t)):eX(t)?(e.consume(t),_):P(t)}function S(t){return 45===t||46===t||58===t||95===t||ej(t)?(e.consume(t),S):function t(i){return 61===i?(e.consume(i),E):eV(i)?(a=t,R(i)):eX(i)?(e.consume(i),t):_(i)}(t)}function E(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),n=t,M):eV(t)?(a=E,R(t)):eX(t)?(e.consume(t),E):(e.consume(t),C)}function M(t){return t===n?(e.consume(t),n=void 0,T):null===t?i(t):eV(t)?(a=M,R(t)):(e.consume(t),M)}function C(t){return null===t||34===t||39===t||60===t||61===t||96===t?i(t):47===t||62===t||eq(t)?_(t):(e.consume(t),C)}function T(e){return 47===e||62===e||eq(e)?_(e):i(e)}function P(n){return 62===n?(e.consume(n),e.exit("htmlTextData"),e.exit("htmlText"),t):i(n)}function R(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return eX(t)?eJ(e,L,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):L(t)}function L(t){return e.enter("htmlTextData"),a(t)}}}],91:tI,92:[{name:"hardBreakEscape",tokenize:function(e,t,i){return function(t){return e.enter("hardBreakEscape"),e.consume(t),n};function n(n){return eV(n)?(e.exit("hardBreakEscape"),t(n)):i(n)}}},th],93:tM,95:ts,96:{name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,i,n=e.length-4,r=3;if(("lineEnding"===e[3][1].type||"space"===e[r][1].type)&&("lineEnding"===e[n][1].type||"space"===e[n][1].type)){for(t=r;++t<n;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[n][1].type="codeTextPadding",r+=2,n-=2;break}}for(t=r-1,n++;++t<=n;)void 0===i?t!==n&&"lineEnding"!==e[t][1].type&&(i=t):(t===n||"lineEnding"===e[t][1].type)&&(e[i][1].type="codeTextData",t!==i+2&&(e[i][1].end=e[t-1][1].end,e.splice(i+2,t-i-2),n-=t-i-2,t=i+2),i=void 0);return e},tokenize:function(e,t,i){let n,r,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(i){return 96===i?(e.consume(i),a++,t):(e.exit("codeTextSequence"),s(i))}(t)};function s(o){return null===o?i(o):32===o?(e.enter("space"),e.consume(o),e.exit("space"),s):96===o?(r=e.enter("codeTextSequence"),n=0,function i(s){return 96===s?(e.consume(s),n++,i):n===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(s)):(r.type="codeTextData",l(s))}(o)):eV(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(o))}function l(t){return null===t||32===t||96===t||eV(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}}}},tV={null:[ts,e8]},tq={null:[42,95]},tX={null:[]};var tK=e.i(4127);let tY=/[\0\t\n\r]/g;function tQ(e,t){let i=Number.parseInt(e,t);return i<9||11===i||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(65535&i)==65535||(65535&i)==65534||i>1114111?"":String.fromCodePoint(i)}let tJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tZ(e,t,i){if(t)return t;if(35===i.charCodeAt(0)){let e=i.charCodeAt(1),t=120===e||88===e;return tQ(i.slice(t?2:1),t?16:10)}return tu(i)||e}let t$={}.hasOwnProperty;function t0(e){return{line:e.line,column:e.column,offset:e.offset}}function t1(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+ep({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ep({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+ep({start:t.start,end:t.end})+") is still open")}function t2(e){let t=this;t.parser=function(i){var n,r;let a,s,l,o;return"string"!=typeof(n={...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})&&(r=n,n=void 0),(function(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(b),autolinkProtocol:h,autolinkEmail:h,atxHeading:n(f),blockQuote:n(function(){return{type:"blockquote",children:[]}}),characterEscape:h,characterReference:h,codeFenced:n(p),codeFencedFenceInfo:r,codeFencedFenceMeta:r,codeIndented:n(p,r),codeText:n(function(){return{type:"inlineCode",value:""}},r),codeTextData:h,data:h,codeFlowValue:h,definition:n(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:r,definitionLabelString:r,definitionTitleString:r,emphasis:n(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:n(g),hardBreakTrailing:n(g),htmlFlow:n(m,r),htmlFlowData:h,htmlText:n(m,r),htmlTextData:h,image:n(function(){return{type:"image",title:null,url:"",alt:null}}),label:r,link:n(b),listItem:n(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:n(w,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:n(w),paragraph:n(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:r,resourceDestinationString:r,resourceTitleString:r,setextHeading:n(f),strong:n(function(){return{type:"strong",children:[]}}),thematicBreak:n(function(){return{type:"thematicBreak"}})},exit:{atxHeading:s(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)},autolink:s(),autolinkEmail:function(e){c.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){c.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:c,characterReferenceMarkerHexadecimal:d,characterReferenceMarkerNumeric:d,characterReferenceValue:function(e){let t,i=this.sliceSerialize(e),n=this.data.characterReferenceType;n?(t=tQ(i,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):t=tu(i);let r=this.stack[this.stack.length-1];r.value+=t},characterReference:function(e){this.stack.pop().position.end=t0(e.end)},codeFenced:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){let e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:c,codeIndented:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:c,data:c,definition:s(),definitionDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tx(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(u),hardBreakTrailing:s(u),htmlFlow:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:c,htmlText:s(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:c,image:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),i=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===i.type?i.children=e.children:i.alt=t},labelText:function(e){let t=this.sliceSerialize(e),i=this.stack[this.stack.length-2];i.label=t.replace(tJ,tZ),i.identifier=tx(t).toLowerCase()},lineEnding:function(e){let i=this.stack[this.stack.length-1];if(this.data.atHardBreak){i.children[i.children.length-1].position.end=t0(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(i.type)&&(h.call(this,e),c.call(this,e))},link:s(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){let t=this.resume(),i=this.stack[this.stack.length-1];i.label=t,i.identifier=tx(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};!function e(t,i){let n=-1;for(;++n<i.length;){let r=i[n];Array.isArray(r)?e(t,r):function(e,t){let i;for(i in t)if(t$.call(t,i))switch(i){case"canContainEols":{let n=t[i];n&&e[i].push(...n);break}case"transforms":{let n=t[i];n&&e[i].push(...n);break}case"enter":case"exit":{let n=t[i];n&&Object.assign(e[i],n)}}}(t,r)}}(t,(e||{}).mdastExtensions||[]);let i={};return function(e){let n={type:"root",children:[]},s={stack:[n],tokenStack:[],config:t,enter:a,exit:l,buffer:r,resume:o,data:i},h=[],c=-1;for(;++c<e.length;)("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)&&("enter"===e[c][0]?h.push(c):c=function(e,t,i){let n,r,a,s,l=t-1,o=-1,h=!1;for(;++l<=i;){let t=e[l];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?o++:o--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!n||s||o||a||(a=l),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!o&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===o&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(n){let s=l;for(r=void 0;s--;){let t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",h=!0),t[1].type="lineEnding",r=s}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!r||a<r)&&(n._spread=!0),n.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||l,0,["exit",n,t[2]]),l++,i++}if("listItemPrefix"===t[1].type){let r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};n=r,e.splice(l,0,["enter",r,t[2]]),l++,i++,a=void 0,s=!0}}}return e[t][1]._spread=h,i}(e,h.pop(),c));for(c=-1;++c<e.length;){let i=t[e[c][0]];t$.call(i,e[c][1].type)&&i[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},s),e[c][1])}if(s.tokenStack.length>0){let e=s.tokenStack[s.tokenStack.length-1];(e[1]||t1).call(s,void 0,e[0])}for(n.position={start:t0(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:t0(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<t.transforms.length;)n=t.transforms[c](n)||n;return n};function n(e,t){return function(i){a.call(this,e(i),i),t&&t.call(this,i)}}function r(){this.stack.push({type:"fragment",children:[]})}function a(e,t,i){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,i||void 0]),e.position={start:t0(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){let i=this.stack.pop(),n=this.tokenStack.pop();if(n)n[0].type!==e.type&&(t?t.call(this,e,n[0]):(n[1]||t1).call(this,e,n[0]));else throw Error("Cannot close `"+e.type+"` ("+ep({start:e.start,end:e.end})+"): its not open");i.position.end=t0(e.end)}function o(){return eL(this.stack.pop(),"boolean"!=typeof eI.includeImageAlt||eI.includeImageAlt,"boolean"!=typeof eI.includeHtml||eI.includeHtml)}function h(e){let t=this.stack[this.stack.length-1].children,i=t[t.length-1];i&&"text"===i.type||((i={type:"text",value:""}).position={start:t0(e.start),end:void 0},t.push(i)),this.stack.push(i)}function c(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=t0(e.end)}function u(){this.data.atHardBreak=!0}function d(e){this.data.characterReferenceType=e.type}function p(){return{type:"code",lang:null,meta:null,value:""}}function f(){return{type:"heading",depth:0,children:[]}}function g(){return{type:"break"}}function m(){return{type:"html",value:""}}function b(){return{type:"link",title:null,url:"",children:[]}}function w(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(r)(function(e){for(;!e4(e););return e}((function(e){let t={constructs:function(e){let t={},i=-1;for(;++i<e.length;)!function(e,t){let i;for(i in t){let n,r=(eO.call(e,i)?e[i]:void 0)||(e[i]={}),a=t[i];if(a)for(n in a){eO.call(r,n)||(r[n]=[]);let e=a[n];!function(e,t){let i=-1,n=[];for(;++i<t.length;)("after"===t[i].add?e:n).push(t[i]);eF(e,0,0,n)}(r[n],Array.isArray(e)?e:e?[e]:[])}}}(t,e[i]);return t}([tK,...(e||{}).extensions||[]]),content:i(eZ),defined:[],document:i(e$),flow:i(e9),lazy:{},string:i(e7),text:i(te)};return t;function i(e){return function(i){return function(e,t,i){let n={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0},r={},a=[],s=[],l=[],o={attempt:f(function(e,t){g(e,t.from)}),check:f(p),consume:function(e){eV(e)?(n.line++,n.column=1,n.offset+=-3===e?2:1,m()):-1!==e&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=e},enter:function(e,t){let i=t||{};return i.type=e,i.start=d(),h.events.push(["enter",i,h]),l.push(i),i},exit:function(e){let t=l.pop();return t.end=d(),h.events.push(["exit",t,h]),t},interrupt:f(p,{interrupt:!0})},h={code:null,containerState:{},defineSkip:function(e){r[e.line]=e.column,m()},events:[],now:d,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let i,n=-1,r=[];for(;++n<e.length;){let a,s=e[n];if("string"==typeof s)a=s;else switch(s){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(s)}i=-2===s,r.push(a)}return r.join("")}(u(e),t)},sliceStream:u,write:function(e){return(s=eN(s,e),function(){let e;for(;n._index<s.length;){let i=s[n._index];if("string"==typeof i)for(e=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===e&&n._bufferIndex<i.length;){var t;t=i.charCodeAt(n._bufferIndex),c=c(t)}else c=c(i)}}(),null!==s[s.length-1])?[]:(g(t,0),h.events=ta(a,h.events,h),h.events)}},c=t.tokenize.call(h,o);return t.resolveAll&&a.push(t),h;function u(e){return function(e,t){let i,n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;if(n===a)i=[e[n].slice(r,s)];else{if(i=e.slice(n,a),r>-1){let e=i[0];"string"==typeof e?i[0]=e.slice(r):i.shift()}s>0&&i.push(e[a].slice(0,s))}return i}(s,e)}function d(){let{_bufferIndex:e,_index:t,line:i,column:r,offset:a}=n;return{_bufferIndex:e,_index:t,line:i,column:r,offset:a}}function p(e,t){t.restore()}function f(e,t){return function(i,r,a){var s;let c,u,p,f;return Array.isArray(i)?g(i):"tokenize"in i?g([i]):(s=i,function(e){let t=null!==e&&s[e],i=null!==e&&s.null;return g([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(i)?i:i?[i]:[]])(e)});function g(e){return(c=e,u=0,0===e.length)?a:b(e[u])}function b(e){return function(i){return(f=function(){let e=d(),t=h.previous,i=h.currentConstruct,r=h.events.length,a=Array.from(l);return{from:r,restore:function(){n=e,h.previous=t,h.currentConstruct=i,h.events.length=r,l=a,m()}}}(),p=e,e.partial||(h.currentConstruct=e),e.name&&h.parser.constructs.disable.null.includes(e.name))?y(i):e.tokenize.call(t?Object.assign(Object.create(h),t):h,o,w,y)(i)}}function w(t){return e(p,f),r}function y(e){return(f.restore(),++u<c.length)?b(c[u]):a}}}function g(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&eF(h.events,t,h.events.length-t,e.resolve(h.events.slice(t),h)),e.resolveTo&&(h.events=e.resolveTo(h.events,h))}function m(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}(t,e,i)}}})(r).document().write((s=1,l="",o=!0,function(e,t,i){let n,r,h,c,u,d=[];for(e=l+("string"==typeof e?e.toString():new TextDecoder(t||void 0).decode(e)),h=0,l="",o&&(65279===e.charCodeAt(0)&&h++,o=void 0);h<e.length;){if(tY.lastIndex=h,c=(n=tY.exec(e))&&void 0!==n.index?n.index:e.length,u=e.charCodeAt(c),!n){l=e.slice(h);break}if(10===u&&h===c&&a)d.push(-3),a=void 0;else switch(a&&(d.push(-5),a=void 0),h<c&&(d.push(e.slice(h,c)),s+=c-h),u){case 0:d.push(65533),s++;break;case 9:for(r=4*Math.ceil(s/4),d.push(-2);s++<r;)d.push(-1);break;case 10:d.push(-4),s=1;break;default:a=!0,s=1}h=c+1}return i&&(a&&d.push(-5),l&&d.push(l),d.push(null)),d})(i,n,!0))))}}let t3="object"==typeof self?self:globalThis,t4=e=>((e,t)=>{let i=(t,i)=>(e.set(i,t),t),n=r=>{if(e.has(r))return e.get(r);let[a,s]=t[r];switch(a){case 0:case -1:return i(s,r);case 1:{let e=i([],r);for(let t of s)e.push(n(t));return e}case 2:{let e=i({},r);for(let[t,i]of s)e[n(t)]=n(i);return e}case 3:return i(new Date(s),r);case 4:{let{source:e,flags:t}=s;return i(new RegExp(e,t),r)}case 5:{let e=i(new Map,r);for(let[t,i]of s)e.set(n(t),n(i));return e}case 6:{let e=i(new Set,r);for(let t of s)e.add(n(t));return e}case 7:{let{name:e,message:t}=s;return i(new t3[e](t),r)}case 8:return i(BigInt(s),r);case"BigInt":return i(Object(BigInt(s)),r);case"ArrayBuffer":return i(new Uint8Array(s).buffer,s);case"DataView":{let{buffer:e}=new Uint8Array(s);return i(new DataView(e),s)}}return i(new t3[a](s),r)};return n})(new Map,e)(0),{toString:t5}={},{keys:t6}=Object,t9=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let i=t5.call(e).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""];case"DataView":return[1,i]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},t8=e=>{let[t,i]=e;return 0===t&&("function"===i||"symbol"===i)},t7=function(e){let{json:t,lossy:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return((e,t,i,n)=>{let r=(e,t)=>{let r=n.push(e)-1;return i.set(t,r),r},a=n=>{if(i.has(n))return i.get(n);let[s,l]=t9(n);switch(s){case 0:{let t=n;switch(l){case"bigint":s=8,t=n.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+l);t=null;break;case"undefined":return r([-1],n)}return r([s,t],n)}case 1:{if(l){let e=n;return"DataView"===l?e=new Uint8Array(n.buffer):"ArrayBuffer"===l&&(e=new Uint8Array(n)),r([l,[...e]],n)}let e=[],t=r([s,e],n);for(let t of n)e.push(a(t));return t}case 2:{if(l)switch(l){case"BigInt":return r([l,n.toString()],n);case"Boolean":case"Number":case"String":return r([l,n.valueOf()],n)}if(t&&"toJSON"in n)return a(n.toJSON());let i=[],o=r([s,i],n);for(let t of t6(n))(e||!t8(t9(n[t])))&&i.push([a(t),a(n[t])]);return o}case 3:return r([s,n.toISOString()],n);case 4:{let{source:e,flags:t}=n;return r([s,{source:e,flags:t}],n)}case 5:{let t=[],i=r([s,t],n);for(let[i,r]of n)(e||!(t8(t9(i))||t8(t9(r))))&&t.push([a(i),a(r)]);return i}case 6:{let t=[],i=r([s,t],n);for(let i of n)(e||!t8(t9(i)))&&t.push(a(i));return i}}let{message:o}=n;return r([s,{name:l,message:o}],n)};return a})(!(t||i),!!t,new Map,n)(e),n},ie="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?t4(t7(e,t)):structuredClone(e):(e,t)=>t4(t7(e,t));function it(e){let t=[],i=-1,n=0,r=0;for(;++i<e.length;){let a=e.charCodeAt(i),s="";if(37===a&&ej(e.charCodeAt(i+1))&&ej(e.charCodeAt(i+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){let t=e.charCodeAt(i+1);a<56320&&t>56319&&t<57344?(s=String.fromCharCode(a,t),r=1):s=""}else s=String.fromCharCode(a);s&&(t.push(e.slice(n,i),encodeURIComponent(s)),n=i+r+1,s=""),r&&(i+=r,r=0)}return t.join("")+e.slice(n)}function ii(e,t){let i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function ir(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}let ia=function(e){var t,i;if(null==e)return il;if("function"==typeof e)return is(e);if("object"==typeof e){return Array.isArray(e)?function(e){let t=[],i=-1;for(;++i<e.length;)t[i]=ia(e[i]);return is(function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];let r=-1;for(;++r<t.length;)if(t[r].apply(this,i))return!0;return!1})}(e):(t=e,is(function(e){let i;for(i in t)if(e[i]!==t[i])return!1;return!0}))}if("string"==typeof e){return i=e,is(function(e){return e&&e.type===i})}throw Error("Expected function, string, or object as test")};function is(e){return function(t,i,n){return!!(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof i?i:void 0,n||void 0))}}function il(){return!0}let io=[];function ih(e,t,i,n){let r,a,s,l;"function"==typeof t&&"function"!=typeof i?(a=void 0,s=t,r=i):(a=t,s=i,r=n);var o=a,h=function(e,t){let i=t[t.length-1],n=i?i.children.indexOf(e):void 0;return s(e,n,i)},c=r;"function"==typeof o&&"function"!=typeof h?(c=h,h=o):l=o;let u=ia(l),d=c?-1:1;(function e(t,i,n){let r=t&&"object"==typeof t?t:{};if("string"==typeof r.type){let e="string"==typeof r.tagName?r.tagName:"string"==typeof r.name?r.name:void 0;Object.defineProperty(a,"name",{value:"node ("+t.type+(e?"<"+e+">":"")+")"})}return a;function a(){var r;let a,s,l,p=io;if((!o||u(t,i,n[n.length-1]||void 0))&&!1===(p=Array.isArray(r=h(t,n))?r:"number"==typeof r?[!0,r]:null==r?io:[r])[0])return p;if("children"in t&&t.children&&t.children&&"skip"!==p[0])for(s=(c?t.children.length:-1)+d,l=n.concat(t);s>-1&&s<t.children.length;){if(!1===(a=e(t.children[s],s,l)())[0])return a;s="number"==typeof a[1]?a[1]:s+d}return p}})(e,void 0,[])()}function ic(e,t){let i=t.referenceType,n="]";if("collapsed"===i?n+="[]":"full"===i&&(n+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+n}];let r=e.all(t),a=r[0];a&&"text"===a.type?a.value="["+a.value:r.unshift({type:"text",value:"["});let s=r[r.length-1];return s&&"text"===s.type?s.value+=n:r.push({type:"text",value:n}),r}function iu(e){let t=e.spread;return null==t?e.children.length>1:t}function id(e,t,i){let n=0,r=e.length;if(t){let t=e.codePointAt(n);for(;9===t||32===t;)n++,t=e.codePointAt(n)}if(i){let t=e.codePointAt(r-1);for(;9===t||32===t;)r--,t=e.codePointAt(r-1)}return r>n?e.slice(n,r):""}let ip={blockquote:function(e,t){let i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)},break:function(e,t){let i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:"\n"}]},code:function(e,t){let i=t.value?t.value+"\n":"",n={};t.lang&&(n.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:i}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r={type:"element",tagName:"pre",properties:{},children:[r=e.applyData(t,r)]},e.patch(t,r),r},delete:function(e,t){let i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},emphasis:function(e,t){let i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},footnoteReference:function(e,t){let i,n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=it(r.toLowerCase()),s=e.footnoteOrder.indexOf(r),l=e.footnoteCounts.get(r);void 0===l?(l=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,l+=1,e.footnoteCounts.set(r,l);let o={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,o);let h={type:"element",tagName:"sup",properties:{},children:[o]};return e.patch(t,h),e.applyData(t,h)},heading:function(e,t){let i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},html:function(e,t){if(e.options.allowDangerousHtml){let i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}},imageReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return ic(e,t);let r={src:it(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){let i={src:it(t.url)};null!==t.alt&&void 0!==t.alt&&(i.alt=t.alt),null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,n),e.applyData(t,n)},inlineCode:function(e,t){let i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);let n={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,n),e.applyData(t,n)},linkReference:function(e,t){let i=String(t.identifier).toUpperCase(),n=e.definitionById.get(i);if(!n)return ic(e,t);let r={href:it(n.url||"")};null!==n.title&&void 0!==n.title&&(r.title=n.title);let a={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){let i={href:it(t.url)};null!==t.title&&void 0!==t.title&&(i.title=t.title);let n={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},listItem:function(e,t,i){let n=e.all(t),r=i?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;let i=e.children,n=-1;for(;!t&&++n<i.length;)t=iu(i[n])}return t}(i):iu(t),a={},s=[];if("boolean"==typeof t.checked){let e,i=n[0];i&&"element"===i.type&&"p"===i.tagName?e=i:(e={type:"element",tagName:"p",properties:{},children:[]},n.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<n.length;){let e=n[l];(r||0!==l||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?s.push(e):s.push(...e.children)}let o=n[n.length-1];o&&(r||"element"!==o.type||"p"!==o.tagName)&&s.push({type:"text",value:"\n"});let h={type:"element",tagName:"li",properties:a,children:s};return e.patch(t,h),e.applyData(t,h)},list:function(e,t){let i={},n=e.all(t),r=-1;for("number"==typeof t.start&&1!==t.start&&(i.start=t.start);++r<n.length;){let e=n[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(n,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){let i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},root:function(e,t){let i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)},strong:function(e,t){let i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},table:function(e,t){let i=e.all(t),n=i.shift(),r=[];if(n){let i={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],i),r.push(i)}if(i.length>0){let n={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},a=eu(t.children[1]),s=ec(t.children[t.children.length-1]);a&&s&&(n.position={start:a,end:s}),r.push(n)}let a={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){let i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},tableRow:function(e,t,i){let n=i?i.children:void 0,r=0===(n?n.indexOf(t):1)?"th":"td",a=i&&"table"===i.type?i.align:void 0,s=a?a.length:t.children.length,l=-1,o=[];for(;++l<s;){let i=t.children[l],n={},s=a?a[l]:void 0;s&&(n.align=s);let h={type:"element",tagName:r,properties:n,children:[]};i&&(h.children=e.all(i),e.patch(i,h),h=e.applyData(i,h)),o.push(h)}let h={type:"element",tagName:"tr",properties:{},children:e.wrap(o,!0)};return e.patch(t,h),e.applyData(t,h)},text:function(e,t){let i={type:"text",value:function(e){let t=String(e),i=/\r?\n|\r/g,n=i.exec(t),r=0,a=[];for(;n;)a.push(id(t.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=i.exec(t);return a.push(id(t.slice(r),r>0,!1)),a.join("")}(String(t.value))};return e.patch(t,i),e.applyData(t,i)},thematicBreak:function(e,t){let i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)},toml:ig,yaml:ig,definition:ig,footnoteDefinition:ig};function ig(){}let im={}.hasOwnProperty,iv={};function ib(e,t){e.position&&(t.position=function(e){let t=eu(e),i=ec(e);if(t&&i)return{start:t,end:i}}(e))}function iw(e,t){let i=t;if(e&&e.data){let t=e.data.hName,n=e.data.hChildren,r=e.data.hProperties;"string"==typeof t&&("element"===i.type?i.tagName=t:i={type:"element",tagName:t,properties:{},children:"children"in i?i.children:[i]}),"element"===i.type&&r&&Object.assign(i.properties,ie(r)),"children"in i&&i.children&&null!=n&&(i.children=n)}return i}function iy(e,t){let i=[],n=-1;for(t&&i.push({type:"text",value:"\n"});++n<e.length;)n&&i.push({type:"text",value:"\n"}),i.push(e[n]);return t&&e.length>0&&i.push({type:"text",value:"\n"}),i}function ix(e){let t=0,i=e.charCodeAt(t);for(;9===i||32===i;)t++,i=e.charCodeAt(t);return e.slice(t)}function iA(e,t){let i=function(e,t){let i=t||iv,n=new Map,r=new Map,a={all:function(e){let t=[];if("children"in e){let i=e.children,n=-1;for(;++n<i.length;){let r=a.one(i[n],e);if(r){if(n&&"break"===i[n-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=ix(r.value)),!Array.isArray(r)&&"element"===r.type)){let e=r.children[0];e&&"text"===e.type&&(e.value=ix(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:iw,definitionById:n,footnoteById:r,footnoteCounts:new Map,footnoteOrder:[],handlers:{...ip,...i.handlers},one:function(e,t){let i=e.type,n=a.handlers[i];if(im.call(a.handlers,i)&&n)return n(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(i)){if("children"in e){let{children:t,...i}=e,n=ie(i);return n.children=a.all(e),n}return ie(e)}return(a.options.unknownHandler||function(e,t){let i=t.data||{},n="value"in t&&!(im.call(i,"hProperties")||im.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)})(a,e,t)},options:i,patch:ib,wrap:iy};return ih(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?n:r,i=String(e.identifier).toUpperCase();t.has(i)||t.set(i,e)}}),a}(e,t),n=i.one(e,void 0),r=function(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||ii,n=e.options.footnoteBackLabel||ir,r=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[],o=-1;for(;++o<e.footnoteOrder.length;){let r=e.footnoteById.get(e.footnoteOrder[o]);if(!r)continue;let a=e.all(r),s=String(r.identifier).toUpperCase(),h=it(s.toLowerCase()),c=0,u=[],d=e.footnoteCounts.get(s);for(;void 0!==d&&++c<=d;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof i?i:i(o,c);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof n?n:n(o,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let p=a[a.length-1];if(p&&"element"===p.type&&"p"===p.tagName){let e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...u)}else a.push(...u);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(a,!0)};e.patch(r,f),l.push(f)}if(0!==l.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...ie(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:"\n"}]}}(i),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&(A("children"in a),a.children.push({type:"text",value:"\n"},r)),a}function ik(e,t){return e&&"run"in e?async function(i,n){let r=iA(i,{file:n,...t});await e.run(r,n)}:function(i,n){return iA(i,{file:n,...e||t})}}function i_(e){if(e)throw e}var iS=e.i(4100);function iE(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let iM={basename:function(e,t){let i;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');iC(e);let n=0,r=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,l=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(i){n=a+1;break}}else s<0&&(i=!0,s=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)},dirname:function(e){let t;if(iC(e),0===e.length)return".";let i=-1,n=e.length;for(;--n;)if(47===e.codePointAt(n)){if(t){i=n;break}}else t||(t=!0);return i<0?47===e.codePointAt(0)?"/":".":1===i&&47===e.codePointAt(0)?"//":e.slice(0,i)},extname:function(e){let t;iC(e);let i=e.length,n=-1,r=0,a=-1,s=0;for(;i--;){let l=e.codePointAt(i);if(47===l){if(t){r=i+1;break}continue}n<0&&(t=!0,n=i+1),46===l?a<0?a=i:1!==s&&(s=1):a>-1&&(s=-1)}return a<0||n<0||0===s||1===s&&a===n-1&&a===r+1?"":e.slice(a,n)},join:function(){let e;for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1;for(;++r<i.length;)iC(i[r]),i[r]&&(e=void 0===e?i[r]:e+"/"+i[r]);return void 0===e?".":function(e){iC(e);let t=47===e.codePointAt(0),i=function(e,t){let i,n,r="",a=0,s=-1,l=0,o=-1;for(;++o<=e.length;){if(o<e.length)i=e.codePointAt(o);else if(47===i)break;else i=47;if(47===i){if(s===o-1||1===l);else if(s!==o-1&&2===l){if(r.length<2||2!==a||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2)){if(r.length>2){if((n=r.lastIndexOf("/"))!==r.length-1){n<0?(r="",a=0):a=(r=r.slice(0,n)).length-1-r.lastIndexOf("/"),s=o,l=0;continue}}else if(r.length>0){r="",a=0,s=o,l=0;continue}}t&&(r=r.length>0?r+"/..":"..",a=2)}else r.length>0?r+="/"+e.slice(s+1,o):r=e.slice(s+1,o),a=o-s-1;s=o,l=0}else 46===i&&l>-1?l++:l=-1}return r}(e,!t);return 0!==i.length||t||(i="."),i.length>0&&47===e.codePointAt(e.length-1)&&(i+="/"),t?"/"+i:i}(e)},sep:"/"};function iC(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}let iT={cwd:function(){return"/"}};function iP(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}let iR=["history","path","basename","stem","extname","dirname"];class iI{get basename(){return"string"==typeof this.path?iM.basename(this.path):void 0}set basename(e){iD(e,"basename"),iL(e,"basename"),this.path=iM.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?iM.dirname(this.path):void 0}set dirname(e){iF(this.basename,"dirname"),this.path=iM.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?iM.extname(this.path):void 0}set extname(e){if(iL(e,"extname"),iF(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=iM.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){iP(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!iP(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,i=-1;for(;++i<t.length;)if(37===t.codePointAt(i)&&50===t.codePointAt(i+1)){let e=t.codePointAt(i+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),iD(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?iM.basename(this.path,this.extname):void 0}set stem(e){iD(e,"stem"),iL(e,"stem"),this.path=iM.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){let n=this.message(e,t,i);throw n.fatal=!0,n}info(e,t,i){let n=this.message(e,t,i);return n.fatal=void 0,n}message(e,t,i){let n=new ev(e,t,i);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,i;t=e?iP(e)?{path:e}:"string"==typeof e||function(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":iT.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<iR.length;){let e=iR[n];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(i in t)iR.includes(i)||(this[i]=t[i])}}function iL(e,t){if(e&&e.includes(iM.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+iM.sep+"`")}function iD(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function iF(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}let iN=function(e){let t=this.constructor.prototype,i=t[e],n=function(){return i.apply(n,arguments)};return Object.setPrototypeOf(n,t),n},iO={}.hasOwnProperty;class iW extends iN{copy(){let e=new iW,t=-1;for(;++t<this.attachers.length;){let i=this.attachers[t];e.use(...i)}return e.data((0,iS.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(iH("data",this.frozen),this.namespace[e]=t,this):iO.call(this.namespace,e)&&this.namespace[e]||void 0:e?(iH("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(!1===t[0])continue;!0===t[0]&&(t[0]=void 0);let i=e.call(this,...t);"function"==typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=iV(e),i=this.parser||this.Parser;return iB("parse",i),i(String(t),t)}process(e,t){let i=this;return this.freeze(),iB("process",this.parser||this.Parser),iz("process",this.compiler||this.Compiler),t?n(void 0,t):new Promise(n);function n(n,r){let a=iV(e),s=i.parse(a);function l(e,i){e||!i?r(e):n?n(i):(A(t,"`done` is defined if `resolve` is not"),t(void 0,i))}i.run(s,a,function(e,t,n){var r,a;if(e||!t||!n)return l(e);let s=i.stringify(t,n);"string"==typeof(r=s)||(a=r)&&"object"==typeof a&&"byteLength"in a&&"byteOffset"in a?n.value=s:n.result=s,l(e,n)})}}processSync(e){let t,i=!1;return this.freeze(),iB("processSync",this.parser||this.Parser),iz("processSync",this.compiler||this.Compiler),this.process(e,function(e,n){i=!0,i_(e),t=n}),iG("processSync","process",i),A(t,"we either bailed on an error or have a tree"),t}run(e,t,i){iU(e),this.freeze();let n=this.transformers;return i||"function"!=typeof t||(i=t,t=void 0),i?r(void 0,i):new Promise(r);function r(r,a){A("function"!=typeof t,"`file` cant be a `done` anymore, we checked");let s=iV(t);n.run(e,s,function(t,n,s){let l=n||e;t?a(t):r?r(l):(A(i,"`done` is defined if `resolve` is not"),i(void 0,l,s))})}}runSync(e,t){let i,n=!1;return this.run(e,t,function(e,t){i_(e),i=t,n=!0}),iG("runSync","run",n),A(i,"we either bailed on an error or have a tree"),i}stringify(e,t){this.freeze();let i=iV(t),n=this.compiler||this.Compiler;return iz("stringify",n),iU(e),n(e,i)}use(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let r=this.attachers,a=this.namespace;if(iH("use",this.frozen),null==e);else if("function"==typeof e)o(e,i);else if("object"==typeof e)Array.isArray(e)?l(e):s(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function s(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(a.settings=(0,iS.default)(!0,a.settings,e.settings))}function l(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;){var i=e[t];if("function"==typeof i)o(i,[]);else if("object"==typeof i)if(Array.isArray(i)){let[e,...t]=i;o(e,t)}else s(i);else throw TypeError("Expected usable value, not `"+i+"`")}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function o(e,t){let i=-1,n=-1;for(;++i<r.length;)if(r[i][0]===e){n=i;break}if(-1===n)r.push([e,...t]);else if(t.length>0){let[i,...a]=t,s=r[n][1];iE(s)&&iE(i)&&(i=(0,iS.default)(!0,s,i)),r[n]=[e,i,...a]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let e=[],t={run:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let r=-1,a=i.pop();if("function"!=typeof a)throw TypeError("Expected function as last argument, not "+a);!function t(n){for(var s=arguments.length,l=Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];let h=e[++r],c=-1;if(n)return void a(n);for(;++c<i.length;)(null===l[c]||void 0===l[c])&&(l[c]=i[c]);i=l,h?(function(e,t){let i;return function(){let t;for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];let o=e.length>s.length;o&&s.push(n);try{t=e.apply(this,s)}catch(e){if(o&&i)throw e;return n(e)}o||(t&&t.then&&"function"==typeof t.then?t.then(r,n):t instanceof Error?n(t):r(t))};function n(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];i||(i=!0,t(e,...r))}function r(e){n(null,e)}})(h,t)(...l):a(null,...l)}(null,...i)},use:function(i){if("function"!=typeof i)throw TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}};return t}()}}let ij=new iW().freeze();function iB(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function iz(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function iH(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function iU(e){if(!iE(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function iG(e,t,i){if(!i)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function iV(e){var t;return(t=e)&&"object"==typeof t&&"message"in t&&"messages"in t?e:new iI(e)}let iq=[],iX={allowDangerousHtml:!0},iK=/^(https?|ircs?|mailto|xmpp)$/i,iY=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function iQ(e){let t=function(e){let t=e.rehypePlugins||iq,i=e.remarkPlugins||iq,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iX}:iX;return ij().use(t2).use(i).use(ik,n).use(t)}(e),n=function(e){let t=e.children||"",i=new iI;return"string"==typeof t?i.value=t:k("Unexpected value `"+t+"` for `children` prop, expected `string`"),i}(e);return function(e,t){let n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,l=t.skipHtml,o=t.unwrapDisallowed,h=t.urlTransform||iJ;for(let e of iY)Object.hasOwn(t,e.from)&&k("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return n&&s&&k("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),ih(e,function(e,t,i){if("raw"===e.type&&i&&"number"==typeof t)return l?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in eR)if(Object.hasOwn(eR,t)&&Object.hasOwn(e.properties,t)){let i=e.properties[t],n=eR[t];(null===n||n.includes(e.tagName))&&(e.properties[t]=h(String(i||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!s&&s.includes(e.tagName);if(!a&&r&&"number"==typeof t&&(a=!r(e,t,i)),a&&i&&"number"==typeof t)return o&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}),function(e,t){var i,n,r,a;let s;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let l=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");i=l,n=t.jsxDEV,s=function(e,t,r,a){let s=Array.isArray(r.children),l=eu(e);return n(t,r,a,s,{columnNumber:l?l.column-1:void 0,fileName:i,lineNumber:l?l.line:void 0},void 0)}}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");r=t.jsx,a=t.jsxs,s=function(e,t,i,n){let s=Array.isArray(i.children)?a:r;return n?s(t,i,n):s(t,i)}}let o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:l,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?eo:el,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},h=e_(o,e,void 0);return h&&"string"!=typeof h?h:o.create(e,o.Fragment,{children:h||void 0},void 0)}(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(n),n),e)}function iJ(e){let t=e.indexOf(":"),i=e.indexOf("?"),n=e.indexOf("#"),r=e.indexOf("/");return -1===t||-1!==r&&t>r||-1!==i&&t>i||-1!==n&&t>n||iK.test(e.slice(0,t))?e:""}var iZ=e.i(38456),i$=e.i(76700),i$=i$,i0=e.i(57172),i1=e.i(48458),i1=i1,i2=e.i(4270),i2=i2,i3=e.i(21071),i3=i3,i4=e.i(27173),i4=i4,i5=e.i(7694),i5=i5,i6=p,i9=e.i(67239),i8=e.i(59173);let i7=(0,i8.default)((0,i.jsx)("path",{d:"M14.12 10.47 12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8z"}),"DeleteForeverOutlined"),ne=(0,i8.default)((0,i.jsx)("path",{d:"M5 4h14v2H5zm0 10h4v6h6v-6h4l-7-7zm8-2v6h-2v-6H9.83L12 9.83 14.17 12z"}),"PublishOutlined");var nt=e.i(47167),ni=e.i(67034);function nn(e,t){return t.get?t.get.call(e):t.value}function nr(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function na(e,t){var i=nr(e,t,"get");return nn(e,i)}function ns(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function nl(e,t,i){ns(e,t),t.set(e,i)}function no(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}function nh(e,t,i){var n=nr(e,t,"set");return no(e,n,i),i}function nc(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}function nu(e,t){var i=nr(e,t,"update");return nc(e,i)}function nd(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}function np(e,t){ns(e,t),t.add(e)}function nf(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}function ng(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function nm(e,t,i){return nf(e,t),ng(i,"get"),nn(e,i)}function nv(e,t,i,n){return nf(e,t),ng(i,"set"),no(e,i,n),n}function nb(e,t,i){return nf(e,t),ng(i,"update"),nc(e,i)}var nw=e.i(99749);function ny(e,t){var i=nr(e,t,"set");if(i.set)return"__destrObj"in i||(i.__destrObj={set value(v){i.set.call(e,v)}}),i.__destrObj;if(!i.writable)throw TypeError("attempted to set read only private field");return i}let nx={get url(){return`file://${e.P("node_modules/pdfjs-dist/build/pdf.mjs")}`}};var nA={};nA.d=(e,t)=>{for(var i in t)nA.o(t,i)&&!nA.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},nA.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var nk=globalThis.pdfjsLib={};nA.d(nk,{AbortException:()=>n$,AnnotationEditorLayer:()=>vc,AnnotationEditorParamsType:()=>nP,AnnotationEditorType:()=>nT,AnnotationEditorUIManager:()=>sr,AnnotationLayer:()=>d5,AnnotationMode:()=>nC,ColorPicker:()=>fF,DOMSVGFactory:()=>uE,DrawLayer:()=>v_,FeatureTest:()=>n3,GlobalWorkerOptions:()=>hM,ImageKind:()=>nL,InvalidPDFException:()=>nY,MissingPDFException:()=>nQ,OPS:()=>nO,OutputScale:()=>rA,PDFDataRangeTransport:()=>cX,PDFDateString:()=>rg,PDFWorker:()=>c6,PasswordResponses:()=>nW,PermissionFlag:()=>nR,PixelsPerInch:()=>rn,RenderingCancelledException:()=>rs,TextLayer:()=>cS,TouchManager:()=>s4,UnexpectedResponseException:()=>nJ,Util:()=>n5,VerbosityLevel:()=>nN,XfaLayer:()=>uM,build:()=>ux,createValidAbsoluteUrl:()=>nG,fetchData:()=>rr,getDocument:()=>cU,getFilenameFromUrl:()=>rh,getPdfFilenameFromUrl:()=>rc,getXfaPageViewport:()=>rv,isDataScheme:()=>rl,isPdfFile:()=>ro,noContextMenu:()=>rp,normalizeUnicode:()=>re,setLayerDimensions:()=>rx,shadow:()=>nV,stopEvent:()=>rf,version:()=>uy});let n_="object"==typeof nt.default&&nt.default+""=="[object process]"&&!nt.default.versions.nw&&!(nt.default.versions.electron&&nt.default.type&&"browser"!==nt.default.type),nS=[1,0,0,1,0,0],nE=[.001,0,0,.001,0,0],nM={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nC={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nT={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},nP={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},nR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nI={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nL={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},nD={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},nF={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nN={ERRORS:0,WARNINGS:1,INFOS:5},nO={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},nW={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},nj=nN.WARNINGS;function nB(e){nj>=nN.INFOS&&console.log("Info: ".concat(e))}function nz(e){nj>=nN.WARNINGS&&console.log("Warning: ".concat(e))}function nH(e){throw Error(e)}function nU(e,t){e||nH(t)}function nG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){let t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e="http://".concat(e))}if(i.tryConvertEncoding)try{var n;n=e,e=decodeURIComponent(escape(n))}catch(e){}}let r=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(e){}return null}function nV(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}let nq=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=Error(),e.constructor=e,e}();class nX extends nq{constructor(e,t){super(e,"PasswordException"),this.code=t}}class nK extends nq{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class nY extends nq{constructor(e){super(e,"InvalidPDFException")}}class nQ extends nq{constructor(e){super(e,"MissingPDFException")}}class nJ extends nq{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class nZ extends nq{constructor(e){super(e,"FormatError")}}class n$ extends nq{constructor(e){super(e,"AbortException")}}function n0(e){("object"!=typeof e||(null==e?void 0:e.length)===void 0)&&nH("Invalid argument for bytesToString");let t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);let i=[];for(let n=0;n<t;n+=8192){let r=Math.min(n+8192,t),a=e.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function n1(e){"string"!=typeof e&&nH("Invalid argument for stringToBytes");let t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}function n2(e){let t=Object.create(null);for(let[i,n]of e)t[i]=n;return t}class n3{static get isLittleEndian(){return nV(this,"isLittleEndian",function(){let e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return nV(this,"isEvalSupported",function(){try{return Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return nV(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return nV(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){var e,t;return"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.platform)?nV(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof(null==(t=navigator)?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):nV(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return nV(this,"isCSSRoundSupported",null==(t=globalThis.CSS)||null==(e=t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}let n4=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class n5{static makeHexColor(e,t,i){return"#".concat(n4[e]).concat(n4[t]).concat(n4[i])}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){let i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){let i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],s=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*n))/2;return[Math.sqrt(s+l||1),Math.sqrt(s-l||1)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;let r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,n,a]}static bezierBoundingBox(e,t,i,n,r,a,s,l,o){return o?(o[0]=Math.min(o[0],e,s),o[1]=Math.min(o[1],t,l),o[2]=Math.max(o[2],e,s),o[3]=Math.max(o[3],t,l)):o=[Math.min(e,s),Math.min(t,l),Math.max(e,s),Math.max(t,l)],(nf(this,n5),n9).call(n5,e,i,r,s,t,n,a,l,3*(-e+3*(i-r)+s),6*(e-2*i+r),3*(i-e),o),(nf(this,n5),n9).call(n5,e,i,r,s,t,n,a,l,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),o),o}}function n6(e,t,i,n,r,a,s,l,o,h){if(o<=0||o>=1)return;let c=1-o,u=o*o,d=u*o,p=c*(c*(c*e+3*o*t)+3*u*i)+d*n,f=c*(c*(c*r+3*o*a)+3*u*s)+d*l;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}function n9(e,t,i,n,r,a,s,l,o,h,c,u){if(1e-12>Math.abs(o)){Math.abs(h)>=1e-12&&(nf(this,n5),n6).call(n5,e,t,i,n,r,a,s,l,-c/h,u);return}let d=h**2-4*c*o;if(d<0)return;let p=Math.sqrt(d),f=2*o;(nf(this,n5),n6).call(n5,e,t,i,n,r,a,s,l,(-h+p)/f,u),(nf(this,n5),n6).call(n5,e,t,i,n,r,a,s,l,(-h-p)/f,u)}let n8=null,n7=null;function re(e){return n8||(n8=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,n7=new Map([["","t"]])),e.replaceAll(n8,(e,t,i)=>t?t.normalize("NFKC"):n7.get(i))}let rt="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return new Promise(t=>{t(e(...i))})});let ri="http://www.w3.org/2000/svg";class rn{}async function rr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(rd(e,document.baseURI)){let i=await fetch(e);if(!i.ok)throw Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}n(Error(r.statusText))}},r.send(null)})}(0,nw._)(rn,"CSS",96),(0,nw._)(rn,"PDF",72),(0,nw._)(rn,"PDF_TO_CSS_UNITS",rn.CSS/rn.PDF);class ra{get rawDims(){let{userUnit:e,viewBox:t}=this,i=t.map(t=>t*e);return nV(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ra({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return n5.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=n5.applyTransform([e[0],e[1]],this.transform),i=n5.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return n5.applyInverseTransform([e,t],this.transform)}constructor({viewBox:e,userUnit:t,scale:i,rotation:n,offsetX:r=0,offsetY:a=0,dontFlip:s=!1}){let l,o,h,c,u,d,p,f;this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=n,this.offsetX=r,this.offsetY=a,i*=t;let g=(e[2]+e[0])/2,m=(e[3]+e[1])/2;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,o=0,h=0,c=1;break;case 90:l=0,o=1,h=1,c=0;break;case 270:l=0,o=-1,h=-1,c=0;break;case 0:l=1,o=0,h=0,c=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(h=-h,c=-c),0===l?(u=Math.abs(m-e[1])*i+r,d=Math.abs(g-e[0])*i+a,p=(e[3]-e[1])*i,f=(e[2]-e[0])*i):(u=Math.abs(g-e[0])*i+r,d=Math.abs(m-e[1])*i+a,p=(e[2]-e[0])*i,f=(e[3]-e[1])*i),this.transform=[l*i,o*i,h*i,c*i,u-l*i*g-h*i*m,d-o*i*g-c*i*m],this.width=p,this.height=f}}class rs extends nq{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function rl(e){let t=e.length,i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}function ro(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function rh(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function rc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(rl(e))return nz('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0]).includes("%"))try{r=i.exec(decodeURIComponent(r))[0]}catch(e){}return r||t}class ru{time(e){e in this.started&&nz("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||nz("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:i,start:n,end:r}of this.times)e.push("".concat(i.padEnd(t)," ").concat(r-n,"ms\n"));return e.join("")}constructor(){(0,nw._)(this,"started",Object.create(null)),(0,nw._)(this,"times",[])}}function rd(e,t){try{let{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i}catch(e){return!1}}function rp(e){e.preventDefault()}function rf(e){e.preventDefault(),e.stopPropagation()}class rg{static toDateObject(e){if(!e||"string"!=typeof e)return null;nv(this,rg,rm,nm(this,rg,rm)||RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=nm(this,rg,rm).exec(e);if(!t)return null;let i=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let o=t[7]||"Z",h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(t[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===o?(a+=h,s+=c):"+"===o&&(a-=h,s-=c),new Date(Date.UTC(i,n,r,a,s,l))}}var rm={writable:!0,value:void 0};function rv(e,t){let{scale:i=1,rotation:n=0}=t,{width:r,height:a}=e.attributes.style;return new ra({viewBox:[0,0,parseInt(r),parseInt(a)],userUnit:1,scale:i,rotation:n})}function rb(e){if(e.startsWith("#")){let t=parseInt(e.slice(1),16);return[(0xff0000&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(nz('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function rw(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform();return[t,i,n,r,a,s]}function ry(e){let{a:t,b:i,c:n,d:r,e:a,f:s}=e.getTransform().invertSelf();return[t,i,n,r,a,s]}function rx(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t instanceof ra){let{pageWidth:n,pageHeight:r}=t.rawDims,{style:a}=e,s=n3.isCSSRoundSupported,l="var(--scale-factor) * ".concat(n,"px"),o="var(--scale-factor) * ".concat(r,"px"),h=s?"round(down, ".concat(l,", var(--scale-round-x, 1px))"):"calc(".concat(l,")"),c=s?"round(down, ".concat(o,", var(--scale-round-y, 1px))"):"calc(".concat(o,")");i&&t.rotation%180!=0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&e.setAttribute("data-main-rotation",t.rotation)}class rA{get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}}var rk=new WeakMap,r_=new WeakMap,rS=new WeakMap,rE=new WeakMap,rM=new WeakMap,rC=new WeakSet,rT=new WeakSet,rP=new WeakSet,rR=new WeakSet,rI=new WeakMap;class rL{render(){let e=nh(this,rk,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=na(this,rS)._uiManager._signal;e.addEventListener("contextmenu",rp,{signal:t}),e.addEventListener("pointerdown",(nf(rL,rL),rF),{signal:t});let i=nh(this,rE,document.createElement("div"));i.className="buttons",e.append(i);let n=na(this,rS).toolbarPosition;if(n){let{style:t}=e,i="ltr"===na(this,rS)._uiManager.direction?1-n[0]:n[0];t.insetInlineEnd="".concat(100*i,"%"),t.top="calc(".concat(100*n[1],"% + var(--editor-toolbar-vert-offset))")}return nd(this,rR,rj).call(this),e}get div(){return na(this,rk)}hide(){var e;na(this,rk).classList.add("hidden"),null==(e=na(this,r_))||e.hideDropdown()}show(){var e;na(this,rk).classList.remove("hidden"),null==(e=na(this,rM))||e.shown()}async addAltText(e){let t=await e.render();nd(this,rP,rW).call(this,t),na(this,rE).prepend(t,na(this,rI)),nh(this,rM,e)}addColorPicker(e){nh(this,r_,e);let t=e.renderButton();nd(this,rP,rW).call(this,t),na(this,rE).prepend(t,na(this,rI))}remove(){var e;na(this,rk).remove(),null==(e=na(this,r_))||e.destroy(),nh(this,r_,null)}constructor(e){np(this,rC),np(this,rT),np(this,rP),np(this,rR),nl(this,rI,{get:rB,set:void 0}),nl(this,rk,{writable:!0,value:null}),nl(this,r_,{writable:!0,value:null}),nl(this,rS,{writable:!0,value:void 0}),nl(this,rE,{writable:!0,value:null}),nl(this,rM,{writable:!0,value:null}),nh(this,rS,e),nv(rL,rL,rD,nm(rL,rL,rD)||Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}}var rD={writable:!0,value:null};function rF(e){e.stopPropagation()}function rN(e){na(this,rS)._focusEventsAllowed=!1,rf(e)}function rO(e){na(this,rS)._focusEventsAllowed=!0,rf(e)}function rW(e){let t=na(this,rS)._uiManager._signal;e.addEventListener("focusin",nd(this,rC,rN).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",nd(this,rT,rO).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",rp,{signal:t})}function rj(){let{editorType:e,_uiManager:t}=na(this,rS),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",nm(rL,rL,rD)[e]),nd(this,rP,rW).call(this,i),i.addEventListener("click",e=>{t.delete()},{signal:t._signal}),na(this,rE).append(i)}function rB(){let e=document.createElement("div");return e.className="divider",e}var rz=new WeakMap,rH=new WeakMap,rU=new WeakMap,rG=new WeakSet,rV=new WeakSet,rq=new WeakSet;class rX{show(e,t,i){let[n,r]=nd(this,rV,rY).call(this,t,i),{style:a}=nh(this,rH,na(this,rH)||nd(this,rG,rK).call(this));e.append(na(this,rH)),a.insetInlineEnd="".concat(100*n,"%"),a.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){na(this,rH).remove()}constructor(e){np(this,rG),np(this,rV),np(this,rq),nl(this,rz,{writable:!0,value:null}),nl(this,rH,{writable:!0,value:null}),nl(this,rU,{writable:!0,value:void 0}),nh(this,rU,e)}}function rK(){let e=nh(this,rH,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",rp,{signal:na(this,rU)._signal});let t=nh(this,rz,document.createElement("div"));return t.className="buttons",e.append(t),nd(this,rq,rQ).call(this),e}function rY(e,t){let i=0,n=0;for(let r of e){let e=r.y+r.height;if(e<i)continue;let a=r.x+(t?r.width:0);if(e>i){n=a,i=e;continue}t?a>n&&(n=a):a<n&&(n=a)}return[t?1-n:n,i]}function rQ(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=na(this,rU)._signal;e.addEventListener("contextmenu",rp,{signal:i}),e.addEventListener("click",()=>{na(this,rU).highlightSelection("floating_button")},{signal:i}),na(this,rz).append(e)}function rJ(e,t,i){for(let n of i)t.addEventListener(n,e[n].bind(e))}var rZ=new WeakMap;class r${get id(){return"".concat("pdfjs_internal_editor_").concat(nu(this,rZ).value++)}constructor(){nl(this,rZ,{writable:!0,value:0})}}var r0=new WeakMap,r1=new WeakMap,r2=new WeakMap,r3=new WeakSet;class r4{static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',nV(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){let{lastModified:t,name:i,size:n,type:r}=e;return nd(this,r3,r5).call(this,"".concat(t,"_").concat(i,"_").concat(n,"_").concat(r),e)}async getFromUrl(e){return nd(this,r3,r5).call(this,e,e)}async getFromBlob(e,t){let i=await t;return nd(this,r3,r5).call(this,e,i)}async getFromId(e){nh(this,r2,na(this,r2)||new Map);let t=na(this,r2).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){nh(this,r2,na(this,r2)||new Map);let i=na(this,r2).get(e);if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:"image_".concat(na(this,r0),"_").concat(nu(this,r1).value++),refCounter:1,isSvg:!1},na(this,r2).set(e,i),na(this,r2).set(i.id,i),i}getSvgUrl(e){let t=na(this,r2).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){var t;nh(this,r2,na(this,r2)||new Map);let i=na(this,r2).get(e);if(!i||(i.refCounter-=1,0!==i.refCounter))return;let{bitmap:n}=i;if(!i.url&&!i.file){let e=new OffscreenCanvas(n.width,n.height);e.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=e.convertToBlob()}null==(t=n.close)||t.call(n),i.bitmap=null}isValidId(e){return e.startsWith("image_".concat(na(this,r0),"_"))}constructor(){np(this,r3),nl(this,r0,{writable:!0,value:function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Uint8Array(32);return crypto.getRandomValues(e),n0(e)}()}),nl(this,r1,{writable:!0,value:0}),nl(this,r2,{writable:!0,value:null})}}async function r5(e,t){nh(this,r2,na(this,r2)||new Map);let i=na(this,r2).get(e);if(null===i)return null;if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;try{let e;if(i||(i={bitmap:null,id:"image_".concat(na(this,r0),"_").concat(nu(this,r1).value++),refCounter:0,isSvg:!1}),"string"==typeof t?(i.url=t,e=await rr(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){let t=r4._isSVGFittingCanvas,n=new FileReader,r=new Image,a=new Promise((e,a)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{let e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=a});n.readAsDataURL(e),await a}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(e){nz(e),i=null}return na(this,r2).set(e,i),i&&na(this,r2).set(i.id,i),i}var r6=new WeakMap,r9=new WeakMap,r8=new WeakMap,r7=new WeakMap;class ae{add(e){let{cmd:t,undo:i,post:n,mustExec:r,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}=e;if(r&&t(),na(this,r9))return;let o={cmd:t,undo:i,post:n,type:a};if(-1===na(this,r7)){na(this,r6).length>0&&(na(this,r6).length=0),nh(this,r7,0),na(this,r6).push(o);return}if(s&&na(this,r6)[na(this,r7)].type===a){l&&(o.undo=na(this,r6)[na(this,r7)].undo),na(this,r6)[na(this,r7)]=o;return}let h=na(this,r7)+1;h===na(this,r8)?na(this,r6).splice(0,1):(nh(this,r7,h),h<na(this,r6).length&&na(this,r6).splice(h)),na(this,r6).push(o)}undo(){if(-1===na(this,r7))return;nh(this,r9,!0);let{undo:e,post:t}=na(this,r6)[na(this,r7)];e(),null==t||t(),nh(this,r9,!1),nh(this,r7,na(this,r7)-1)}redo(){if(na(this,r7)<na(this,r6).length-1){nh(this,r7,na(this,r7)+1),nh(this,r9,!0);let{cmd:e,post:t}=na(this,r6)[na(this,r7)];e(),null==t||t(),nh(this,r9,!1)}}hasSomethingToUndo(){return -1!==na(this,r7)}hasSomethingToRedo(){return na(this,r7)<na(this,r6).length-1}cleanType(e){if(-1!==na(this,r7)){for(let t=na(this,r7);t>=0;t--)if(na(this,r6)[t].type!==e){na(this,r6).splice(t+1,na(this,r7)-t),nh(this,r7,t);return}na(this,r6).length=0,nh(this,r7,-1)}}destroy(){nh(this,r6,null)}constructor(e=128){nl(this,r6,{writable:!0,value:[]}),nl(this,r9,{writable:!0,value:!1}),nl(this,r8,{writable:!0,value:void 0}),nl(this,r7,{writable:!0,value:-1}),nh(this,r8,e)}}var at=new WeakSet;class ai{exec(e,t){if(!this.allKeys.has(t.key))return;let i=this.callbacks.get(nd(this,at,an).call(this,t));if(!i)return;let{callback:n,options:{bubbles:r=!1,args:a=[],checker:s=null}}=i;(!s||s(e,t))&&(n.bind(e,...a,t)(),r||rf(t))}constructor(e){np(this,at),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=n3.platform;for(let[i,n,r={}]of e)for(let e of i){let i=e.startsWith("mac+");t&&i?(this.callbacks.set(e.slice(4),{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1))):t||i||(this.callbacks.set(e,{callback:n,options:r}),this.allKeys.add(e.split("+").at(-1)))}}}function an(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}class ar{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]),t=document.createElement("span");for(let i of(t.style.visibility="hidden",document.body.append(t),e.keys())){t.style.color=i;let n=window.getComputedStyle(t).color;e.set(i,rb(n))}return t.remove(),nV(this,"_colors",e)}convert(e){let t=rb(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[e,i]of this._colors)if(i.every((e,i)=>e===t[i]))return ar._colorsMapping.get(e);return t}getHexCode(e){let t=this._colors.get(e);return t?n5.makeHexColor(...t):e}}(0,nw._)(ar,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var aa=new WeakMap,as=new WeakMap,al=new WeakMap,ao=new WeakMap,ah=new WeakMap,ac=new WeakMap,au=new WeakMap,ad=new WeakMap,ap=new WeakMap,af=new WeakMap,ag=new WeakMap,am=new WeakMap,av=new WeakMap,ab=new WeakMap,aw=new WeakMap,ay=new WeakMap,ax=new WeakMap,aA=new WeakMap,ak=new WeakMap,a_=new WeakMap,aS=new WeakMap,aE=new WeakMap,aM=new WeakMap,aC=new WeakMap,aT=new WeakMap,aP=new WeakMap,aR=new WeakMap,aI=new WeakMap,aL=new WeakMap,aD=new WeakMap,aF=new WeakMap,aN=new WeakMap,aO=new WeakMap,aW=new WeakMap,aj=new WeakMap,aB=new WeakMap,az=new WeakMap,aH=new WeakMap,aU=new WeakMap,aG=new WeakMap,aV=new WeakMap,aq=new WeakMap,aX=new WeakSet,aK=new WeakSet,aY=new WeakSet,aQ=new WeakSet,aJ=new WeakSet,aZ=new WeakSet,a$=new WeakSet,a0=new WeakSet,a1=new WeakSet,a2=new WeakSet,a3=new WeakSet,a4=new WeakSet,a5=new WeakSet,a6=new WeakSet,a9=new WeakSet,a8=new WeakSet,a7=new WeakSet,se=new WeakSet,st=new WeakMap,si=new WeakSet,sn=new WeakSet;class sr{static get _keyboardManager(){let e=sr.prototype,t=e=>na(e,aG).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),i=(e,t)=>{let{target:i}=t;if(i instanceof HTMLInputElement){let{type:e}=i;return"text"!==e&&"number"!==e}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return nV(this,"_keyboardManager",new ai([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&na(e,aG).contains(i)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:i}=t;return!(i instanceof HTMLButtonElement)&&na(e,aG).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,n,r;for(let i of(null==(e=na(this,aq))||e.resolve(),nh(this,aq,null),null==(t=na(this,aa))||t.abort(),nh(this,aa,null),this._signal=null,na(this,ao).values()))i.destroy();na(this,ao).clear(),na(this,al).clear(),na(this,aw).clear(),nh(this,as,null),na(this,aO).clear(),na(this,ad).destroy(),null==(i=na(this,ah))||i.destroy(),null==(n=na(this,aC))||n.hide(),nh(this,aC,null),na(this,a_)&&(clearTimeout(na(this,a_)),nh(this,a_,null)),na(this,aU)&&(clearTimeout(na(this,aU)),nh(this,aU,null)),null==(r=this._editorUndoBar)||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return na(this,aF)}get useNewAltTextFlow(){return na(this,ax)}get useNewAltTextWhenAddingImage(){return na(this,aA)}get hcmFilter(){return nV(this,"hcmFilter",na(this,aj)?na(this,ak).addHCMFilter(na(this,aj).foreground,na(this,aj).background):"none")}get direction(){return nV(this,"direction",getComputedStyle(na(this,aG)).direction)}get highlightColors(){return nV(this,"highlightColors",na(this,aE)?new Map(na(this,aE).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return nV(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),nh(this,af,e)}setMainHighlightColorPicker(e){nh(this,aD,e)}editAltText(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==(t=na(this,ah))||t.editAltText(this,e,i)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:i}=e;"enableNewAltTextWhenAddingImage"===t&&nh(this,aA,i)}onPageChanging(e){let{pageNumber:t}=e;nh(this,ag,t-1)}focusMainContainer(){na(this,aG).focus()}findParent(e,t){for(let i of na(this,ao).values()){let{x:n,y:r,width:a,height:s}=i.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+s)return i}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];na(this,aV).classList.toggle("noUserSelect",e)}addShouldRescale(e){na(this,aw).add(e)}removeShouldRescale(e){na(this,aw).delete(e)}onScaleChanging(e){var t;let{scale:i}=e;for(let e of(this.commitOrRemove(),this.viewParameters.realScale=i*rn.PDF_TO_CSS_UNITS,na(this,aw)))e.onScaleChanging();null==(t=na(this,af))||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getSelection();if(!t||t.isCollapsed)return;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a}=t,s=t.toString(),l=nd(this,aX,sa).call(this,t).closest(".textLayer"),o=this.getSelectionBoxes(l);if(!o)return;t.empty();let h=nd(this,aK,ss).call(this,l),c=na(this,aN)===nT.NONE,u=()=>{null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:o,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a,text:s}),c&&this.showAllEditors("highlight",!0,!0)};if(c)return void this.switchToMode(nT.HIGHLIGHT,u);u()}addToAnnotationStorage(e){!e.isEmpty()&&na(this,ac)&&!na(this,ac).has(e.id)&&na(this,ac).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,na(this,aM)&&(nh(this,aM,!1),nd(this,aJ,sh).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of na(this,aO))if(t.div.contains(e)){nh(this,aL,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!na(this,aL))return;let[e,t]=na(this,aL);nh(this,aL,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){nd(this,a1,sp).call(this),nd(this,a3,sg).call(this)}removeEditListeners(){nd(this,a2,sf).call(this),nd(this,a4,sm).call(this)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let i of na(this,ab))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let i of na(this,ab))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var t;if(e.preventDefault(),null==(t=na(this,as))||t.commitOrRemove(),!this.hasSelection)return;let i=[];for(let e of na(this,aO)){let t=e.serialize(!0);t&&i.push(t)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of na(this,ab))if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(e){nz('paste: "'.concat(e.message,'".'));return}if(!Array.isArray(i))return;this.unselectAll();let n=this.currentLayer;try{let e=[];for(let t of i){let i=await n.deserialize(t);if(!i)return;e.push(i)}let t=()=>{for(let t of e)nd(this,se,sA).call(this,t);nd(this,sn,sS).call(this,e)};this.addCommands({cmd:t,undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){nz('paste: "'.concat(e.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),na(this,aN)===nT.NONE||this.isEditorHandlingKeyboard||sr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,na(this,aM)&&(nh(this,aM,!1),nd(this,aJ,sh).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(nd(this,a$,su).call(this),nd(this,a3,sg).call(this),nd(this,a6,sb).call(this,{isEditing:na(this,aN)!==nT.NONE,isEmpty:nd(this,si,s_).call(this),hasSomethingToUndo:na(this,ad).hasSomethingToUndo(),hasSomethingToRedo:na(this,ad).hasSomethingToRedo(),hasSelectedEditor:!1})):(nd(this,a0,sd).call(this),nd(this,a4,sm).call(this),nd(this,a6,sb).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!na(this,ab))for(let t of(nh(this,ab,e),na(this,ab)))nd(this,a9,sw).call(this,t.defaultPropertiesToUpdate)}getId(){return na(this,aT).id}get currentLayer(){return na(this,ao).get(na(this,ag))}getLayer(e){return na(this,ao).get(e)}get currentPageIndex(){return na(this,ag)}addLayer(e){na(this,ao).set(e.pageIndex,e),na(this,aP)?e.enable():e.disable()}removeLayer(e){na(this,ao).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(na(this,aN)!==e){if(na(this,aq)&&(await na(this,aq).promise,!na(this,aq)))return;if(nh(this,aq,Promise.withResolvers()),nh(this,aN,e),e===nT.NONE){var n;this.setEditingState(!1),nd(this,a7,sx).call(this),null==(n=this._editorUndoBar)||n.hide(),na(this,aq).resolve();return}for(let t of(this.setEditingState(!0),await nd(this,a8,sy).call(this),this.unselectAll(),na(this,ao).values()))t.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),na(this,aq).resolve();return}for(let e of na(this,al).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();na(this,aq).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==na(this,aN)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(na(this,ab)){switch(e){case nP.CREATE:this.currentLayer.addNewEditor();return;case nP.HIGHLIGHT_DEFAULT_COLOR:var i;null==(i=na(this,aD))||i.updateColor(t);break;case nP.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),nh(this,aB,na(this,aB)||new Map).set(e,t),this.showAllEditors("highlight",t)}for(let i of na(this,aO))i.updateParams(e,t);for(let i of na(this,ab))i.updateDefaultParams(e,t)}}showAllEditors(e,t){var i,n;for(let i of(arguments.length>2&&void 0!==arguments[2]&&arguments[2],na(this,al).values()))i.editorType===e&&i.show(t);(null==(n=null==(i=na(this,aB))?void 0:i.get(nP.HIGHLIGHT_SHOW_ALL))||n)!==t&&nd(this,a9,sw).call(this,[[nP.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(na(this,aR)!==e)for(let t of(nh(this,aR,e),na(this,ao).values()))e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}getEditors(e){let t=[];for(let i of na(this,al).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return na(this,al).get(e)}addEditor(e){na(this,al).set(e.id,e)}removeEditor(e){if(e.div.contains(document.activeElement)&&(na(this,a_)&&clearTimeout(na(this,a_)),nh(this,a_,setTimeout(()=>{this.focusMainContainer(),nh(this,a_,null)},0))),na(this,al).delete(e.id),this.unselect(e),!e.annotationElementId||!na(this,am).has(e.annotationElementId)){var t;null==(t=na(this,ac))||t.remove(e.id)}}addDeletedAnnotationElement(e){na(this,am).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return na(this,am).has(e)}removeDeletedAnnotationElement(e){na(this,am).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){na(this,as)!==e&&(nh(this,as,e),e&&nd(this,a9,sw).call(this,e.propertiesToUpdate))}updateUI(e){na(this,st)===e&&nd(this,a9,sw).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){nd(this,a9,sw).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(na(this,aO).has(e)){na(this,aO).delete(e),e.unselect(),nd(this,a6,sb).call(this,{hasSelectedEditor:this.hasSelection});return}na(this,aO).add(e),e.select(),nd(this,a9,sw).call(this,e.propertiesToUpdate),nd(this,a6,sb).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;for(let i of(null==(t=na(this,af))||t.commitOrRemove(),na(this,aO)))i!==e&&i.unselect();na(this,aO).clear(),na(this,aO).add(e),e.select(),nd(this,a9,sw).call(this,e.propertiesToUpdate),nd(this,a6,sb).call(this,{hasSelectedEditor:!0})}isSelected(e){return na(this,aO).has(e)}get firstSelectedEditor(){return na(this,aO).values().next().value}unselect(e){e.unselect(),na(this,aO).delete(e),nd(this,a6,sb).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==na(this,aO).size}get isEnterHandled(){return 1===na(this,aO).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;na(this,ad).undo(),nd(this,a6,sb).call(this,{hasSomethingToUndo:na(this,ad).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nd(this,si,s_).call(this)}),null==(e=this._editorUndoBar)||e.hide()}redo(){na(this,ad).redo(),nd(this,a6,sb).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:na(this,ad).hasSomethingToRedo(),isEmpty:nd(this,si,s_).call(this)})}addCommands(e){na(this,ad).add(e),nd(this,a6,sb).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nd(this,si,s_).call(this)})}cleanUndoStack(e){na(this,ad).cleanType(e)}delete(){var e;this.commitOrRemove();let t=null==(e=this.currentLayer)?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let i=t?[t]:[...na(this,aO)],n=()=>{var e;for(let t of(null==(e=this._editorUndoBar)||e.show(r,1===i.length?i[0].editorType:i.length),i))t.remove()},r=()=>{for(let e of i)nd(this,se,sA).call(this,e)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;null==(e=na(this,as))||e.commitOrRemove()}hasSomethingToControl(){return na(this,as)||this.hasSelection}selectAll(){for(let e of na(this,aO))e.commit();nd(this,sn,sS).call(this,na(this,al).values())}unselectAll(){var e;if(!na(this,as)||(na(this,as).commitOrRemove(),na(this,aN)===nT.NONE)){if((null==(e=na(this,af))||!e.commitOrRemove())&&this.hasSelection){for(let e of na(this,aO))e.unselect();na(this,aO).clear(),nd(this,a6,sb).call(this,{hasSelectedEditor:!1})}}}translateSelectedEditors(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i||this.commitOrRemove(),!this.hasSelection)return;na(this,aH)[0]+=e,na(this,aH)[1]+=t;let[n,r]=na(this,aH),a=[...na(this,aO)];for(let i of(na(this,aU)&&clearTimeout(na(this,aU)),nh(this,aU,setTimeout(()=>{nh(this,aU,null),na(this,aH)[0]=na(this,aH)[1]=0,this.addCommands({cmd:()=>{for(let e of a)na(this,al).has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(let e of a)na(this,al).has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})},1e3)),a))i.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection)for(let e of(this.disableUserSelect(!0),nh(this,av,new Map),na(this,aO)))na(this,av).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!na(this,av))return!1;this.disableUserSelect(!1);let e=na(this,av);nh(this,av,null);let t=!1;for(let[{x:i,y:n,pageIndex:r},a]of e)a.newX=i,a.newY=n,a.newPageIndex=r,t||(t=i!==a.savedX||n!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;let i=(e,t,i,n)=>{if(na(this,al).has(e.id)){let r=na(this,ao).get(n);r?e._setParentAndPosition(r,t,i):(e.pageIndex=n,e.x=t,e.y=i)}};return this.addCommands({cmd:()=>{for(let[t,{newX:n,newY:r,newPageIndex:a}]of e)i(t,n,r,a)},undo:()=>{for(let[t,{savedX:n,savedY:r,savedPageIndex:a}]of e)i(t,n,r,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(na(this,av))for(let i of na(this,av).keys())i.drag(e,t)}rebuild(e){if(null===e.parent){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===na(this,aO).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return na(this,as)===e}getActive(){return na(this,as)}getMode(){return na(this,aN)}get imageManager(){return nV(this,"imageManager",new r4)}getSelectionBoxes(e){let t;if(!e)return null;let i=document.getSelection();for(let t=0,n=i.rangeCount;t<n;t++)if(!e.contains(i.getRangeAt(t).commonAncestorContainer))return null;let{x:n,y:r,width:a,height:s}=e.getBoundingClientRect();switch(e.getAttribute("data-main-rotation")){case"90":t=(e,t,i,l)=>({x:(t-r)/s,y:1-(e+i-n)/a,width:l/s,height:i/a});break;case"180":t=(e,t,i,l)=>({x:1-(e+i-n)/a,y:1-(t+l-r)/s,width:i/a,height:l/s});break;case"270":t=(e,t,i,l)=>({x:1-(t+l-r)/s,y:(e-n)/a,width:l/s,height:i/a});break;default:t=(e,t,i,l)=>({x:(e-n)/a,y:(t-r)/s,width:i/a,height:l/s})}let l=[];for(let e=0,n=i.rangeCount;e<n;e++){let n=i.getRangeAt(e);if(!n.collapsed)for(let{x:e,y:i,width:r,height:a}of n.getClientRects())0!==r&&0!==a&&l.push(t(e,i,r,a))}return 0===l.length?null:l}addChangedExistingAnnotation(e){let{annotationElementId:t,id:i}=e;nh(this,au,na(this,au)||new Map).set(t,i)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:i}=e;null==(t=na(this,au))||t.delete(i)}renderAnnotationElement(e){var t;let i=null==(t=na(this,au))?void 0:t.get(e.data.id);if(!i)return;let n=na(this,ac).getRawValue(i);n&&(na(this,aN)!==nT.NONE||n.hasBeenModified)&&n.renderAnnotationElement(e)}constructor(e,t,i,n,r,a,s,l,o,h,c,u,d){np(this,aX),np(this,aK),np(this,aY),np(this,aQ),np(this,aJ),np(this,aZ),np(this,a$),np(this,a0),np(this,a1),np(this,a2),np(this,a3),np(this,a4),np(this,a5),np(this,a6),np(this,a9),np(this,a8),np(this,a7),np(this,se),nl(this,st,{get:sk,set:void 0}),np(this,si),np(this,sn),nl(this,aa,{writable:!0,value:new AbortController}),nl(this,as,{writable:!0,value:null}),nl(this,al,{writable:!0,value:new Map}),nl(this,ao,{writable:!0,value:new Map}),nl(this,ah,{writable:!0,value:null}),nl(this,ac,{writable:!0,value:null}),nl(this,au,{writable:!0,value:null}),nl(this,ad,{writable:!0,value:new ae}),nl(this,ap,{writable:!0,value:null}),nl(this,af,{writable:!0,value:null}),nl(this,ag,{writable:!0,value:0}),nl(this,am,{writable:!0,value:new Set}),nl(this,av,{writable:!0,value:null}),nl(this,ab,{writable:!0,value:null}),nl(this,aw,{writable:!0,value:new Set}),(0,nw._)(this,"_editorUndoBar",null),nl(this,ay,{writable:!0,value:!1}),nl(this,ax,{writable:!0,value:!1}),nl(this,aA,{writable:!0,value:!1}),nl(this,ak,{writable:!0,value:null}),nl(this,a_,{writable:!0,value:null}),nl(this,aS,{writable:!0,value:null}),nl(this,aE,{writable:!0,value:null}),nl(this,aM,{writable:!0,value:!1}),nl(this,aC,{writable:!0,value:null}),nl(this,aT,{writable:!0,value:new r$}),nl(this,aP,{writable:!0,value:!1}),nl(this,aR,{writable:!0,value:!1}),nl(this,aI,{writable:!0,value:null}),nl(this,aL,{writable:!0,value:null}),nl(this,aD,{writable:!0,value:null}),nl(this,aF,{writable:!0,value:null}),nl(this,aN,{writable:!0,value:nT.NONE}),nl(this,aO,{writable:!0,value:new Set}),nl(this,aW,{writable:!0,value:null}),nl(this,aj,{writable:!0,value:null}),nl(this,aB,{writable:!0,value:null}),nl(this,az,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}}),nl(this,aH,{writable:!0,value:[0,0]}),nl(this,aU,{writable:!0,value:null}),nl(this,aG,{writable:!0,value:null}),nl(this,aV,{writable:!0,value:null}),nl(this,aq,{writable:!0,value:null});let p=this._signal=na(this,aa).signal;nh(this,aG,e),nh(this,aV,t),nh(this,ah,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:p}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),n._on("setpreference",this.onSetPreference.bind(this),{signal:p}),n._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:p}),nd(this,aZ,sc).call(this),nd(this,a5,sv).call(this),nd(this,a1,sp).call(this),nh(this,ac,r.annotationStorage),nh(this,ak,r.filterFactory),nh(this,aj,a),nh(this,aE,s||null),nh(this,ay,l),nh(this,ax,o),nh(this,aA,h),nh(this,aF,c||null),this.viewParameters={realScale:rn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=u||null,this._supportsPinchToZoom=!1!==d}}function sa(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function ss(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let t of na(this,ao).values())if(t.hasTextLayer(e))return t;return null}function sl(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=nd(this,aX,sa).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(t);i&&(nh(this,aC,na(this,aC)||new rX(this)),na(this,aC).show(t,i,"ltr"===this.direction))}function so(){var e,t,i;let n=document.getSelection();if(!n||n.isCollapsed){na(this,aW)&&(null==(t=na(this,aC))||t.hide(),nh(this,aW,null),nd(this,a6,sb).call(this,{hasSelectedText:!1}));return}let{anchorNode:r}=n;if(r===na(this,aW))return;let a=nd(this,aX,sa).call(this,n).closest(".textLayer");if(!a){na(this,aW)&&(null==(i=na(this,aC))||i.hide(),nh(this,aW,null),nd(this,a6,sb).call(this,{hasSelectedText:!1}));return}if(null==(e=na(this,aC))||e.hide(),nh(this,aW,r),nd(this,a6,sb).call(this,{hasSelectedText:!0}),(na(this,aN)===nT.HIGHLIGHT||na(this,aN)===nT.NONE)&&(na(this,aN)===nT.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),nh(this,aM,this.isShiftKeyDown),!this.isShiftKeyDown)){let e=na(this,aN)===nT.HIGHLIGHT?nd(this,aK,ss).call(this,a):null;null==e||e.toggleDrawing();let t=new AbortController,i=this.combinedSignal(t),n=i=>{("pointerup"!==i.type||0===i.button)&&(t.abort(),null==e||e.toggleDrawing(!0),"pointerup"===i.type&&nd(this,aJ,sh).call(this,"main_toolbar"))};window.addEventListener("pointerup",n,{signal:i}),window.addEventListener("blur",n,{signal:i})}}function sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";na(this,aN)===nT.HIGHLIGHT?this.highlightSelection(e):na(this,ay)&&nd(this,aY,sl).call(this)}function sc(){document.addEventListener("selectionchange",nd(this,aQ,so).bind(this),{signal:this._signal})}function su(){if(na(this,aS))return;nh(this,aS,new AbortController);let e=this.combinedSignal(na(this,aS));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function sd(){var e;null==(e=na(this,aS))||e.abort(),nh(this,aS,null)}function sp(){if(na(this,aI))return;nh(this,aI,new AbortController);let e=this.combinedSignal(na(this,aI));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function sf(){var e;null==(e=na(this,aI))||e.abort(),nh(this,aI,null)}function sg(){if(na(this,ap))return;nh(this,ap,new AbortController);let e=this.combinedSignal(na(this,ap));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function sm(){var e;null==(e=na(this,ap))||e.abort(),nh(this,ap,null)}function sv(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function sb(e){Object.entries(e).some(e=>{let[t,i]=e;return na(this,az)[t]!==i})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(na(this,az),e)}),na(this,aN)===nT.HIGHLIGHT&&!1===e.hasSelectedEditor&&nd(this,a9,sw).call(this,[[nP.HIGHLIGHT_FREE,!0]]))}function sw(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function sy(){if(!na(this,aP)){nh(this,aP,!0);let e=[];for(let t of na(this,ao).values())e.push(t.enable());for(let t of(await Promise.all(e),na(this,al).values()))t.enable()}}function sx(){if(this.unselectAll(),na(this,aP)){for(let e of(nh(this,aP,!1),na(this,ao).values()))e.disable();for(let e of na(this,al).values())e.disable()}}function sA(e){let t=na(this,ao).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function sk(){let e=null;for(e of na(this,aO));return e}function s_(){if(0===na(this,al).size)return!0;if(1===na(this,al).size)for(let e of na(this,al).values())return e.isEmpty();return!1}function sS(e){for(let e of na(this,aO))e.unselect();for(let t of(na(this,aO).clear(),e))t.isEmpty()||(na(this,aO).add(t),t.select());nd(this,a6,sb).call(this,{hasSelectedEditor:this.hasSelection})}(0,nw._)(sr,"TRANSLATE_SMALL",1),(0,nw._)(sr,"TRANSLATE_BIG",10);var sE=new WeakMap,sM=new WeakMap,sC=new WeakMap,sT=new WeakMap,sP=new WeakMap,sR=new WeakMap,sI=new WeakMap,sL=new WeakMap,sD=new WeakMap,sF=new WeakMap,sN=new WeakMap,sO=new WeakMap,sW=new WeakMap,sj=new WeakSet;class sB{static initialize(e){null!=sB._l10n||(sB._l10n=e)}async render(){let e=nh(this,sC,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=nh(this,sT,document.createElement("span"));e.append(t),na(this,sO)?(e.classList.add("new"),e.setAttribute("data-l10n-id",nm(sB,sB,sz).missing),t.setAttribute("data-l10n-id",nm(sB,sB,sz)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=na(this,sD)._uiManager._signal;e.addEventListener("contextmenu",rp,{signal:i}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:i});let n=e=>{e.preventDefault(),na(this,sD)._uiManager.editAltText(na(this,sD)),na(this,sO)&&na(this,sD)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:na(this,sW)}})};return e.addEventListener("click",n,{capture:!0,signal:i}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(nh(this,sI,!0),n(t))},{signal:i}),await nd(this,sj,sU).call(this),e}finish(){na(this,sC)&&(na(this,sC).focus({focusVisible:na(this,sI)}),nh(this,sI,!1))}isEmpty(){return na(this,sO)?null===na(this,sE):!na(this,sE)&&!na(this,sM)}hasData(){return na(this,sO)?null!==na(this,sE)||!!na(this,sF):this.isEmpty()}get guessedText(){return na(this,sF)}async setGuessedText(e){null===na(this,sE)&&(nh(this,sF,e),nh(this,sN,await sB._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),nd(this,sj,sU).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!na(this,sO)||na(this,sE)){var t;null==(t=na(this,sL))||t.remove(),nh(this,sL,null);return}if(!na(this,sL)){let e=nh(this,sL,document.createElement("div"));e.className="noAltTextBadge",na(this,sD).div.append(e)}na(this,sL).classList.toggle("hidden",!e)}serialize(e){let t=na(this,sE);return e||na(this,sF)!==t||(t=na(this,sN)),{altText:t,decorative:na(this,sM),guessedText:na(this,sF),textWithDisclaimer:na(this,sN)}}get data(){return{altText:na(this,sE),decorative:na(this,sM)}}set data(e){let{altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:a=!1}=e;n&&(nh(this,sF,n),nh(this,sN,r)),(na(this,sE)!==t||na(this,sM)!==i)&&(a||(nh(this,sE,t),nh(this,sM,i)),nd(this,sj,sU).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];na(this,sC)&&(!e&&na(this,sR)&&(clearTimeout(na(this,sR)),nh(this,sR,null)),na(this,sC).disabled=!e)}shown(){na(this,sD)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:na(this,sW)}})}destroy(){var e,t;null==(e=na(this,sC))||e.remove(),nh(this,sC,null),nh(this,sT,null),nh(this,sP,null),null==(t=na(this,sL))||t.remove(),nh(this,sL,null)}constructor(e){nl(this,sW,{get:sH,set:void 0}),np(this,sj),nl(this,sE,{writable:!0,value:null}),nl(this,sM,{writable:!0,value:!1}),nl(this,sC,{writable:!0,value:null}),nl(this,sT,{writable:!0,value:null}),nl(this,sP,{writable:!0,value:null}),nl(this,sR,{writable:!0,value:null}),nl(this,sI,{writable:!0,value:!1}),nl(this,sL,{writable:!0,value:null}),nl(this,sD,{writable:!0,value:null}),nl(this,sF,{writable:!0,value:null}),nl(this,sN,{writable:!0,value:null}),nl(this,sO,{writable:!0,value:!1}),nh(this,sD,e),nh(this,sO,e._uiManager.useNewAltTextFlow),nv(sB,sB,sz,nm(sB,sB,sz)||Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}}var sz={writable:!0,value:null};function sH(){return na(this,sE)&&"added"||null===na(this,sE)&&this.guessedText&&"review"||"missing"}async function sU(){var e,t,i;let n=na(this,sC);if(!n)return;if(na(this,sO)){if(n.classList.toggle("done",!!na(this,sE)),n.setAttribute("data-l10n-id",nm(sB,sB,sz)[na(this,sW)]),null==(e=na(this,sT))||e.setAttribute("data-l10n-id",nm(sB,sB,sz)["".concat(na(this,sW),"-label")]),!na(this,sE)){null==(t=na(this,sP))||t.remove();return}}else{if(!na(this,sE)&&!na(this,sM)){n.classList.remove("done"),null==(i=na(this,sP))||i.remove();return}n.classList.add("done"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=na(this,sP);if(!r){nh(this,sP,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(na(this,sD).id);let e=na(this,sD)._uiManager._signal;e.addEventListener("abort",()=>{clearTimeout(na(this,sR)),nh(this,sR,null)},{once:!0}),n.addEventListener("mouseenter",()=>{nh(this,sR,setTimeout(()=>{nh(this,sR,null),na(this,sP).classList.add("show"),na(this,sD)._reportTelemetry({action:"alt_text_tooltip"})},100))},{signal:e}),n.addEventListener("mouseleave",()=>{var e;na(this,sR)&&(clearTimeout(na(this,sR)),nh(this,sR,null)),null==(e=na(this,sP))||e.classList.remove("show")},{signal:e})}na(this,sM)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=na(this,sE)),r.parentNode||n.append(r);let a=na(this,sD).getImageForAltText();null==a||a.setAttribute("aria-describedby",r.id)}(0,nw._)(sB,"_l10n",null);var sG=new WeakMap,sV=new WeakMap,sq=new WeakMap,sX=new WeakMap,sK=new WeakMap,sY=new WeakMap,sQ=new WeakMap,sJ=new WeakMap,sZ=new WeakMap,s$=new WeakMap,s0=new WeakMap,s1=new WeakSet,s2=new WeakSet,s3=new WeakSet;class s4{get MIN_TOUCH_DISTANCE_TO_PINCH(){return nV(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;null==(e=na(this,s$))||e.abort(),nh(this,s$,null)}constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:a=null,signal:s}){np(this,s1),np(this,s2),np(this,s3),nl(this,sG,{writable:!0,value:void 0}),nl(this,sV,{writable:!0,value:!1}),nl(this,sq,{writable:!0,value:null}),nl(this,sX,{writable:!0,value:void 0}),nl(this,sK,{writable:!0,value:void 0}),nl(this,sY,{writable:!0,value:void 0}),nl(this,sQ,{writable:!0,value:void 0}),nl(this,sJ,{writable:!0,value:void 0}),nl(this,sZ,{writable:!0,value:null}),nl(this,s$,{writable:!0,value:void 0}),nl(this,s0,{writable:!0,value:null}),nh(this,sG,e),nh(this,sq,i),nh(this,sX,t),nh(this,sK,n),nh(this,sY,r),nh(this,sQ,a),nh(this,s$,new AbortController),nh(this,sJ,AbortSignal.any([s,na(this,s$).signal])),e.addEventListener("touchstart",nd(this,s1,s5).bind(this),{passive:!1,signal:na(this,sJ)})}}function s5(e){var t,i,n;if((null==(t=na(this,sX))?void 0:t.call(this))||e.touches.length<2)return;if(!na(this,s0)){nh(this,s0,new AbortController);let e=AbortSignal.any([na(this,sJ),na(this,s0).signal]),t=na(this,sG),n={signal:e,passive:!1};t.addEventListener("touchmove",nd(this,s2,s6).bind(this),n),t.addEventListener("touchend",nd(this,s3,s9).bind(this),n),t.addEventListener("touchcancel",nd(this,s3,s9).bind(this),n),null==(i=na(this,sK))||i.call(this)}if(rf(e),2!==e.touches.length||(null==(n=na(this,sq))?void 0:n.call(this)))return void nh(this,sZ,null);let[r,a]=e.touches;r.identifier>a.identifier&&([r,a]=[a,r]),nh(this,sZ,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:a.screenX,touch1Y:a.screenY})}function s6(e){var t;if(!na(this,sZ)||2!==e.touches.length)return;let[i,n]=e.touches;i.identifier>n.identifier&&([i,n]=[n,i]);let{screenX:r,screenY:a}=i,{screenX:s,screenY:l}=n,o=na(this,sZ),{touch0X:h,touch0Y:c,touch1X:u,touch1Y:d}=o,p=Math.hypot(s-r,l-a)||1,f=Math.hypot(u-h,d-c)||1;if(!na(this,sV)&&Math.abs(f-p)<=s4.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=r,o.touch0Y=a,o.touch1X=s,o.touch1Y=l,e.preventDefault(),!na(this,sV))return void nh(this,sV,!0);let g=[(r+s)/2,(a+l)/2];null==(t=na(this,sY))||t.call(this,g,f,p)}function s9(e){var t;na(this,s0).abort(),nh(this,s0,null),null==(t=na(this,sQ))||t.call(this),na(this,sZ)&&(e.preventDefault(),nh(this,sZ,null),nh(this,sV,!1))}var s8=new WeakMap,s7=new WeakMap,le=new WeakMap,lt=new WeakMap,li=new WeakMap,ln=new WeakMap,lr=new WeakMap,la=new WeakMap,ls=new WeakMap,ll=new WeakMap,lo=new WeakMap,lh=new WeakMap,lc=new WeakMap,lu=new WeakMap,ld=new WeakMap,lp=new WeakMap,lf=new WeakMap,lg=new WeakMap,lm=new WeakMap,lv=new WeakMap,lb=new WeakMap,lw=new WeakMap,ly=new WeakMap,lx=new WeakMap,lA=new WeakSet,lk=new WeakSet,l_=new WeakSet,lS=new WeakSet,lE=new WeakSet,lM=new WeakSet,lC=new WeakSet,lT=new WeakSet,lP=new WeakSet,lR=new WeakSet,lI=new WeakSet,lL=new WeakSet,lD=new WeakSet,lF=new WeakSet,lN=new WeakSet,lO=new WeakSet,lW=new WeakSet,lj=new WeakSet;class lB{static get _resizerKeyboardManager(){let e=lB.prototype._resizeWithKeyboard,t=sr.TRANSLATE_SMALL,i=sr.TRANSLATE_BIG;return nV(this,"_resizerKeyboardManager",new ai([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],lB.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return nV(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new l6({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(null!=lB._l10n||(lB._l10n=e),lB._l10nResizer||(lB._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==lB._borderLineWidth)return;let i=getComputedStyle(document.documentElement);lB._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nH("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return na(this,ly)}set _isDraggable(e){var t;nh(this,ly,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=na(this,lx)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):nd(this,lj,l5).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(na(this,lc)?nh(this,lc,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let i=e.relatedTarget;(null==i||!i.closest("#".concat(this.id)))&&(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){let[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/r,this.y=(t+n)/a,this.fixAndSetPosition()}translate(e,t){nd(this,lA,lz).call(this,this.parentDimensions,e,t)}translateInPage(e,t){nh(this,lu,na(this,lu)||[this.x,this.y,this.width,this.height]),nd(this,lA,lz).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){nh(this,lu,na(this,lu)||[this.x,this.y,this.width,this.height]);let{div:i,parentDimensions:[n,r]}=this;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:s}=this,[l,o]=this.getBaseTranslation();a+=l,s+=o;let{style:h}=i;h.left="".concat((100*a).toFixed(2),"%"),h.top="".concat((100*s).toFixed(2),"%"),this._onTranslating(a,s),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!na(this,lu)&&(na(this,lu)[0]!==this.x||na(this,lu)[1]!==this.y)}get _hasBeenResized(){return!!na(this,lu)&&(na(this,lu)[2]!==this.width||na(this,lu)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:i}=lB,n=i/e,r=i/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,{div:{style:t},pageDimensions:[i,n]}=this,{x:r,y:a,width:s,height:l}=this;if(s*=i,l*=n,r*=i,a*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-s,r)),a=Math.max(0,Math.min(n-l,a));break;case 90:r=Math.max(0,Math.min(i-l,r)),a=Math.min(n,Math.max(s,a));break;case 180:r=Math.min(i,Math.max(s,r)),a=Math.min(n,Math.max(l,a));break;case 270:r=Math.min(i,Math.max(l,r)),a=Math.max(0,Math.min(n-s,a))}this.x=r/=i,this.y=a/=n;let[o,h]=this.getBaseTranslation();r+=o,a+=h,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*a).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return(nf(lB,lB),lH).call(lB,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return(nf(lB,lB),lH).call(lB,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){let[i,n]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*e/i).toFixed(2),"%"),na(this,lr)||(r.height="".concat((100*t/n).toFixed(2),"%"))}fixDims(){let{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),r=!na(this,lr)&&t.endsWith("%");if(n&&r)return;let[a,s]=this.parentDimensions;n||(e.width="".concat((100*parseFloat(i)/a).toFixed(2),"%")),na(this,lr)||r||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null==(e=na(this,le))||e.finish()}async addEditToolbar(){return this._editToolbar||na(this,lp)||(this._editToolbar=new rL(this),this.div.append(this._editToolbar.render()),na(this,le)&&await this._editToolbar.addAltText(na(this,le))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null==(e=na(this,le))||e.destroy())}addContainer(e){var t;let i=null==(t=this._editToolbar)?void 0:t.div;i?i.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){na(this,le)||(sB.initialize(lB._l10n),nh(this,le,new sB(this)),na(this,s8)&&(na(this,le).data=na(this,s8),nh(this,s8,null)),await this.addEditToolbar())}get altTextData(){var e;return null==(e=na(this,le))?void 0:e.data}set altTextData(e){na(this,le)&&(na(this,le).data=e)}get guessedAltText(){var e;return null==(e=na(this,le))?void 0:e.guessedText}async setGuessedAltText(e){var t;await (null==(t=na(this,le))?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null==(t=na(this,le))?void 0:t.serialize(e)}hasAltText(){return!!na(this,le)&&!na(this,le).isEmpty()}hasAltTextData(){var e,t;return null!=(t=null==(e=na(this,le))?void 0:e.hasData())&&t}render(){var e;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=na(this,lt)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),nd(this,lD,l0).call(this);let[t,i]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*i/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/i).toFixed(2),"%"));let[n,r]=this.getInitialTranslation();return this.translate(n,r),rJ(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&nh(this,lw,na(this,lw)||new s4({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:nd(this,lT,lY).bind(this),onPinching:nd(this,lP,lQ).bind(this),onPinchEnd:nd(this,lR,lJ).bind(this),signal:this._uiManager._signal})),null==(e=this._uiManager._editorUndoBar)||e.hide(),this.div}pointerdown(e){let{isMac:t}=n3.platform;return 0!==e.button||e.ctrlKey&&t?void e.preventDefault():(nh(this,lc,!0),this._isDraggable)?void nd(this,lL,l$).call(this,e):void nd(this,lI,lZ).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){na(this,lg)&&clearTimeout(na(this,lg)),nh(this,lg,setTimeout(()=>{var e;nh(this,lg,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,n=this.parentScale,[r,a]=this.pageDimensions,[s,l]=this.pageTranslation,o=e/n,h=t/n,c=this.x*r,u=this.y*a,d=this.width*r,p=this.height*a;switch(i){case 0:return[c+o+s,a-u-h-p+l,c+o+d+s,a-u-h+l];case 90:return[c+h+s,a-u+o+l,c+h+p+s,a-u+o+d+l];case 180:return[c-o-d+s,a-u+h+l,c-o+s,a-u+h+p+l];case 270:return[c-h-p+s,a-u-o-d+l,c-h+s,a-u-o+l];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[i,n,r,a]=e,s=r-i,l=a-n;switch(this.rotation){case 0:return[i,t-a,s,l];case 90:return[i,t-n,l,s];case 180:return[r,t-n,s,l];case 270:return[r,t-a,l,s];default:throw Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){nh(this,lp,!0)}disableEditMode(){nh(this,lp,!1)}isInEditMode(){return na(this,lp)}shouldGetKeyboardEvents(){return na(this,lf)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&n>0&&e<r&&i>0}rebuild(){nd(this,lD,l0).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(e=this._initialData)?void 0:e.popupRef)||""}}serialize(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],nH("An editor must be serializable")}static async deserialize(e,t,i){let n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,nh(n,s8,e.accessibilityData);let[r,a]=n.pageDimensions,[s,l,o,h]=n.getRectInCurrentCoords(e.rect,a);return n.x=s/r,n.y=l/a,n.width=o/r,n.height=h/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null==(e=na(this,lo))||e.abort(),nh(this,lo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),na(this,lg)&&(clearTimeout(na(this,lg)),nh(this,lg,null)),nd(this,lj,l5).call(this),this.removeEditToolbar(),na(this,lb)){for(let e of na(this,lb).values())clearTimeout(e);nh(this,lb,null)}this.parent=null,null==(t=na(this,lw))||t.destroy(),nh(this,lw,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(nd(this,l_,lG).call(this),na(this,la).classList.remove("hidden"),rJ(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),nh(this,ll,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=na(this,la).children;if(!na(this,s7)){nh(this,s7,Array.from(t));let e=nd(this,lF,l1).bind(this),i=nd(this,lN,l2).bind(this),n=this._uiManager._signal;for(let t of na(this,s7)){let r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:n}),t.addEventListener("blur",i,{signal:n}),t.addEventListener("focus",nd(this,lO,l3).bind(this,r),{signal:n}),t.setAttribute("data-l10n-id",lB._l10nResizer[r])}}let i=na(this,s7)[0],n=0;for(let e of t){if(e===i)break;n++}let r=(360-this.rotation+this.parentRotation)%360/90*(na(this,s7).length/4);if(r!==n){if(r<n)for(let e=0;e<n-r;e++)na(this,la).append(na(this,la).firstChild);else if(r>n)for(let e=0;e<r-n;e++)na(this,la).firstChild.before(na(this,la).lastChild);let e=0;for(let i of t){let t=na(this,s7)[e++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",lB._l10nResizer[t])}}nd(this,lW,l4).call(this,0),nh(this,lf,!0),na(this,la).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){na(this,lf)&&nd(this,lC,lK).call(this,na(this,lh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){nd(this,lj,l5).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),!this._editToolbar)return void this.addEditToolbar().then(()=>{var e,t;(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))&&(null==(t=this._editToolbar)||t.show())});null==(t=this._editToolbar)||t.show(),null==(i=na(this,le))||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,n,r;null==(e=na(this,la))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(i=this.div)?void 0:i.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(n=this._editToolbar)||n.hide(),null==(r=na(this,le))||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return na(this,ld)}set isEditing(e){nh(this,ld,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){nh(this,lr,!0);let{style:i}=this.div;i.aspectRatio=e/t,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){nh(this,lb,na(this,lb)||new Map);let{action:t}=e,i=na(this,lb).get(t);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),na(this,lb).delete(t),0===na(this,lb).size&&nh(this,lb,null)},lB._telemetryTimeout),na(this,lb).set(t,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),nh(this,lt,!1)}disable(){this.div&&(this.div.tabIndex=-1),nh(this,lt,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){let e=t;(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.before(t)}}else(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){let{firstChild:t}=e.container;(null==t?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}constructor(e){np(this,lA),np(this,lk),np(this,l_),np(this,lS),np(this,lE),np(this,lM),np(this,lC),np(this,lT),np(this,lP),np(this,lR),np(this,lI),np(this,lL),np(this,lD),np(this,lF),np(this,lN),np(this,lO),np(this,lW),np(this,lj),nl(this,s8,{writable:!0,value:null}),nl(this,s7,{writable:!0,value:null}),nl(this,le,{writable:!0,value:null}),nl(this,lt,{writable:!0,value:!1}),nl(this,li,{writable:!0,value:null}),nl(this,ln,{writable:!0,value:""}),nl(this,lr,{writable:!0,value:!1}),nl(this,la,{writable:!0,value:null}),nl(this,ls,{writable:!0,value:null}),nl(this,ll,{writable:!0,value:null}),nl(this,lo,{writable:!0,value:null}),nl(this,lh,{writable:!0,value:""}),nl(this,lc,{writable:!0,value:!1}),nl(this,lu,{writable:!0,value:null}),nl(this,ld,{writable:!0,value:!1}),nl(this,lp,{writable:!0,value:!1}),nl(this,lf,{writable:!0,value:!1}),nl(this,lg,{writable:!0,value:null}),nl(this,lm,{writable:!0,value:0}),nl(this,lv,{writable:!0,value:0}),nl(this,lb,{writable:!0,value:null}),nl(this,lw,{writable:!0,value:null}),(0,nw._)(this,"_editToolbar",null),(0,nw._)(this,"_initialOptions",Object.create(null)),(0,nw._)(this,"_initialData",null),(0,nw._)(this,"_isVisible",!0),(0,nw._)(this,"_uiManager",null),(0,nw._)(this,"_focusEventsAllowed",!0),nl(this,ly,{writable:!0,value:!1}),nl(this,lx,{writable:!0,value:lB._zIndex++}),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];let[s,l]=this.parentDimensions;this.x=e.x/s,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}}function lz(e,t,i){let[n,r]=e;[t,i]=this.screenToPageTranslation(t,i),this.x+=t/n,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function lH(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function lU(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function lG(){if(na(this,la))return;nh(this,la,document.createElement("div")),na(this,la).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let i of e){let e=document.createElement("div");na(this,la).append(e),e.classList.add("resizer",i),e.setAttribute("data-resizer-name",i),e.addEventListener("pointerdown",nd(this,lS,lV).bind(this,i),{signal:t}),e.addEventListener("contextmenu",rp,{signal:t}),e.tabIndex=-1}this.div.prepend(na(this,la))}function lV(e,t){var i;t.preventDefault();let{isMac:n}=n3.platform;if(0!==t.button||t.ctrlKey&&n)return;null==(i=na(this,le))||i.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,nh(this,ls,[t.screenX,t.screenY]);let a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",nd(this,lC,lK).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",rf,{passive:!1,signal:s}),window.addEventListener("contextmenu",rp,{signal:s}),nh(this,ll,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let l=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let h=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null==(e=na(this,le))||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=o,nd(this,lM,lX).call(this)};window.addEventListener("pointerup",h,{signal:s}),window.addEventListener("blur",h,{signal:s})}function lq(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;let[r,a]=this.parentDimensions;this.setDims(r*i,a*n),this.fixAndSetPosition(),this._onResized()}function lX(){if(!na(this,ll))return;let{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=na(this,ll);nh(this,ll,null);let r=this.x,a=this.y,s=this.width,l=this.height;(r!==e||a!==t||s!==i||l!==n)&&this.addCommands({cmd:nd(this,lE,lq).bind(this,r,a,s,l),undo:nd(this,lE,lq).bind(this,e,t,i,n),mustExec:!0})}function lK(e,t){let i,n,r,a,s,l,[o,h]=this.parentDimensions,c=this.x,u=this.y,d=this.width,p=this.height,f=lB.MIN_SIZE/o,g=lB.MIN_SIZE/h,m=nd(this,lk,lU).call(this,this.rotation),b=(e,t)=>[m[0]*e+m[2]*t,m[1]*e+m[3]*t],w=nd(this,lk,lU).call(this,360-this.rotation),y=!1,x=!1;switch(e){case"topLeft":y=!0,i=(e,t)=>[0,0],n=(e,t)=>[e,t];break;case"topMiddle":i=(e,t)=>[e/2,0],n=(e,t)=>[e/2,t];break;case"topRight":y=!0,i=(e,t)=>[e,0],n=(e,t)=>[0,t];break;case"middleRight":x=!0,i=(e,t)=>[e,t/2],n=(e,t)=>[0,t/2];break;case"bottomRight":y=!0,i=(e,t)=>[e,t],n=(e,t)=>[0,0];break;case"bottomMiddle":i=(e,t)=>[e/2,t],n=(e,t)=>[e/2,0];break;case"bottomLeft":y=!0,i=(e,t)=>[0,t],n=(e,t)=>[e,0];break;case"middleLeft":x=!0,i=(e,t)=>[0,t/2],n=(e,t)=>[e,t/2]}let A=i(d,p),k=n(d,p),_=b(...k),S=lB._round(c+_[0]),E=lB._round(u+_[1]),M=1,C=1;if(t.fromKeyboard)({deltaX:r,deltaY:a}=t);else{let{screenX:e,screenY:i}=t,[n,s]=na(this,ls);[r,a]=this.screenToPageTranslation(e-n,i-s),na(this,ls)[0]=e,na(this,ls)[1]=i}if([r,a]=(s=r/o,l=a/h,[w[0]*s+w[2]*l,w[1]*s+w[3]*l]),y){let e=Math.hypot(d,p);M=C=Math.max(Math.min(Math.hypot(k[0]-A[0]-r,k[1]-A[1]-a)/e,1/d,1/p),f/d,g/p)}else x?M=Math.max(f,Math.min(1,Math.abs(k[0]-A[0]-r)))/d:C=Math.max(g,Math.min(1,Math.abs(k[1]-A[1]-a)))/p;let T=lB._round(d*M),P=lB._round(p*C),R=S-(_=b(...n(T,P)))[0],I=E-_[1];nh(this,lu,na(this,lu)||[this.x,this.y,this.width,this.height]),this.width=T,this.height=P,this.x=R,this.y=I,this.setDims(o*T,h*P),this.fixAndSetPosition(),this._onResizing()}function lY(){var e;nh(this,ll,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(e=na(this,le))||e.toggle(!1),this.parent.togglePointerEvents(!1)}function lQ(e,t,i){let n=i/t*.7+1-.7;if(1===n)return;let r=nd(this,lk,lU).call(this,this.rotation),a=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[s,l]=this.parentDimensions,o=this.x,h=this.y,c=this.width,u=this.height;n=Math.max(Math.min(n,1/c,1/u),lB.MIN_SIZE/s/c,lB.MIN_SIZE/l/u);let d=lB._round(c*n),p=lB._round(u*n);if(d===c&&p===u)return;nh(this,lu,na(this,lu)||[o,h,c,u]);let f=a(c/2,u/2),g=lB._round(o+f[0]),m=lB._round(h+f[1]),b=a(d/2,p/2);this.x=g-b[0],this.y=m-b[1],this.width=d,this.height=p,this.setDims(s*d,l*p),this.fixAndSetPosition(),this._onResizing()}function lJ(){var e;null==(e=na(this,le))||e.toggle(!0),this.parent.togglePointerEvents(!0),nd(this,lM,lX).call(this)}function lZ(e){let{isMac:t}=n3.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function l$(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1,n=new AbortController,r=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:r},s=e=>{n.abort(),nh(this,li,null),nh(this,lc,!1),this._uiManager.endDragSession()||nd(this,lI,lZ).call(this,e),i&&this._onStopDragging()};t&&(nh(this,lm,e.clientX),nh(this,lv,e.clientY),nh(this,li,e.pointerId),nh(this,ln,e.pointerType),window.addEventListener("pointermove",e=>{i||(i=!0,this._onStartDragging());let{clientX:t,clientY:n,pointerId:r}=e;if(r!==na(this,li))return void rf(e);let[a,s]=this.screenToPageTranslation(t-na(this,lm),n-na(this,lv));nh(this,lm,t),nh(this,lv,n),this._uiManager.dragSelectedEditors(a,s)},a),window.addEventListener("touchmove",rf,a),window.addEventListener("pointerdown",e=>{e.pointerType===na(this,ln)&&(na(this,lw)||e.isPrimary)&&s(e),rf(e)},a));let l=e=>{if(!na(this,li)||na(this,li)===e.pointerId)return void s(e);rf(e)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}function l0(){if(na(this,lo)||!this.div)return;nh(this,lo,new AbortController);let e=this._uiManager.combinedSignal(na(this,lo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function l1(e){lB._resizerKeyboardManager.exec(this,e)}function l2(e){var t;na(this,lf)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==na(this,la)&&nd(this,lj,l5).call(this)}function l3(e){nh(this,lh,na(this,lf)?e:"")}function l4(e){if(na(this,s7))for(let t of na(this,s7))t.tabIndex=e}function l5(){nh(this,lf,!1),nd(this,lW,l4).call(this,-1),nd(this,lM,lX).call(this)}(0,nw._)(lB,"_l10n",null),(0,nw._)(lB,"_l10nResizer",null),(0,nw._)(lB,"_borderLineWidth",-1),(0,nw._)(lB,"_colorManager",new ar),(0,nw._)(lB,"_zIndex",1),(0,nw._)(lB,"_telemetryTimeout",1e3);class l6 extends lB{serialize(){return this.serializeDeleted()}constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}}class l9{update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<=255?t[i++]=r:(t[i++]=r>>>8,t[i++]=255&r)}}else if(ArrayBuffer.isView(e))i=(t=e.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,r=i-4*n,a=new Uint32Array(t.buffer,0,n),s=0,l=0,o=this.h1,h=this.h2;for(let e=0;e<n;e++)1&e?(o^=s=0x1b873593*(s=(s=0xcc9e2d51*(s=a[e])&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,o=5*(o=o<<13|o>>>19)+0xe6546b64):(h^=l=0x1b873593*(l=(l=0xcc9e2d51*(l=a[e])&0xffff0000|11601*l&65535)<<15|l>>>17)&0xffff0000|13715*l&65535,h=5*(h=h<<13|h>>>19)+0xe6546b64);switch(s=0,r){case 3:s^=t[4*n+2]<<16;case 2:s^=t[4*n+1]<<8;case 1:s^=t[4*n],s=0x1b873593*(s=(s=0xcc9e2d51*s&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,1&n?o^=s:h^=s}this.h1=o,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,t=0xff51afd7*t&0xffff0000|((t<<16|(e=0xed558ccd*e&0xffff0000|36045*e&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,e^=t>>>1,t=0xc4ceb9fe*t&0xffff0000|((t<<16|(e=0x1a85ec53*e&0xffff0000|60499*e&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((e^=t>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}constructor(e){this.h1=e?0|e:0xc3d2e1f0,this.h2=e?0|e:0xc3d2e1f0}}let l8=Object.freeze({map:null,hash:"",transfer:void 0});var l7=new WeakMap,oe=new WeakMap,ot=new WeakMap,oi=new WeakSet;class on{getValue(e,t){let i=na(this,ot).get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return na(this,ot).get(e)}remove(e){if(na(this,ot).delete(e),0===na(this,ot).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let e of na(this,ot).values())if(e instanceof lB)return;this.onAnnotationEditor(null)}}setValue(e,t){let i=na(this,ot).get(e),n=!1;if(void 0!==i)for(let[e,r]of Object.entries(t))i[e]!==r&&(n=!0,i[e]=r);else n=!0,na(this,ot).set(e,t);n&&nd(this,oi,or).call(this),t instanceof lB&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return na(this,ot).has(e)}getAll(){return na(this,ot).size>0?n2(na(this,ot)):null}setAll(e){for(let[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return na(this,ot).size}resetModified(){na(this,l7)&&(nh(this,l7,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new os(this)}get serializable(){if(0===na(this,ot).size)return l8;let e=new Map,t=new l9,i=[],n=Object.create(null),r=!1;for(let[i,a]of na(this,ot)){let s=a instanceof lB?a.serialize(!1,n):a;s&&(e.set(i,s),t.update("".concat(i,":").concat(JSON.stringify(s))),r||(r=!!s.bitmap))}if(r)for(let t of e.values())t.bitmap&&i.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:l8}get editorStats(){let e=null,t=new Map;for(let r of na(this,ot).values()){var i,n;if(!(r instanceof lB))continue;let a=r.telemetryFinalData;if(!a)continue;let{type:s}=a;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));let l=(i=e)[s]||(i[s]=new Map);for(let[e,t]of Object.entries(a)){if("type"===e)continue;let i=l.get(e);i||(i=new Map,l.set(e,i));let r=null!=(n=i.get(t))?n:0;i.set(t,r+1)}}for(let[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){nh(this,oe,null)}get modifiedIds(){if(na(this,oe))return na(this,oe);let e=[];for(let t of na(this,ot).values())t instanceof lB&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return nh(this,oe,{ids:new Set(e),hash:e.join(",")})}constructor(){np(this,oi),nl(this,l7,{writable:!0,value:!1}),nl(this,oe,{writable:!0,value:null}),nl(this,ot,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}}function or(){na(this,l7)||(nh(this,l7,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var oa=new WeakMap;class os extends on{get print(){nH("Should not call PrintAnnotationStorage.print")}get serializable(){return na(this,oa)}get modifiedIds(){return nV(this,"modifiedIds",{ids:new Set,hash:""})}constructor(e){super(),nl(this,oa,{writable:!0,value:void 0});let{map:t,hash:i,transfer:n}=e.serializable;nh(this,oa,{map:structuredClone(t,n?{transfer:n}:null),hash:i,transfer:n})}}var ol=new WeakMap;class oo{addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),na(this,ol).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:i}=e;if(!(!t||na(this,ol).has(t.loadedName))){if(nU(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),na(this,ol).add(e),null==i||i(t)}catch(e){nz("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}nH("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){throw nz("Failed to load font '".concat(t.family,"': '").concat(i,"'.")),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let i=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var e;return nV(this,"isFontLoadingAPISupported",!!(null==(e=this._document)?void 0:e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return n_?t=!0:"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(t=!0),nV(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){let{loadingRequests:t}=this,i={done:!1,complete:function(){for(nU(!i.done,"completeRequest() cannot be called twice."),i.done=!0;t.length>0&&t[0].done;)setTimeout(t.shift().callback,0)},callback:e};return t.push(i),i}get _loadTestFont(){return nV(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){var i;let n,r;function a(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,i,n){return e.substring(0,t)+n+e.substring(t+i)}let l=this._document.createElement("canvas");l.width=1,l.height=1;let o=l.getContext("2d"),h=0,c="lt".concat(Date.now()).concat(this.loadTestFontId++),u=this._loadTestFont,d=a(u=s(u,976,c.length,c),16);for(n=0,r=c.length-3;n<r;n+=4)d=d-0x58585858+a(c,n)|0;n<c.length&&(d=d-0x58585858+a(c+"XXX",n)|0),u=s(u,16,4,String.fromCharCode((i=d)>>24&255,i>>16&255,i>>8&255,255&i));let p="url(data:font/opentype;base64,".concat(btoa(u),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);let g=this._document.createElement("div");for(let t of(g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px",[e.loadedName,c])){let e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,g.append(e)}this._document.body.append(g),function e(t,i){if(++h>30){nz("Load test font never loaded."),i();return}if(o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0)return void i();setTimeout(e.bind(null,t,i))}(c,()=>{g.remove(),t.complete()})}constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){nl(this,ol,{writable:!0,value:new Set}),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}}class oh{createNativeFontFace(){var e;let t;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e,t;let i;if(!this.data||this.disableFontFace)return null;let n="url(data:".concat(this.mimetype,";base64,").concat((t=this.data,Uint8Array.prototype.toBase64?t.toBase64():btoa(n0(t))),");");if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null==(e=this._inspectFont)||e.call(this,this,n),i}getPathGenerator(e,t){let i;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t;try{i=e.get(n)}catch(e){nz('getPathGenerator - ignoring character: "'.concat(e,'".'))}let r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:n=null}){for(let t in this.compiledGlyphs=Object.create(null),e)this[t]=e[t];this.disableFontFace=!0===t,this.fontExtraProperties=!0===i,this._inspectFont=n}}let oc={DATA:1,ERROR:2},ou={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function od(){}function op(e){if(e instanceof n$||e instanceof nY||e instanceof nQ||e instanceof nX||e instanceof nJ||e instanceof nK)return e;switch(!(e instanceof Error||"object"==typeof e&&null!==e)&&nH('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new n$(e.message);case"InvalidPDFException":return new nY(e.message);case"MissingPDFException":return new nQ(e.message);case"PasswordException":return new nX(e.message,e.code);case"UnexpectedResponseException":return new nJ(e.message,e.status);case"UnknownErrorException":return new nK(e.message,e.details)}return new nK(e.message,e.toString())}var of=new WeakMap,og=new WeakSet,om=new WeakSet,ov=new WeakSet,ob=new WeakSet;class ow{on(e,t){let i=this.actionHandler;if(i[e])throw Error('There is already an actionName called "'.concat(e,'"'));i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){let n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(e){r.reject(e)}return r.promise}sendWithStream(e,t,i,n){let r=this.streamId++,a=this.sourceName,s=this.targetName,l=this.comObj;return new ReadableStream({start:i=>{let o=Promise.withResolvers();return this.streamControllers[r]={controller:i,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:s,action:e,streamId:r,data:t,desiredSize:i.desiredSize},n),o.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,l.postMessage({sourceName:a,targetName:s,stream:ou.PULL,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{nU(e instanceof Error,"cancel must have a valid reason");let t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:s,stream:ou.CANCEL,streamId:r,reason:op(e)}),t.promise}},i)}destroy(){var e;null==(e=na(this,of))||e.abort(),nh(this,of,null)}constructor(e,t,i){np(this,og),np(this,om),np(this,ov),np(this,ob),nl(this,of,{writable:!0,value:new AbortController}),this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",nd(this,og,oy).bind(this),{signal:na(this,of).signal})}}function oy(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void nd(this,ov,oA).call(this,t);if(t.callback){let e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===oc.DATA)i.resolve(t.data);else if(t.callback===oc.ERROR)i.reject(op(t.reason));else throw Error("Unexpected callback case");return}let i=this.actionHandler[t.action];if(!i)throw Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){let e=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(i,t.data).then(function(i){r.postMessage({sourceName:e,targetName:n,callback:oc.DATA,callbackId:t.callbackId,data:i})},function(i){r.postMessage({sourceName:e,targetName:n,callback:oc.ERROR,callbackId:t.callbackId,reason:op(i)})});return}if(t.streamId)return void nd(this,om,ox).call(this,t);i(t.data)}function ox(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this,s=this.actionHandler[e.action],l={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;let l=this.desiredSize;this.desiredSize-=a,l>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:ou.ENQUEUE,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:ou.CLOSE,streamId:t}),delete a.streamSinks[t])},error(e){nU(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:ou.ERROR,streamId:t,reason:op(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(s,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:ou.START_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:ou.START_COMPLETE,streamId:t,reason:op(e)})})}function oA(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case ou.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(op(e.reason));break;case ou.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(op(e.reason));break;case ou.PULL:if(!s){r.postMessage({sourceName:i,targetName:n,stream:ou.PULL_COMPLETE,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,Promise.try(s.onPull||od).then(function(){r.postMessage({sourceName:i,targetName:n,stream:ou.PULL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:ou.PULL_COMPLETE,streamId:t,reason:op(e)})});break;case ou.ENQUEUE:if(nU(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case ou.CLOSE:if(nU(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),nd(this,ob,ok).call(this,a,t);break;case ou.ERROR:nU(a,"error should have stream controller"),a.controller.error(op(e.reason)),nd(this,ob,ok).call(this,a,t);break;case ou.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(op(e.reason)),nd(this,ob,ok).call(this,a,t);break;case ou.CANCEL:if(!s)break;let l=op(e.reason);Promise.try(s.onCancel||od,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:ou.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){r.postMessage({sourceName:i,targetName:n,stream:ou.CANCEL_COMPLETE,streamId:t,reason:op(e)})}),s.sinkCapability.reject(l),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error("Unexpected stream case")}}async function ok(e,t){var i,n,r;await Promise.allSettled([null==(i=e.startCall)?void 0:i.promise,null==(n=e.pullCall)?void 0:n.promise,null==(r=e.cancelCall)?void 0:r.promise]),delete this.streamControllers[t]}var o_=new WeakMap;class oS{create(e,t){if(e<=0||t<=0)throw Error("Invalid canvas size");let i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!na(this,o_)})}}reset(e,t,i){if(!e.canvas)throw Error("Canvas is not specified");if(t<=0||i<=0)throw Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nH("Abstract method `_createCanvas` called.")}constructor({enableHWA:e=!1}){nl(this,o_,{writable:!0,value:!1}),nh(this,o_,e)}}class oE{async fetch(e){let{name:t}=e;if(!this.baseUrl)throw Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(i))})}async _fetch(e){nH("Abstract method `_fetch` called.")}constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}}class oM extends oE{async _fetch(e){let t=await rr(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):n1(t)}}class oC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,r){return"none"}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}var oT=new WeakMap,oP=new WeakMap,oR=new WeakMap,oI=new WeakMap,oL=new WeakMap,oD=new WeakMap,oF=new WeakMap,oN=new WeakMap,oO=new WeakMap,oW=new WeakMap,oj=new WeakSet,oB=new WeakSet,oz=new WeakSet,oH=new WeakSet,oU=new WeakSet,oG=new WeakSet,oV=new WeakSet,oq=new WeakSet,oX=new WeakSet;function oK(){return nh(this,oP,na(this,oP)||new Map)}function oY(){return nh(this,oD,na(this,oD)||new Map)}function oQ(){if(!na(this,oR)){let e=na(this,oL).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let i=na(this,oL).createElementNS(ri,"svg");i.setAttribute("width",0),i.setAttribute("height",0),nh(this,oR,na(this,oL).createElementNS(ri,"defs")),e.append(i),i.append(na(this,oR)),na(this,oL).body.append(e)}return na(this,oR)}function oJ(e){if(1===e.length){let t=e[0],i=Array(256);for(let e=0;e<256;e++)i[e]=t[e]/255;let n=i.join(",");return[n,n,n]}let[t,i,n]=e,r=Array(256),a=Array(256),s=Array(256);for(let e=0;e<256;e++)r[e]=t[e]/255,a[e]=i[e]/255,s[e]=n[e]/255;return[r.join(","),a.join(","),s.join(",")]}function oZ(e){if(void 0===na(this,oT)){nh(this,oT,"");let e=na(this,oL).URL;e!==na(this,oL).baseURI&&(rl(e)?nz('#createUrl: ignore "data:"-URL for performance reasons.'):nh(this,oT,e.split("#",1)[0]))}return"url(".concat(na(this,oT),"#").concat(e,")")}function o$(e){let t=na(this,oL).createElementNS(ri,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function o0(e){let t=na(this,oL).createElementNS(ri,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function o1(e){let t=na(this,oL).createElementNS(ri,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),na(this,oW).append(t),t}function o2(e,t,i){let n=na(this,oL).createElementNS(ri,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),e.append(n)}function o3(e,t,i,n){let r=na(this,oL).createElementNS(ri,"feComponentTransfer");n.append(r),nd(this,oG,o2).call(this,r,"feFuncR",e),nd(this,oG,o2).call(this,r,"feFuncG",t),nd(this,oG,o2).call(this,r,"feFuncB",i)}function o4(e,t){let i=na(this,oL).createElementNS(ri,"feComponentTransfer");t.append(i),nd(this,oG,o2).call(this,i,"feFuncA",e)}function o5(e){return na(this,oW).style.color=e,rb(getComputedStyle(na(this,oW)).getPropertyValue("color"))}class o6{async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw Error("Font filename must be specified.");let i="".concat(this.baseUrl).concat(t);return this._fetch(i).catch(e=>{throw Error("Unable to load font data at: ".concat(i))})}async _fetch(e){nH("Abstract method `_fetch` called.")}constructor({baseUrl:e=null}){this.baseUrl=e}}class o9 extends o6{async _fetch(e){return new Uint8Array(await rr(e,"arraybuffer"))}}async function o8(e){let t=nt.default.getBuiltinModule("fs");return new Uint8Array(await t.promises.readFile(e))}n_&&nz("Please use the `legacy` build in Node.js environments.");let o7={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function he(e,t){if(!t)return;let i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),e.clip(r)}class ht{getPattern(){nH("Abstract method `getPattern` called.")}}class hi extends ht{_createGradient(e){let t;for(let i of("axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let r;if(n===o7.STROKE||n===o7.FILL){let a=t.current.getClippedPathBoundingBox(n,rw(e))||[0,0,0,0],s=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,o=t.cachedCanvases.getCanvas("pattern",s,l),h=o.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=n5.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),he(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(o.canvas,"no-repeat");let c=new DOMMatrix(i);r.setTransform(c)}else he(e,this._bbox),r=this._createGradient(e);return r}constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}}function hn(e,t,i,n,r,a,s,l){let o,h,c,u,d,p,f,g,m,b=t.coords,w=t.colors,y=e.data,x=4*e.width;b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o),b[n+1]>b[r+1]&&(o=n,n=r,r=o,o=s,s=l,l=o),b[i+1]>b[n+1]&&(o=i,i=n,n=o,o=a,a=s,s=o);let A=(b[i]+t.offsetX)*t.scaleX,k=(b[i+1]+t.offsetY)*t.scaleY,_=(b[n]+t.offsetX)*t.scaleX,S=(b[n+1]+t.offsetY)*t.scaleY,E=(b[r]+t.offsetX)*t.scaleX,M=(b[r+1]+t.offsetY)*t.scaleY;if(k>=M)return;let C=w[a],T=w[a+1],P=w[a+2],R=w[s],I=w[s+1],L=w[s+2],D=w[l],F=w[l+1],N=w[l+2],O=Math.round(k),W=Math.round(M);for(let e=O;e<=W;e++){let t;if(e<S){let t=e<k?0:(k-e)/(k-S);h=A-(A-_)*t,c=C-(C-R)*t,u=T-(T-I)*t,d=P-(P-L)*t}else{let t;h=_-(_-E)*(t=e>M?1:S===M?0:(S-e)/(S-M)),c=R-(R-D)*t,u=I-(I-F)*t,d=L-(L-N)*t}p=A-(A-E)*(t=e<k?0:e>M?1:(k-e)/(k-M)),f=C-(C-D)*t,g=T-(T-F)*t,m=P-(P-N)*t;let i=Math.round(Math.min(h,p)),n=Math.round(Math.max(h,p)),r=x*e+4*i;for(let e=i;e<=n;e++)(t=(h-e)/(h-p))<0?t=0:t>1&&(t=1),y[r++]=c-(c-f)*t|0,y[r++]=u-(u-g)*t|0,y[r++]=d-(d-m)*t|0,y[r++]=255}}class hr extends ht{_createMeshCanvas(e,t,i){let n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-n,s=Math.ceil(this._bounds[3])-r,l=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),o=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),h=a/l,c=s/o,u={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/h,scaleY:1/c},d=l+4,p=o+4,f=i.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(l,o);if(t){let e=m.data;for(let i=0,n=e.length;i<n;i+=4)e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=255}for(let e of this._figures)!function(e,t,i){let n,r,a=t.coords,s=t.colors;switch(t.type){case"lattice":let l=t.verticesPerRow,o=Math.floor(a.length/l)-1,h=l-1;for(n=0;n<o;n++){let t=n*l;for(let n=0;n<h;n++,t++)hn(e,i,a[t],a[t+1],a[t+l],s[t],s[t+1],s[t+l]),hn(e,i,a[t+l+1],a[t+1],a[t+l],s[t+l+1],s[t+1],s[t+l])}break;case"triangles":for(n=0,r=a.length;n<r;n+=3)hn(e,i,a[n],a[n+1],a[n+2],s[n],s[n+1],s[n+2]);break;default:throw Error("illegal figure")}}(m,e,u);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:n-2*h,offsetY:r-2*c,scaleX:h,scaleY:c}}getPattern(e,t,i,n){let r;if(he(e,this._bbox),n===o7.SHADING)r=n5.singularValueDecompose2dScale(rw(e));else if(r=n5.singularValueDecompose2dScale(t.baseTransform),this.matrix){let e=n5.singularValueDecompose2dScale(this.matrix);r=[r[0]*e[0],r[1]*e[1]]}let a=this._createMeshCanvas(r,n===o7.SHADING?null:this._background,t.cachedCanvases);return n!==o7.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}}class ha extends ht{getPattern(){return"hotpink"}}let hs={COLORED:1,UNCOLORED:2};class hl{createPatternCanvas(e){let{bbox:t,operatorList:i,paintType:n,tilingType:r,color:a,canvasGraphicsFactory:s}=this,{xstep:l,ystep:o}=this;l=Math.abs(l),o=Math.abs(o),nB("TilingType: "+r);let h=t[0],c=t[1],u=t[2],d=t[3],p=u-h,f=d-c,g=n5.singularValueDecompose2dScale(this.matrix),m=n5.singularValueDecompose2dScale(this.baseTransform),b=g[0]*m[0],w=g[1]*m[1],y=p,x=f,A=!1,k=!1,_=Math.ceil(o*w),S=Math.ceil(f*w);Math.ceil(l*b)>=Math.ceil(p*b)?y=l:A=!0,_>=S?x=o:k=!0;let E=this.getSizeAndScale(y,this.ctx.canvas.width,b),M=this.getSizeAndScale(x,this.ctx.canvas.height,w),C=e.cachedCanvases.getCanvas("pattern",E.size,M.size),T=C.context,P=s.createCanvasGraphics(T);if(P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,n,a),T.translate(-E.scale*h,-M.scale*c),P.transform(E.scale,0,0,M.scale,0,0),T.save(),this.clipBbox(P,h,c,u,d),P.baseTransform=rw(P.ctx),P.executeOperatorList(i),P.endDrawing(),T.restore(),A||k){let t=C.canvas;A&&(y=l),k&&(x=o);let i=this.getSizeAndScale(y,this.ctx.canvas.width,b),n=this.getSizeAndScale(x,this.ctx.canvas.height,w),r=i.size,a=n.size,s=e.cachedCanvases.getCanvas("pattern-workaround",r,a),u=s.context,d=A?Math.floor(p/l):0,g=k?Math.floor(f/o):0;for(let e=0;e<=d;e++)for(let i=0;i<=g;i++)u.drawImage(t,r*e,a*i,r,a,0,0,r,a);return{canvas:s.canvas,scaleX:i.scale,scaleY:n.scale,offsetX:h,offsetY:c}}return{canvas:C.canvas,scaleX:E.scale,scaleY:M.scale,offsetX:h,offsetY:c}}getSizeAndScale(e,t,i){let n=Math.max(hl.MAX_PATTERN_SIZE,t),r=Math.ceil(e*i);return r>=n?r=n:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,n,r){let a=n-t,s=r-i;e.ctx.rect(t,i,a,s),e.current.updateRectMinMax(rw(e.ctx),[t,i,n,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){let n=e.ctx,r=e.current;switch(t){case hs.COLORED:let a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case hs.UNCOLORED:let s=n5.makeHexColor(i[0],i[1],i[2]);n.fillStyle=s,n.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new nZ("Unsupported paint type: ".concat(t))}}getPattern(e,t,i,n){let r=i;n!==o7.SHADING&&(r=n5.transform(r,t.baseTransform),this.matrix&&(r=n5.transform(r,this.matrix)));let a=this.createPatternCanvas(t),s=new DOMMatrix(r);s=(s=s.translate(a.offsetX,a.offsetY)).scale(1/a.scaleX,1/a.scaleY);let l=e.createPattern(a.canvas,"repeat");return l.setTransform(s),l}constructor(e,t,i,n,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}}(0,nw._)(hl,"MAX_PATTERN_SIZE",3e3);class ho{getCanvas(e,t,i){let n;return void 0!==this.cache[e]?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}}function hh(e,t,i,n,r,a,s,l,o,h){let[c,u,d,p,f,g]=rw(e);if(0===u&&0===d){let m=Math.round(s*c+f),b=Math.round(l*p+g),w=Math.abs(Math.round((s+o)*c+f)-m)||1,y=Math.abs(Math.round((l+h)*p+g)-b)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),m,b),e.drawImage(t,i,n,r,a,0,0,w,y),e.setTransform(c,u,d,p,f,g),[w,y]}if(0===c&&0===p){let m=Math.round(l*d+f),b=Math.round(s*u+g),w=Math.abs(Math.round((l+h)*d+f)-m)||1,y=Math.abs(Math.round((s+o)*u+g)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(d),0,m,b),e.drawImage(t,i,n,r,a,0,0,y,w),e.setTransform(c,u,d,p,f,g),[y,w]}return e.drawImage(t,i,n,r,a,s,l,o,h),[Math.hypot(c,u)*o,Math.hypot(d,p)*h]}class hc{clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=n5.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){let i=n5.applyTransform(t,e),n=n5.applyTransform(t.slice(2),e),r=n5.applyTransform([t[0],t[3]],e),a=n5.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(e,t){n5.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,r,a,s,l,o,h){let c=n5.bezierBoundingBox(t,i,n,r,a,s,l,o,h);h||this.updateRectMinMax(e,c)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o7.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(e===o7.STROKE){t||nH("Stroke bounding box must include transform.");let e=n5.singularValueDecompose2dScale(t),n=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;i[0]-=n,i[1]-=r,i[2]+=n,i[3]+=r}return i}updateClipFromPath(){let e=n5.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o7.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n5.intersect(this.clipBox,this.getPathBoundingBox(e,t))}constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nS,this.textMatrixScale=1,this.fontMatrix=nE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nI.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}}function hu(e,t){let i,n,r,a;if(t instanceof ImageData)return void e.putImageData(t,0,0);let s=t.height,l=t.width,o=s%16,h=(s-o)/16,c=0===o?h:h+1,u=e.createImageData(l,16),d=0,p,f=t.data,g=u.data;if(t.kind===nL.GRAYSCALE_1BPP){let t=f.byteLength,a=new Uint32Array(g.buffer,0,g.byteLength>>2),s=a.length,m=l+7>>3,b=n3.isLittleEndian?0xff000000:255;for(i=0;i<c;i++){for(n=0,r=i<h?16:o,p=0;n<r;n++){let e=t-d,i=0,n=e>m?l:8*e-7,r=-8&n,s=0,o=0;for(;i<r;i+=8)o=f[d++],a[p++]=128&o?0xffffffff:b,a[p++]=64&o?0xffffffff:b,a[p++]=32&o?0xffffffff:b,a[p++]=16&o?0xffffffff:b,a[p++]=8&o?0xffffffff:b,a[p++]=4&o?0xffffffff:b,a[p++]=2&o?0xffffffff:b,a[p++]=1&o?0xffffffff:b;for(;i<n;i++)0===s&&(o=f[d++],s=128),a[p++]=o&s?0xffffffff:b,s>>=1}for(;p<s;)a[p++]=0;e.putImageData(u,0,16*i)}}else if(t.kind===nL.RGBA_32BPP){for(i=0,n=0,a=16*l*4;i<h;i++)g.set(f.subarray(d,d+a)),d+=a,e.putImageData(u,0,n),n+=16;i<c&&(a=l*o*4,g.set(f.subarray(d,d+a)),e.putImageData(u,0,n))}else if(t.kind===nL.RGB_24BPP)for(i=0,a=l*(r=16);i<c;i++){for(i>=h&&(a=l*(r=o)),p=0,n=a;n--;)g[p++]=f[d++],g[p++]=f[d++],g[p++]=f[d++],g[p++]=255;e.putImageData(u,0,16*i)}else throw Error("bad image kind: ".concat(t.kind))}function hd(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);let i=t.height,n=t.width,r=i%16,a=(i-r)/16,s=0===r?a:a+1,l=e.createImageData(n,16),o=0,h=t.data,c=l.data;for(let t=0;t<s;t++){let i=t<a?16:r;({srcPos:o}=function(e){let{src:t,srcPos:i=0,dest:n,width:r,height:a,nonBlackColor:s=0xffffffff,inverseDecode:l=!1}=e,o=n3.isLittleEndian?0xff000000:255,[h,c]=l?[s,o]:[o,s],u=r>>3,d=7&r,p=t.length;n=new Uint32Array(n.buffer);let f=0;for(let e=0;e<a;e++){for(let e=i+u;i<e;i++){let e=i<p?t[i]:255;n[f++]=128&e?c:h,n[f++]=64&e?c:h,n[f++]=32&e?c:h,n[f++]=16&e?c:h,n[f++]=8&e?c:h,n[f++]=4&e?c:h,n[f++]=2&e?c:h,n[f++]=1&e?c:h}if(0===d)continue;let e=i<p?t[i++]:255;for(let t=0;t<d;t++)n[f++]=e&1<<7-t?c:h}return{srcPos:i,destPos:f}}({src:h,srcPos:o,dest:c,width:n,height:i,nonBlackColor:0})),e.putImageData(l,0,16*t)}}function hp(e,t){for(let i of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function hf(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!n_){let{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function hg(e,t){if(t)return!0;let i=n5.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*rn.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}let hm=["butt","round","square"],hv=["miter","round","bevel"],hb={},hw={};var hy=new WeakSet,hx=new WeakSet,hA=new WeakSet;class hk{getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:i,transparency:n=!1,background:r=null}=e,a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,n){let e=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...rw(this.compositeCtx))}this.ctx.save(),hf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=rw(this.ctx)}executeOperatorList(e,t,i,n){let r,a=e.argsArray,s=e.fnArray,l=t||0,o=a.length;if(o===l)return l;let h=o-l>10&&"function"==typeof i,c=h?Date.now()+15:0,u=0,d=this.commonObjs,p=this.objs;for(;;){if(void 0!==n&&l===n.nextBreakPoint)return n.breakIt(l,i),l;if((r=s[l])!==nO.dependency)this[r].apply(this,a[l]);else for(let e of a[l]){let t=e.startsWith("g_")?d:p;if(!t.has(e))return t.get(e,i),l}if(++l===o)return l;if(h&&++u>10){if(Date.now()>c)return i(),l;u=0}}}endDrawing(){for(let e of(nd(this,hy,h_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),nd(this,hx,hS).call(this)}_scaleImage(e,t){var i,n;let r,a,s=null!=(i=e.width)?i:e.displayWidth,l=null!=(n=e.height)?n:e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),h=Math.max(Math.hypot(t[2],t[3]),1),c=s,u=l,d="prescale1";for(;o>2&&c>1||h>2&&u>1;){let t=c,i=u;o>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/t),h>2&&u>1&&(i=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,h/=u/i),(a=(r=this.cachedCanvases.getCanvas(d,t,i)).context).clearRect(0,0,t,i),a.drawImage(e,0,0,c,u,0,0,t,i),e=r.canvas,c=t,u=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e){let t,i,n,r,a=this.ctx,{width:s,height:l}=e,o=this.current.fillColor,h=this.current.patternFill,c=rw(a);if((e.bitmap||e.data)&&e.count>1){let r=e.bitmap||e.data.buffer;i=JSON.stringify(h?c:[c.slice(0,4),o]),(t=this._cachedBitmapsMap.get(r))||(t=new Map,this._cachedBitmapsMap.set(r,t));let a=t.get(i);if(a&&!h)return{canvas:a,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};n=a}n||hd((r=this.cachedCanvases.getCanvas("maskCanvas",s,l)).context,e);let u=n5.transform(c,[1/s,0,0,-1/l,0,0]);u=n5.transform(u,[1,0,0,1,0,-l]);let[d,p,f,g]=n5.getAxialAlignedBoundingBox([0,0,s,l],u),m=Math.round(f-d)||1,b=Math.round(g-p)||1,w=this.cachedCanvases.getCanvas("fillCanvas",m,b),y=w.context;y.translate(-d,-p),y.transform(...u),!n&&(n=(n=this._scaleImage(r.canvas,ry(y))).img,t&&h&&t.set(i,n)),y.imageSmoothingEnabled=hg(rw(y),e.interpolate),hh(y,n,0,0,n.width,n.height,0,0,s,l),y.globalCompositeOperation="source-in";let x=n5.transform(ry(y),[1,0,0,1,-d,-p]);return y.fillStyle=h?o.getPattern(a,this,x,o7.FILL):o,y.fillRect(0,0,s,l),t&&!h&&(this.cachedCanvases.delete("fillCanvas"),t.set(i,w.canvas)),{canvas:w.canvas,offsetX:Math.round(d),offsetY:Math.round(p)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=hm[e]}setLineJoin(e){this.ctx.lineJoin=hv[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;let r=this.ctx;r.setTransform(...rw(this.suspendedCtx)),hp(this.suspendedCtx,r);var a=this.suspendedCtx;if(r._removeMirroring)throw Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){a.save(),this.__originalSave()},r.restore=function(){a.restore(),this.__originalRestore()},r.translate=function(e,t){a.translate(e,t),this.__originalTranslate(e,t)},r.scale=function(e,t){a.scale(e,t),this.__originalScale(e,t)},r.transform=function(e,t,i,n,r,s){a.transform(e,t,i,n,r,s),this.__originalTransform(e,t,i,n,r,s)},r.setTransform=function(e,t,i,n,r,s){a.setTransform(e,t,i,n,r,s),this.__originalSetTransform(e,t,i,n,r,s)},r.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){a.rotate(e),this.__originalRotate(e)},r.clip=function(e){a.clip(e),this.__originalClip(e)},r.moveTo=function(e,t){a.moveTo(e,t),this.__originalMoveTo(e,t)},r.lineTo=function(e,t){a.lineTo(e,t),this.__originalLineTo(e,t)},r.bezierCurveTo=function(e,t,i,n,r,s){a.bezierCurveTo(e,t,i,n,r,s),this.__originalBezierCurveTo(e,t,i,n,r,s)},r.rect=function(e,t,i,n){a.rect(e,t,i,n),this.__originalRect(e,t,i,n)},r.closePath=function(){a.closePath(),this.__originalClosePath()},r.beginPath=function(){a.beginPath(),this.__originalBeginPath()},this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){let r=n[0],a=n[1],s=n[2]-r,l=n[3]-a;0!==s&&0!==l&&(this.genericComposeSMask(t.context,i,s,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,r,a,s,l,o,h,c){let u=e.canvas,d=l-h,p=o-c;if(a){let t=n5.makeHexColor(...a);if(d<0||p<0||d+i>u.width||p+n>u.height){let e=this.cachedCanvases.getCanvas("maskExtension",i,n),r=e.context;r.drawImage(u,-d,-p),r.globalCompositeOperation="destination-atop",r.fillStyle=t,r.fillRect(0,0,i,n),r.globalCompositeOperation="source-over",u=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let r=new Path2D;r.rect(d,p,i,n),e.clip(r),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(d,p,i,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&s?t.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(s));let f=new Path2D;f.rect(l,o,i,n),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,d,p,i,n,l,o,i,n),t.restore()}save(){this.inSMaskMode?(hp(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hp(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,r,a){this.ctx.transform(e,t,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let n,r,a=this.ctx,s=this.current,l=s.x,o=s.y,h=rw(a),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],u=c?i.slice(0):null;for(let i=0,d=0,p=e.length;i<p;i++)switch(0|e[i]){case nO.rectangle:l=t[d++],o=t[d++];let p=t[d++],f=t[d++],g=l+p,m=o+f;a.moveTo(l,o),0===p||0===f?a.lineTo(g,m):(a.lineTo(g,o),a.lineTo(g,m),a.lineTo(l,m)),c||s.updateRectMinMax(h,[l,o,g,m]),a.closePath();break;case nO.moveTo:l=t[d++],o=t[d++],a.moveTo(l,o),c||s.updatePathMinMax(h,l,o);break;case nO.lineTo:l=t[d++],o=t[d++],a.lineTo(l,o),c||s.updatePathMinMax(h,l,o);break;case nO.curveTo:n=l,r=o,l=t[d+4],o=t[d+5],a.bezierCurveTo(t[d],t[d+1],t[d+2],t[d+3],l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],t[d+2],t[d+3],l,o,u),d+=6;break;case nO.curveTo2:n=l,r=o,a.bezierCurveTo(l,o,t[d],t[d+1],t[d+2],t[d+3]),s.updateCurvePathMinMax(h,n,r,l,o,t[d],t[d+1],t[d+2],t[d+3],u),l=t[d+2],o=t[d+3],d+=4;break;case nO.curveTo3:n=l,r=o,l=t[d+2],o=t[d+3],a.bezierCurveTo(t[d],t[d+1],l,o,l,o),s.updateCurvePathMinMax(h,n,r,t[d],t[d+1],l,o,l,o,u),d+=4;break;case nO.closePath:a.closePath()}c&&s.updateScalingPathMinMax(h,u),s.setCurrentPoint(l,o)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&(null==i?void 0:i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ry(t),o7.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,i=this.current.fillColor,n=this.current.patternFill,r=!1;n&&(t.save(),t.fillStyle=i.getPattern(t,this,ry(t),o7.FILL),r=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=hb}eoClip(){this.pendingClip=hw}beginText(){this.current.textMatrix=nS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();let i=new Path2D,n=t.getTransform().invertSelf();for(let{transform:t,x:r,y:a,fontSize:s,path:l}of e)i.addPath(l,new DOMMatrix(t).preMultiplySelf(n).translate(r,a).scale(s,-s));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var i;let n=this.commonObjs.get(e),r=this.current;if(!n)throw Error("Can't find font for ".concat(e));if(r.fontMatrix=n.fontMatrix||nE,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&nz("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let a=n.loadedName||"sans-serif",s=(null==(i=n.systemFontInfo)?void 0:i.css)||'"'.concat(a,'", ').concat(n.fallbackName),l="normal";n.black?l="900":n.bold&&(l="bold");let o=n.italic?"italic":"normal",h=t;t<16?h=16:t>100&&(h=100),this.current.fontSizeScale=t/h,this.ctx.font="".concat(o," ").concat(l," ").concat(h,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,r,a){this.current.textMatrix=[e,t,i,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,r){let a,s=this.ctx,l=this.current,o=l.font,h=l.textRenderingMode,c=l.fontSize/l.fontSizeScale,u=h&nI.FILL_STROKE_MASK,d=!!(h&nI.ADD_TO_PATH_FLAG),p=l.patternFill&&!o.missingFile,f=l.patternStroke&&!o.missingFile;if((o.disableFontFace||d||p||f)&&(a=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||p||f){if(s.save(),s.translate(t,i),s.scale(c,-c),u===nI.FILL||u===nI.FILL_STROKE)if(n){let e=s.getTransform();s.setTransform(...n),s.fill(nd(this,hA,hE).call(this,a,e,n))}else s.fill(a);if(u===nI.STROKE||u===nI.FILL_STROKE)if(r){let e=s.getTransform();s.setTransform(...r),s.stroke(nd(this,hA,hE).call(this,a,e,r))}else s.lineWidth/=c,s.stroke(a);s.restore()}else(u===nI.FILL||u===nI.FILL_STROKE)&&s.fillText(e,t,i),(u===nI.STROKE||u===nI.FILL_STROKE)&&s.strokeText(e,t,i);d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:rw(s),x:t,y:i,fontSize:c,path:a})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,i=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){i=!0;break}return nV(this,"isFontSubpixelAAEnabled",i)}showText(e){let t,i,n=this.current,r=n.font;if(r.isType3Font)return this.showType3Text(e);let a=n.fontSize;if(0===a)return;let s=this.ctx,l=n.fontSizeScale,o=n.charSpacing,h=n.wordSpacing,c=n.fontDirection,u=n.textHScale*c,d=e.length,p=r.vertical,f=p?1:-1,g=r.defaultVMetrics,m=a*n.fontMatrix[0],b=n.textRenderingMode===nI.FILL&&!r.disableFontFace&&!n.patternFill;if(s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),c>0?s.scale(u,-1):s.scale(u,1),n.patternFill){s.save();let e=n.fillColor.getPattern(s,this,ry(s),o7.FILL);t=rw(s),s.restore(),s.fillStyle=e}if(n.patternStroke){s.save();let e=n.strokeColor.getPattern(s,this,ry(s),o7.STROKE);i=rw(s),s.restore(),s.strokeStyle=e}let w=n.lineWidth,y=n.textMatrixScale;if(0===y||0===w){let e=n.textRenderingMode&nI.FILL_STROKE_MASK;(e===nI.STROKE||e===nI.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=y;if(1!==l&&(s.scale(l,l),w/=l),s.lineWidth=w,r.isInvalidPDFjsFont){let t=[],i=0;for(let n of e)t.push(n.unicode),i+=n.width;s.fillText(t.join(""),0,0),n.x+=i*m*u,s.restore(),this.compose();return}let x=0,A;for(A=0;A<d;++A){let n,u,d=e[A];if("number"==typeof d){x+=f*d*a/1e3;continue}let w=!1,y=(d.isSpace?h:0)+o,k=d.fontChar,_=d.accent,S=d.width;if(p){let e=d.vmetric||g,t=-(d.vmetric?e[1]:.5*S)*m,i=e[2]*m;S=e?-e[0]:S,n=t/l,u=(x+i)/l}else n=x/l,u=0;if(r.remeasure&&S>0){let e=1e3*s.measureText(k).width/a*l;if(S<e&&this.isFontSubpixelAAEnabled){let t=S/e;w=!0,s.save(),s.scale(t,1),n/=t}else S!==e&&(n+=(S-e)/2e3*a/l)}if(this.contentVisible&&(d.isInFont||r.missingFile)){if(b&&!_)s.fillText(k,n,u);else if(this.paintChar(k,n,u,t,i),_){let e=n+a*_.offset.x/l,r=u-a*_.offset.y/l;this.paintChar(_.fontChar,e,r,t,i)}}x+=p?S*m-y*c:S*m+y*c,w&&s.restore()}p?n.y-=x:n.x+=x*u,s.restore(),this.compose()}showType3Text(e){let t,i,n,r,a=this.ctx,s=this.current,l=s.font,o=s.fontSize,h=s.fontDirection,c=l.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,p=s.textHScale*h,f=s.fontMatrix||nE,g=e.length;if(s.textRenderingMode!==nI.INVISIBLE&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...s.textMatrix),a.translate(s.x,s.y),a.scale(p,h),t=0;t<g;++t){if("number"==typeof(i=e[t])){r=c*i*o/1e3,this.ctx.translate(r,0),s.x+=r*p;continue}let h=(i.isSpace?d:0)+u,g=l.charProcOperatorList[i.operatorListId];if(!g){nz('Type3 character "'.concat(i.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=i,this.save(),a.scale(o,o),a.transform(...f),this.executeOperatorList(g),this.restore()),n=n5.applyTransform([i.width,0],f)[0]*o+h,a.translate(n,0),s.x+=n*p}a.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){let i=e[1],n=this.baseTransform||rw(this.ctx);t=new hl(e,i,this.ctx,{createCanvasGraphics:e=>new hk(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=n5.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=n5.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new hi(e);case"Mesh":return new hr(e);case"Dummy":return new ha}throw Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),i&&(t.matrix=i),t}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save(),t.fillStyle=this._getPattern(e).getPattern(t,this,ry(t),o7.SHADING);let i=ry(t);{let{width:e,height:n}=t.canvas,[r,a,s,l]=n5.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(r,a,s-r,l-a)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nH("Should not call beginInlineImage")}beginImageData(){nH("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=rw(this.ctx),t)){let e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i),this.current.updateRectMinMax(rw(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||nB("TODO: Support non-isolated groups."),e.knockout&&nz("Knockout groups not supported.");let i=rw(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw Error("Bounding box is required.");let n=n5.getAxialAlignedBoundingBox(e.bbox,rw(t)),r=[0,0,t.canvas.width,t.canvas.height],a=Math.floor((n=n5.intersect(n,r)||[0,0,0,0])[0]),s=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),o=Math.max(Math.ceil(n[3])-s,1);this.current.startNewPathAndClipBox([0,0,l,o]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);let c=this.cachedCanvases.getCanvas(h,l,o),u=c.context;u.translate(-a,-s),u.transform(...i),e.smask?this.smaskStack.push({canvas:c.canvas,context:u,offsetX:a,offsetY:s,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,s),t.save()),hp(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let e=rw(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);let i=n5.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,i,n,r){if(nd(this,hy,h_).call(this),hf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let n=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=n,t[3]=a;let[r,s]=n5.singularValueDecompose2dScale(rw(this.ctx)),{viewportScale:l}=this,o=Math.ceil(n*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(o,h);let{canvas:c,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(r,0,0,-s,0,a*s),hf(this.ctx)}else hf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],n,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new hc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nd(this,hx,hS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;(e=this.getObject(e.data,e)).count=t;let i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(e){let t,i,n,{width:r,height:a}=e;if(r>1e3||a>1e3)return null;let s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=r+1,o=new Uint8Array(l*(a+1)),h=r+7&-8,c=new Uint8Array(h*a),u=0;for(let t of e.data){let e=128;for(;e>0;)c[u++]=t&e?0:255,e>>=1}let d=0;for(0!==c[u=0]&&(o[0]=1,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[i]=c[u]?2:1,++d),u++;for(0!==c[u]&&(o[i]=2,++d),t=1;t<a;t++){u=t*h,n=t*l,c[u-h]!==c[u]&&(o[n]=c[u]?1:8,++d);let e=4*!!c[u]+8*!!c[u-h];for(i=1;i<r;i++)s[e=(e>>2)+4*!!c[u+1]+8*!!c[u-h+1]]&&(o[n+i]=s[e],++d),u++;if(c[u-h]!==c[u]&&(o[n+i]=c[u]?2:4,++d),d>1e3)return null}for(u=h*(a-1),n=t*l,0!==c[u]&&(o[n]=8,++d),i=1;i<r;i++)c[u]!==c[u+1]&&(o[n+i]=c[u]?4:8,++d),u++;if(0!==c[u]&&(o[n+i]=4,++d),d>1e3)return null;let p=new Int32Array([0,l,-1,0,-l,0,0,0,1]),f=new Path2D;for(t=0;d&&t<=a;t++){let e=t*l,i=e+r;for(;e<i&&!o[e];)e++;if(e===i)continue;f.moveTo(e%l,t);let n=e,a=o[e];do{let t=p[a];do e+=t;while(!o[e])let i=o[e];5!==i&&10!==i?(a=i,o[e]=0):(a=i&51*a>>4,o[e]&=a>>2|a<<2),f.lineTo(e%l,e/l|0),!o[e]&&--d}while(n!==e)--t}return c=null,o=null,function(e){e.save(),e.scale(1/r,-1/a),e.translate(0,-a),e.fill(f),e.beginPath(),e.restore()}}(e)),n.compiled))return void n.compiled(i);let r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);let s=this.ctx;s.save();let l=rw(s);s.transform(t,i,n,r,0,0);let o=this._createMaskCanvas(e);s.setTransform(1,0,0,1,o.offsetX-l[4],o.offsetY-l[5]);for(let e=0,h=a.length;e<h;e+=2){let h=n5.transform(l,[t,i,n,r,a[e],a[e+1]]),[c,u]=n5.applyTransform([0,0],h);s.drawImage(o.canvas,c,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let r of e){let{data:e,width:a,height:s,transform:l}=r,o=this.cachedCanvases.getCanvas("maskCanvas",a,s),h=o.context;h.save(),hd(h,this.getObject(e,r)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,ry(t),o7.FILL):i,h.fillRect(0,0,a,s),h.restore(),t.save(),t.transform(...l),t.scale(1,-1),hh(t,o.canvas,0,0,a,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t)return void nz("Dependent image isn't ready yet");this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;let r=this.getObject(e);if(!r)return void nz("Dependent image isn't ready yet");let a=r.width,s=r.height,l=[];for(let e=0,r=n.length;e<r;e+=2)l.push({transform:[t,0,0,i,n[e],n[e+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;let{bitmap:t,width:i,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){let t;if(!this.contentVisible)return;let i=e.width,n=e.height,r=this.ctx;if(this.save(),!n_){let{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}if(r.scale(1/i,-1/n),e.bitmap)t=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{let r=this.cachedCanvases.getCanvas("inlineImage",i,n).context;hu(r,e),t=this.applyTransferMapsToCanvas(r)}let a=this._scaleImage(t,ry(r));r.imageSmoothingEnabled=hg(rw(r),e.interpolate),hh(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){let i;if(!this.contentVisible)return;let n=this.ctx;if(e.bitmap)i=e.bitmap;else{let t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;hu(r,e),i=this.applyTransferMapsToCanvas(r)}for(let e of t)n.save(),n.transform(...e.transform),n.scale(1,-1),hh(n,i,e.x,e.y,e.w,e.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let i=this.ctx;this.pendingClip&&(t||(this.pendingClip===hw?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=rw(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let e,t,{lineWidth:i}=this.current,{a:n,b:r,c:a,d:s}=this.ctx.getTransform();if(0===r&&0===a){let r=Math.abs(n),a=Math.abs(s);if(r===a)if(0===i)e=t=1/r;else{let n=r*i;e=t=n<1?1/n:1}else if(0===i)e=1/r,t=1/a;else{let n=r*i,s=a*i;e=n<1?1/n:1,t=s<1?1/s:1}}else{let l=Math.abs(n*s-r*a),o=Math.hypot(n,r),h=Math.hypot(a,s);if(0===i)e=h/l,t=o/l;else{let n=i*l;e=h>n?h/n:1,t=o>n?o/n:1}}this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=i||1,1===n&&1===r)return void t.stroke();let a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){let e=Math.max(n,r);t.setLineDash(a.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}constructor(e,t,i,n,r,{optionalContentConfig:a,markedContentStack:s=null},l,o){np(this,hy),np(this,hx),np(this,hA),this.ctx=e,this.current=new hc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=a,this.cachedCanvases=new ho(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}}function h_(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function hS(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function hE(e,t,i){let n=new Path2D;return n.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),n}for(let e in nO)void 0!==hk.prototype[e]&&(hk.prototype[nO[e]]=hk.prototype[e]);class hM{static get workerPort(){return nm(this,hM,hC)}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw Error("Invalid `workerPort` type.");nv(this,hM,hC,e)}static get workerSrc(){return nm(this,hM,hT)}static set workerSrc(e){if("string"!=typeof e)throw Error("Invalid `workerSrc` type.");nv(this,hM,hT,e)}}var hC={writable:!0,value:null},hT={writable:!0,value:""},hP=new WeakMap,hR=new WeakMap;class hI{getRaw(){return na(this,hR)}get(e){var t;return null!=(t=na(this,hP).get(e))?t:null}getAll(){return n2(na(this,hP))}has(e){return na(this,hP).has(e)}constructor({parsedData:e,rawData:t}){nl(this,hP,{writable:!0,value:void 0}),nl(this,hR,{writable:!0,value:void 0}),nh(this,hP,e),nh(this,hR,t)}}let hL=Symbol("INTERNAL");var hD=new WeakMap,hF=new WeakMap,hN=new WeakMap,hO=new WeakMap;class hW{get visible(){if(na(this,hN))return na(this,hO);if(!na(this,hO))return!1;let{print:e,view:t}=this.usage;return na(this,hD)?(null==t?void 0:t.viewState)!=="OFF":!na(this,hF)||(null==e?void 0:e.printState)!=="OFF"}_setVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==hL&&nH("Internal method `_setVisible` called."),nh(this,hN,i),nh(this,hO,t)}constructor(e,{name:t,intent:i,usage:n,rbGroups:r}){nl(this,hD,{writable:!0,value:!1}),nl(this,hF,{writable:!0,value:!1}),nl(this,hN,{writable:!0,value:!1}),nl(this,hO,{writable:!0,value:!0}),nh(this,hD,!!(e&nM.DISPLAY)),nh(this,hF,!!(e&nM.PRINT)),this.name=t,this.intent=i,this.usage=n,this.rbGroups=r}}var hj=new WeakMap,hB=new WeakMap,hz=new WeakMap,hH=new WeakMap,hU=new WeakSet;class hG{isVisible(e){if(0===na(this,hB).size)return!0;if(!e)return nB("Optional content group not defined."),!0;if("OCG"===e.type)return na(this,hB).has(e.id)?na(this,hB).get(e.id).visible:(nz("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return nd(this,hU,hV).call(this,e.expression);if(e.policy&&"AnyOn"!==e.policy){if("AllOn"===e.policy){for(let t of e.ids){if(!na(this,hB).has(t)){nz("Optional content group not found: ".concat(t));break}if(!na(this,hB).get(t).visible)return!1}return!0}else if("AnyOff"===e.policy){for(let t of e.ids){if(!na(this,hB).has(t))return nz("Optional content group not found: ".concat(t)),!0;if(!na(this,hB).get(t).visible)return!0}return!1}else if("AllOff"===e.policy){for(let t of e.ids){if(!na(this,hB).has(t)){nz("Optional content group not found: ".concat(t));break}if(na(this,hB).get(t).visible)return!1}return!0}}else{for(let t of e.ids){if(!na(this,hB).has(t))return nz("Optional content group not found: ".concat(t)),!0;if(na(this,hB).get(t).visible)return!0}return!1}return nz("Unknown optional content policy ".concat(e.policy,".")),!0}return nz("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=na(this,hB).get(e);if(!n)return void nz("Optional content group not found: ".concat(e));if(i&&t&&n.rbGroups.length){for(let t of n.rbGroups)for(let i of t)if(i!==e){var r;null==(r=na(this,hB).get(i))||r._setVisible(hL,!1,!0)}}n._setVisible(hL,!!t,!0),nh(this,hj,null)}setOCGState(e){let t,{state:i,preserveRB:n}=e;for(let e of i){switch(e){case"ON":case"OFF":case"Toggle":t=e;continue}let i=na(this,hB).get(e);if(i)switch(t){case"ON":this.setVisibility(e,!0,n);break;case"OFF":this.setVisibility(e,!1,n);break;case"Toggle":this.setVisibility(e,!i.visible,n)}}nh(this,hj,null)}get hasInitialVisibility(){return null===na(this,hz)||this.getHash()===na(this,hz)}getOrder(){return na(this,hB).size?na(this,hH)?na(this,hH).slice():[...na(this,hB).keys()]:null}getGroups(){return na(this,hB).size>0?n2(na(this,hB)):null}getGroup(e){return na(this,hB).get(e)||null}getHash(){if(null!==na(this,hj))return na(this,hj);let e=new l9;for(let[t,i]of na(this,hB))e.update("".concat(t,":").concat(i.visible));return nh(this,hj,e.hexdigest())}constructor(e,t=nM.DISPLAY){if(np(this,hU),nl(this,hj,{writable:!0,value:null}),nl(this,hB,{writable:!0,value:new Map}),nl(this,hz,{writable:!0,value:null}),nl(this,hH,{writable:!0,value:null}),this.renderingIntent=t,this.name=null,this.creator=null,null===e)return;for(let i of(this.name=e.name,this.creator=e.creator,nh(this,hH,e.order),e.groups))na(this,hB).set(i.id,new hW(t,i));if("OFF"===e.baseState)for(let e of na(this,hB).values())e._setVisible(hL,!1);for(let t of e.on)na(this,hB).get(t)._setVisible(hL,!0);for(let t of e.off)na(this,hB).get(t)._setVisible(hL,!1);nh(this,hz,this.getHash())}}function hV(e){let t=e.length;if(t<2)return!0;let i=e[0];for(let n=1;n<t;n++){let t,r=e[n];if(Array.isArray(r))t=nd(this,hU,hV).call(this,r);else{if(!na(this,hB).has(r))return nz("Optional content group not found: ".concat(r)),!0;t=na(this,hB).get(r).visible}switch(i){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===i}class hq{_onReceiveData(e){let{begin:t,chunk:i}=e,n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):nU(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}_onProgress(e){var t,i,n,r;void 0===e.total?null==(i=this._rangeReaders[0])||null==(t=i.onProgress)||t.call(i,{loaded:e.loaded}):null==(r=this._fullRequestReader)||null==(n=r.onProgress)||n.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){nU(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new hX(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new hK(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeReaders.slice(0)))i.cancel(e);this._pdfDataRangeTransport.abort()}constructor(e,{disableRange:t=!1,disableStream:i=!1}){nU(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:s}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=s,(null==r?void 0:r.length)>0){let e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}}class hX{_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}constructor(e,t,i=!1,n=null){for(let r of(this._stream=e,this._done=i||!1,this._filename=ro(n)?n:null,this._queuedChunks=t||[],this._loaded=0,this._queuedChunks))this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}}class hK{_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{for(let t of(this._requests.shift().resolve({value:e,done:!1}),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}}function hY(e,t){let i=new Headers;if(!e||!t||"object"!=typeof t)return i;for(let e in t){let n=t[e];void 0!==n&&i.append(e,n)}return i}function hQ(e){try{return new URL(e).origin}catch(e){}return null}function hJ(e){let{responseHeaders:t,isHttp:i,rangeChunkSize:n,disableRange:r}=e,a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return Number.isInteger(s)&&(a.suggestedLength=s,s<=2*n||r||!i||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0)),a}function hZ(e){let t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,i=n("filename\\*","i").exec(e);if(i){let e=s(i=i[1]);return a(e=o(e=l(e=unescape(e))))}if(i=function(e){let t,i=[],r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=r.exec(e));){let[,e,n,r]=t;if((e=parseInt(e,10))in i){if(0===e)break;continue}i[e]=[n,r]}let a=[];for(let e=0;e<i.length&&e in i;++e){let[t,n]=i[e];n=s(n),t&&(n=unescape(n),0===e&&(n=l(n))),a.push(n)}return a.join("")}(e))return a(o(i));if(i=n("filename","i").exec(e)){let e=s(i=i[1]);return a(e=o(e))}function n(e,t){return RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{let n=new TextDecoder(e,{fatal:!0}),r=n1(i);i=n.decode(r),t=!1}catch(e){}}return i}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){let t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){let i=t[e].indexOf('"');-1!==i&&(t[e]=t[e].slice(0,i),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){let t=e.indexOf("'");return -1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function o(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,i,n){if("q"===i||"Q"===i)return r(t,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{n=atob(n)}catch(e){}return r(t,n)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(ro(e))return e}return null}function h$(e,t){return 404===e||0===e&&t.startsWith("file:")?new nQ('Missing PDF "'+t+'".'):new nJ("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function h0(e){return 200===e||206===e}function h1(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function h2(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(nz("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class h3{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return nU(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h4(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new h5(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){(0,nw._)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=hY(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class h4{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h2(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let i=new Headers(e.headers),n=t.url;fetch(n,h1(i,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=hQ(t.url),!h0(t.status))throw h$(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();let i=t.headers,{allowRangeRequests:r,suggestedLength:a}=hJ({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=hZ(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n$("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}}class h5{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;let{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:h2(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;let n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(i-1));let a=n.url;fetch(a,h1(r,this._withCredentials,this._abortController)).then(t=>{let i=hQ(t.url);if(i!==e._responseOrigin)throw Error('Expected range response-origin "'.concat(i,'" to match "').concat(e._responseOrigin,'".'));if(!h0(t.status))throw h$(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}}class h6{request(e){let t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};for(let[e,i]of(t.open("GET",this.url),t.withCredentials=this.withCredentials,this.headers))t.setRequestHeader(e,i);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),n.expectedStatus=206):n.expectedStatus=200,t.responseType="arraybuffer",nU(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var i;let n=this.pendingRequests[e];n&&(null==(i=n.onProgress)||i.call(n,t))}onStateChange(e,t){let i=this.pendingRequests[e];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===n.status&&this.isHttp)return void i.onError(n.status);let r=n.status||200;if((200!==r||206!==i.expectedStatus)&&r!==i.expectedStatus)return void i.onError(n.status);let a=function(e){let t=e.response;return"string"!=typeof t?t:n1(t).buffer}(n);if(206===r){let e=n.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?i.onDone({begin:parseInt(t[1],10),chunk:a}):(nz('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}constructor({url:e,httpHeaders:t,withCredentials:i}){(0,nw._)(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=hY(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}}class h9{_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return nU(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h8(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let i=new h7(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this._source=e,this._manager=new h6(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}}class h8{_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=hQ(t.responseURL);let i=t.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{let[t,...i]=e.split(": ");return[t,i.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=hJ({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=hZ(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){for(let t of(this._storedError=h$(e,this._url),this._headersCapability.reject(this._storedError),this._requests))t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let t of(this._done=!0,this._headersCapability.reject(e),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}}class h7{_onHeadersReceived(){var e;let t=hQ(null==(e=this._manager.getRequestXhr(this._requestId))?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){let t=e.chunk;for(let e of(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){for(let t of(null!=this._storedError||(this._storedError=h$(e,this._url)),this._requests))t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){if(!this.isStreamingSupported){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}}let ce=/^[a-z][a-z0-9\-+.]+:/i;class ct{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return nU(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ci(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new cn(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;for(let i of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))i.cancel(e)}constructor(e){this.source=e,this.url=function(e){return new URL(ce.test(e)?e:nt.default.getBuiltinModule("url").pathToFileURL(e))}(e.url),nU("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class ci{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n$("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=nt.default.getBuiltinModule("fs");i.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new nQ('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)})}}class cn{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let n=e.source;this._isStreamingSupported=!n.disableStream;let r=nt.default.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}var cr=new WeakMap,ca=new WeakMap,cs=new WeakMap,cl=new WeakMap,co=new WeakMap,ch=new WeakMap,cc=new WeakMap,cu=new WeakMap,cd=new WeakMap,cp=new WeakMap,cf=new WeakMap,cg=new WeakMap,cm=new WeakMap,cv=new WeakMap,cb=new WeakMap,cw=new WeakMap,cy=new WeakMap,cx=new WeakMap,cA=new WeakSet,ck=new WeakSet,c_=new WeakSet;class cS{static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=n3.platform;return nV(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){let e=()=>{na(this,cd).read().then(t=>{var i;let{value:n,done:r}=t;if(r)return void na(this,cr).resolve();nh(this,co,null!=(i=na(this,co))?i:n.lang),Object.assign(na(this,cm),n.styles),nd(this,cA,cR).call(this,n.items),e()},na(this,cr).reject)};return nh(this,cd,na(this,cb).getReader()),nm(cS,cS,cP).add(this),e(),na(this,cr).promise}update(e){let{viewport:t,onBefore:i=null}=e,n=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==na(this,cf)&&(null==i||i(),nh(this,cf,r),rx(na(this,cp),{rotation:r})),n!==na(this,cg)){null==i||i(),nh(this,cg,n);let e={div:null,properties:null,ctx:(nf(cS,cS),cD).call(cS,na(this,co))};for(let t of na(this,cw))e.properties=na(this,cy).get(t),e.div=t,nd(this,c_,cL).call(this,e)}}cancel(){var e;let t=new n$("TextLayer task cancelled.");null==(e=na(this,cd))||e.cancel(t).catch(()=>{}),nh(this,cd,null),na(this,cr).reject(t)}get textDivs(){return na(this,cw)}get textContentItemsStr(){return na(this,cv)}static cleanup(){if(!(nm(this,cS,cP).size>0)){for(let{canvas:e}of(nm(this,cS,cE).clear(),nm(this,cS,cM).values()))e.remove();nm(this,cS,cM).clear()}}constructor({textContentSource:e,container:t,viewport:i}){var n;if(np(this,cA),np(this,ck),np(this,c_),nl(this,cr,{writable:!0,value:Promise.withResolvers()}),nl(this,ca,{writable:!0,value:null}),nl(this,cs,{writable:!0,value:!1}),nl(this,cl,{writable:!0,value:!!(null==(n=globalThis.FontInspector)?void 0:n.enabled)}),nl(this,co,{writable:!0,value:null}),nl(this,ch,{writable:!0,value:null}),nl(this,cc,{writable:!0,value:0}),nl(this,cu,{writable:!0,value:0}),nl(this,cd,{writable:!0,value:null}),nl(this,cp,{writable:!0,value:null}),nl(this,cf,{writable:!0,value:0}),nl(this,cg,{writable:!0,value:0}),nl(this,cm,{writable:!0,value:Object.create(null)}),nl(this,cv,{writable:!0,value:[]}),nl(this,cb,{writable:!0,value:null}),nl(this,cw,{writable:!0,value:[]}),nl(this,cy,{writable:!0,value:new WeakMap}),nl(this,cx,{writable:!0,value:null}),e instanceof ReadableStream)nh(this,cb,e);else if("object"==typeof e)nh(this,cb,new ReadableStream({start(t){t.enqueue(e),t.close()}}));else throw Error('No "textContentSource" parameter specified.');nh(this,ca,nh(this,cp,t)),nh(this,cg,i.scale*(globalThis.devicePixelRatio||1)),nh(this,cf,i.rotation),nh(this,ch,{div:null,properties:null,ctx:null});let{pageWidth:r,pageHeight:a,pageX:s,pageY:l}=i.rawDims;nh(this,cx,[1,0,0,-1,-s,l+a]),nh(this,cu,r),nh(this,cc,a),(nf(cS,cS),cN).call(cS),rx(t,i),na(this,cr).promise.finally(()=>{nm(cS,cS,cP).delete(this),nh(this,ch,null),nh(this,cm,null)}).catch(()=>{})}}var cE={writable:!0,value:new Map},cM={writable:!0,value:new Map},cC={writable:!0,value:new WeakMap},cT={writable:!0,value:null},cP={writable:!0,value:new Set};function cR(e){var t;if(na(this,cs))return;null!=(t=na(this,ch)).ctx||(t.ctx=(nf(cS,cS),cD).call(cS,na(this,co)));let i=na(this,cw),n=na(this,cv);for(let t of e){if(i.length>1e5){nz("Ignoring additional textDivs for performance reasons."),nh(this,cs,!0);return}if(void 0===t.str){if("beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type){let e=na(this,ca);nh(this,ca,document.createElement("span")),na(this,ca).classList.add("markedContent"),null!==t.id&&na(this,ca).setAttribute("id","".concat(t.id)),e.append(na(this,ca))}else"endMarkedContent"===t.type&&nh(this,ca,na(this,ca).parentNode);continue}n.push(t.str),nd(this,ck,cI).call(this,t)}}function cI(e){let t,i,n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};na(this,cw).push(n);let a=n5.transform(na(this,cx),e.transform),s=Math.atan2(a[1],a[0]),l=na(this,cm)[e.fontName];l.vertical&&(s+=Math.PI/2);let o=na(this,cl)&&l.fontSubstitution||l.fontFamily;o=cS.fontFamilyMap.get(o)||o;let h=Math.hypot(a[2],a[3]),c=h*(nf(cS,cS),cO).call(cS,o,na(this,co));0===s?(t=a[4],i=a[5]-c):(t=a[4]+c*Math.sin(s),i=a[5]-c*Math.cos(s));let u="calc(var(--scale-factor)*",d=n.style;na(this,ca)===na(this,cp)?(d.left="".concat((100*t/na(this,cu)).toFixed(2),"%"),d.top="".concat((100*i/na(this,cc)).toFixed(2),"%")):(d.left="".concat(u).concat(t.toFixed(2),"px)"),d.top="".concat(u).concat(i.toFixed(2),"px)")),d.fontSize="".concat(u).concat((nm(cS,cS,cT)*h).toFixed(2),"px)"),d.fontFamily=o,r.fontSize=h,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,na(this,cl)&&(n.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),0!==s&&(r.angle=180/Math.PI*s);let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(p=!0)}if(p&&(r.canvasWidth=l.vertical?e.height:e.width),na(this,cy).set(n,r),na(this,ch).div=n,na(this,ch).properties=r,nd(this,c_,cL).call(this,na(this,ch)),r.hasText&&na(this,ca).append(n),r.hasEOL){let e=document.createElement("br");e.setAttribute("role","presentation"),na(this,ca).append(e)}}function cL(e){let{div:t,properties:i,ctx:n}=e,{style:r}=t,a="";if(nm(cS,cS,cT)>1&&(a="scale(".concat(1/nm(cS,cS,cT),")")),0!==i.canvasWidth&&i.hasText){let{fontFamily:e}=r,{canvasWidth:s,fontSize:l}=i;(nf(cS,cS),cF).call(cS,n,l*na(this,cg),e);let{width:o}=n.measureText(t.textContent);o>0&&(a="scaleX(".concat(s*na(this,cg)/o,") ").concat(a))}0!==i.angle&&(a="rotate(".concat(i.angle,"deg) ").concat(a)),a.length>0&&(r.transform=a)}function cD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=nm(this,cS,cM).get(e||(e=""));if(!t){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),nm(this,cS,cM).set(e,t),nm(this,cS,cC).set(t,{size:0,family:""})}return t}function cF(e,t,i){let n=nm(this,cS,cC).get(e);(t!==n.size||i!==n.family)&&(e.font="".concat(t,"px ").concat(i),n.size=t,n.family=i)}function cN(){if(null!==nm(this,cS,cT))return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),nv(this,cS,cT,e.getBoundingClientRect().height),e.remove()}function cO(e,t){let i=nm(this,cS,cE).get(e);if(i)return i;let n=(nf(this,cS),cD).call(cS,t);n.canvas.width=n.canvas.height=30,(nf(this,cS),cF).call(cS,n,30,e);let r=n.measureText(""),a=r.fontBoundingBoxAscent,s=Math.abs(r.fontBoundingBoxDescent);if(a){let t=a/(a+s);return nm(this,cS,cE).set(e,t),n.canvas.width=n.canvas.height=0,t}n.strokeStyle="red",n.clearRect(0,0,30,30),n.strokeText("g",0,0);let l=n.getImageData(0,0,30,30).data;s=0;for(let e=l.length-1-3;e>=0;e-=4)if(l[e]>0){s=Math.ceil(e/4/30);break}n.clearRect(0,0,30,30),n.strokeText("A",0,30),l=n.getImageData(0,0,30,30).data,a=0;for(let e=0,t=l.length;e<t;e+=4)if(l[e]>0){a=30-Math.floor(e/4/30);break}n.canvas.width=n.canvas.height=0;let o=a?a/(a+s):.8;return nm(this,cS,cE).set(e,o),o}class cW{static textContent(e){let t=[],i={items:t,styles:Object.create(null)};return!function e(i){var n;if(!i)return;let r=null,a=i.name;if("#text"===a)r=i.value;else{if(!cW.shouldBuildText(a))return;(null==i||null==(n=i.attributes)?void 0:n.textContent)?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&t.push({str:r}),i.children)for(let t of i.children)e(t)}(e),i}static shouldBuildText(e){return"textarea"!==e&&"input"!==e&&"option"!==e&&"select"!==e}}let cj=n_?class extends oS{_createCanvas(e,t){return nt.default.getBuiltinModule("module").createRequire(nx.url)("@napi-rs/canvas").createCanvas(e,t)}}:class extends oS{_createCanvas(e,t){let i=this._document.createElement("canvas");return i.width=e,i.height=t,i}constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}},cB=n_?class extends oE{async _fetch(e){return o8(e)}}:oM,cz=n_?class extends oC{}:class extends oC{addFilter(e){if(!e)return"none";let t=na(this,oN).get(e);if(t)return t;let[i,n,r]=nd(this,oj,oJ).call(this,e),a=1===e.length?i:"".concat(i).concat(n).concat(r);if(t=na(this,oN).get(a))return na(this,oN).set(e,t),t;let s="g_".concat(na(this,oI),"_transfer_map_").concat(nu(this,oF).value++),l=nd(this,oB,oZ).call(this,s);na(this,oN).set(e,l),na(this,oN).set(a,l);let o=nd(this,oU,o1).call(this,s);return nd(this,oV,o3).call(this,i,n,r,o),l}addHCMFilter(e,t){let i="".concat(e,"-").concat(t),n="base",r=na(this,oO).get(n);if((null==r?void 0:r.key)===i)return r.url;if(r){var a;null==(a=r.filter)||a.remove(),r.key=i,r.url="none",r.filter=null}else r={key:i,url:"none",filter:null},na(this,oO).set(n,r);if(!e||!t)return r.url;let s=nd(this,oX,o5).call(this,e);e=n5.makeHexColor(...s);let l=nd(this,oX,o5).call(this,t);if(t=n5.makeHexColor(...l),na(this,oW).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;let o=Array(256);for(let e=0;e<=255;e++){let t=e/255;o[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let h=o.join(","),c="g_".concat(na(this,oI),"_hcm_filter"),u=r.filter=nd(this,oU,o1).call(this,c);nd(this,oV,o3).call(this,h,h,h,u),nd(this,oH,o0).call(this,u);let d=(e,t)=>{let i=s[e]/255,n=l[e]/255,r=Array(t+1);for(let e=0;e<=t;e++)r[e]=i+e/t*(n-i);return r.join(",")};return nd(this,oV,o3).call(this,d(0,5),d(1,5),d(2,5),u),r.url=nd(this,oB,oZ).call(this,c),r.url}addAlphaFilter(e){let t=na(this,oN).get(e);if(t)return t;let[i]=nd(this,oj,oJ).call(this,[e]),n="alpha_".concat(i);if(t=na(this,oN).get(n))return na(this,oN).set(e,t),t;let r="g_".concat(na(this,oI),"_alpha_map_").concat(nu(this,oF).value++),a=nd(this,oB,oZ).call(this,r);na(this,oN).set(e,a),na(this,oN).set(n,a);let s=nd(this,oU,o1).call(this,r);return nd(this,oq,o4).call(this,i,s),a}addLuminosityFilter(e){let t,i,n=na(this,oN).get(e||"luminosity");if(n)return n;if(e?([t]=nd(this,oj,oJ).call(this,[e]),i="luminosity_".concat(t)):i="luminosity",n=na(this,oN).get(i))return na(this,oN).set(e,n),n;let r="g_".concat(na(this,oI),"_luminosity_map_").concat(nu(this,oF).value++),a=nd(this,oB,oZ).call(this,r);na(this,oN).set(e,a),na(this,oN).set(i,a);let s=nd(this,oU,o1).call(this,r);return nd(this,oz,o$).call(this,s),e&&nd(this,oq,o4).call(this,t,s),a}addHighlightHCMFilter(e,t,i,n,r){let a="".concat(t,"-").concat(i,"-").concat(n,"-").concat(r),s=na(this,oO).get(e);if((null==s?void 0:s.key)===a)return s.url;if(s){var l;null==(l=s.filter)||l.remove(),s.key=a,s.url="none",s.filter=null}else s={key:a,url:"none",filter:null},na(this,oO).set(e,s);if(!t||!i)return s.url;let[o,h]=[t,i].map(nd(this,oX,o5).bind(this)),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,p]=[n,r].map(nd(this,oX,o5).bind(this));u<c&&([c,u,d,p]=[u,c,p,d]),na(this,oW).style.color="";let f=(e,t,i)=>{let n=Array(256),r=(u-c)/i,a=e/255,s=(t-e)/(255*i),l=0;for(let e=0;e<=i;e++){let t=Math.round(c+e*r),i=a+e*s;for(let e=l;e<=t;e++)n[e]=i;l=t+1}for(let e=l;e<256;e++)n[e]=n[l-1];return n.join(",")},g="g_".concat(na(this,oI),"_hcm_").concat(e,"_filter"),m=s.filter=nd(this,oU,o1).call(this,g);return nd(this,oH,o0).call(this,m),nd(this,oV,o3).call(this,f(d[0],p[0],5),f(d[1],p[1],5),f(d[2],p[2],5),m),s.url=nd(this,oB,oZ).call(this,g),s.url}destroy(){var e,t,i,n;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r&&null!=(e=na(this,oD))&&e.size||(null==(t=na(this,oR))||t.parentNode.parentNode.remove(),nh(this,oR,null),null==(i=na(this,oP))||i.clear(),nh(this,oP,null),null==(n=na(this,oD))||n.clear(),nh(this,oD,null),nh(this,oF,0))}constructor({docId:e,ownerDocument:t=globalThis.document}){super(),nl(this,oN,{get:oK,set:void 0}),nl(this,oO,{get:oY,set:void 0}),nl(this,oW,{get:oQ,set:void 0}),np(this,oj),np(this,oB),np(this,oz),np(this,oH),np(this,oU),np(this,oG),np(this,oV),np(this,oq),np(this,oX),nl(this,oT,{writable:!0,value:void 0}),nl(this,oP,{writable:!0,value:void 0}),nl(this,oR,{writable:!0,value:void 0}),nl(this,oI,{writable:!0,value:void 0}),nl(this,oL,{writable:!0,value:void 0}),nl(this,oD,{writable:!0,value:void 0}),nl(this,oF,{writable:!0,value:0}),nh(this,oI,e),nh(this,oL,t)}},cH=n_?class extends o6{async _fetch(e){return o8(e)}}:o9;function cU(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof i||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let n=new cV,{docId:r}=n,a=i.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(n_&&"string"==typeof e)return e}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(i.url):null,s=i.data?function(e){if(n_&&void 0!==ni.Buffer&&e instanceof ni.Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return n1(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(i.data):null,l=i.httpHeaders||null,o=!0===i.withCredentials,h=null!=(e=i.password)?e:null,c=i.range instanceof cX?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:65536,d=i.worker instanceof c6?i.worker:null,p=i.verbosity,f="string"!=typeof i.docBaseUrl||rl(i.docBaseUrl)?null:i.docBaseUrl,g="string"==typeof i.cMapUrl?i.cMapUrl:null,m=!1!==i.cMapPacked,b=i.CMapReaderFactory||cB,w="string"==typeof i.standardFontDataUrl?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||cH,x=!0!==i.stopAtErrors,A=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=!1!==i.isEvalSupported,_="boolean"==typeof i.isOffscreenCanvasSupported?i.isOffscreenCanvasSupported:!n_,S="boolean"==typeof i.isImageDecoderSupported?i.isImageDecoderSupported:!n_&&(n3.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,M="boolean"==typeof i.disableFontFace?i.disableFontFace:n_,C=!0===i.fontExtraProperties,T=!0===i.enableXfa,P=i.ownerDocument||globalThis.document,R=!0===i.disableRange,I=!0===i.disableStream,L=!0===i.disableAutoFetch,D=!0===i.pdfBug,F=i.CanvasFactory||cj,N=i.FilterFactory||cz,O=!0===i.enableHWA,W=c?c.length:null!=(t=i.length)?t:NaN,j="boolean"==typeof i.useSystemFonts?i.useSystemFonts:!n_&&!M,B="boolean"==typeof i.useWorkerFetch?i.useWorkerFetch:b===oM&&y===o9&&g&&w&&rd(g,document.baseURI)&&rd(w,document.baseURI);Number.isInteger(p)&&(nj=p);let z={canvasFactory:new F({ownerDocument:P,enableHWA:O}),filterFactory:new N({docId:r,ownerDocument:P}),cMapReaderFactory:B?null:new b({baseUrl:g,isCompressed:m}),standardFontDataFactory:B?null:new y({baseUrl:w})};if(!d){let e={verbosity:p,port:hM.workerPort};n._worker=d=e.port?c6.fromPort(e):new c6(e)}let H={docId:r,apiVersion:"4.10.38",data:s,password:h,disableAutoFetch:L,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:T,evaluatorOptions:{maxImageSize:A,disableFontFace:M,ignoreErrors:x,isEvalSupported:k,isOffscreenCanvasSupported:_,isImageDecoderSupported:S,canvasMaxAreaInBytes:E,fontExtraProperties:C,useSystemFonts:j,cMapUrl:B?g:null,standardFontDataUrl:B?w:null}},U={disableFontFace:M,fontExtraProperties:C,ownerDocument:P,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:L,enableXfa:T}};return d.promise.then(function(){let e;if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let t=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);if(c)e=new hq(c,{disableRange:R,disableStream:I});else if(!s){let t;if(!a)throw Error("getDocument - no `url` parameter provided.");if(n_)if(rd(a)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");t=h3}else t=ct;else t=rd(a)?h3:h9;e=new t({url:a,length:W,httpHeaders:l,withCredentials:o,rangeChunkSize:u,disableRange:R,disableStream:I})}return t.then(t=>{if(n.destroyed)throw Error("Loading aborted");if(d.destroyed)throw Error("Worker was destroyed");let i=new ow(r,t,d.port),a=new uo(i,n,e,U,z);n._transport=a,i.send("Ready",null)})}).catch(n._capability.reject),n}function cG(e){return"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0}class cV{get promise(){return this._capability.promise}async destroy(){var e,t,i,n;this.destroyed=!0;try{(null==(t=this._worker)?void 0:t.port)&&(this._worker._pendingDestroy=!0),await (null==(i=this._transport)?void 0:i.destroy())}catch(e){throw(null==(n=this._worker)?void 0:n.port)&&delete this._worker._pendingDestroy,e}this._transport=null,null==(e=this._worker)||e.destroy(),this._worker=null}constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat(nb(cV,cV,cq).value++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}}var cq={writable:!0,value:0};class cX{addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nH("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}}class cK{get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return nV(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}constructor(e,t){this._pdfInfo=e,this._transport=t}}var cY=new WeakMap,cQ=new WeakMap,cJ=new WeakSet,cZ=new WeakSet;class c${get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ra({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return nV(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render(e){var t,i,n;let{canvasContext:r,viewport:a,intent:s="display",annotationMode:l=nC.ENABLE,transform:o=null,background:h=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:p=null,isEditing:f=!1}=e;null==(t=this._stats)||t.time("Overall");let g=this._transport.getRenderingIntent(s,l,p,f),{renderingIntent:m,cacheKey:b}=g;nh(this,cQ,!1),nd(this,cZ,c1).call(this),c||(c=this._transport.getOptionalContentConfig(m));let w=this._intentStates.get(b);w||(w=Object.create(null),this._intentStates.set(b,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);let y=!!(m&nM.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(n=this._stats)||n.time("Page Request"),this._pumpOperatorList(g));let x=e=>{if(w.renderTasks.delete(A),(this._maybeCleanupAfterRender||y)&&nh(this,cQ,!0),nd(this,cJ,c0).call(this,!y),e?(A.capability.reject(e),this._abortOperatorList({intentState:w,reason:e instanceof Error?e:Error(e)})):A.capability.resolve(),this._stats){var t;this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(t=globalThis.Stats)?void 0:t.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats)}},A=new ub({callback:x,params:{canvasContext:r,viewport:a,transform:o,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d});((i=w).renderTasks||(i.renderTasks=new Set)).add(A);let k=A.task;return Promise.all([w.displayReadyCapability.promise,c]).then(e=>{var t;let[i,n]=e;if(this.destroyed)return void x();if(null==(t=this._stats)||t.time("Rendering"),!(n.renderingIntent&m))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:i,optionalContentConfig:n}),A.operatorListChanged()}).catch(x),k}getOperatorList(){let e,{intent:t="display",annotationMode:i=nC.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this._transport.getRenderingIntent(t,i,n,r,!0),s=this._intentStates.get(a.cacheKey);if(s||(s=Object.create(null),this._intentStates.set(a.cacheKey,s)),!s.opListReadCapability){var l,o;(e=Object.create(null)).operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(e))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(e),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(l=this._stats)||l.time("Page Request"),this._pumpOperatorList(a)}return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>cW.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,i){let n=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){n.read().then(function(i){let{value:n,done:a}=i;if(a)return void e(r);null!=r.lang||(r.lang=n.lang),Object.assign(r.styles,n.styles),r.items.push(...n.items),t()},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),nh(this,cQ,!1),nd(this,cZ,c1).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nh(this,cQ,!0);let t=nd(this,cJ,c0).call(this,!1);return e&&t&&this._stats&&(this._stats=new ru),t}_startRenderPage(e,t){var i,n;let r=this._intentStates.get(t);r&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(n=r.displayReadyCapability)||n.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);for(let i of(t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots,t.renderTasks))i.operatorListChanged();e.lastChunk&&nd(this,cJ,c0).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:r}=e,{map:a,transfer:s}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:a,modifiedIds:r},s).getReader(),o=this._intentStates.get(i);o.streamReader=l;let h=()=>{l.read().then(e=>{let{value:t,done:i}=e;if(i){o.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,o),h())},e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){for(let e of(o.operatorList.lastChunk=!0,o.renderTasks))e.operatorListChanged();nd(this,cJ,c0).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else if(o.opListReadCapability)o.opListReadCapability.reject(e);else throw e}})};h()}_abortOperatorList(e){let{intentState:t,reason:i,force:n=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof rs){let e=100;i.extraDelay>0&&i.extraDelay<1e3&&(e+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},e);return}}if(t.streamReader.cancel(new n$(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}constructor(e,t,i,n=!1){np(this,cJ),np(this,cZ),nl(this,cY,{writable:!0,value:null}),nl(this,cQ,{writable:!0,value:!1}),this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new ru:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new up,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}}function c0(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(nd(this,cZ,c1).call(this),!na(this,cQ)||this.destroyed)return!1;if(e)return nh(this,cY,setTimeout(()=>{nh(this,cY,null),nd(this,cJ,c0).call(this,!1)},5e3)),!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),nh(this,cQ,!1),!0}function c1(){na(this,cY)&&(clearTimeout(na(this,cY)),nh(this,cY,null))}var c2=new WeakMap,c3=new WeakMap;class c4{postMessage(e,t){let i={data:structuredClone(e,t?{transfer:t}:null)};na(this,c3).then(()=>{for(let[e]of na(this,c2))e.call(this,i)})}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;if((null==i?void 0:i.signal)instanceof AbortSignal){let{signal:r}=i;if(r.aborted)return void nz("LoopbackPort - cannot use an `aborted` signal.");let a=()=>this.removeEventListener(e,t);n=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}na(this,c2).set(t,n)}removeEventListener(e,t){let i=na(this,c2).get(t);null==i||i(),na(this,c2).delete(t)}terminate(){for(let[,e]of na(this,c2))null==e||e();na(this,c2).clear()}constructor(){nl(this,c2,{writable:!0,value:new Map}),nl(this,c3,{writable:!0,value:Promise.resolve()})}}var c5=new WeakSet;class c6{get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ow("main","worker",e),this._messageHandler.on("ready",function(){}),nd(this,c5,ut).call(this)}_initialize(){if(nm(c6,c6,c7)||nm(c6,c6,c9))return void this._setupFakeWorker();let{workerSrc:e}=c6;try{c6._isSameOrigin(window.location.href,e)||(e=c6._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),i=new ow("main","worker",t),n=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",e=>{if(r.abort(),this.destroyed||!e)return void n();this._messageHandler=i,this._port=t,this._webWorker=t,nd(this,c5,ut).call(this)}),i.on("ready",e=>{if(r.abort(),this.destroyed)return void n();try{a()}catch(e){this._setupFakeWorker()}});let a=()=>{let e=new Uint8Array;i.send("test",e,[e.buffer])};a();return}catch(e){nB("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){nm(c6,c6,c7)||(nz("Setting up fake worker."),nv(c6,c6,c7,!0)),c6._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let t=new c4;this._port=t;let i="fake".concat(nb(c6,c6,c8).value++),n=new ow(i+"_worker",i,t);e.setup(n,t),this._messageHandler=new ow(i,i+"_worker",t),nd(this,c5,ut).call(this)}).catch(e=>{this._readyCapability.reject(Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}destroy(){var e,t,i;this.destroyed=!0,null==(e=this._webWorker)||e.terminate(),this._webWorker=null,null==(t=nm(c6,c6,ue))||t.delete(this._port),this._port=null,null==(i=this._messageHandler)||i.destroy(),this._messageHandler=null}static fromPort(e){var t;if(!(null==e?void 0:e.port))throw Error("PDFWorker.fromPort - invalid method signature.");let i=null==(t=nm(this,c6,ue))?void 0:t.get(e.port);if(i){if(i._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new c6(e)}static get workerSrc(){if(hM.workerSrc)return hM.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return nV(this,"_setupFakeWorkerGlobal",(async()=>nm(this,c6,c9)?nm(this,c6,c9):(await import(this.workerSrc)).WorkerMessageHandler)())}constructor({name:e=null,port:t=null,verbosity:i=nj}={}){if(np(this,c5),this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var n;if(null==(n=nm(c6,c6,ue))?void 0:n.has(t))throw Error("Cannot use more than one PDFWorker per port.");nv(c6,c6,ue,nm(c6,c6,ue)||new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}}var c9={get:function(){try{var e;return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(e){return null}},set:void 0},c8={writable:!0,value:0},c7={writable:!0,value:!1},ue={writable:!0,value:void 0};function ut(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}n_&&(nv(c6,c6,c7,!0),hM.workerSrc||(hM.workerSrc="./pdf.worker.mjs")),c6._isSameOrigin=(e,t)=>{let i;try{if(!(i=new URL(e)).origin||"null"===i.origin)return!1}catch(e){return!1}let n=new URL(t,i);return i.origin===n.origin},c6._createCDNWrapper=e=>URL.createObjectURL(new Blob(['await import("'.concat(e,'");')],{type:"text/javascript"}));var ui=new WeakMap,un=new WeakMap,ur=new WeakMap,ua=new WeakMap,us=new WeakMap,ul=new WeakSet;class uo{get annotationStorage(){return nV(this,"annotationStorage",new on)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nC.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=nM.DISPLAY,s=l8;switch(e){case"any":a=nM.ANY;break;case"display":break;case"print":a=nM.PRINT;break;default:nz("getRenderingIntent - invalid intent: ".concat(e))}let l=a&nM.PRINT&&i instanceof os?i:this.annotationStorage;switch(t){case nC.DISABLE:a+=nM.ANNOTATIONS_DISABLE;break;case nC.ENABLE:break;case nC.ENABLE_FORMS:a+=nM.ANNOTATIONS_FORMS;break;case nC.ENABLE_STORAGE:a+=nM.ANNOTATIONS_STORAGE,s=l.serializable;break;default:nz("getRenderingIntent - invalid annotationMode: ".concat(t))}n&&(a+=nM.IS_EDITING),r&&(a+=nM.OPLIST);let{ids:o,hash:h}=l.modifiedIds,c=[a,s.hash,h];return{renderingIntent:a,cacheKey:c.join("_"),annotationStorageSerializable:s,modifiedIds:o}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=na(this,us))||e.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of na(this,un).values())t.push(e._destroy());na(this,un).clear(),na(this,ur).clear(),na(this,ua).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),na(this,ui).clear(),this.filterFactory.destroy(),cS.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new n$("Worker was terminated.")),null==(t=this.messageHandler)||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{nU(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();nU(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:n,contentLength:r}=this._fullReader;if(!i||!n){if(this._lastProgress){var a;null==(a=t.onProgress)||a.call(t,this._lastProgress)}this._fullReader.onProgress=e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:i,isRangeSupported:n,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{nU(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let i=this._networkStream.getRangeReader(e.begin,e.end);if(!i)return void t.close();t.onPull=()=>{i.read().then(function(e){let{value:i,done:n}=e;if(n)return void t.close();nU(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(i),1,[i])}).catch(e=>{t.error(e)})},t.onCancel=e=>{i.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("GetDoc",e=>{let{pdfInfo:i}=e;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new cK(i,this))}),e.on("DocException",e=>{t._capability.reject(op(e))}),e.on("PasswordRequest",e=>{nh(this,us,Promise.withResolvers());try{if(!t.onPassword)throw op(e);let i=e=>{e instanceof Error?na(this,us).reject(e):na(this,us).resolve({password:e})};t.onPassword(i,e.code)}catch(e){na(this,us).reject(e)}return na(this,us).promise}),e.on("DataLoaded",e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||na(this,un).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{let[i,n,r]=t;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":var a;let{disableFontFace:s,fontExtraProperties:l,pdfBug:o}=this._params;if("error"in r){let e=r.error;nz("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}let h=new oh(r,{disableFontFace:s,fontExtraProperties:l,inspectFont:o&&(null==(a=globalThis.FontInspector)?void 0:a.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":let{imageRef:c}=r;for(let e of(nU(c,"The imageRef must be defined."),na(this,un).values()))for(let[,t]of e.objs)if((null==t?void 0:t.ref)===c){if(!t.dataLen)return null;return this.commonObjs.resolve(i,structuredClone(t)),t.dataLen}break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw Error("Got unknown common object type ".concat(n))}return null}),e.on("obj",e=>{let[t,i,n,r]=e;if(this.destroyed)return;let a=na(this,un).get(i);if(!a.objs.has(t)){if(0===a._intentStates.size){var s;null==r||null==(s=r.bitmap)||s.close();return}switch(n){case"Image":a.objs.resolve(t,r),(null==r?void 0:r.dataLen)>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(t,r);break;default:throw Error("Got unknown object type ".concat(n))}}}),e.on("DocProgress",e=>{var i;this.destroyed||null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)}),e.on("FetchStandardFontData",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&nz("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:i,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:i,filename:null!=(t=null==(e=this._fullReader)?void 0:e.filename)?t:null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error("Invalid page request."));let t=e-1,i=na(this,ur).get(t);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw Error("Transport destroyed");i.refStr&&na(this,ua).set(i.refStr,e);let n=new c$(t,i,this,this._params.pdfBug);return na(this,un).set(t,n),n});return na(this,ur).set(t,n),n}getPageIndex(e){return cG(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return nd(this,ul,uh).call(this,"GetFieldObjects")}hasJSActions(){return nd(this,ul,uh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return nd(this,ul,uh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return nd(this,ul,uh).call(this,"GetOptionalContentConfig").then(t=>new hG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=na(this,ui).get(e);if(t)return t;let i=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,i,n,r;return{info:e[0],metadata:e[1]?new hI(e[1]):null,contentDispositionFilename:null!=(n=null==(t=this._fullReader)?void 0:t.filename)?n:null,contentLength:null!=(r=null==(i=this._fullReader)?void 0:i.contentLength)?r:null}});return na(this,ui).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){for(let e of(await this.messageHandler.sendWithPromise("Cleanup",null),na(this,un).values()))if(!e.cleanup())throw Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),na(this,ui).clear(),this.filterFactory.destroy(!0),cS.cleanup()}}cachedPageNumber(e){var t;if(!cG(e))return null;let i=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!=(t=na(this,ua).get(i))?t:null}constructor(e,t,i,n,r){np(this,ul),nl(this,ui,{writable:!0,value:new Map}),nl(this,un,{writable:!0,value:new Map}),nl(this,ur,{writable:!0,value:new Map}),nl(this,ua,{writable:!0,value:new Map}),nl(this,us,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new up,this.fontLoader=new oo({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}}function uh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=na(this,ui).get(e);if(i)return i;let n=this.messageHandler.sendWithPromise(e,t);return na(this,ui).set(e,n),n}let uc=Symbol("INITIAL_DATA");var uu=new WeakMap,ud=new WeakSet;class up{get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){let i=nd(this,ud,uf).call(this,e);return i.promise.then(()=>t(i.data)),null}let i=na(this,uu)[e];if(!i||i.data===uc)throw Error("Requesting object that isn't resolved yet ".concat(e,"."));return i.data}has(e){let t=na(this,uu)[e];return!!t&&t.data!==uc}delete(e){let t=na(this,uu)[e];return!!t&&t.data!==uc&&(delete na(this,uu)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=nd(this,ud,uf).call(this,e);i.data=t,i.resolve()}clear(){for(let t in na(this,uu)){var e;let{data:i}=na(this,uu)[t];null==i||null==(e=i.bitmap)||e.close()}nh(this,uu,Object.create(null))}*[Symbol.iterator](){for(let e in na(this,uu)){let{data:t}=na(this,uu)[e];t!==uc&&(yield[e,t])}}constructor(){np(this,ud),nl(this,uu,{writable:!0,value:Object.create(null)})}}function uf(e){var t;return(t=na(this,uu))[e]||(t[e]={...Promise.withResolvers(),data:uc})}var ug=new WeakMap;class um{get promise(){return na(this,ug).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;na(this,ug).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=na(this,ug).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=na(this,ug);return e.form||e.canvas&&(null==t?void 0:t.size)>0}constructor(e){nl(this,ug,{writable:!0,value:null}),nh(this,ug,e),this.onContinue=null}}var uv=new WeakMap;class ub{get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,i;let{transparency:n=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(nm(ub,ub,uw).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");nm(ub,ub,uw).add(this._canvas)}this._pdfBug&&(null==(t=globalThis.StepperManager)?void 0:t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:a,viewport:s,transform:l,background:o}=this.params;this.gfx=new hk(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:s,transparency:n,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null==(i=this.graphicsReadyCallback)||i.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null==(e=this.gfx)||e.endDrawing(),na(this,uv)&&(window.cancelAnimationFrame(na(this,uv)),nh(this,uv,null)),nm(ub,ub,uw).delete(this._canvas),this.callback(t||new rs("Rendering cancelled, page ".concat(this._pageIndex+1),i))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?nh(this,uv,window.requestAnimationFrame(()=>{nh(this,uv,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),nm(ub,ub,uw).delete(this._canvas),this.callback())))}constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:s,canvasFactory:l,filterFactory:o,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:u=null}){nl(this,uv,{writable:!0,value:null}),this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=s,this.canvasFactory=l,this.filterFactory=o,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new um(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}}var uw={writable:!0,value:new WeakSet};let uy="4.10.38",ux="f9bea397f";function uA(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function uk(e){return Math.max(0,Math.min(255,255*e))}class u_{static CMYK_G(e){let[t,i,n,r]=e;return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return[t=uk(t),t,t]}static G_HTML(e){let[t]=e,i=uA(t);return"#".concat(i).concat(i).concat(i)}static RGB_G(e){let[t,i,n]=e;return["G",.3*t+.59*i+.11*n]}static RGB_rgb(e){return e.map(uk)}static RGB_HTML(e){return"#".concat(e.map(uA).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,i,n,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_rgb(e){let[t,i,n,r]=e;return[uk(1-Math.min(1,t+r)),uk(1-Math.min(1,n+r)),uk(1-Math.min(1,i+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,i,n]=e,r=1-t,a=1-i,s=1-n,l=Math.min(r,a,s);return["CMYK",r,a,s,l]}}class uS{create(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width","".concat(e,"px")),n.setAttribute("height","".concat(t,"px"))),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),n}createElement(e){if("string"!=typeof e)throw Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nH("Abstract method `_createSVG` called.")}}class uE extends uS{_createSVG(e){return document.createElementNS(ri,e)}}class uM{static setupStorage(e,t,i,n,r){let a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===r)break;e.addEventListener("input",e=>{n.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value)for(let t of(e.setAttribute("value",a.value),i.children))t.attributes.value===a.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected;e.addEventListener("input",e=>{let i=e.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:i,storage:n=null,intent:r,linkService:a}=e,{attributes:s}=i,l=t instanceof HTMLAnchorElement;for(let[e,i]of("radio"===s.type&&(s.name="".concat(s.name,"-").concat(r)),Object.entries(s)))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:l&&("href"===e||"newWindow"===e)||t.setAttribute(e,i)}l&&a.addLinkAttributes(t,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(t,s.dataId,i,n)}static render(e){let t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});let s="richText"!==r,l=e.div;if(l.append(a),e.viewport){let t="matrix(".concat(e.viewport.transform.join(","),")");l.style.transform=t}s&&l.setAttribute("class","xfaLayer xfaFont");let o=[];if(0===n.children.length){if(n.value){let e=document.createTextNode(n.value);a.append(e),s&&cW.shouldBuildText(n.name)&&o.push(e)}return{textDivs:o}}let h=[[n,-1,a]];for(;h.length>0;){var c,u;let[e,n,a]=h.at(-1);if(n+1===e.children.length){h.pop();continue}let l=e.children[++h.at(-1)[1]];if(null===l)continue;let{name:d}=l;if("#text"===d){let e=document.createTextNode(l.value);o.push(e),a.append(e);continue}let p=(null==l||null==(c=l.attributes)?void 0:c.xmlns)?document.createElementNS(l.attributes.xmlns,d):document.createElement(d);if(a.append(p),l.attributes&&this.setAttributes({html:p,element:l,storage:t,intent:r,linkService:i}),(null==(u=l.children)?void 0:u.length)>0)h.push([l,-1,p]);else if(l.value){let e=document.createTextNode(l.value);s&&cW.shouldBuildText(d)&&o.push(e),p.append(e)}}for(let e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:o}}static update(e){let t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}let uC=new WeakSet;function uT(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class uP{static create(e){switch(e.data.annotationType){case nD.LINK:return new uB(e);case nD.TEXT:return new uG(e);case nD.WIDGET:switch(e.data.fieldType){case"Tx":return new uq(e);case"Btn":if(e.data.radioButton)return new uY(e);if(e.data.checkBox)return new uK(e);return new uQ(e);case"Ch":return new uJ(e);case"Sig":return new uX(e)}return new uV(e);case nD.POPUP:return new uZ(e);case nD.FREETEXT:return new dC(e);case nD.LINE:return new dP(e);case nD.SQUARE:return new dI(e);case nD.CIRCLE:return new dD(e);case nD.POLYLINE:return new dN(e);case nD.CARET:return new dW(e);case nD.INK:return new dH(e);case nD.POLYGON:return new dO(e);case nD.HIGHLIGHT:return new dG(e);case nD.UNDERLINE:return new dV(e);case nD.SQUIGGLY:return new dq(e);case nD.STRIKEOUT:return new dX(e);case nD.STAMP:return new dK(e);case nD.FILEATTACHMENT:return new dJ(e);default:return new uF(e)}}}var uR=new WeakMap,uI=new WeakMap,uL=new WeakMap,uD=new WeakSet;class uF{static _hasPopupData(e){let{titleObj:t,contentsObj:i,richText:n}=e;return!!((null==t?void 0:t.str)||(null==i?void 0:i.str)||(null==n?void 0:n.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return uF._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;nh(this,uR,na(this,uR)||{rect:this.data.rect.slice(0)});let{rect:i}=e;i&&nd(this,uD,uN).call(this,i),null==(t=na(this,uL))||t.popup.updateEdited(e)}resetEdited(){var e;na(this,uR)&&(nd(this,uD,uN).call(this,na(this,uR).rect),null==(e=na(this,uL))||e.popup.resetEdited(),nh(this,uR,null))}_createContainer(e){let{data:t,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof uV||(r.tabIndex=1e3);let{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof uZ){let{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}let{width:s,height:l}=uT(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth="".concat(t.borderStyle.width,"px");let e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;switch(e>0||i>0?a.borderRadius="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(i,"px * var(--scale-factor))"):this instanceof uY&&(a.borderRadius="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(l,"px * var(--scale-factor))")),t.borderStyle.style){case nF.SOLID:a.borderStyle="solid";break;case nF.DASHED:a.borderStyle="dashed";break;case nF.BEVELED:nz("Unimplemented border style: beveled");break;case nF.INSET:nz("Unimplemented border style: inset");break;case nF.UNDERLINE:a.borderBottomStyle="solid"}let n=t.borderColor||null;n?(nh(this,uI,!0),a.borderColor=n5.makeHexColor(0|n[0],0|n[1],0|n[2])):a.borderWidth=0}let o=n5.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:u,pageY:d}=n.rawDims;a.left="".concat(100*(o[0]-u)/h,"%"),a.top="".concat(100*(o[1]-d)/c,"%");let{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width="".concat(100*s/h,"%"),a.height="".concat(100*l/c,"%")):this.setRotation(p,r),r}setRotation(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;let{pageWidth:r,pageHeight:a}=this.parent.viewport.rawDims,{width:s,height:l}=uT(this.data.rect);e%180==0?(t=100*s/r,i=100*l/a):(t=100*l/r,i=100*s/a),n.style.width="".concat(t,"%"),n.style.height="".concat(i,"%"),n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(e,t,i)=>{let n=i.detail[e],r=n[0],a=n.slice(1);i.target.style[t]=u_["".concat(r,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:u_["".concat(r,"_rgb")](a)})};return nV(this,"_commonActions",{display:e=>{let{display:t}=e.detail,i=t%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let i=this._commonActions;for(let n of Object.keys(t.detail)){let r=e[n]||i[n];null==r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let i=this._commonActions;for(let[n,r]of Object.entries(t)){let a=i[n];a&&(a({detail:{[n]:r},target:e}),delete t[n])}}_createQuadrilaterals(){let e;if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[i,n,r,a]=this.data.rect.map(e=>Math.fround(e));if(8===t.length){let[e,s,l,o]=t.subarray(2,6);if(r===e&&a===s&&i===l&&n===o)return}let{style:s}=this.container;if(na(this,uI)){let{borderColor:t,borderWidth:i}=s;s.borderWidth=0,e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(i,'">')],this.container.classList.add("hasBorder")}let l=r-i,o=a-n,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);let u=h.createElement("defs");c.append(u);let d=h.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(let n=2,r=t.length;n<r;n+=8){let r=t[n],s=t[n+1],c=t[n+2],u=t[n+3],p=h.createElement("rect"),f=(c-i)/l,g=(a-s)/o,m=(r-c)/l,b=(s-u)/o;p.setAttribute("x",f),p.setAttribute("y",g),p.setAttribute("width",m),p.setAttribute("height",b),d.append(p),null==e||e.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(g,'" width="').concat(m,'" height="').concat(b,'"/>'))}na(this,uI)&&(e.push("</g></svg>')"),s.backgroundImage=e.join("")),this.container.append(c),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let{data:e}=this,t=nh(this,uL,new uZ({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nH("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){let n=this._fieldObjects[e];if(n)for(let{page:e,id:r,exportValues:a}of n){if(-1===e||r===t)continue;let n="string"==typeof a?a:null,s=document.querySelector('[data-element-id="'.concat(r,'"]'));if(s&&!uC.has(s)){nz("_getElementsByName - element not allowed: ".concat(r));continue}i.push({id:r,exportValue:n,domElement:s})}return i}for(let n of document.getElementsByName(e)){let{exportValue:e}=n,r=n.getAttribute("data-element-id");r!==t&&uC.has(n)&&i.push({id:r,exportValue:e,domElement:n})}return i}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){np(this,uD),nl(this,uR,{writable:!0,value:null}),nl(this,uI,{writable:!0,value:!1}),nl(this,uL,{writable:!0,value:null}),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}}function uN(e){let{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:s,pageY:l}}}}=this;null==i||i.splice(0,4,...e);let{width:o,height:h}=uT(e);t.left="".concat(100*(e[0]-s)/r,"%"),t.top="".concat(100*(a-e[3]+l)/a,"%"),0===n?(t.width="".concat(100*o/r,"%"),t.height="".concat(100*h/a,"%")):this.setRotation(n)}var uO=new WeakSet,uW=new WeakSet,uj=new WeakSet;class uB extends uF{render(){let{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(i,e.action),n=!0):e.attachment?(nd(this,uW,uH).call(this,i,e.attachment,e.attachmentDest),n=!0):e.setOCGState?(nd(this,uj,uU).call(this,i,e.setOCGState),n=!0):e.dest?(this._bindLink(i,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),n=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&nd(this,uO,uz).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),nd(this,uO,uz).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(t.actions)){let r=i.get(n);r&&(e[r]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1})}e.onclick||(e.onclick=()=>!1),nd(this,uO,uz).call(this)}_bindResetFormAction(e,t){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),nd(this,uO,uz).call(this),!this._fieldObjects){nz('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{null==i||i();let{fields:e,refs:n,include:r}=t,a=[];if(0!==e.length||0!==n.length){let t=new Set(n);for(let i of e)for(let{id:e}of this._fieldObjects[i]||[])t.add(e);for(let e of Object.values(this._fieldObjects))for(let i of e)t.has(i.id)===r&&a.push(i)}else for(let e of Object.values(this._fieldObjects))a.push(...e);let s=this.annotationStorage,l=[];for(let e of a){let{id:t}=e;switch(l.push(t),e.type){case"text":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{let i=e.defaultValue===e.exportValues;s.setValue(t,{value:i});break}case"combobox":case"listbox":{let i=e.defaultValue||"";s.setValue(t,{value:i});break}default:continue}let i=document.querySelector('[data-element-id="'.concat(t,'"]'));if(i){if(!uC.has(i)){nz("_bindResetFormAction - element not allowed: ".concat(t));continue}i.dispatchEvent(new Event("resetform"))}}if(this.enableScripting){var o;null==(o=this.linkService.eventBus)||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})}return!1}}constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),np(this,uO),np(this,uW),np(this,uj),this.isTooltipOnly=e.data.isTooltipOnly}}function uz(){this.container.setAttribute("data-internal-link","")}function uH(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,i),!1},nd(this,uO,uz).call(this)}function uU(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),nd(this,uO,uz).call(this)}class uG extends uF{render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}constructor(e){super(e,{isRenderable:!0})}}class uV extends uF{render(){return this.container}showElementAndHideCanvas(e){if(this.data.hasOwnCanvas){var t;(null==(t=e.previousSibling)?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1}}_getKeyModifier(e){return n3.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,r){i.includes("mouse")?e.addEventListener(i,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(i,e=>{var a;if("blur"===i){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}r&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(e)}}))})}_setEventListeners(e,t,i,n){for(let[l,o]of i){var r,a,s;("Action"===o||(null==(r=this.data.actions)?void 0:r[o]))&&(("Focus"===o||"Blur"===o)&&(t||(t={focused:!1})),this._setEventListener(e,t,l,o,n),"Focus"!==o||(null==(a=this.data.actions)?void 0:a.Blur)?"Blur"!==o||(null==(s=this.data.actions)?void 0:s.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":n5.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t,{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,r=e.style,a=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),i=Math.round(e/(1.35*n))||1;t=Math.min(n,a(e/i/1.35))}else t=Math.min(n,a(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));r.fontSize="calc(".concat(t,"px * var(--scale-factor))"),r.color=n5.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(r.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class uq extends uV{setPropertyOnSiblings(e,t,i,n){let r=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[n]:i})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var n,r;let a=e.getValue(t,{value:this.data.fieldValue}),s=a.value||"",l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&s.length>l&&(s=s.slice(0,l));let o=a.formattedValue||(null==(n=this.data.textContent)?void 0:n.join("\n"))||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let h={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=null!=o?o:s,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",null!=o?o:s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),uC.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=1e3,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",n=>{e.setValue(t,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",e=>{var t;let n=null!=(t=this.data.defaultFieldValue)?t:"";i.value=h.userValue=n,h.formattedValue=null});let c=e=>{let{formattedValue:t}=h;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",e=>{var t;if(h.focused)return;let{target:i}=e;h.userValue&&(i.value=h.userValue),h.lastCommittedValue=i.value,h.commitKey=1,(null==(t=this.data.actions)?void 0:t.Focus)||(h.focused=!0)}),i.addEventListener("updatefromsandbox",i=>{this.showElementAndHideCanvas(i.target),this._dispatchEventFromSandbox({value(i){var n;h.userValue=null!=(n=i.detail.value)?n:"",e.setValue(t,{value:h.userValue.toString()}),i.target.value=h.userValue},formattedValue(i){let{formattedValue:n}=i.detail;h.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),e.setValue(t,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:i=>{var n;let{charLimit:r}=i.detail,{target:a}=i;if(0===r)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",r);let s=h.userValue;s&&!(s.length<=r)&&(a.value=h.userValue=s=s.slice(0,r),e.setValue(t,{value:s}),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}},i)}),i.addEventListener("keydown",e=>{var i;h.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(h.commitKey=3):n=2,-1===n)return;let{value:r}=e.target;h.lastCommittedValue!==r&&(h.lastCommittedValue=r,h.userValue=r,null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let n=c;c=null,i.addEventListener("blur",e=>{var i,r;if(!h.focused||!e.relatedTarget)return;(null==(i=this.data.actions)?void 0:i.Blur)||(h.focused=!1);let{value:a}=e.target;h.userValue=a,h.lastCommittedValue!==a&&(null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:h.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),n(e)}),(null==(r=this.data.actions)?void 0:r.Keystroke)&&i.addEventListener("beforeinput",e=>{var i;h.lastCommittedValue=null;let{data:n,target:r}=e,{value:a,selectionStart:s,selectionEnd:l}=r,o=s,c=l;switch(e.inputType){case"deleteWordBackward":{let e=a.substring(0,s).match(/\w*[^\w]*$/);e&&(o-=e[0].length);break}case"deleteWordForward":{let e=a.substring(s).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":s===l&&(o-=1);break;case"deleteContentForward":s===l&&(c+=1)}e.preventDefault(),null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:n||"",willCommit:!1,selStart:o,selEnd:c}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}}class uX extends uV{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class uK extends uV{render(){let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let r=document.createElement("input");return uC.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=1e3,r.addEventListener("change",n=>{let{name:r,checked:a}=n.target;for(let n of this._getElementsByName(r,i)){let i=a&&n.exportValue===t.exportValue;n.domElement&&(n.domElement.checked=i),e.setValue(n.id,{value:i})}e.setValue(i,{value:a})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class uY extends uV{render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof n&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(let n of this._getElementsByName(t.fieldName,i))e.setValue(n.id,{value:!1});let r=document.createElement("input");if(uC.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=1e3,r.addEventListener("change",t=>{let{name:n,checked:r}=t.target;for(let t of this._getElementsByName(n,i))e.setValue(t.id,{value:!1});e.setValue(i,{value:r})}),r.addEventListener("resetform",e=>{let i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue}),this.enableScripting&&this.hasJSActions){let n=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value:t=>{let r=n===t.detail.value;for(let n of this._getElementsByName(t.target.name)){let t=r&&n.id===i;n.domElement&&(n.domElement.checked=t),e.setValue(n.id,{value:t})}}},t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class uQ extends uB{render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}}class uJ extends uV{render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");uC.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=1e3;let r=this.data.combo&&this.data.options.length>0;for(let e of(!this.data.combo&&(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue;for(let e of n.options)e.selected=e.value===t}),this.data.options)){let t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,i.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),r=!1),n.append(t)}let a=null;if(r){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),n.prepend(e),a=()=>{e.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}let s=e=>{let t=e?"value":"textContent",{options:i,multiple:r}=n;return r?Array.prototype.filter.call(i,e=>e.selected).map(e=>e[t]):-1===i.selectedIndex?null:i[i.selectedIndex][t]},l=s(!1),o=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({value(i){null==a||a();let r=i.detail.value,o=new Set(Array.isArray(r)?r:[r]);for(let e of n.options)e.selected=o.has(e.value);e.setValue(t,{value:s(!0)}),l=s(!1)},multipleSelection(e){n.multiple=!0},remove(i){let r=n.options,a=i.detail.remove;r[a].selected=!1,n.remove(a),r.length>0&&-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},clear(i){for(;0!==n.length;)n.remove(0);e.setValue(t,{value:null,items:[]}),l=s(!1)},insert(i){let{index:r,displayValue:a,exportValue:h}=i.detail.insert,c=n.children[r],u=document.createElement("option");u.textContent=a,u.value=h,c?c.before(u):n.append(u),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},items(i){let{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(let e of r){let{displayValue:t,exportValue:i}=e,r=document.createElement("option");r.textContent=t,r.value=i,n.append(r)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:s(!0),items:o(i)}),l=s(!1)},indices(i){let n=new Set(i.detail.indices);for(let e of i.target.options)e.selected=n.has(e.index);e.setValue(t,{value:s(!0)}),l=s(!1)},editable(e){e.target.disabled=!e.detail.editable}},i)}),n.addEventListener("input",i=>{var n;let r=s(!0),a=s(!1);e.setValue(t,{value:r}),i.preventDefault(),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:a,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):n.addEventListener("input",function(i){e.setValue(t,{value:s(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class uZ extends uF{render(){this.container.classList.add("popupAnnotation");let e=this.popup=new db({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(rt).concat(e)).join(",")),this.container}constructor(e){let{data:t,elements:i}=e;super(e,{isRenderable:uF._hasPopupData(t)}),this.elements=i,this.popup=null}}var u$=new WeakMap,u0=new WeakMap,u1=new WeakMap,u2=new WeakMap,u3=new WeakMap,u4=new WeakMap,u5=new WeakMap,u6=new WeakMap,u9=new WeakMap,u8=new WeakMap,u7=new WeakMap,de=new WeakMap,dt=new WeakMap,di=new WeakMap,dn=new WeakMap,dr=new WeakMap,da=new WeakMap,ds=new WeakMap,dl=new WeakMap,dh=new WeakMap,dc=new WeakMap,du=new WeakMap,dd=new WeakSet,dp=new WeakSet,df=new WeakSet,dg=new WeakSet,dm=new WeakSet,dv=new WeakSet;class db{render(){if(na(this,dt))return;let e=nh(this,dt,document.createElement("div"));if(e.className="popup",na(this,u3)){let t=e.style.outlineColor=n5.makeHexColor(...na(this,u3));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)"):e.style.backgroundColor=n5.makeHexColor(...na(this,u3).map(e=>Math.floor(.7*(255-e)+e)))}let t=document.createElement("span");t.className="header";let i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=na(this,da),e.append(t),na(this,u6)){let e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:na(this,u6).valueOf()})),t.append(e)}let n=na(this,dh);if(n)uM.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let t=this._formatContents(na(this,u5));e.append(t)}na(this,u4).append(e)}_formatContents(e){let{str:t,dir:i}=e,n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;let r=t.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){let i=r[e];n.append(document.createTextNode(i)),e<t-1&&n.append(document.createElement("br"))}return n}updateEdited(e){var t;let{rect:i,popupContent:n}=e;nh(this,ds,na(this,ds)||{contentsObj:na(this,u5),richText:na(this,dr)}),i&&nh(this,di,null),n&&(nh(this,dr,nd(this,dd,dA).call(this,n)),nh(this,u5,null)),null==(t=na(this,dt))||t.remove(),nh(this,dt,null)}resetEdited(){var e;na(this,ds)&&({contentsObj:ny(this,u5).value,richText:ny(this,dr).value}=na(this,ds),nh(this,ds,null),null==(e=na(this,dt))||e.remove(),nh(this,dt,null),nh(this,di,null))}forceHide(){nh(this,dl,this.isVisible),na(this,dl)&&(na(this,u4).hidden=!0)}maybeShow(){na(this,dl)&&(na(this,dt)||nd(this,dm,dE).call(this),nh(this,dl,!1),na(this,u4).hidden=!1)}get isVisible(){return!1===na(this,u4).hidden}constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:s,parent:l,rect:o,parentRect:h,open:c}){for(let c of(nl(this,dh,{get:dw,set:void 0}),nl(this,dc,{get:dy,set:void 0}),nl(this,du,{get:dx,set:void 0}),np(this,dd),np(this,dp),np(this,df),np(this,dg),np(this,dm),np(this,dv),nl(this,u$,{writable:!0,value:nd(this,dp,dk).bind(this)}),nl(this,u0,{writable:!0,value:nd(this,dv,dM).bind(this)}),nl(this,u1,{writable:!0,value:nd(this,dm,dE).bind(this)}),nl(this,u2,{writable:!0,value:nd(this,dg,dS).bind(this)}),nl(this,u3,{writable:!0,value:null}),nl(this,u4,{writable:!0,value:null}),nl(this,u5,{writable:!0,value:null}),nl(this,u6,{writable:!0,value:null}),nl(this,u9,{writable:!0,value:null}),nl(this,u8,{writable:!0,value:null}),nl(this,u7,{writable:!0,value:null}),nl(this,de,{writable:!0,value:!1}),nl(this,dt,{writable:!0,value:null}),nl(this,di,{writable:!0,value:null}),nl(this,dn,{writable:!0,value:null}),nl(this,dr,{writable:!0,value:null}),nl(this,da,{writable:!0,value:null}),nl(this,ds,{writable:!0,value:null}),nl(this,dl,{writable:!0,value:!1}),nh(this,u4,e),nh(this,da,n),nh(this,u5,a),nh(this,dr,s),nh(this,u8,l),nh(this,u3,t),nh(this,dn,o),nh(this,u7,h),nh(this,u9,i),nh(this,u6,rg.toDateObject(r)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),this.trigger))c.addEventListener("click",na(this,u2)),c.addEventListener("mouseenter",na(this,u1)),c.addEventListener("mouseleave",na(this,u0)),c.classList.add("popupTriggerArea");for(let e of i){var u;null==(u=e.container)||u.addEventListener("keydown",na(this,u$))}na(this,u4).hidden=!0,c&&nd(this,dg,dS).call(this)}}function dw(){let e=na(this,dr),t=na(this,u5);return(null==e?void 0:e.str)&&(!(null==t?void 0:t.str)||t.str===e.str)&&na(this,dr).html||null}function dy(){var e,t,i;return(null==(i=na(this,dh))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.fontSize)||0}function dx(){var e,t,i;return(null==(i=na(this,dh))||null==(t=i.attributes)||null==(e=t.style)?void 0:e.color)||null}function dA(e){let t=[],i={style:{color:na(this,du),fontSize:na(this,dc)?"calc(".concat(na(this,dc),"px * var(--scale-factor))"):""}};for(let n of e.split("\n"))t.push({name:"span",value:n,attributes:i});return{str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}}}function dk(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&na(this,de))&&nd(this,dg,dS).call(this)}function d_(){if(null!==na(this,di))return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:r}}}=na(this,u8),a=!!na(this,u7),s=a?na(this,u7):na(this,dn);for(let e of na(this,u9))if(!s||null!==n5.intersect(e.data.rect,s)){s=e.data.rect,a=!0;break}let l=n5.normalizeRect([s[0],e[3]-s[1]+e[1],s[2],e[3]-s[3]+e[1]]),o=a?s[2]-s[0]+5:0;nh(this,di,[100*(l[0]+o-n)/t,100*(l[1]-r)/i]);let{style:h}=na(this,u4);h.left="".concat(na(this,di)[0],"%"),h.top="".concat(na(this,di)[1],"%")}function dS(){nh(this,de,!na(this,de)),na(this,de)?(nd(this,dm,dE).call(this),na(this,u4).addEventListener("click",na(this,u2)),na(this,u4).addEventListener("keydown",na(this,u$))):(nd(this,dv,dM).call(this),na(this,u4).removeEventListener("click",na(this,u2)),na(this,u4).removeEventListener("keydown",na(this,u$)))}function dE(){na(this,dt)||this.render(),this.isVisible?na(this,de)&&na(this,u4).classList.add("focused"):(nd(this,df,d_).call(this),na(this,u4).hidden=!1,na(this,u4).style.zIndex=parseInt(na(this,u4).style.zIndex)+1e3)}function dM(){na(this,u4).classList.remove("focused"),!na(this,de)&&this.isVisible&&(na(this,u4).hidden=!0,na(this,u4).style.zIndex=parseInt(na(this,u4).style.zIndex)-1e3)}class dC extends uF{render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");for(let t of(e.classList.add("annotationTextContent"),e.setAttribute("role","comment"),this.textContent)){let i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=nT.FREETEXT}}var dT=new WeakMap;class dP extends uF{render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:i}=uT(e.rect),n=this.svgFactory.create(t,i,!0),r=nh(this,dT,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return na(this,dT)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nl(this,dT,{writable:!0,value:null})}}var dR=new WeakMap;class dI extends uF{render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:i}=uT(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nh(this,dR,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return na(this,dR)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nl(this,dR,{writable:!0,value:null})}}var dL=new WeakMap;class dD extends uF{render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:i}=uT(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=nh(this,dL,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return na(this,dL)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nl(this,dL,{writable:!0,value:null})}}var dF=new WeakMap;class dN extends uF{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:i,popupRef:n}}=this;if(!t)return this.container;let{width:r,height:a}=uT(e),s=this.svgFactory.create(r,a,!0),l=[];for(let i=0,n=t.length;i<n;i+=2){let n=t[i]-e[0],r=e[3]-t[i+1];l.push("".concat(n,",").concat(r))}l=l.join(" ");let o=nh(this,dF,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",l),o.setAttribute("stroke-width",i.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return na(this,dF)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),nl(this,dF,{writable:!0,value:null}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}}class dO extends dN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dW extends uF{render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}}var dj=new WeakMap,dB=new WeakMap,dz=new WeakSet;class dH extends uF{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:i,borderStyle:n,popupRef:r}}=this,{transform:a,width:s,height:l}=nd(this,dz,dU).call(this,t,e),o=this.svgFactory.create(s,l,!0),h=nh(this,dj,this.svgFactory.createElement("svg:g"));o.append(h),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let e=0,t=i.length;e<t;e++){let t=this.svgFactory.createElement(this.svgElementName);na(this,dB).push(t),t.setAttribute("points",i[e].join(",")),h.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:i,rect:n}=e,r=na(this,dj);if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let e=0,t=na(this,dB).length;e<t;e++)na(this,dB)[e].setAttribute("points",i[e].join(","));if(n){let{transform:e,width:t,height:i}=nd(this,dz,dU).call(this,this.data.rotation,n);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(i)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return na(this,dB)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),np(this,dz),nl(this,dj,{writable:!0,value:null}),nl(this,dB,{writable:!0,value:[]}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?nT.HIGHLIGHT:nT.INK}}function dU(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class dG extends uF{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=nT.HIGHLIGHT}}class dV extends uF{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dq extends uF{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dX extends uF{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class dK extends uF{render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=nT.STAMP}}var dY=new WeakMap,dQ=new WeakSet;class dJ extends uF{render(){let e;this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:i}=this;i.hasAppearance||0===i.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*i.fillAlpha),"%);"))),e.addEventListener("dblclick",nd(this,dQ,dZ).bind(this)),nh(this,dY,e);let{isMac:n}=n3.platform;return t.addEventListener("keydown",e=>{"Enter"===e.key&&(n?e.metaKey:e.ctrlKey)&&nd(this,dQ,dZ).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),t.append(e),t}getElementsToTriggerPopup(){return na(this,dY)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){var t;super(e,{isRenderable:!0}),np(this,dQ),nl(this,dY,{writable:!0,value:null});let{file:i}=this.data;this.filename=i.filename,this.content=i.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...i})}}function dZ(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)}var d$=new WeakMap,d0=new WeakMap,d1=new WeakMap,d2=new WeakMap,d3=new WeakSet,d4=new WeakSet;class d5{hasEditableAnnotations(){return na(this,d1).size>0}async render(e){let{annotations:t}=e,i=this.div;rx(i,this.viewport);let n=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new uE,annotationStorage:e.annotationStorage||new on,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of t){if(e.noHTML)continue;let t=e.annotationType===nD.POPUP;if(t){let t=n.get(e.id);if(!t)continue;r.elements=t}else{let{width:t,height:i}=uT(e.rect);if(t<=0||i<=0)continue}r.data=e;let i=uP.create(r);if(!i.isRenderable)continue;if(!t&&e.popupRef){let t=n.get(e.popupRef);t?t.push(i):n.set(e.popupRef,[i])}let s=i.render();if(e.hidden&&(s.style.visibility="hidden"),await nd(this,d3,d6).call(this,s,e.id),i._isEditable){var a;na(this,d1).set(i.data.id,i),null==(a=this._annotationEditorUIManager)||a.renderAnnotationElement(i)}}nd(this,d4,d9).call(this)}update(e){let{viewport:t}=e,i=this.div;this.viewport=t,rx(i,{rotation:t.rotation}),nd(this,d4,d9).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(na(this,d1).values())}getEditableAnnotation(e){return na(this,d1).get(e)}constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:s}){np(this,d3),np(this,d4),nl(this,d$,{writable:!0,value:null}),nl(this,d0,{writable:!0,value:null}),nl(this,d1,{writable:!0,value:new Map}),nl(this,d2,{writable:!0,value:null}),this.div=e,nh(this,d$,t),nh(this,d0,i),nh(this,d2,s||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}}async function d6(e,t){var i,n;let r=e.firstChild||e,a=r.id="".concat(rt).concat(t),s=await (null==(i=na(this,d2))?void 0:i.getAriaAttributes(a));if(s)for(let[e,t]of s)r.setAttribute(e,t);this.div.append(e),null==(n=na(this,d$))||n.moveElementInDOM(this.div,e,r,!1)}function d9(){if(!na(this,d0))return;let e=this.div;for(let[t,i]of na(this,d0)){let n=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!n)continue;i.className="annotationContent";let{firstChild:r}=n;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}na(this,d0).clear()}let d8=/\r\n?|\n/g;var d7=new WeakMap,pe=new WeakMap,pt=new WeakMap,pi=new WeakMap,pn=new WeakMap,pr=new WeakSet,pa=new WeakSet,ps=new WeakSet,pl=new WeakSet,po=new WeakSet,ph=new WeakSet,pc=new WeakSet;class pu extends lB{static get _keyboardManager(){let e=pu.prototype,t=e=>e.isEmpty(),i=sr.TRANSLATE_SMALL,n=sr.TRANSLATE_BIG;return nV(this,"_keyboardManager",new ai([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}]]))}static initialize(e,t){lB.initialize(e,t);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case nP.FREETEXT_SIZE:pu._defaultFontSize=t;break;case nP.FREETEXT_COLOR:pu._defaultColor=t}}updateParams(e,t){switch(e){case nP.FREETEXT_SIZE:nd(this,pr,pd).call(this,t);break;case nP.FREETEXT_COLOR:nd(this,pa,pp).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nP.FREETEXT_SIZE,pu._defaultFontSize],[nP.FREETEXT_COLOR,pu._defaultColor||lB._defaultLineColor]]}get propertiesToUpdate(){return[[nP.FREETEXT_SIZE,na(this,pn)],[nP.FREETEXT_COLOR,na(this,d7)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-pu._internalPadding*e,-(pu._internalPadding+na(this,pn))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(nT.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),nh(this,pi,new AbortController);let e=this._uiManager.combinedSignal(na(this,pi));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",na(this,pt)),this._isDraggable=!0,null==(e=na(this,pi))||e.abort(),nh(this,pi,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(null==(t=this._initialOptions)?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=na(this,pe),t=nh(this,pe,nd(this,ps,pf).call(this).trimEnd());if(e===t)return;let i=e=>{if(nh(this,pe,e),!e)return void this.remove();nd(this,po,pv).call(this),this._uiManager.rebuild(this),nd(this,pl,pg).call(this)};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),nd(this,pl,pg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pu._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",na(this,pt)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize="calc(".concat(na(this,pn),"px * var(--scale-factor))"),i.color=na(this,d7),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),rJ(this,this.div,["dblclick","keydown"]),this.width){let[i,n]=this.parentDimensions;if(this.annotationElementId){let r,a,{position:s}=this._initialData,[l,o]=this.getInitialTranslation();[l,o]=this.pageTranslationToScreen(l,o);let[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;switch(this.rotation){case 0:r=e+(s[0]-u)/h,a=t+this.height-(s[1]-d)/c;break;case 90:r=e+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[o,-l];break;case 180:r=e-this.width+(s[0]-u)/h,a=t-(s[1]-d)/c,[l,o]=[-l,-o];break;case 270:r=e+(s[0]-u-this.height*c)/h,a=t+(s[1]-d-this.width*h)/c,[l,o]=[-o,l]}this.setAt(r*i,a*n,l,o)}else this.setAt(e*i,t*n,this.width*i,this.height*n);nd(this,po,pv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();let n=(nf(pu,pu),pw).call(pu,t.getData("text")||"").replaceAll(d8,"\n");if(!n)return;let r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();let a=r.getRangeAt(0);if(!n.includes("\n")){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}let{startContainer:s,startOffset:l}=a,o=[],h=[];if(s.nodeType===Node.TEXT_NODE){let e=s.parentElement;if(h.push(s.nodeValue.slice(l).replaceAll(d8,"")),e!==this.editorDiv){let t=o;for(let i of this.editorDiv.childNodes){if(i===e){t=h;continue}t.push((nf(pu,pu),pm).call(pu,i))}}o.push(s.nodeValue.slice(0,l).replaceAll(d8,""))}else if(s===this.editorDiv){let e=o,t=0;for(let i of this.editorDiv.childNodes)t++===l&&(e=h),e.push((nf(pu,pu),pm).call(pu,i))}nh(this,pe,"".concat(o.join("\n")).concat(n).concat(h.join("\n"))),nd(this,po,pv).call(this);let c=new Range,u=o.reduce((e,t)=>e+t.length,0);for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(u<=t){c.setStart(e,u),c.setEnd(e,u);break}u-=t}r.removeAllRanges(),r.addRange(c)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,i){let n=null;if(e instanceof dC){let{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:r,rotation:a,id:s,popupRef:l},textContent:o,textPosition:h,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;n=e={annotationType:nT.FREETEXT,color:Array.from(i),fontSize:t,value:o.join("\n"),position:h,pageIndex:c-1,rect:r.slice(0),rotation:a,id:s,deleted:!1,popupRef:l}}let r=await super.deserialize(e,t,i);return nh(r,pn,e.fontSize),nh(r,d7,n5.makeHexColor(...e.color)),nh(r,pe,(nf(pu,pu),pw).call(pu,e.value)),r.annotationElementId=e.id||null,r._initialData=n,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=pu._internalPadding*this.parentScale,i=this.getRect(t,t),n=lB._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:na(this,d7)),r={annotationType:nT.FREETEXT,color:n,fontSize:na(this,pn),value:nd(this,ph,pb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!nd(this,pc,py).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:i}=t;for(let e of(i.fontSize="calc(".concat(na(this,pn),"px * var(--scale-factor))"),i.color=na(this,d7),t.replaceChildren(),na(this,pe).split("\n"))){let i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),t.append(i)}let n=pu._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:na(this,pe)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}constructor(e){super({...e,name:"freeTextEditor"}),np(this,pr),np(this,pa),np(this,ps),np(this,pl),np(this,po),np(this,ph),np(this,pc),nl(this,d7,{writable:!0,value:void 0}),nl(this,pe,{writable:!0,value:""}),nl(this,pt,{writable:!0,value:"".concat(this.id,"-editor")}),nl(this,pi,{writable:!0,value:null}),nl(this,pn,{writable:!0,value:void 0}),nh(this,d7,e.color||pu._defaultColor||lB._defaultLineColor),nh(this,pn,e.fontSize||pu._defaultFontSize)}}function pd(e){let t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-na(this,pn))*this.parentScale),nh(this,pn,e),nd(this,pl,pg).call(this)},i=na(this,pn);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nP.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function pp(e){let t=e=>{nh(this,d7,this.editorDiv.style.color=e)},i=na(this,d7);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nP.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function pf(){let e=[];this.editorDiv.normalize();let t=null;for(let i of this.editorDiv.childNodes)((null==t?void 0:t.nodeType)!==Node.TEXT_NODE||"BR"!==i.nodeName)&&(e.push((nf(pu,pu),pm).call(pu,i)),t=i);return e.join("\n")}function pg(){let e,[t,i]=this.parentDimensions;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{let{currentLayer:t,div:i}=this,n=i.style.display,r=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",t.div.append(this.div),e=i.getBoundingClientRect(),i.remove(),i.style.display=n,i.classList.toggle("hidden",r)}this.rotation%180==this.parentRotation%180?(this.width=e.width/t,this.height=e.height/i):(this.width=e.height/t,this.height=e.width/i),this.fixAndSetPosition()}function pm(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(d8,"")}function pv(){if(this.editorDiv.replaceChildren(),na(this,pe))for(let e of na(this,pe).split("\n")){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function pb(){return na(this,pe).replaceAll(""," ")}function pw(e){return e.replaceAll(" ","")}function py(e){let{value:t,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((e,t)=>e!==n[t])||e.pageIndex!==r}(0,nw._)(pu,"_freeTextDefaultContent",""),(0,nw._)(pu,"_internalPadding",0),(0,nw._)(pu,"_defaultColor",null),(0,nw._)(pu,"_defaultFontSize",10),(0,nw._)(pu,"_type","freetext"),(0,nw._)(pu,"_editorType",nT.FREETEXT);class px{toSVGPath(){nH("Abstract method `toSVGPath` must be implemented.")}get box(){nH("Abstract getter `box` must be implemented.")}serialize(e,t){nH("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s]*n,a[s+1]=i+e[s+1]*r;return a}static _rescaleAndSwap(e,t,i,n,r,a){a||(a=new Float32Array(e.length));for(let s=0,l=e.length;s<l;s+=2)a[s]=t+e[s+1]*n,a[s+1]=i+e[s]*r;return a}static _translate(e,t,i,n){n||(n=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)n[r]=t+e[r],n[r+1]=i+e[r+1];return n}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,i,n,r){switch(r){case 90:return[1-t/i,e/n];case 180:return[1-e/i,1-t/n];case 270:return[t/i,1-e/n];default:return[e/i,t/n]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,n,r,a){return[(e+5*i)/6,(t+5*n)/6,(5*i+r)/6,(5*n+a)/6,(i+r)/2,(n+a)/2]}}(0,nw._)(px,"PRECISION",1e-4);var pA=new WeakMap,pk=new WeakMap,p_=new WeakMap,pS=new WeakMap,pE=new WeakMap,pM=new WeakMap,pC=new WeakMap,pT=new WeakMap,pP=new WeakMap,pR=new WeakMap,pI=new WeakMap,pL=new WeakMap,pD=new WeakMap,pF=new WeakSet,pN=new WeakSet,pO=new WeakSet,pW=new WeakSet,pj=new WeakSet,pB=new WeakSet,pz=new WeakSet;class pH{isEmpty(){return isNaN(na(this,pM)[8])}add(e){var t;let{x:i,y:n}=e;nh(this,pC,i),nh(this,pT,n);let[r,a,s,l]=na(this,pA),[o,h,c,u]=na(this,pM).subarray(8,12),d=i-c,p=n-u,f=Math.hypot(d,p);if(f<na(this,pP))return!1;let g=f-na(this,pR),m=g/f,b=m*d,w=m*p,y=o,x=h;o=c,h=u,c+=b,u+=w,null==(t=na(this,pD))||t.push(i,n);let A=-w/g*na(this,pL),k=b/g*na(this,pL);return(na(this,pM).set(na(this,pM).subarray(2,8),0),na(this,pM).set([c+A,u+k],4),na(this,pM).set(na(this,pM).subarray(14,18),12),na(this,pM).set([c-A,u-k],16),isNaN(na(this,pM)[6]))?(0===na(this,pE).length&&(na(this,pM).set([o+A,h+k],2),na(this,pE).push(NaN,NaN,NaN,NaN,(o+A-r)/s,(h+k-a)/l),na(this,pM).set([o-A,h-k],14),na(this,pk).push(NaN,NaN,NaN,NaN,(o-A-r)/s,(h-k-a)/l)),na(this,pM).set([y,x,o,h,c,u],6),!this.isEmpty()):((na(this,pM).set([y,x,o,h,c,u],6),Math.abs(Math.atan2(x-h,y-o)-Math.atan2(w,b))<Math.PI/2)?([o,h,c,u]=na(this,pM).subarray(2,6),na(this,pE).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((h+u)/2-a)/l),[o,h,y,x]=na(this,pM).subarray(14,18),na(this,pk).push(NaN,NaN,NaN,NaN,((y+o)/2-r)/s,((x+h)/2-a)/l)):([y,x,o,h,c,u]=na(this,pM).subarray(0,6),na(this,pE).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l),[c,u,o,h,y,x]=na(this,pM).subarray(12,18),na(this,pk).push(((y+5*o)/6-r)/s,((x+5*h)/6-a)/l,((5*o+c)/6-r)/s,((5*h+u)/6-a)/l,((o+c)/2-r)/s,((h+u)/2-a)/l)),!0)}toSVGPath(){if(this.isEmpty())return"";let e=na(this,pE),t=na(this,pk);if(isNaN(na(this,pM)[6])&&!this.isEmpty())return nd(this,pN,pq).call(this);let i=[];i.push("M".concat(e[4]," ").concat(e[5]));for(let t=6;t<e.length;t+=6)isNaN(e[t])?i.push("L".concat(e[t+4]," ").concat(e[t+5])):i.push("C".concat(e[t]," ").concat(e[t+1]," ").concat(e[t+2]," ").concat(e[t+3]," ").concat(e[t+4]," ").concat(e[t+5]));nd(this,pW,pK).call(this,i);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?i.push("L".concat(t[e+4]," ").concat(t[e+5])):i.push("C".concat(t[e]," ").concat(t[e+1]," ").concat(t[e+2]," ").concat(t[e+3]," ").concat(t[e+4]," ").concat(t[e+5]));return nd(this,pO,pX).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,n,r,a){return new p6(e,t,i,n,r,a)}getOutlines(){var e,t;let i=na(this,pE),n=na(this,pk),r=na(this,pM),[a,s,l,o]=na(this,pA),h=new Float32Array((null!=(t=null==(e=na(this,pD))?void 0:e.length)?t:0)+2);for(let e=0,t=h.length-2;e<t;e+=2)h[e]=(na(this,pD)[e]-a)/l,h[e+1]=(na(this,pD)[e+1]-s)/o;if(h[h.length-2]=(na(this,pC)-a)/l,h[h.length-1]=(na(this,pT)-s)/o,isNaN(r[6])&&!this.isEmpty())return nd(this,pj,pY).call(this,h);let c=new Float32Array(na(this,pE).length+24+na(this,pk).length),u=i.length;for(let e=0;e<u;e+=2){if(isNaN(i[e])){c[e]=c[e+1]=NaN;continue}c[e]=i[e],c[e+1]=i[e+1]}u=nd(this,pz,pJ).call(this,c,u);for(let e=n.length-6;e>=6;e-=6)for(let t=0;t<6;t+=2){if(isNaN(n[e+t])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[e+t],c[u+1]=n[e+t+1],u+=2}return nd(this,pB,pQ).call(this,c,u),this.newFreeDrawOutline(c,h,na(this,pA),na(this,pI),na(this,p_),na(this,pS))}constructor({x:e,y:t},i,n,r,a,s=0){np(this,pF),np(this,pN),np(this,pO),np(this,pW),np(this,pj),np(this,pB),np(this,pz),nl(this,pA,{writable:!0,value:void 0}),nl(this,pk,{writable:!0,value:[]}),nl(this,p_,{writable:!0,value:void 0}),nl(this,pS,{writable:!0,value:void 0}),nl(this,pE,{writable:!0,value:[]}),nl(this,pM,{writable:!0,value:new Float32Array(18)}),nl(this,pC,{writable:!0,value:void 0}),nl(this,pT,{writable:!0,value:void 0}),nl(this,pP,{writable:!0,value:void 0}),nl(this,pR,{writable:!0,value:void 0}),nl(this,pI,{writable:!0,value:void 0}),nl(this,pL,{writable:!0,value:void 0}),nl(this,pD,{writable:!0,value:[]}),nh(this,pA,i),nh(this,pL,r*n),nh(this,pS,a),na(this,pM).set([NaN,NaN,NaN,NaN,e,t],6),nh(this,p_,s),nh(this,pR,nm(pH,pH,pU)*n),nh(this,pP,nm(pH,pH,pG)*n),nh(this,pI,n),na(this,pD).push(e,t)}}var pU={writable:!0,value:8},pG={writable:!0,value:nm(pH,pH,pU)+nm(pH,pH,{writable:!0,value:2})};function pV(){let e=na(this,pM).subarray(4,6),t=na(this,pM).subarray(16,18),[i,n,r,a]=na(this,pA);return[(na(this,pC)+(e[0]-t[0])/2-i)/r,(na(this,pT)+(e[1]-t[1])/2-n)/a,(na(this,pC)+(t[0]-e[0])/2-i)/r,(na(this,pT)+(t[1]-e[1])/2-n)/a]}function pq(){let[e,t,i,n]=na(this,pA),[r,a,s,l]=nd(this,pF,pV).call(this);return"M".concat((na(this,pM)[2]-e)/i," ").concat((na(this,pM)[3]-t)/n," L").concat((na(this,pM)[4]-e)/i," ").concat((na(this,pM)[5]-t)/n," L").concat(r," ").concat(a," L").concat(s," ").concat(l," L").concat((na(this,pM)[16]-e)/i," ").concat((na(this,pM)[17]-t)/n," L").concat((na(this,pM)[14]-e)/i," ").concat((na(this,pM)[15]-t)/n," Z")}function pX(e){let t=na(this,pk);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function pK(e){let[t,i,n,r]=na(this,pA),a=na(this,pM).subarray(4,6),s=na(this,pM).subarray(16,18),[l,o,h,c]=nd(this,pF,pV).call(this);e.push("L".concat((a[0]-t)/n," ").concat((a[1]-i)/r," L").concat(l," ").concat(o," L").concat(h," ").concat(c," L").concat((s[0]-t)/n," ").concat((s[1]-i)/r))}function pY(e){let t=na(this,pM),[i,n,r,a]=na(this,pA),[s,l,o,h]=nd(this,pF,pV).call(this),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-n)/a,NaN,NaN,NaN,NaN,s,l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-n)/a],0),this.newFreeDrawOutline(c,e,na(this,pA),na(this,pI),na(this,p_),na(this,pS))}function pQ(e,t){let i=na(this,pk);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+6}function pJ(e,t){let i=na(this,pM).subarray(4,6),n=na(this,pM).subarray(16,18),[r,a,s,l]=na(this,pA),[o,h,c,u]=nd(this,pF,pV).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/s,(i[1]-a)/l,NaN,NaN,NaN,NaN,o,h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[0]-r)/s,(n[1]-a)/l],t),t+24}var pZ=new WeakMap,p$=new WeakMap,p0=new WeakMap,p1=new WeakMap,p2=new WeakMap,p3=new WeakMap,p4=new WeakMap,p5=new WeakSet;class p6 extends px{toSVGPath(){let e=["M".concat(na(this,p4)[4]," ").concat(na(this,p4)[5])];for(let t=6,i=na(this,p4).length;t<i;t+=6){if(isNaN(na(this,p4)[t])){e.push("L".concat(na(this,p4)[t+4]," ").concat(na(this,p4)[t+5]));continue}e.push("C".concat(na(this,p4)[t]," ").concat(na(this,p4)[t+1]," ").concat(na(this,p4)[t+2]," ").concat(na(this,p4)[t+3]," ").concat(na(this,p4)[t+4]," ").concat(na(this,p4)[t+5]))}return e.push("Z"),e.join(" ")}serialize(e,t){let i,n,[r,a,s,l]=e,o=s-r,h=l-a;switch(t){case 0:i=px._rescale(na(this,p4),r,l,o,-h),n=px._rescale(na(this,p2),r,l,o,-h);break;case 90:i=px._rescaleAndSwap(na(this,p4),r,a,o,h),n=px._rescaleAndSwap(na(this,p2),r,a,o,h);break;case 180:i=px._rescale(na(this,p4),s,a,-o,h),n=px._rescale(na(this,p2),s,a,-o,h);break;case 270:i=px._rescaleAndSwap(na(this,p4),s,l,-o,-h),n=px._rescaleAndSwap(na(this,p2),s,l,-o,-h)}return{outline:Array.from(i),points:[Array.from(n)]}}get box(){return na(this,p$)}newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new pH(e,t,i,n,r,a)}getNewOutline(e,t){let[i,n,r,a]=na(this,p$),[s,l,o,h]=na(this,pZ),c=r*o,u=a*h,d=i*o+s,p=n*h+l,f=this.newOutliner({x:na(this,p2)[0]*c+d,y:na(this,p2)[1]*u+p},na(this,pZ),na(this,p3),e,na(this,p1),null!=t?t:na(this,p0));for(let e=2;e<na(this,p2).length;e+=2)f.add({x:na(this,p2)[e]*c+d,y:na(this,p2)[e+1]*u+p});return f.getOutlines()}constructor(e,t,i,n,r,a){super(),np(this,p5),nl(this,pZ,{writable:!0,value:void 0}),nl(this,p$,{writable:!0,value:new Float32Array(4)}),nl(this,p0,{writable:!0,value:void 0}),nl(this,p1,{writable:!0,value:void 0}),nl(this,p2,{writable:!0,value:void 0}),nl(this,p3,{writable:!0,value:void 0}),nl(this,p4,{writable:!0,value:void 0}),nh(this,p4,e),nh(this,p2,t),nh(this,pZ,i),nh(this,p3,n),nh(this,p0,r),nh(this,p1,a),this.lastPoint=[NaN,NaN],nd(this,p5,p9).call(this,a);let[s,l,o,h]=na(this,p$);for(let t=0,i=e.length;t<i;t+=2)e[t]=(e[t]-s)/o,e[t+1]=(e[t+1]-l)/h;for(let e=0,i=t.length;e<i;e+=2)t[e]=(t[e]-s)/o,t[e+1]=(t[e+1]-l)/h}}function p9(e){let t=na(this,p4),i=t[4],n=t[5],r=i,a=n,s=i,l=n,o=i,h=n,c=e?Math.max:Math.min;for(let e=6,u=t.length;e<u;e+=6){if(isNaN(t[e]))r=Math.min(r,t[e+4]),a=Math.min(a,t[e+5]),s=Math.max(s,t[e+4]),l=Math.max(l,t[e+5]),h<t[e+5]?(o=t[e+4],h=t[e+5]):h===t[e+5]&&(o=c(o,t[e+4]));else{let u=n5.bezierBoundingBox(i,n,...t.slice(e,e+6));r=Math.min(r,u[0]),a=Math.min(a,u[1]),s=Math.max(s,u[2]),l=Math.max(l,u[3]),h<u[3]?(o=u[2],h=u[3]):h===u[3]&&(o=c(o,u[2]))}i=t[e+4],n=t[e+5]}let u=na(this,p$);u[0]=r-na(this,p0),u[1]=a-na(this,p0),u[2]=s-r+2*na(this,p0),u[3]=l-a+2*na(this,p0),this.lastPoint=[o,h]}var p8=new WeakMap,p7=new WeakMap,fe=new WeakMap,ft=new WeakMap,fi=new WeakSet,fn=new WeakSet,fr=new WeakSet,fa=new WeakSet,fs=new WeakSet;class fl{getOutlines(){na(this,fe).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of na(this,fe))t[3]?(e.push(...nd(this,fs,fd).call(this,t)),nd(this,fr,fc).call(this,t)):(nd(this,fa,fu).call(this,t),e.push(...nd(this,fs,fd).call(this,t)));return nd(this,fi,fo).call(this,e)}constructor(e,t=0,i=0,n=!0){np(this,fi),np(this,fn),np(this,fr),np(this,fa),np(this,fs),nl(this,p8,{writable:!0,value:void 0}),nl(this,p7,{writable:!0,value:void 0}),nl(this,fe,{writable:!0,value:[]}),nl(this,ft,{writable:!0,value:[]});let r=1/0,a=-1/0,s=1/0,l=-1/0;for(let{x:i,y:n,width:o,height:h}of e){let e=1e-4*Math.floor((i-t)/1e-4),c=1e-4*Math.ceil((i+o+t)/1e-4),u=1e-4*Math.floor((n-t)/1e-4),d=1e-4*Math.ceil((n+h+t)/1e-4),p=[e,u,d,!0],f=[c,u,d,!1];na(this,fe).push(p,f),r=Math.min(r,e),a=Math.max(a,c),s=Math.min(s,u),l=Math.max(l,d)}let o=a-r+2*i,h=l-s+2*i,c=r-i,u=s-i,d=na(this,fe).at(n?-1:-2),p=[d[0],d[2]];for(let e of na(this,fe)){let[t,i,n]=e;e[0]=(t-c)/o,e[1]=(i-u)/h,e[2]=(n-u)/h}nh(this,p8,new Float32Array([c,u,o,h])),nh(this,p7,p)}}function fo(e){let t,i=[],n=new Set;for(let t of e){let[e,n,r]=t;i.push([e,n,t],[e,r,t])}i.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=i.length;e<t;e+=2){let t=i[e][2],r=i[e+1][2];t.push(r),r.push(t),n.add(t),n.add(r)}let r=[];for(;n.size>0;){let e=n.values().next().value,[i,a,s,l,o]=e;n.delete(e);let h=i,c=a;for(t=[i,s],r.push(t);;){let e;if(n.has(l))e=l;else if(n.has(o))e=o;else break;n.delete(e),[i,a,s,l,o]=e,h!==i&&(t.push(h,c,i,c===a?a:s),h=i),c=c===a?s:a}t.push(h,c)}return new fg(r,na(this,p8),na(this,p7))}function fh(e){let t=na(this,ft),i=0,n=t.length-1;for(;i<=n;){let r=i+n>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:n=r-1}return n+1}function fc(e){let[,t,i]=e,n=nd(this,fn,fh).call(this,t);na(this,ft).splice(n,0,[t,i])}function fu(e){let[,t,i]=e,n=nd(this,fn,fh).call(this,t);for(let e=n;e<na(this,ft).length;e++){let[n,r]=na(this,ft)[e];if(n!==t)break;if(n===t&&r===i)return void na(this,ft).splice(e,1)}for(let e=n-1;e>=0;e--){let[n,r]=na(this,ft)[e];if(n!==t)break;if(n===t&&r===i)return void na(this,ft).splice(e,1)}}function fd(e){let[t,i,n]=e,r=[[t,i,n]],a=nd(this,fn,fh).call(this,n);for(let e=0;e<a;e++){let[i,n]=na(this,ft)[e];for(let e=0,a=r.length;e<a;e++){let[,s,l]=r[e];if(!(n<=s)&&!(l<=i)){if(s>=i){if(l>n)r[e][1]=n;else{if(1===a)return[];r.splice(e,1),e--,a--}continue}r[e][2]=i,l>n&&r.push([t,n,l])}}}return r}var fp=new WeakMap,ff=new WeakMap;class fg extends px{toSVGPath(){let e=[];for(let t of na(this,ff)){let[i,n]=t;e.push("M".concat(i," ").concat(n));for(let r=2;r<t.length;r+=2){let a=t[r],s=t[r+1];a===i?(e.push("V".concat(s)),n=s):s===n&&(e.push("H".concat(a)),i=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[i,n,r,a]=e,s=[],l=r-i,o=a-n;for(let e of na(this,ff)){let t=Array(e.length);for(let n=0;n<e.length;n+=2)t[n]=i+e[n]*l,t[n+1]=a-e[n+1]*o;s.push(t)}return s}get box(){return na(this,fp)}get classNamesForOutlining(){return["highlightOutline"]}constructor(e,t,i){super(),nl(this,fp,{writable:!0,value:void 0}),nl(this,ff,{writable:!0,value:void 0}),nh(this,ff,e),nh(this,fp,t),this.lastPoint=i}}class fm extends pH{newFreeDrawOutline(e,t,i,n,r,a){return new fv(e,t,i,n,r,a)}}class fv extends p6{newOutliner(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new fm(e,t,i,n,r,a)}}var fb=new WeakMap,fw=new WeakMap,fy=new WeakMap,fx=new WeakMap,fA=new WeakMap,fk=new WeakMap,f_=new WeakMap,fS=new WeakMap,fE=new WeakMap,fM=new WeakMap,fC=new WeakMap,fT=new WeakSet,fP=new WeakSet,fR=new WeakSet,fI=new WeakSet,fL=new WeakSet,fD=new WeakMap;class fF{static get _keyboardManager(){return nV(this,"_keyboardManager",new ai([[["Escape","mac+Escape"],fF.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fF.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fF.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fF.prototype._moveToPrevious],[["Home","mac+Home"],fF.prototype._moveToBeginning],[["End","mac+End"],fF.prototype._moveToEnd]]))}renderButton(){let e=nh(this,fb,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=na(this,fM)._signal;e.addEventListener("click",nd(this,fI,fB).bind(this),{signal:t}),e.addEventListener("keydown",nd(this,fR,fj).bind(this),{signal:t});let i=nh(this,fw,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=na(this,fy),e.append(i),e}renderMainDropdown(){let e=nh(this,fx,nd(this,fT,fO).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===na(this,fb))return void nd(this,fI,fB).call(this,e);let t=e.target.getAttribute("data-color");t&&nd(this,fP,fW).call(this,t,e)}_moveToNext(e){var t,i;if(!na(this,fD))return void nd(this,fI,fB).call(this,e);if(e.target===na(this,fb)){null==(i=na(this,fx).firstChild)||i.focus();return}null==(t=e.target.nextSibling)||t.focus()}_moveToPrevious(e){var t,i;if(e.target===(null==(t=na(this,fx))?void 0:t.firstChild)||e.target===na(this,fb)){na(this,fD)&&this._hideDropdownFromKeyboard();return}na(this,fD)||nd(this,fI,fB).call(this,e),null==(i=e.target.previousSibling)||i.focus()}_moveToBeginning(e){var t;if(!na(this,fD))return void nd(this,fI,fB).call(this,e);null==(t=na(this,fx).firstChild)||t.focus()}_moveToEnd(e){var t;if(!na(this,fD))return void nd(this,fI,fB).call(this,e);null==(t=na(this,fx).lastChild)||t.focus()}hideDropdown(){var e,t;null==(e=na(this,fx))||e.classList.add("hidden"),null==(t=na(this,fE))||t.abort(),nh(this,fE,null)}_hideDropdownFromKeyboard(){if(!na(this,fk)){if(!na(this,fD)){var e;null==(e=na(this,f_))||e.unselect();return}this.hideDropdown(),na(this,fb).focus({preventScroll:!0,focusVisible:na(this,fA)})}}updateColor(e){if(na(this,fw)&&(na(this,fw).style.backgroundColor=e),!na(this,fx))return;let t=na(this,fM).highlightColors.values();for(let i of na(this,fx).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null==(e=na(this,fb))||e.remove(),nh(this,fb,null),nh(this,fw,null),null==(t=na(this,fx))||t.remove(),nh(this,fx,null)}constructor({editor:e=null,uiManager:t=null}){var i;np(this,fT),np(this,fP),np(this,fR),np(this,fI),np(this,fL),nl(this,fD,{get:fH,set:void 0}),nl(this,fb,{writable:!0,value:null}),nl(this,fw,{writable:!0,value:null}),nl(this,fy,{writable:!0,value:void 0}),nl(this,fx,{writable:!0,value:null}),nl(this,fA,{writable:!0,value:!1}),nl(this,fk,{writable:!0,value:!1}),nl(this,f_,{writable:!0,value:null}),nl(this,fS,{writable:!0,value:void 0}),nl(this,fE,{writable:!0,value:null}),nl(this,fM,{writable:!0,value:null}),nl(this,fC,{writable:!0,value:void 0}),e?(nh(this,fk,!1),nh(this,fC,nP.HIGHLIGHT_COLOR),nh(this,f_,e)):(nh(this,fk,!0),nh(this,fC,nP.HIGHLIGHT_DEFAULT_COLOR)),nh(this,fM,(null==e?void 0:e._uiManager)||t),nh(this,fS,na(this,fM)._eventBus),nh(this,fy,(null==e?void 0:e.color)||(null==(i=na(this,fM))?void 0:i.highlightColors.values().next().value)||"#FFFF98"),nv(fF,fF,fN,nm(fF,fF,fN)||Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}}var fN={writable:!0,value:null};function fO(){let e=document.createElement("div"),t=na(this,fM)._signal;for(let[i,n]of(e.addEventListener("contextmenu",rp,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),na(this,fM).highlightColors)){let r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",nm(fF,fF,fN)[i]);let a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===na(this,fy)),r.addEventListener("click",nd(this,fP,fW).bind(this,n),{signal:t}),e.append(r)}return e.addEventListener("keydown",nd(this,fR,fj).bind(this),{signal:t}),e}function fW(e,t){t.stopPropagation(),na(this,fS).dispatch("switchannotationeditorparams",{source:this,type:na(this,fC),value:e})}function fj(e){fF._keyboardManager.exec(this,e)}function fB(e){if(na(this,fD))return void this.hideDropdown();if(nh(this,fA,0===e.detail),na(this,fE)||(nh(this,fE,new AbortController),window.addEventListener("pointerdown",nd(this,fL,fz).bind(this),{signal:na(this,fM).combinedSignal(na(this,fE))})),na(this,fx))return void na(this,fx).classList.remove("hidden");let t=nh(this,fx,nd(this,fT,fO).call(this));na(this,fb).append(t)}function fz(e){var t;null!=(t=na(this,fx))&&t.contains(e.target)||this.hideDropdown()}function fH(){return na(this,fx)&&!na(this,fx).classList.contains("hidden")}var fU=new WeakMap,fG=new WeakMap,fV=new WeakMap,fq=new WeakMap,fX=new WeakMap,fK=new WeakMap,fY=new WeakMap,fQ=new WeakMap,fJ=new WeakMap,fZ=new WeakMap,f$=new WeakMap,f0=new WeakMap,f1=new WeakMap,f2=new WeakMap,f3=new WeakMap,f4=new WeakMap,f5=new WeakMap,f6=new WeakMap,f9=new WeakSet,f8=new WeakSet,f7=new WeakSet,ge=new WeakSet,gt=new WeakSet,gi=new WeakSet,gn=new WeakSet,gr=new WeakSet,ga=new WeakSet,gs=new WeakSet,gl=new WeakSet,go=new WeakSet,gh=new WeakSet;class gc extends lB{static get _keyboardManager(){let e=gc.prototype;return nV(this,"_keyboardManager",new ai([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:na(this,f0)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:na(this,f5),methodOfCreation:na(this,f6)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var i;lB.initialize(e,t),gc._defaultColor||(gc._defaultColor=(null==(i=t.highlightColors)?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case nP.HIGHLIGHT_DEFAULT_COLOR:gc._defaultColor=t;break;case nP.HIGHLIGHT_THICKNESS:gc._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return na(this,f1)}updateParams(e,t){switch(e){case nP.HIGHLIGHT_COLOR:nd(this,f7,gp).call(this,t);break;case nP.HIGHLIGHT_THICKNESS:nd(this,ge,gf).call(this,t)}}static get defaultPropertiesToUpdate(){return[[nP.HIGHLIGHT_DEFAULT_COLOR,gc._defaultColor],[nP.HIGHLIGHT_THICKNESS,gc._defaultThickness]]}get propertiesToUpdate(){return[[nP.HIGHLIGHT_COLOR,this.color||gc._defaultColor],[nP.HIGHLIGHT_THICKNESS,na(this,f5)||gc._defaultThickness],[nP.HIGHLIGHT_FREE,na(this,f0)]]}async addEditToolbar(){let e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(nh(this,fX,new fF({editor:this})),e.addColorPicker(na(this,fX))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(nd(this,gs,gx).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,nd(this,gs,gx).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){nd(this,gi,gm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(nd(this,gn,gv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)nd(this,gi,gm).call(this);else if(e){var i;nd(this,gn,gv).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){let t,{drawLayer:i}=this.parent;na(this,f0)?(e=(e-this.rotation+360)%360,t=(nf(gc,gc),gb).call(gc,na(this,fZ).box,e)):t=(nf(gc,gc),gb).call(gc,[this.x,this.y,this.width,this.height],e),i.updateProperties(na(this,f$),{bbox:t,root:{"data-main-rotation":e}}),i.updateProperties(na(this,f3),{bbox:(nf(gc,gc),gb).call(gc,na(this,fK).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();na(this,f4)&&(e.setAttribute("aria-label",na(this,f4)),e.setAttribute("role","mark")),na(this,f0)?e.classList.add("free"):this.div.addEventListener("keydown",nd(this,gr,gw).bind(this),{signal:this._uiManager._signal});let t=nh(this,fJ,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=na(this,fq);let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),rJ(this,na(this,fJ),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(na(this,f3),{rootClass:{hovered:!0}})}}pointerleave(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties(na(this,f3),{rootClass:{hovered:!1}})}}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:nd(this,ga,gy).call(this,!0);break;case 1:case 3:nd(this,ga,gy).call(this,!1)}}select(){var e;super.select(),na(this,f3)&&(null==(e=this.parent)||e.drawLayer.updateProperties(na(this,f3),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),na(this,f3)&&(null==(e=this.parent)||e.drawLayer.updateProperties(na(this,f3),{rootClass:{selected:!1}}),na(this,f0)||nd(this,ga,gy).call(this,!1))}get _mustFixPosition(){return!na(this,f0)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(na(this,f$),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(na(this,f3),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,i){let{target:n,x:r,y:a}=i,{x:s,y:l,width:o,height:h}=n.getBoundingClientRect(),c=new AbortController,u=e.combinedSignal(c),d=t=>{c.abort(),(nf(this,gc),gS).call(gc,e,t)};window.addEventListener("blur",d,{signal:u}),window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("pointerdown",rf,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",rp,{signal:u}),n.addEventListener("pointermove",(nf(this,gc),g_).bind(this,e),{signal:u}),this._freeHighlight=new fm({x:r,y:a},[s,l,o,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,t,i){let n=null;if(e instanceof dG){let{data:{quadPoints:t,rect:i,rotation:r,id:a,color:s,opacity:l,popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nT.HIGHLIGHT,color:Array.from(s),opacity:l,quadPoints:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}else if(e instanceof dH){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,borderStyle:{rawWidth:l},popupRef:o},parent:{page:{pageNumber:h}}}=e;n=e={annotationType:nT.HIGHLIGHT,color:Array.from(s),thickness:l,inkLists:t,boxes:null,pageIndex:h-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:o}}let{color:r,quadPoints:a,inkLists:s,opacity:l}=e,o=await super.deserialize(e,t,i);o.color=n5.makeHexColor(...r),nh(o,f2,l||1),s&&nh(o,f5,e.thickness),o.annotationElementId=e.id||null,o._initialData=n;let[h,c]=o.pageDimensions,[u,d]=o.pageTranslation;if(a){let e=nh(o,fV,[]);for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-u)/h,y:1-(a[t+1]-d)/c,width:(a[t+2]-a[t])/h,height:(a[t+1]-a[t+5])/c});nd(o,f9,gu).call(o),nd(o,gn,gv).call(o),o.rotate(o.rotation)}else if(s){nh(o,f0,!0);let e=s[0],i={x:e[0]-u,y:c-(e[1]-d)},n=new fm(i,[0,0,h,c],1,na(o,f5)/2,!0,.001);for(let t=0,r=e.length;t<r;t+=2)i.x=e[t]-u,i.y=c-(e[t+1]-d),n.add(i);let{id:r,clipPathId:a}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:o.color,"fill-opacity":o._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:n.toSVGPath()}},!0,!0);nd(o,f8,gd).call(o,{highlightOutlines:n.getOutlines(),highlightId:r,clipPathId:a}),nd(o,gn,gv).call(o)}return o}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),i=lB._colorManager.convert(this.color),n={annotationType:nT.HIGHLIGHT,color:i,opacity:na(this,f2),thickness:na(this,f5),quadPoints:nd(this,gl,gA).call(this),outlines:nd(this,go,gk).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:nd(this,gs,gx).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!nd(this,gh,gE).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super({...e,name:"highlightEditor"}),np(this,f9),np(this,f8),np(this,f7),np(this,ge),np(this,gt),np(this,gi),np(this,gn),np(this,gr),np(this,ga),np(this,gs),np(this,gl),np(this,go),np(this,gh),nl(this,fU,{writable:!0,value:null}),nl(this,fG,{writable:!0,value:0}),nl(this,fV,{writable:!0,value:void 0}),nl(this,fq,{writable:!0,value:null}),nl(this,fX,{writable:!0,value:null}),nl(this,fK,{writable:!0,value:null}),nl(this,fY,{writable:!0,value:null}),nl(this,fQ,{writable:!0,value:0}),nl(this,fJ,{writable:!0,value:null}),nl(this,fZ,{writable:!0,value:null}),nl(this,f$,{writable:!0,value:null}),nl(this,f0,{writable:!0,value:!1}),nl(this,f1,{writable:!0,value:null}),nl(this,f2,{writable:!0,value:void 0}),nl(this,f3,{writable:!0,value:null}),nl(this,f4,{writable:!0,value:""}),nl(this,f5,{writable:!0,value:void 0}),nl(this,f6,{writable:!0,value:""}),this.color=e.color||gc._defaultColor,nh(this,f5,e.thickness||gc._defaultThickness),nh(this,f2,e.opacity||gc._defaultOpacity),nh(this,fV,e.boxes||null),nh(this,f6,e.methodOfCreation||""),nh(this,f4,e.text||""),this._isDraggable=!1,e.highlightId>-1?(nh(this,f0,!0),nd(this,f8,gd).call(this,e),nd(this,gn,gv).call(this)):na(this,fV)&&(nh(this,fU,e.anchorNode),nh(this,fG,e.anchorOffset),nh(this,fY,e.focusNode),nh(this,fQ,e.focusOffset),nd(this,f9,gu).call(this),nd(this,gn,gv).call(this),this.rotate(this.rotation))}}function gu(){nh(this,fZ,new fl(na(this,fV),.001).getOutlines()),[this.x,this.y,this.width,this.height]=na(this,fZ).box,nh(this,fK,new fl(na(this,fV),.0025,.001,"ltr"===this._uiManager.direction).getOutlines());let{lastPoint:e}=na(this,fK);nh(this,f1,[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height])}function gd(e){let{highlightOutlines:t,highlightId:i,clipPathId:n}=e;if(nh(this,fZ,t),nh(this,fK,t.getNewOutline(na(this,f5)/2+1.5,.0025)),i>=0)nh(this,f$,i),nh(this,fq,n),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),nh(this,f3,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:na(this,fK).box,path:{d:na(this,fK).toSVGPath()}},!0));else if(this.parent){let e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(na(this,f$),{bbox:(nf(gc,gc),gb).call(gc,na(this,fZ).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(na(this,f3),{bbox:(nf(gc,gc),gb).call(gc,na(this,fK).box,e),path:{d:na(this,fK).toSVGPath()}})}let[r,a,s,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=s,this.height=l;break;case 90:{let[e,t]=this.parentDimensions;this.x=a,this.y=1-r,this.width=s*t/e,this.height=l*e/t;break}case 180:this.x=1-r,this.y=1-a,this.width=s,this.height=l;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-a,this.y=r,this.width=s*t/e,this.height=l*e/t}}let{lastPoint:o}=na(this,fK);nh(this,f1,[(o[0]-r)/s,(o[1]-a)/l])}function gp(e){let t=(e,t)=>{var i,n;this.color=e,nh(this,f2,t),null==(i=this.parent)||i.drawLayer.updateProperties(na(this,f$),{root:{fill:e,"fill-opacity":t}}),null==(n=na(this,fX))||n.updateColor(e)},i=this.color,n=na(this,f2);this.addCommands({cmd:t.bind(this,e,gc._defaultOpacity),undo:t.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nP.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function gf(e){let t=na(this,f5),i=e=>{nh(this,f5,e),nd(this,gt,gg).call(this,e)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nP.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function gg(e){if(!na(this,f0))return;nd(this,f8,gd).call(this,{highlightOutlines:na(this,fZ).getNewOutline(e/2)}),this.fixAndSetPosition();let[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}function gm(){null!==na(this,f$)&&this.parent&&(this.parent.drawLayer.remove(na(this,f$)),nh(this,f$,null),this.parent.drawLayer.remove(na(this,f3)),nh(this,f3,null))}function gv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===na(this,f$)&&({id:ny(this,f$).value,clipPathId:ny(this,fq).value}=e.drawLayer.draw({bbox:na(this,fZ).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":na(this,f2)},rootClass:{highlight:!0,free:na(this,f0)},path:{d:na(this,fZ).toSVGPath()}},!1,!0),nh(this,f3,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:na(this,f0)},bbox:na(this,fK).box,path:{d:na(this,fK).toSVGPath()}},na(this,f0))),na(this,fJ)&&(na(this,fJ).style.clipPath=na(this,fq)))}function gb(e,t){let[i,n,r,a]=e;switch(t){case 90:return[1-n-a,i,a,r];case 180:return[1-i-r,1-n-a,r,a];case 270:return[n,1-i-r,a,r]}return[i,n,r,a]}function gw(e){gc._keyboardManager.exec(this,e)}function gy(e){if(!na(this,fU))return;let t=window.getSelection();e?t.setPosition(na(this,fU),na(this,fG)):t.setPosition(na(this,fY),na(this,fQ))}function gx(){return na(this,f0)?this.rotation:0}function gA(){if(na(this,f0))return null;let[e,t]=this.pageDimensions,[i,n]=this.pageTranslation,r=na(this,fV),a=new Float32Array(8*r.length),s=0;for(let{x:l,y:o,width:h,height:c}of r){let r=l*e+i,u=(1-o)*t+n;a[s]=a[s+4]=r,a[s+1]=a[s+3]=u,a[s+2]=a[s+6]=r+h*e,a[s+5]=a[s+7]=u-c*t,s+=8}return a}function gk(e){return na(this,fZ).serialize(e,nd(this,gs,gx).call(this))}function g_(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function gS(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function gE(e){let{color:t}=this._initialData;return e.color.some((e,i)=>e!==t[i])}(0,nw._)(gc,"_defaultColor",null),(0,nw._)(gc,"_defaultOpacity",1),(0,nw._)(gc,"_defaultThickness",12),(0,nw._)(gc,"_type","highlight"),(0,nw._)(gc,"_editorType",nT.HIGHLIGHT),(0,nw._)(gc,"_freeHighlightId",-1),(0,nw._)(gc,"_freeHighlight",null),(0,nw._)(gc,"_freeHighlightClipId","");var gM=new WeakMap;class gC{updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){na(this,gM)[e]=t}toSVGProperties(){let e=na(this,gM);return nh(this,gM,Object.create(null)),{root:e}}reset(){nh(this,gM,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){nH("Not implemented")}constructor(){nl(this,gM,{writable:!0,value:Object.create(null)})}}var gT=new WeakMap,gP=new WeakMap,gR=new WeakSet,gI=new WeakSet,gL=new WeakSet,gD=new WeakSet,gF=new WeakSet,gN=new WeakSet,gO=new WeakSet,gW=new WeakSet;class gj extends lB{static _mergeSVGProperties(e,t){let i=new Set(Object.keys(e));for(let[n,r]of Object.entries(t))i.has(n)?Object.assign(e[n],r):e[n]=r;return e}static getDefaultDrawingOptions(e){nH("Not implemented")}static get typesMap(){nH("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(nm(gj,gj,gB).updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){let e=[],t=this._defaultDrawingOptions;for(let[i,n]of this.typesMap)e.push([i,t[n]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:t}=this;for(let[i,n]of this.constructor.typesMap)e.push([i,t[n]]);return e}_updateProperty(e,t,i){let n=this._drawingOptions,r=n[t],a=e=>{var i;n.updateProperty(t,e);let r=na(this,gT).updateProperty(t,e);r&&nd(this,gO,g$).call(this,r),null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,n.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gj._mergeSVGProperties(na(this,gT).getPathResizingSVGProperties(nd(this,gN,gZ).call(this)),{bbox:nd(this,gW,g0).call(this)}))}_onResized(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gj._mergeSVGProperties(na(this,gT).getPathResizedSVGProperties(nd(this,gN,gZ).call(this)),{bbox:nd(this,gW,g0).call(this)}))}_onTranslating(e,t){var i;null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,{bbox:nd(this,gW,g0).call(this,e,t)})}_onTranslated(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,gj._mergeSVGProperties(na(this,gT).getPathTranslatedSVGProperties(nd(this,gN,gZ).call(this),this.parentDimensions),{bbox:nd(this,gW,g0).call(this)}))}_onStartDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,na(this,gP)&&(nh(this,gP,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){nd(this,gL,gY).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(nd(this,gD,gQ).call(this),nd(this,gO,g$).call(this,na(this,gT).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),nd(this,gL,gY).call(this);else if(e){var i;this._uiManager.addShouldRescale(this),nd(this,gD,gQ).call(this,e),t=!this.parent&&(null==(i=this.div)?void 0:i.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gj._mergeSVGProperties({bbox:nd(this,gW,g0).call(this)},na(this,gT).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&nd(this,gO,g$).call(this,na(this,gT).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e=super.render();e.classList.add("draw");let t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,i,n,r){nH("Not implemented")}static startDrawing(e,t,i,n){var r,a;let{target:s,offsetX:l,offsetY:o,pointerId:h,pointerType:c}=n;if(nm(gj,gj,gG)&&nm(gj,gj,gG)!==c)return;let{viewport:{rotation:u}}=e,{width:d,height:p}=s.getBoundingClientRect(),f=nv(gj,gj,gz,new AbortController),g=e.combinedSignal(f);if(nv(gj,gj,gU,nm(gj,gj,gU)||h),nv(gj,gj,gG,null!=(a=nm(gj,gj,gG))?a:c),window.addEventListener("pointerup",e=>{if(nm(gj,gj,gU)===e.pointerId)this._endDraw(e);else{var t;null==(t=nm(gj,gj,gV))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointercancel",e=>{if(nm(gj,gj,gU)===e.pointerId)this._currentParent.endDrawingSession();else{var t;null==(t=nm(gj,gj,gV))||t.delete(e.pointerId)}},{signal:g}),window.addEventListener("pointerdown",e=>{nm(gj,gj,gG)===e.pointerType&&(nv(gj,gj,gV,nm(gj,gj,gV)||new Set).add(e.pointerId),nm(gj,gj,gB).isCancellable()&&(nm(gj,gj,gB).removeLastElement(),nm(gj,gj,gB).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",rp,{signal:g}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),s.addEventListener("touchmove",e=>{e.timeStamp===nm(gj,gj,gq)&&rf(e)},{signal:g}),e.toggleDrawing(),null==(r=t._editorUndoBar)||r.hide(),nm(gj,gj,gB))return void e.drawLayer.updateProperties(this._currentDrawId,nm(gj,gj,gB).startNew(l,o,d,p,u));t.updateUIForDefaultProperties(this),nv(gj,gj,gB,this.createDrawerInstance(l,o,d,p,u)),nv(gj,gj,gH,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(nm(gj,gj,gH).toSVGProperties(),nm(gj,gj,gB).defaultSVGProperties),!0,!1)}static _drawMove(e){var t;if(nv(gj,gj,gq,-1),!nm(gj,gj,gB))return;let{offsetX:i,offsetY:n,pointerId:r}=e;if(nm(gj,gj,gU)===r){if((null==(t=nm(gj,gj,gV))?void 0:t.size)>=1)return void this._endDraw(e);this._currentParent.drawLayer.updateProperties(this._currentDrawId,nm(gj,gj,gB).add(i,n)),nv(gj,gj,gq,e.timeStamp),rf(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,nv(gj,gj,gB,null),nv(gj,gj,gH,null),nv(gj,gj,gG,null),nv(gj,gj,gq,NaN)),nm(gj,gj,gz)&&(nm(gj,gj,gz).abort(),nv(gj,gj,gz,null),nv(gj,gj,gU,NaN),nv(gj,gj,gV,null))}static _endDraw(e){let t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,nm(gj,gj,gB).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let e=nm(gj,gj,gB),i=this._currentDrawId,n=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,e.setLastElement(n))},undo:()=>{t.drawLayer.updateProperties(i,e.removeLastElement())},mustExec:!1,type:nP.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(nP.DRAW_STEP),!nm(gj,gj,gB).isEmpty()){let{pageDimensions:[i,n],scale:r}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:nm(gj,gj,gB).getOutlines(i*r,n*r,r,this._INNER_MARGIN),drawingOptions:nm(gj,gj,gH),mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,n,r,a){nH("Not implemented")}static async deserialize(e,t,i){let{rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:s}}=t.viewport,l=this.deserializeDraw(a,s,n,r,this._INNER_MARGIN,e),o=await super.deserialize(e,t,i);return o.createDrawingOptions(e),nd(o,gR,gX).call(o,{drawOutlines:l}),nd(o,gD,gQ).call(o),o.onScaleChanging(),o.rotate(),o}serializeDraw(e){let[t,i]=this.pageTranslation,[n,r]=this.pageDimensions;return na(this,gT).serialize([t,i,n,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super(e),np(this,gR),np(this,gI),np(this,gL),np(this,gD),np(this,gF),np(this,gN),np(this,gO),np(this,gW),nl(this,gT,{writable:!0,value:null}),nl(this,gP,{writable:!0,value:void 0}),(0,nw._)(this,"_drawId",null),nh(this,gP,e.mustBeCommitted||!1),e.drawOutlines&&(nd(this,gR,gX).call(this,e),nd(this,gD,gQ).call(this))}}(0,nw._)(gj,"_currentDrawId",-1),(0,nw._)(gj,"_currentParent",null);var gB={writable:!0,value:null},gz={writable:!0,value:null},gH={writable:!0,value:null},gU={writable:!0,value:NaN},gG={writable:!0,value:null},gV={writable:!0,value:null},gq={writable:!0,value:NaN};function gX(e){let{drawOutlines:t,drawId:i,drawingOptions:n}=e;nh(this,gT,t),this._drawingOptions||(this._drawingOptions=n),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=nd(this,gI,gK).call(this,t,this.parent),nd(this,gO,g$).call(this,t.box)}function gK(e,t){let{id:i}=t.drawLayer.draw(gj._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}function gY(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function gQ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===this._drawId||this.parent!==e){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);this._drawingOptions.updateAll(),this._drawId=nd(this,gI,gK).call(this,na(this,gT),e)}}function gJ(e){let[t,i,n,r]=e,{parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[i,1-t,s/a*n,a/s*r];case 180:return[1-t,1-i,n,r];case 270:return[1-i,t,s/a*n,a/s*r];default:return[t,i,n,r]}}function gZ(){let{x:e,y:t,width:i,height:n,parentDimensions:[r,a],rotation:s}=this;switch(s){case 90:return[1-t,e,r/a*i,a/r*n];case 180:return[1-e,1-t,i,n];case 270:return[t,1-e,r/a*i,a/r*n];default:return[e,t,i,n]}}function g$(e){if([this.x,this.y,this.width,this.height]=nd(this,gF,gJ).call(this,e),this.div){this.fixAndSetPosition();let[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function g0(){let{x:e,y:t,width:i,height:n,rotation:r,parentRotation:a,parentDimensions:[s,l]}=this;switch((4*r+a)/90){case 1:return[1-t-n,e,n,i];case 2:return[1-e-i,1-t-n,i,n];case 3:return[t,1-e-i,n,i];case 4:return[e,t-s/l*i,l/s*n,s/l*i];case 5:return[1-t,e,s/l*i,l/s*n];case 6:return[1-e-l/s*n,1-t,l/s*n,s/l*i];case 7:return[t-s/l*i,1-e-l/s*n,s/l*i,l/s*n];case 8:return[e-i,t-n,i,n];case 9:return[1-t,e-i,n,i];case 10:return[1-e,1-t,i,n];case 11:return[t-n,1-e,n,i];case 12:return[e-l/s*n,t,l/s*n,s/l*i];case 13:return[1-t-s/l*i,e-l/s*n,s/l*i,l/s*n];case 14:return[1-e,1-t-s/l*i,l/s*n,s/l*i];case 15:return[t,1-e,s/l*i,l/s*n];default:return[e,t,i,n]}}(0,nw._)(gj,"_INNER_MARGIN",3);var g1=new WeakMap,g2=new WeakMap,g3=new WeakMap,g4=new WeakMap,g5=new WeakMap,g6=new WeakMap,g9=new WeakMap,g8=new WeakMap,g7=new WeakMap,me=new WeakMap,mt=new WeakMap,mi=new WeakSet;class mn{updateProperty(e,t){"stroke-width"===e&&nh(this,g5,t)}isEmpty(){return!na(this,g3)||0===na(this,g3).length}isCancellable(){return na(this,g6).length<=10}add(e,t){[e,t]=nd(this,mi,mr).call(this,e,t);let[i,n,r,a]=na(this,g1).subarray(2,6),s=e-r,l=t-a;return 2>=Math.hypot(na(this,me)*s,na(this,mt)*l)?null:((na(this,g6).push(e,t),isNaN(i))?(na(this,g1).set([r,a,e,t],2),na(this,g2).push(NaN,NaN,NaN,NaN,e,t)):(isNaN(na(this,g1)[0])&&na(this,g2).splice(6,6),na(this,g1).set([i,n,r,a,e,t],0),na(this,g2).push(...px.createBezierPoints(i,n,r,a,e,t))),{path:{d:this.toSVGPath()}})}end(e,t){let i=this.add(e,t);return i||(2===na(this,g6).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,r){nh(this,me,i),nh(this,mt,n),nh(this,g4,r),[e,t]=nd(this,mi,mr).call(this,e,t);let a=nh(this,g2,[NaN,NaN,NaN,NaN,e,t]);nh(this,g6,[e,t]);let s=na(this,g3).at(-1);return s&&(s.line=new Float32Array(s.line),s.points=new Float32Array(s.points)),na(this,g3).push({line:a,points:na(this,g6)}),na(this,g1).set(a,0),nh(this,g8,0),this.toSVGPath(),null}getLastElement(){return na(this,g3).at(-1)}setLastElement(e){return na(this,g3)?(na(this,g3).push(e),nh(this,g2,e.line),nh(this,g6,e.points),nh(this,g8,0),{path:{d:this.toSVGPath()}}):na(this,g7).setLastElement(e)}removeLastElement(){if(!na(this,g3))return na(this,g7).removeLastElement();na(this,g3).pop(),nh(this,g9,"");for(let e=0,t=na(this,g3).length;e<t;e++){let{line:t,points:i}=na(this,g3)[e];nh(this,g2,t),nh(this,g6,i),nh(this,g8,0),this.toSVGPath()}return{path:{d:na(this,g9)}}}toSVGPath(){let e=px.svgRound(na(this,g2)[4]),t=px.svgRound(na(this,g2)[5]);if(2===na(this,g6).length)return nh(this,g9,"".concat(na(this,g9)," M ").concat(e," ").concat(t," Z")),na(this,g9);if(na(this,g6).length<=6){let i=na(this,g9).lastIndexOf("M");nh(this,g9,"".concat(na(this,g9).slice(0,i)," M ").concat(e," ").concat(t)),nh(this,g8,6)}if(4===na(this,g6).length){let e=px.svgRound(na(this,g2)[10]),t=px.svgRound(na(this,g2)[11]);return nh(this,g9,"".concat(na(this,g9)," L ").concat(e," ").concat(t)),nh(this,g8,12),na(this,g9)}let i=[];0===na(this,g8)&&(i.push("M ".concat(e," ").concat(t)),nh(this,g8,6));for(let e=na(this,g8),t=na(this,g2).length;e<t;e+=6){let[t,n,r,a,s,l]=na(this,g2).slice(e,e+6).map(px.svgRound);i.push("C".concat(t," ").concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l))}return nh(this,g9,na(this,g9)+i.join(" ")),nh(this,g8,na(this,g2).length),na(this,g9)}getOutlines(e,t,i,n){let r=na(this,g3).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),na(this,g7).build(na(this,g3),e,t,i,na(this,g4),na(this,g5),n),nh(this,g1,null),nh(this,g2,null),nh(this,g3,null),nh(this,g9,null),na(this,g7)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}constructor(e,t,i,n,r,a){np(this,mi),nl(this,g1,{writable:!0,value:new Float64Array(6)}),nl(this,g2,{writable:!0,value:void 0}),nl(this,g3,{writable:!0,value:void 0}),nl(this,g4,{writable:!0,value:void 0}),nl(this,g5,{writable:!0,value:void 0}),nl(this,g6,{writable:!0,value:void 0}),nl(this,g9,{writable:!0,value:""}),nl(this,g8,{writable:!0,value:0}),nl(this,g7,{writable:!0,value:new mb}),nl(this,me,{writable:!0,value:void 0}),nl(this,mt,{writable:!0,value:void 0}),nh(this,me,i),nh(this,mt,n),nh(this,g4,r),nh(this,g5,a),[e,t]=nd(this,mi,mr).call(this,e,t);let s=nh(this,g2,[NaN,NaN,NaN,NaN,e,t]);nh(this,g6,[e,t]),nh(this,g3,[{line:s,points:na(this,g6)}]),na(this,g1).set(s,0)}}function mr(e,t){return px._normalizePoint(e,t,na(this,me),na(this,mt),na(this,g4))}var ma=new WeakMap,ms=new WeakMap,ml=new WeakMap,mo=new WeakMap,mh=new WeakMap,mc=new WeakMap,mu=new WeakMap,md=new WeakMap,mp=new WeakMap,mf=new WeakSet,mg=new WeakSet,mm=new WeakSet,mv=new WeakSet;class mb extends px{build(e,t,i,n,r,a,s){nh(this,mh,t),nh(this,mc,i),nh(this,mu,n),nh(this,md,r),nh(this,mp,a),nh(this,ml,null!=s?s:0),nh(this,mo,e),nd(this,mm,mx).call(this)}setLastElement(e){return na(this,mo).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return na(this,mo).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of na(this,mo)){if(e.push("M".concat(px.svgRound(t[4])," ").concat(px.svgRound(t[5]))),6===t.length){e.push("Z");continue}if(12===t.length){e.push("L".concat(px.svgRound(t[10])," ").concat(px.svgRound(t[11])));continue}for(let i=6,n=t.length;i<n;i+=6){let[n,r,a,s,l,o]=t.subarray(i,i+6).map(px.svgRound);e.push("C".concat(n," ").concat(r," ").concat(a," ").concat(s," ").concat(l," ").concat(o))}}return e.join("")}serialize(e,t){let i,n,r,a,s,l,o,h,c,[u,d,p,f]=e,g=[],m=[],[b,w,y,x]=nd(this,mg,my).call(this);switch(na(this,md)){case 0:c=px._rescale,i=u,n=d+f,r=p,a=-f,s=u+b*p,l=d+(1-w-x)*f,o=u+(b+y)*p,h=d+(1-w)*f;break;case 90:c=px._rescaleAndSwap,i=u,n=d,r=p,a=f,s=u+w*p,l=d+b*f,o=u+(w+x)*p,h=d+(b+y)*f;break;case 180:c=px._rescale,i=u+p,n=d,r=-p,a=f,s=u+(1-b-y)*p,l=d+w*f,o=u+(1-b)*p,h=d+(w+x)*f;break;case 270:c=px._rescaleAndSwap,i=u+p,n=d+f,r=-p,a=-f,s=u+(1-w-x)*p,l=d+(1-b-y)*f,o=u+(1-w)*p,h=d+(1-b)*f}for(let{line:e,points:s}of na(this,mo))g.push(c(e,i,n,r,a,t?Array(e.length):null)),m.push(c(s,i,n,r,a,t?Array(s.length):null));return{lines:g,points:m,rect:[s,l,o,h]}}static deserialize(e,t,i,n,r,a){let s,l,o,h,c,{paths:{lines:u,points:d},rotation:p,thickness:f}=a,g=[];switch(p){case 0:c=px._rescale,s=-e/i,l=t/n+1,o=1/i,h=-1/n;break;case 90:c=px._rescaleAndSwap,s=-t/n,l=-e/i,o=1/n,h=1/i;break;case 180:c=px._rescale,s=e/i+1,l=-t/n,o=-1/i,h=1/n;break;case 270:c=px._rescaleAndSwap,s=t/n+1,l=e/i+1,o=-1/n,h=-1/i}if(!u)for(let e of(u=[],d)){let t=e.length;if(2===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){u.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}let i=new Float32Array(3*(t-2));u.push(i);let[n,r,a,s]=e.subarray(0,4);i.set([NaN,NaN,NaN,NaN,n,r],0);for(let l=4;l<t;l+=2){let t=e[l],o=e[l+1];i.set(px.createBezierPoints(n,r,a,s,t,o),(l-2)*3),[n,r,a,s]=[a,s,t,o]}}for(let e=0,t=u.length;e<t;e++)g.push({line:c(u[e].map(e=>null!=e?e:NaN),s,l,o,h),points:c(d[e].map(e=>null!=e?e:NaN),s,l,o,h)});let m=new mb;return m.build(g,i,n,1,p,f,r),m}get box(){return na(this,ma)}updateProperty(e,t){return"stroke-width"===e?nd(this,mv,mA).call(this,t):null}updateParentDimensions(e,t){let[i,n]=e,[r,a]=nd(this,mf,mw).call(this);nh(this,mh,i),nh(this,mc,n),nh(this,mu,t);let[s,l]=nd(this,mf,mw).call(this),o=s-r,h=l-a,c=na(this,ma);return c[0]-=o,c[1]-=h,c[2]+=2*o,c[3]+=2*h,c}updateRotation(e){return nh(this,ms,e),{path:{transform:this.rotationTransform}}}get viewBox(){return na(this,ma).map(px.svgRound).join(" ")}get defaultProperties(){let[e,t]=na(this,ma);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(px.svgRound(e)," ").concat(px.svgRound(t))}}}get rotationTransform(){let[,,e,t]=na(this,ma),i=0,n=0,r=0,a=0,s=0,l=0;switch(na(this,ms)){case 90:n=t/e,r=-e/t,s=e;break;case 180:i=-1,a=-1,s=e,l=t;break;case 270:n=-t/e,r=e/t,l=t;break;default:return""}return"matrix(".concat(i," ").concat(n," ").concat(r," ").concat(a," ").concat(px.svgRound(s)," ").concat(px.svgRound(l),")")}getPathResizingSVGProperties(e){let[t,i,n,r]=e,[a,s]=nd(this,mf,mw).call(this),[l,o,h,c]=na(this,ma);return Math.abs(h-a)<=px.PRECISION||Math.abs(c-s)<=px.PRECISION?{path:{"transform-origin":"".concat(px.svgRound(t)," ").concat(px.svgRound(i)),transform:"".concat(this.rotationTransform," translate(").concat(t+n/2-(l+h/2)," ").concat(i+r/2-(o+c/2),")")}}:{path:{"transform-origin":"".concat(px.svgRound(l)," ").concat(px.svgRound(o)),transform:"".concat(this.rotationTransform," scale(").concat(h/n," ").concat(c/r,") ")+"translate(".concat(px.svgRound(a)," ").concat(px.svgRound(s),") scale(").concat((n-2*a)/(h-2*a)," ").concat((r-2*s)/(c-2*s),") ")+"translate(".concat(px.svgRound(-a)," ").concat(px.svgRound(-s),")")}}}getPathResizedSVGProperties(e){let[t,i,n,r]=e,[a,s]=nd(this,mf,mw).call(this),l=na(this,ma),[o,h,c,u]=l;if(l[0]=t,l[1]=i,l[2]=n,l[3]=r,Math.abs(c-a)<=px.PRECISION||Math.abs(u-s)<=px.PRECISION){let e=t+n/2-(o+c/2),a=i+r/2-(h+u/2);for(let{line:t,points:i}of na(this,mo))px._translate(t,e,a,t),px._translate(i,e,a,i);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(px.svgRound(t)," ").concat(px.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(n-2*a)/(c-2*a),p=(r-2*s)/(u-2*s),f=-d*(o+a)+t+a,g=-p*(h+s)+i+s;if(1!==d||1!==p||0!==f||0!==g)for(let{line:e,points:t}of na(this,mo))px._rescale(e,f,g,d,p,e),px._rescale(t,f,g,d,p,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(px.svgRound(t)," ").concat(px.svgRound(i)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[i,n]=e,[r,a]=t,s=na(this,ma),l=i-s[0],o=n-s[1];if(na(this,mh)===r&&na(this,mc)===a)for(let{line:e,points:t}of na(this,mo))px._translate(e,l,o,e),px._translate(t,l,o,t);else{let e=na(this,mh)/r,t=na(this,mc)/a;for(let{line:i,points:n}of(nh(this,mh,r),nh(this,mc,a),na(this,mo)))px._rescale(i,l,o,e,t,i),px._rescale(n,l,o,e,t,n);s[2]*=e,s[3]*=t}return s[0]=i,s[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(px.svgRound(i)," ").concat(px.svgRound(n))}}}get defaultSVGProperties(){let e=na(this,ma);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(px.svgRound(e[0])," ").concat(px.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}constructor(...e){super(...e),np(this,mf),np(this,mg),np(this,mm),np(this,mv),nl(this,ma,{writable:!0,value:void 0}),nl(this,ms,{writable:!0,value:0}),nl(this,ml,{writable:!0,value:void 0}),nl(this,mo,{writable:!0,value:void 0}),nl(this,mh,{writable:!0,value:void 0}),nl(this,mc,{writable:!0,value:void 0}),nl(this,mu,{writable:!0,value:void 0}),nl(this,md,{writable:!0,value:void 0}),nl(this,mp,{writable:!0,value:void 0})}}function mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na(this,mp),t=na(this,ml)+e/2*na(this,mu);return na(this,md)%180==0?[t/na(this,mh),t/na(this,mc)]:[t/na(this,mc),t/na(this,mh)]}function my(){let[e,t,i,n]=na(this,ma),[r,a]=nd(this,mf,mw).call(this,0);return[e+r,t+a,i-2*r,n-2*a]}function mx(){let e=nh(this,ma,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:t}of na(this,mo)){if(t.length<=12){for(let i=4,n=t.length;i<n;i+=6){let[n,r]=t.subarray(i,i+2);e[0]=Math.min(e[0],n),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],n),e[3]=Math.max(e[3],r)}continue}let i=t[4],n=t[5];for(let r=6,a=t.length;r<a;r+=6){let[a,s,l,o,h,c]=t.subarray(r,r+6);n5.bezierBoundingBox(i,n,a,s,l,o,h,c,e),i=h,n=c}}let[t,i]=nd(this,mf,mw).call(this);e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}function mA(e){let[t,i]=nd(this,mf,mw).call(this);nh(this,mp,e);let[n,r]=nd(this,mf,mw).call(this),[a,s]=[n-t,r-i],l=na(this,ma);return l[0]-=a,l[1]-=s,l[2]+=2*a,l[3]+=2*s,l}var mk=new WeakMap;class m_ extends gC{updateSVGProperty(e,t){"stroke-width"===e&&(null!=t||(t=this["stroke-width"]),t*=na(this,mk).realScale),super.updateSVGProperty(e,t)}clone(){let e=new m_(na(this,mk));return e.updateAll(this),e}constructor(e){super(),nl(this,mk,{writable:!0,value:void 0}),nh(this,mk,e),super.updateProperties({fill:"none",stroke:lB._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}}var mS=new WeakSet;class mE extends gj{static initialize(e,t){lB.initialize(e,t),this._defaultDrawingOptions=new m_(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return nV(this,"typesMap",new Map([[nP.INK_THICKNESS,"stroke-width"],[nP.INK_COLOR,"stroke"],[nP.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,n,r){return new mn(e,t,i,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,n,r,a){return mb.deserialize(e,t,i,n,r,a)}static async deserialize(e,t,i){let n=null;if(e instanceof dH){let{data:{inkLists:t,rect:i,rotation:r,id:a,color:s,opacity:l,borderStyle:{rawWidth:o},popupRef:h},parent:{page:{pageNumber:c}}}=e;n=e={annotationType:nT.INK,color:Array.from(s),thickness:o,opacity:l,paths:{points:t},boxes:null,pageIndex:c-1,rect:i.slice(0),rotation:r,id:a,deleted:!1,popupRef:h}}let r=await super.deserialize(e,t,i);return r.annotationElementId=e.id||null,r._initialData=n,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:i,opacity:n}=e;this._drawingOptions=mE.getDefaultDrawingOptions({stroke:n5.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:i,rect:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":s}}=this,l={annotationType:nT.INK,color:lB._colorManager.convert(r),opacity:a,thickness:s,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!nd(this,mS,mM).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){let{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}constructor(e){super({...e,name:"inkEditor"}),np(this,mS),this._willKeepAspectRatio=!0}}function mM(e){let{color:t,thickness:i,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,i)=>e!==t[i])||e.thickness!==i||e.opacity!==n||e.pageIndex!==r}(0,nw._)(mE,"_type","ink"),(0,nw._)(mE,"_editorType",nT.INK),(0,nw._)(mE,"_defaultDrawingOptions",null);var mC=new WeakMap,mT=new WeakMap,mP=new WeakMap,mR=new WeakMap,mI=new WeakMap,mL=new WeakMap,mD=new WeakMap,mF=new WeakMap,mN=new WeakMap,mO=new WeakMap,mW=new WeakSet,mj=new WeakSet,mB=new WeakSet,mz=new WeakSet,mH=new WeakSet,mU=new WeakSet,mG=new WeakSet,mV=new WeakSet;class mq extends lB{static initialize(e,t){lB.initialize(e,t)}static get supportedTypes(){return nV(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/".concat(e)))}static get supportedTypesStr(){return nV(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(nT.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!(null==(e=this.altTextData)?void 0:e.altText)}}static computeTelemetryFinalData(e){var t,i;let n=e.get("hasAltText");return{hasAltText:null!=(t=n.get(!0))?t:0,hasNoAltText:null!=(i=n.get(!1))?i:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw Error("No ML.");if(!await i.isEnabledFor("altText"))throw Error("ML isn't enabled for alt text.");let{data:n,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,s=await i.guess({name:"altText",request:{data:n,width:r,height:a,channels:n.length/(r*a)}});if(!s)throw Error("No response from the AI service.");if(s.error)throw Error("Error from the AI service.");if(s.cancel)return null;if(!s.output)throw Error("No valid response from the AI service.");let l=s.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){if(na(this,mT)){var e;nh(this,mC,null),this._uiManager.imageManager.deleteId(na(this,mT)),null==(e=na(this,mD))||e.remove(),nh(this,mD,null),na(this,mF)&&(clearTimeout(na(this,mF)),nh(this,mF,null))}super.remove()}rebuild(){if(!this.parent){na(this,mT)&&nd(this,mB,mY).call(this);return}super.rebuild(),null!==this.div&&(na(this,mT)&&null===na(this,mD)&&nd(this,mB,mY).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(na(this,mP)||na(this,mC)||na(this,mR)||na(this,mI)||na(this,mT))}get isResizable(){return!0}render(){let e,t;if(this.div)return this.div;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),na(this,mC)?nd(this,mz,mQ).call(this):nd(this,mB,mY).call(this),this.width&&!this.annotationElementId){let[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==na(this,mF)&&clearTimeout(na(this,mF)),nh(this,mF,setTimeout(()=>{nh(this,mF,null),nd(this,mU,mZ).call(this)},200)))}copyCanvas(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);let{width:n,height:r}=na(this,mC),a=new rA,s=na(this,mC),l=n,o=r,h=null;if(t){var c,u;if(n>t||r>t){let e=Math.min(t/n,t/r);l=Math.floor(n*e),o=Math.floor(r*e)}let e=(h=document.createElement("canvas")).width=Math.ceil(l*a.sx),i=h.height=Math.ceil(o*a.sy);na(this,mN)||(s=nd(this,mH,mJ).call(this,e,i));let d=h.getContext("2d");d.filter=this._uiManager.hcmFilter;let p="white",f="#cfcfd8";"none"!==this._uiManager.hcmFilter?f="black":(null==(c=(u=window).matchMedia)?void 0:c.call(u,"(prefers-color-scheme: dark)").matches)&&(p="#8f8f9d",f="#42414d");let g=15*a.sx,m=15*a.sy,b=new OffscreenCanvas(2*g,2*m),w=b.getContext("2d");w.fillStyle=p,w.fillRect(0,0,2*g,2*m),w.fillStyle=f,w.fillRect(0,0,g,m),w.fillRect(g,m,g,m),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,e,i),d.drawImage(s,0,0,s.width,s.height,0,0,e,i)}let d=null;if(i){let t,i;if(a.symmetric&&s.width<e&&s.height<e)t=s.width,i=s.height;else if(s=na(this,mC),n>e||r>e){let a=Math.min(e/n,e/r);t=Math.floor(n*a),i=Math.floor(r*a),na(this,mN)||(s=nd(this,mH,mJ).call(this,t,i))}let l=new OffscreenCanvas(t,i).getContext("2d",{willReadFrequently:!0});l.drawImage(s,0,0,s.width,s.height,0,0,t,i),d={width:t,height:i,data:l.getImageData(0,0,t,i).data}}return{canvas:h,width:l,height:o,imageData:d}}getImageForAltText(){return na(this,mD)}static async deserialize(e,t,i){let n=null;if(e instanceof dK){var r;let{data:{rect:a,rotation:s,id:l,structParent:o,popupRef:h},container:c,parent:{page:{pageNumber:u}}}=e,d=c.querySelector("canvas"),p=i.imageManager.getFromCanvas(c.id,d);d.remove();let f=(null==(r=await t._structTree.getAriaAttributes("".concat(rt).concat(l)))?void 0:r.get("aria-label"))||"";n=e={annotationType:nT.STAMP,bitmapId:p.id,bitmap:p.bitmap,pageIndex:u-1,rect:a.slice(0),rotation:s,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:f},isSvg:!1,structParent:o,popupRef:h}}let a=await super.deserialize(e,t,i),{rect:s,bitmap:l,bitmapUrl:o,bitmapId:h,isSvg:c,accessibilityData:u}=e;h&&i.imageManager.isValidId(h)?(nh(a,mT,h),l&&nh(a,mC,l)):nh(a,mR,o),nh(a,mN,c);let[d,p]=a.pageDimensions;return a.width=(s[2]-s[0])/d,a.height=(s[3]-s[1])/p,a.annotationElementId=e.id||null,u&&(a.altTextData=u),a._initialData=n,nh(a,mO,!!n),a}serialize(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:nT.STAMP,bitmapId:na(this,mT),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:na(this,mN),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=nd(this,mG,m$).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let t=nd(this,mV,m0).call(this,n);if(t.isSame)return null;t.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=null!=(e=this._initialData.structParent)?e:-1}if(n.id=this.annotationElementId,null===i)return n;i.stamps||(i.stamps=new Map);let s=na(this,mN)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(i.stamps.has(na(this,mT))){if(na(this,mN)){let e=i.stamps.get(na(this,mT));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=nd(this,mG,m$).call(this,!1))}}else i.stamps.set(na(this,mT),{area:s,serialized:n}),n.bitmap=nd(this,mG,m$).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}constructor(e){super({...e,name:"stampEditor"}),np(this,mW),np(this,mj),np(this,mB),np(this,mz),np(this,mH),np(this,mU),np(this,mG),np(this,mV),nl(this,mC,{writable:!0,value:null}),nl(this,mT,{writable:!0,value:null}),nl(this,mP,{writable:!0,value:null}),nl(this,mR,{writable:!0,value:null}),nl(this,mI,{writable:!0,value:null}),nl(this,mL,{writable:!0,value:""}),nl(this,mD,{writable:!0,value:null}),nl(this,mF,{writable:!0,value:null}),nl(this,mN,{writable:!0,value:!1}),nl(this,mO,{writable:!0,value:!1}),nh(this,mR,e.bitmapUrl),nh(this,mI,e.bitmapFile)}}function mX(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void this.remove();nh(this,mC,e.bitmap),t||(nh(this,mT,e.id),nh(this,mN,e.isSvg)),e.file&&nh(this,mL,e.file.name),nd(this,mz,mQ).call(this)}function mK(){if(nh(this,mP,null),this._uiManager.enableWaiting(!1),na(this,mD)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&na(this,mC)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&na(this,mC)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function mY(){if(na(this,mT)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(na(this,mT)).then(e=>nd(this,mW,mX).call(this,e,!0)).finally(()=>nd(this,mj,mK).call(this));return}if(na(this,mR)){let e=na(this,mR);nh(this,mR,null),this._uiManager.enableWaiting(!0),nh(this,mP,this._uiManager.imageManager.getFromUrl(e).then(e=>nd(this,mW,mX).call(this,e)).finally(()=>nd(this,mj,mK).call(this)));return}if(na(this,mI)){let e=na(this,mI);nh(this,mI,null),this._uiManager.enableWaiting(!0),nh(this,mP,this._uiManager.imageManager.getFromFile(e).then(e=>nd(this,mW,mX).call(this,e)).finally(()=>nd(this,mj,mK).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=mq.supportedTypesStr;let t=this._uiManager._signal;nh(this,mP,new Promise(i=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),nd(this,mW,mX).call(this,t)}else this.remove();i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>nd(this,mj,mK).call(this))),e.click()}function mQ(){var e;let{div:t}=this,{width:i,height:n}=na(this,mC),[r,a]=this.pageDimensions;if(this.width)i=this.width*r,n=this.height*a;else if(i>.75*r||n>.75*a){let e=Math.min(.75*r/i,.75*a/n);i*=e,n*=e}let[s,l]=this.parentDimensions;this.setDims(i*s/r,n*l/a),this._uiManager.enableWaiting(!1);let o=nh(this,mD,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=i/r,this.height=n/a,(null==(e=this._initialOptions)?void 0:e.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),nd(this,mU,mZ).call(this),na(this,mO)||(this.parent.addUndoableEditor(this),nh(this,mO,!0)),this._reportTelemetry({action:"inserted_image"}),na(this,mL)&&o.setAttribute("aria-label",na(this,mL))}function mJ(e,t){let{width:i,height:n}=na(this,mC),r=i,a=n,s=na(this,mC);for(;r>2*e||a>2*t;){let i=r,n=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let l=new OffscreenCanvas(r,a);l.getContext("2d").drawImage(s,0,0,i,n,0,0,r,a),s=l.transferToImageBitmap()}return s}function mZ(){let[e,t]=this.parentDimensions,{width:i,height:n}=this,r=new rA,a=Math.ceil(i*e*r.sx),s=Math.ceil(n*t*r.sy),l=na(this,mD);if(!l||l.width===a&&l.height===s)return;l.width=a,l.height=s;let o=na(this,mN)?na(this,mC):nd(this,mH,mJ).call(this,a,s),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(o,0,0,o.width,o.height,0,0,a,s)}function m$(e){if(e){if(na(this,mN)){let e=this._uiManager.imageManager.getSvgUrl(na(this,mT));if(e)return e}let e=document.createElement("canvas");return{width:e.width,height:e.height}=na(this,mC),e.getContext("2d").drawImage(na(this,mC),0,0),e.toDataURL()}if(na(this,mN)){let[e,t]=this.pageDimensions,i=Math.round(this.width*e*rn.PDF_TO_CSS_UNITS),n=Math.round(this.height*t*rn.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(i,n);return r.getContext("2d").drawImage(na(this,mC),0,0,na(this,mC).width,na(this,mC).height,0,0,i,n),r.transferToImageBitmap()}return structuredClone(na(this,mC))}function m0(e){var t;let{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===i,a=((null==(t=e.accessibilityData)?void 0:t.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}(0,nw._)(mq,"_type","stamp"),(0,nw._)(mq,"_editorType",nT.STAMP);var m1=new WeakMap,m2=new WeakMap,m3=new WeakMap,m4=new WeakMap,m5=new WeakMap,m6=new WeakMap,m9=new WeakMap,m8=new WeakMap,m7=new WeakMap,ve=new WeakMap,vt=new WeakMap,vi=new WeakMap,vn=new WeakMap,vr=new WeakMap,va=new WeakSet,vs=new WeakMap,vl=new WeakSet,vo=new WeakSet,vh=new WeakSet;class vc{get isEmpty(){return 0===na(this,m6).size}get isInvisible(){return this.isEmpty&&na(this,vr).getMode()===nT.NONE}updateToolbar(e){na(this,vr).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na(this,vr).getMode();switch(nd(this,vh,vm).call(this),e){case nT.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case nT.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case nT.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;for(let i of nm(vc,vc,vu).values())t.toggle("".concat(i._type,"Editing"),e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=na(this,vi))?void 0:t.div)}setEditingState(e){na(this,vr).setEditingState(e)}addCommands(e){na(this,vr).addCommands(e)}cleanUndoStack(e){na(this,vr).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==(e=na(this,m3))||e.div.classList.toggle("disabled",!t)}async enable(){nh(this,m7,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let t of na(this,m6).values())t.enableEditing(),t.show(!0),t.annotationElementId&&(na(this,vr).removeChangedExistingAnnotation(t),e.add(t.annotationElementId));if(!na(this,m3))return void nh(this,m7,!1);for(let t of na(this,m3).getEditableAnnotations()){if(t.hide(),na(this,vr).isDeletedAnnotationElement(t.data.id)||e.has(t.data.id))continue;let i=await this.deserialize(t);i&&(this.addOrRebuild(i),i.enableEditing())}nh(this,m7,!1)}disable(){nh(this,m8,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,t=new Map;for(let n of na(this,m6).values()){var i;if(n.disableEditing(),n.annotationElementId){if(null!==n.serialize()){e.set(n.annotationElementId,n);continue}t.set(n.annotationElementId,n),null==(i=this.getEditableAnnotation(n.annotationElementId))||i.show(),n.remove()}}if(na(this,m3))for(let i of na(this,m3).getEditableAnnotations()){let{id:n}=i.data;if(na(this,vr).isDeletedAnnotationElement(n))continue;let r=t.get(n);if(r){r.resetAnnotationElement(i),r.show(!1),i.show();continue}(r=e.get(n))&&(na(this,vr).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show()}nd(this,vh,vm).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let e of nm(vc,vc,vu).values())n.remove("".concat(e._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),nh(this,m8,!1)}getEditableAnnotation(e){var t;return(null==(t=na(this,m3))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){na(this,vr).getActive()!==e&&na(this,vr).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(null==(e=na(this,vi))?void 0:e.div)&&!na(this,vn)){nh(this,vn,new AbortController);let e=na(this,vr).combinedSignal(na(this,vn));na(this,vi).div.addEventListener("pointerdown",nd(this,va,vd).bind(this),{signal:e}),na(this,vi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(null==(e=na(this,vi))?void 0:e.div)&&na(this,vn)&&(na(this,vn).abort(),nh(this,vn,null),na(this,vi).div.classList.remove("highlighting"))}enableClick(){if(na(this,m4))return;nh(this,m4,new AbortController);let e=na(this,vr).combinedSignal(na(this,m4));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null==(e=na(this,m4))||e.abort(),nh(this,m4,null)}attach(e){na(this,m6).set(e.id,e);let{annotationElementId:t}=e;t&&na(this,vr).isDeletedAnnotationElement(t)&&na(this,vr).removeDeletedAnnotationElement(e)}detach(e){var t;na(this,m6).delete(e.id),null==(t=na(this,m1))||t.removePointerInTextLayer(e.contentDiv),!na(this,m8)&&e.annotationElementId&&na(this,vr).addDeletedAnnotationElement(e)}remove(e){this.detach(e),na(this,vr).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(na(this,vr).addDeletedAnnotationElement(e.annotationElementId),lB.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),na(this,vr).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!na(this,m7)),na(this,vr).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!na(this,m5)&&(e._focusEventsAllowed=!1,nh(this,m5,setTimeout(()=>{nh(this,m5,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:na(this,vr)._signal}),i.focus())},0))),e._structTreeParentId=null==(t=na(this,m1))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return na(this,vr).getId()}combinedSignal(e){return na(this,vr).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null==(e=na(this,vs))?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){na(this,vr).updateToolbar(e),na(this,vr).updateMode(e);let{offsetX:i,offsetY:n}=nd(this,vo,vg).call(this),r=this.getNextId(),a=nd(this,vl,vf).call(this,{parent:this,id:r,x:i,y:n,uiManager:na(this,vr),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t,i;return await (null==(t=nm(vc,vc,vu).get(null!=(i=e.annotationType)?i:e.annotationEditorType))?void 0:t.deserialize(e,this,na(this,vr)))||null}createAndAddNewEditor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getNextId(),r=nd(this,vl,vf).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:na(this,vr),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(nd(this,vo,vg).call(this),!0)}setSelected(e){na(this,vr).setSelected(e)}toggleSelected(e){na(this,vr).toggleSelected(e)}unselect(e){na(this,vr).unselect(e)}pointerup(e){var t;let{isMac:i}=n3.platform;if(0===e.button&&(!e.ctrlKey||!i)&&e.target===this.div&&na(this,m9)&&(nh(this,m9,!1),null==(t=na(this,vs))||!t.isDrawer||!na(this,vs).supportMultipleDrawings)){if(!na(this,m2))return void nh(this,m2,!0);if(na(this,vr).getMode()===nT.STAMP)return void na(this,vr).unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){var t;if(na(this,vr).getMode()===nT.HIGHLIGHT&&this.enableTextSelection(),na(this,m9))return void nh(this,m9,!1);let{isMac:i}=n3.platform;if(0!==e.button||e.ctrlKey&&i||e.target!==this.div)return;if(nh(this,m9,!0),null==(t=na(this,vs))?void 0:t.isDrawer)return void this.startDrawingSession(e);let n=na(this,vr).getActive();nh(this,m2,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),na(this,ve))return void na(this,vs).startDrawing(this,na(this,vr),!1,e);na(this,vr).setCurrentDrawingSession(this),nh(this,ve,new AbortController);let t=na(this,vr).combinedSignal(na(this,ve));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(nh(this,vt,null),this.commitOrRemove())},{signal:t}),na(this,vs).startDrawing(this,na(this,vr),!1,e)}pause(e){if(e){let{activeElement:e}=document;this.div.contains(e)&&nh(this,vt,e);return}na(this,vt)&&setTimeout(()=>{var e;null==(e=na(this,vt))||e.focus(),nh(this,vt,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return na(this,ve)?(na(this,vr).setCurrentDrawingSession(null),na(this,ve).abort(),nh(this,ve,null),nh(this,vt,null),na(this,vs).endDrawing(e)):null}findNewParent(e,t,i){let n=na(this,vr).findParent(t,i);return null!==n&&n!==this&&(n.changeParent(e),!0)}commitOrRemove(){return!!na(this,ve)&&(this.endDrawingSession(),!0)}onScaleChanging(){na(this,ve)&&na(this,vs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;for(let i of(this.commitOrRemove(),(null==(e=na(this,vr).getActive())?void 0:e.parent)===this&&(na(this,vr).commitOrRemove(),na(this,vr).setActiveEditor(null)),na(this,m5)&&(clearTimeout(na(this,m5)),nh(this,m5,null)),na(this,m6).values()))null==(t=na(this,m1))||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,na(this,m6).clear(),na(this,vr).removeLayer(this)}render(e){let{viewport:t}=e;for(let e of(this.viewport=t,rx(this.div,t),na(this,vr).getEditors(this.pageIndex)))this.add(e),e.rebuild();this.updateMode()}update(e){let{viewport:t}=e;na(this,vr).commitOrRemove(),nd(this,vh,vm).call(this);let i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,rx(this.div,{rotation:n}),i!==n)for(let e of na(this,m6).values())e.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return na(this,vr).viewParameters.realScale}constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:n,accessibilityManager:r,annotationLayer:a,drawLayer:s,textLayer:l,viewport:o,l10n:h}){np(this,va),nl(this,vs,{get:vp,set:void 0}),np(this,vl),np(this,vo),np(this,vh),nl(this,m1,{writable:!0,value:void 0}),nl(this,m2,{writable:!0,value:!1}),nl(this,m3,{writable:!0,value:null}),nl(this,m4,{writable:!0,value:null}),nl(this,m5,{writable:!0,value:null}),nl(this,m6,{writable:!0,value:new Map}),nl(this,m9,{writable:!0,value:!1}),nl(this,m8,{writable:!0,value:!1}),nl(this,m7,{writable:!0,value:!1}),nl(this,ve,{writable:!0,value:null}),nl(this,vt,{writable:!0,value:null}),nl(this,vi,{writable:!0,value:null}),nl(this,vn,{writable:!0,value:null}),nl(this,vr,{writable:!0,value:void 0});let c=[...nm(vc,vc,vu).values()];if(!vc._initialized)for(let t of(vc._initialized=!0,c))t.initialize(h,e);e.registerEditorTypes(c),nh(this,vr,e),this.pageIndex=t,this.div=i,nh(this,m1,r),nh(this,m3,a),this.viewport=o,nh(this,vi,l),this.drawLayer=s,this._structTree=n,na(this,vr).addLayer(this)}}(0,nw._)(vc,"_initialized",!1);var vu={writable:!0,value:new Map([pu,mE,mq,gc].map(e=>[e._editorType,e]))};function vd(e){na(this,vr).unselectAll();let{target:t}=e;if(t===na(this,vi).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&na(this,vi).div.contains(t)){let{isMac:t}=n3.platform;if(0!==e.button||e.ctrlKey&&t)return;na(this,vr).showAllEditors("highlight",!0,!0),na(this,vi).div.classList.add("free"),this.toggleDrawing(),gc.startHighlighting(this,"ltr"===na(this,vr).direction,{target:na(this,vi).div,x:e.x,y:e.y}),na(this,vi).div.addEventListener("pointerup",()=>{na(this,vi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:na(this,vr)._signal}),e.preventDefault()}}function vp(){return nm(vc,vc,vu).get(na(this,vr).getMode())}function vf(e){let t=na(this,vs);return t?new t.prototype.constructor(e):null}function vg(){let{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),s=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+n),o=(r+s)/2-e,h=(a+l)/2-t,[c,u]=this.viewport.rotation%180==0?[o,h]:[h,o];return{offsetX:c,offsetY:u}}function vm(){for(let e of na(this,m6).values())e.isEmpty()&&e.remove()}var vv=new WeakMap,vb=new WeakMap,vw=new WeakMap,vy=new WeakMap,vx=new WeakSet,vA=new WeakSet,vk=new WeakSet;class v_{setParent(e){if(!na(this,vv))return void nh(this,vv,e);if(na(this,vv)!==e){if(na(this,vw).size>0)for(let t of na(this,vw).values())t.remove(),e.append(t);nh(this,vv,e)}}static get _svgFactory(){return nV(this,"_svgFactory",new uE)}draw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=nu(this,vb).value++,r=nd(this,vx,vE).call(this),a=v_._svgFactory.createElement("defs");r.append(a);let s=v_._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t&&na(this,vy).set(n,s);let o=i?nd(this,vA,vM).call(this,a,l):null,h=v_._svgFactory.createElement("use");return r.append(h),h.setAttribute("href","#".concat(l)),this.updateProperties(r,e),na(this,vw).set(n,r),{id:n,clipPathId:"url(#".concat(o,")")}}drawOutline(e,t){let i,n=nu(this,vb).value++,r=nd(this,vx,vE).call(this),a=v_._svgFactory.createElement("defs");r.append(a);let s=v_._svgFactory.createElement("path");a.append(s);let l="path_p".concat(this.pageIndex,"_").concat(n);if(s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke"),t){let e=v_._svgFactory.createElement("mask");a.append(e),i="mask_p".concat(this.pageIndex,"_").concat(n),e.setAttribute("id",i),e.setAttribute("maskUnits","objectBoundingBox");let t=v_._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");let r=v_._svgFactory.createElement("use");e.append(r),r.setAttribute("href","#".concat(l)),r.setAttribute("stroke","none"),r.setAttribute("fill","black"),r.setAttribute("fill-rule","nonzero"),r.classList.add("mask")}let o=v_._svgFactory.createElement("use");r.append(o),o.setAttribute("href","#".concat(l)),i&&o.setAttribute("mask","url(#".concat(i,")"));let h=o.cloneNode();return r.append(h),o.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),na(this,vw).set(n,r),n}finalizeDraw(e,t){na(this,vy).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:i,bbox:n,rootClass:r,path:a}=t,s="number"==typeof e?na(this,vw).get(e):e;if(s){if(i&&nd(this,vk,vC).call(this,s,i),n&&(nf(v_,v_),vS).call(v_,s,n),r){let{classList:e}=s;for(let[t,i]of Object.entries(r))e.toggle(t,i)}if(a){let e=s.firstChild.firstChild;nd(this,vk,vC).call(this,e,a)}}}updateParent(e,t){if(t===this)return;let i=na(this,vw).get(e);i&&(na(t,vv).append(i),na(this,vw).delete(e),na(t,vw).set(e,i))}remove(e){na(this,vy).delete(e),null!==na(this,vv)&&(na(this,vw).get(e).remove(),na(this,vw).delete(e))}destroy(){for(let e of(nh(this,vv,null),na(this,vw).values()))e.remove();na(this,vw).clear(),na(this,vy).clear()}constructor({pageIndex:e}){np(this,vx),np(this,vA),np(this,vk),nl(this,vv,{writable:!0,value:null}),nl(this,vb,{writable:!0,value:0}),nl(this,vw,{writable:!0,value:new Map}),nl(this,vy,{writable:!0,value:new Map}),this.pageIndex=e}}function vS(e,t){let[i,n,r,a]=t,{style:s}=e;s.top="".concat(100*n,"%"),s.left="".concat(100*i,"%"),s.width="".concat(100*r,"%"),s.height="".concat(100*a,"%")}function vE(){let e=v_._svgFactory.create(1,1,!0);return na(this,vv).append(e),e.setAttribute("aria-hidden",!0),e}function vM(e,t){let i=v_._svgFactory.createElement("clipPath");e.append(i);let n="clip_".concat(t);i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let r=v_._svgFactory.createElement("use");return i.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),n}function vC(e,t){for(let[i,n]of Object.entries(t))null===n?e.removeAttribute(i):e.setAttribute(i,n)}globalThis.pdfjsTestingUtils={HighlightOutliner:fl},nk.AbortException,nk.AnnotationEditorLayer,nk.AnnotationEditorParamsType,nk.AnnotationEditorType,nk.AnnotationEditorUIManager,nk.AnnotationLayer,nk.AnnotationMode,nk.ColorPicker,nk.DOMSVGFactory,nk.DrawLayer,nk.FeatureTest;var vT=nk.GlobalWorkerOptions;nk.ImageKind,nk.InvalidPDFException,nk.MissingPDFException,nk.OPS,nk.OutputScale,nk.PDFDataRangeTransport,nk.PDFDateString,nk.PDFWorker,nk.PasswordResponses,nk.PermissionFlag,nk.PixelsPerInch,nk.RenderingCancelledException,nk.TextLayer,nk.TouchManager,nk.UnexpectedResponseException,nk.Util,nk.VerbosityLevel,nk.XfaLayer,nk.build,nk.createValidAbsoluteUrl,nk.fetchData;var vP=nk.getDocument;nk.getFilenameFromUrl,nk.getPdfFilenameFromUrl,nk.getXfaPageViewport,nk.isDataScheme,nk.isPdfFile,nk.noContextMenu,nk.normalizeUnicode,nk.setLayerDimensions,nk.shadow,nk.stopEvent;var vR=nk.version,vI=e.i(43943);let vL=nt.default.env.NEXT_PUBLIC_OPENAI_API_KEY||"",vD=async e=>{var t,i,n;let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(vL)},body:JSON.stringify({model:"gpt-3.5-turbo",temperature:.5,top_p:.8,messages:[{role:"system",content:e}]})}),a=await r.json(),s=null==a||null==(n=a.choices)||null==(i=n[0])||null==(t=i.message)?void 0:t.content;return Array.isArray(s)?s.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&"text"in e&&e.text||"").join("")||"":s||""},vF=async e=>{var t,i;let{context:n,user:r,system:a,logMessagesToChatHistory:s=!0,returnFirstResponse:l=!1,chatHistory:o=[],onChatHistoryChange:h,onPDFProgressChange:c}=e,u=[...o,s?{role:"user",message:r||"",hasMore:!1}:null,{role:"assistant",message:s?"I'm thinking...":"Processing PDF...",hasMore:!0}];null==h||h([...u]);let d=u.length-1,p="".concat(n),f="";do{let e=n.substring(Math.min(20481,n.length));n=n.substring(0,Math.min(20480,n.length));let i="Question: ".concat(r,"\n\n")+a.replaceAll("{{context}}",n);if(f=await vD(i),u[d]={role:"assistant",message:(null==u||null==(t=u[d])?void 0:t.message.replaceAll(s?"I'm thinking...":"Processing PDF...",""))+(p.length>20480?f:null==f?void 0:f.substring(0,20480))+"\n\n",hasMore:!l&&e.length>0},n=e,null==c||c((p.length-e.length)/p.length*100),l&&f)break}while(n.length>0)if(!s&&null!==u&&null!==u[d]){let e=null==(i=u[d])?void 0:i.message;return u[d]={message:"Ready! Ask me anything about your PDF.",role:"assistant",hasMore:!1},null==h||h([...u]),{...u[d],message:e}}return null==h||h([...u]),u[d]};async function vN(e){let t=new FileReader;vT.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(vR,"/pdf.worker.min.mjs");let i=new Promise((e,i)=>{t.onload=()=>{e(t.result)},t.onerror=i});t.readAsArrayBuffer(e);let n=new Uint8Array(await i),r=await vP({data:n}).promise,a=r.numPages,s="";for(let e=1;e<=a;e++){let t=await r.getPage(e);for(let e of(await t.getTextContent()).items)s+=e.str+"\n";s+="\n\n"}return s}window.Buffer=window.Buffer||vI.Buffer;var i$=i$,i6=p;function vO(e){return(0,i.jsxs)(iZ.Box,{sx:{position:"relative",display:"inline-flex"},children:[(0,i.jsx)(i$.default,{variant:"determinate",...e}),(0,i.jsx)(iZ.Box,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(i6.default,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}let vW={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},vj=new Uint8Array(16),vB=[];for(let e=0;e<256;++e)vB.push((e+256).toString(16).slice(1));let vz=function(e,i,n){var r,a,s;if(vW.randomUUID&&!i&&!e)return vW.randomUUID();let l=null!=(s=null!=(a=(e=e||{}).random)?a:null==(r=e.rng)?void 0:r.call(e))?s:function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(vj)}();if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i){if((n=n||0)<0||n+16>i.length)throw RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)i[n+e]=l[e];return i}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(vB[e[t+0]]+vB[e[t+1]]+vB[e[t+2]]+vB[e[t+3]]+"-"+vB[e[t+4]]+vB[e[t+5]]+"-"+vB[e[t+6]]+vB[e[t+7]]+"-"+vB[e[t+8]]+vB[e[t+9]]+"-"+vB[e[t+10]]+vB[e[t+11]]+vB[e[t+12]]+vB[e[t+13]]+vB[e[t+14]]+vB[e[t+15]]).toLowerCase()}(l)};var vH=e.i(97837),vU=e.i(42789),i5=i5,i6=p,vG=e.i(55731),vG=vG,vV=e.i(96498),vV=vV,vq=e.i(97576),vq=vq;function vX(e){let{id:t=vz(),label:r,helperText:a,input:s,...l}=e||{},o=t?"".concat(t,"-input"):void 0,h=a&&t?"".concat(t,"-helper-text"):void 0;return(0,i.jsxs)(vG.default,{...l,children:[r&&(0,i.jsx)(vq.default,{htmlFor:o,children:r}),(0,n.cloneElement)(s,{id:o,"aria-describedby":h}),a&&(0,i.jsx)(vV.default,{id:h,children:a})]})}let vK=(0,i8.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");function vY(e){let{id:t=vz(),accept:r,label:a,limit:s=1,maxFileSize:l=5e6,variant:o="text",onChange:h,outputType:c="content",...u}=e||{},[d,p]=(0,n.useState)([]),[f,g]=(0,n.useState)([...d]),[m,b]=(0,n.useState)({}),w=(0,n.useRef)(null),y=(0,n.useCallback)(e=>{e.stopPropagation(),e.preventDefault();let t=e.target;if(!t.files)return;let i=Object.values(t.files).map(e=>e);if(i){let e=[...f,...i],t={...m},n=[...d,...i];if(e.forEach(e=>{n.indexOf(e)>s-1?(t[e.name]="File not uploaded.  Maximum number of files exceeded. Must not be more than ".concat(s,"."),n=n.filter(t=>t.name!==e.name)):e.size>l?(t[e.name]="File not uploaded.  Maximum file size exceeded. Must not be more than ".concat(x(l),"."),n=n.filter(t=>t.name!==e.name)):n.indexOf(e)>-1&&(t[e.name]="")}),b(t),g(e),p(n),n&&n.length>0&&["text","dataUri"].includes(o)&&1===s){let e=new FileReader,t=n[0];e.onload=async e=>{var i,r,a,s;return null==h?void 0:h("content"===c?null==(r=e.target)||null==(i=r.result)?void 0:i.toString():"files"===c?n:{filename:t.name,type:t.type,content:(null==(s=e.target)||null==(a=s.result)?void 0:a.toString())||""})},"text"===o?e.readAsText(t):"dataUri"===o&&e.readAsDataURL(t)}}},[f,s,l,m,h,c,d,o]),x=e=>e<1e6?"".concat(Math.floor(e/1e3)," KB"):"".concat((e/1e6).toFixed(1)," MB"),A=e=>{if(!e)return"";let t=e.split(",").map(e=>"*.*"===e?"Any file":"audio/*"===e?"Any audio file":"video/*"===e?"Any video file":"image/*"===e?"Any image file":e.startsWith(".")?e.replace(".","").toUpperCase():e.includes("/")?e.split("/")[1].toUpperCase():e.toUpperCase());return t.length>1&&(t[t.length-1]="or ".concat(t[t.length-1])),t.join(", ")};return(0,i.jsx)(vX,{id:t,fullWidth:!0,...u,variant:"outlined",input:(0,i.jsx)(iZ.Box,{id:t,sx:{border:"1px solid",borderRadius:"4px",display:"flex",p:2,width:"100%"},children:(0,i.jsxs)(vU.Grid,{container:!0,spacing:2,children:[(0,i.jsxs)(vU.Grid,{item:!0,xs:9,children:[a&&(0,i.jsx)(i6.default,{variant:"body1",children:a}),r?(0,i.jsx)(i6.default,{variant:"body1",children:"".concat(A(r)).concat(l?" (max. ".concat(x(l),")"):"")}):(0,i.jsx)(i6.default,{variant:"body1",children:"".concat(A("*.*")).concat(l?" (max. ".concat(x(l),")"):"")})]}),(0,i.jsxs)(vU.Grid,{item:!0,xs:3,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,i.jsx)(vH.Button,{color:"primary",variant:"outlined",onClick:e=>{var t,i;e.stopPropagation(),e.preventDefault(),b({}),g([...d]),null==w||null==(i=w.current)||null==(t=i.click)||t.call(i)},sx:{p:1,zIndex:1},children:(0,i.jsx)(iZ.Box,{sx:{p:1},children:"Browse"})}),(0,i.jsx)(iZ.Box,{ref:w,htmlFor:"".concat(t,"__input"),component:"label",children:(0,i.jsx)("input",{type:"file",id:"".concat(t,"__input"),onChange:y,multiple:s>1,accept:r,style:{display:"none"}})})]}),f.length>0?(0,i.jsx)(i5.default,{sx:{ml:2,mt:2,width:"100%"},children:f.map((e,t)=>(0,i.jsxs)(iZ.Box,{sx:{border:"1px solid",p:2,position:"relative"},children:[(0,i.jsx)(iZ.Box,{display:"flex",children:(0,i.jsxs)(iZ.Box,{sx:{ml:1},children:[(0,i.jsx)(i6.default,{variant:"body1",children:e.name}),(0,i.jsx)(i6.default,{variant:"body2",children:x(e.size)}),(null==m?void 0:m[e.name])&&(0,i.jsx)(i6.default,{variant:"body2",sx:{color:"red"},children:null==m?void 0:m[e.name]})]})}),(0,i.jsx)(vH.Button,{onClick:t=>{t.stopPropagation(),t.preventDefault();let i=[...d];i.splice(i.indexOf(e),1),g([...i]),p(i),b({}),("text"===o||"dataUri"===o)&&1===s&&(null==h||h("content"===c?"":{filename:"",type:"",content:""}))},startIcon:(0,i.jsx)(vK,{}),color:"info",sx:{border:"none",position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)"}})]},t))}):null]})})})}var vQ=e.i(7670),vJ=e.i(19130),vZ=e.i(57242),v$=e.i(90290),v0=e.i(25652),v1=e.i(41134),v2=e.i(74429),v3=e.i(40672),v4=e.i(19727);function v5(e){return(0,v4.default)("MuiDialog",e)}let v6=(0,v3.default)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),v9=n.createContext({});var v8=e.i(26933),v7=e.i(61722),be=e.i(54512),bt=e.i(50915),bi=e.i(99844),bn=e.i(54072);let br=(0,v7.styled)(v8.default,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),ba=(0,v7.styled)(v0.default,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),bs=(0,v7.styled)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.container,t["scroll".concat((0,v$.default)(i.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),bl=(0,v7.styled)(v2.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.paper,t["scrollPaper".concat((0,v$.default)(i.scroll))],t["paperWidth".concat((0,v$.default)(String(i.maxWidth)))],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})((0,bt.default)(e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(v6.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>"xs"!==e).map(e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(v6.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(v6.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}})),bo=n.forwardRef(function(e,t){let r=(0,bi.useDefaultProps)({props:e,name:"MuiDialog"}),a=(0,be.useTheme)(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":o,"aria-modal":h=!0,BackdropComponent:c,BackdropProps:u,children:d,className:p,disableEscapeKeyDown:f=!1,fullScreen:g=!1,fullWidth:m=!1,maxWidth:b="sm",onBackdropClick:w,onClick:y,onClose:x,open:A,PaperComponent:k=v2.default,PaperProps:_={},scroll:S="paper",slots:E={},slotProps:M={},TransitionComponent:C=v1.default,transitionDuration:T=s,TransitionProps:P,...R}=r,I={...r,disableEscapeKeyDown:f,fullScreen:g,fullWidth:m,maxWidth:b,scroll:S},L=(e=>{let{classes:t,scroll:i,maxWidth:n,fullWidth:r,fullScreen:a}=e,s={root:["root"],container:["container","scroll".concat((0,v$.default)(i))],paper:["paper","paperScroll".concat((0,v$.default)(i)),"paperWidth".concat((0,v$.default)(String(n))),r&&"paperFullWidth",a&&"paperFullScreen"]};return(0,vJ.default)(s,v5,t)})(I),D=n.useRef(),F=(0,vZ.default)(o),N=n.useMemo(()=>({titleId:F}),[F]),O={slots:{transition:C,...E},slotProps:{transition:P,paper:_,backdrop:u,...M}},[W,j]=(0,bn.default)("root",{elementType:ba,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I,className:(0,vQ.default)(L.root,p),ref:t}),[B,z]=(0,bn.default)("backdrop",{elementType:br,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I}),[H,U]=(0,bn.default)("paper",{elementType:bl,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:I,className:(0,vQ.default)(L.paper,_.className)}),[G,V]=(0,bn.default)("container",{elementType:bs,externalForwardedProps:O,ownerState:I,className:(0,vQ.default)(L.container)}),[q,X]=(0,bn.default)("transition",{elementType:v1.default,externalForwardedProps:O,ownerState:I,additionalProps:{appear:!0,in:A,timeout:T,role:"presentation"}});return(0,i.jsx)(W,{closeAfterTransition:!0,slots:{backdrop:B},slotProps:{backdrop:{transitionDuration:T,as:c,...z}},disableEscapeKeyDown:f,onClose:x,open:A,onClick:e=>{y&&y(e),D.current&&(D.current=null,w&&w(e),x&&x(e,"backdropClick"))},...j,...R,children:(0,i.jsx)(q,{...X,children:(0,i.jsx)(G,{onMouseDown:e=>{D.current=e.target===e.currentTarget},...V,children:(0,i.jsx)(H,{as:k,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":F,"aria-modal":h,...U,children:(0,i.jsx)(v9.Provider,{value:N,children:d})})})})})});function bh(e){return(0,v4.default)("MuiDialogTitle",e)}let bc=(0,v3.default)("MuiDialogTitle",["root"]),bu=(0,v7.styled)(p.default,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),bd=n.forwardRef(function(e,t){let r=(0,bi.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:a,id:s,...l}=r,o=(e=>{let{classes:t}=e;return(0,vJ.default)({root:["root"]},bh,t)})(r),{titleId:h=s}=n.useContext(v9);return(0,i.jsx)(bu,{component:"h2",className:(0,vQ.default)(o.root,a),ownerState:r,ref:t,variant:"h6",id:null!=s?s:h,...l})});function bp(e){return(0,v4.default)("MuiDialogContent",e)}(0,v3.default)("MuiDialogContent",["root","dividers"]);let bf=(0,v7.styled)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})((0,bt.default)(e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(bc.root," + &")]:{paddingTop:0}}}]}})),bg=n.forwardRef(function(e,t){let n=(0,bi.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:r,dividers:a=!1,...s}=n,l={...n,dividers:a},o=(e=>{let{classes:t,dividers:i}=e;return(0,vJ.default)({root:["root",i&&"dividers"]},bp,t)})(l);return(0,i.jsx)(bf,{className:(0,vQ.default)(o.root,r),ownerState:l,ref:t,...s})});function bm(e){return(0,v4.default)("MuiDialogActions",e)}(0,v3.default)("MuiDialogActions",["root","spacing"]);let bv=(0,v7.styled)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),bb=n.forwardRef(function(e,t){let n=(0,bi.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:a=!1,...s}=n,l={...n,disableSpacing:a},o=(e=>{let{classes:t,disableSpacing:i}=e;return(0,vJ.default)({root:["root",!i&&"spacing"]},bm,t)})(l);return(0,i.jsx)(bv,{className:(0,vQ.default)(o.root,r),ownerState:l,ref:t,...s})});var i1=i1;let bw=(0,i8.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function by(e){let{open:t=!1,onClose:n}=e,r=()=>{null==n||n()};return(0,i.jsxs)(bo,{open:t,onClose:r,children:[(0,i.jsx)(bd,{children:"Terms of Use"}),(0,i.jsx)(i1.default,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bw,{})}),(0,i.jsx)(bg,{children:(0,i.jsx)(iQ,{children:'\n\nWelcome to Bookworm! These Terms of Use govern your use of Bookworm, an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions.\n\nBy accessing or using Bookworm, you agree to be bound by these Terms of Use. If you do not agree with any part of these terms, you may not use Bookworm.\n\n### 1. Use of Bookworm\n\n** 1.1 Use License **\n\n- You may use Bookworm solely for your personal or internal business purposes in accordance with these Terms of Use.\n\n- You may not use Bookworm for any unlawful or unauthorized purpose, including but not limited to violating any applicable laws or regulations.\n\n- You agree not to reproduce, duplicate, copy, sell, resell, or exploit any portion of Bookworm without express written permission from the owner.\n\n### 2. User Content\n\n** 2.1 Ownership of User Content **\n\n- You retain ownership of any content you upload or submit to Bookworm ("User Content").\n\n- By uploading or submitting User Content, you grant Bookworm a worldwide, non-exclusive, royalty-free, transferable license to use, reproduce, distribute, modify, adapt, display, and perform the User Content in connection with Bookworm\'s operation and promotion.\n\n### 3. Privacy\n\n** 3.1 Privacy Policy **\n\n- Bookworm respects your privacy and handles your personal data in accordance with its Privacy Policy.\n\n- By using Bookworm, you consent to the collection, use, and sharing of your information as described in the Privacy Policy.\n\n### 4. Intellectual Property\n\n** 4.1 Ownership of Intellectual Property **\n\n- All content, trademarks, service marks, logos, and other intellectual property rights on Bookworm are the property of their respective owners.\n\n- You may not use any trademarks, service marks, or logos displayed on Bookworm without the prior written consent of the owner.\n\n### 5. Limitation of Liability\n\n** 5.1 Disclaimer of Warranties **\n\n- Bookworm is provided on an "as is" and "as available" basis. We make no warranties or representations about the accuracy or completeness of the content provided by Bookworm.\n\n- In no event shall Bookworm or its affiliates be liable for any indirect, incidental, special, consequential, or punitive damages arising out of or in connection with your use of Bookworm.\n\n### 6. Changes to Terms of Use\n\n** 6.1 Modifications **\n\n- Bookworm reserves the right to modify or replace these Terms of Use at any time. Any changes will be effective immediately upon posting the revised Terms of Use on Bookworm.\n\n- Your continued use of Bookworm after any changes to these Terms of Use constitutes your acceptance of the revised terms.\n\n### 7. Governing Law\n\n** 7.1 Jurisdiction **\n\n- These Terms of Use shall be governed by and construed in accordance with the laws of the state of New Hampshire, without regard to its conflict of law provisions.\n\n### 8. Contact Us\n\n- If you have any questions about these Terms of Use, please contact us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com).\n'})}),(0,i.jsx)(bb,{children:(0,i.jsx)(vH.Button,{onClick:r,children:"OK"})})]})}function bx(){let[e,t]=n.useState([]),[r,a]=n.useState(""),[s,l]=n.useState(""),[o,h]=n.useState(""),[c,u]=n.useState(0),[d,p]=n.useState(null),[f,g]=n.useState(!1),m=e=>{t(e),u(null)},b=n.useRef(null),w=n.useRef(null),y=async()=>{vF({context:(null==r?void 0:r.length)>20480?s:r,user:"".concat(o),system:'\nBegin relevant content\n{{context}}\nEnd relevant content\n\nProvide relevant answers within the scope of the relevant content.\nAnswer the question only if it is based on the provided relevant content.\nIf the question is outside the scope of the relevant content, respond "I didn\'t see that in the PDF.  Try asking a different question.".\nRefrain from answering questions that are outside the scope of the relevant content.\nUse markdown markup to format your response for better readability.\nUse markdown to bold key points in your response, including names.\nUse markdown to italicize quotes or other key points in your response.\nRefrain from using the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from responding with questions.\nRefrain from including any additional questions in your response.\n',returnFirstResponse:!0,chatHistory:e,onChatHistoryChange:m}),h("")},x=(t,i)=>{if(null==i&&(i=null===c?e.length-1+t:c+t),u(i),null!==i&&i<e.length-1){let r=Math.max(i,2),a=e[r];if(null===a||(null==a?void 0:a.role)==="user"){var n;h((null==a?void 0:a.message)||""),null==w||null==(n=w.current)||n.focus()}else u(r),x(t,r+t)}else h(""),u(null)};return n.useEffect(()=>{if(b.current){var e;b.current.scrollTop=(null==b||null==(e=b.current)?void 0:e.scrollHeight)||0}}),(0,i.jsxs)(iZ.Box,{id:"hero",sx:e=>({width:"100%",backgroundImage:"light"===e.palette.mode?"linear-gradient(180deg, #CEE5FD, #FFF)":"linear-gradient(#02294F, ".concat((0,i9.alpha)("#090E10",0),")"),backgroundSize:"100% 20%",backgroundRepeat:"no-repeat"}),children:[(0,i.jsx)(by,{open:f,onClose:()=>g(!1)}),(0,i.jsxs)(i0.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",pt:{xs:10},pb:{xs:2}},children:[(0,i.jsxs)(i5.default,{spacing:2,useFlexGap:!0,sx:{width:{xs:"100%",sm:"70%"}},children:[(0,i.jsxs)(i6.default,{variant:"h1",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignSelf:"center",textAlign:"center",fontSize:"clamp(3.5rem, 10vw, 4rem)"},children:["Welcome to",(0,i.jsx)(i6.default,{variant:"h1",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})]}),(0,i.jsx)(i6.default,{textAlign:"center",color:"text.secondary",sx:{alignSelf:"center",width:{sm:"100%",md:"80%"}},children:"Introducing your AI-powered reading assistant designed to revolutionize the way you interact with PDFs."}),(0,i.jsx)(i5.default,{direction:{xs:"column",sm:"row"},alignSelf:"center",spacing:1,useFlexGap:!0,sx:{pt:2,width:{xs:"100%"}},children:(0,i.jsx)(vY,{accept:".pdf",label:"Upload your pdf",outputType:"files",sx:{width:{xs:"100%"}},onChange:async t=>{if(t&&t.length>0){var i;let n=await vN(t[0]);a(n);let r=await vF({context:n,user:"Summarize the markdown content.",system:'\nThe user uploaded a PDF file. The content of the file has been converted to markdown.\nHere is the markdown content:\n```\n{{context}}\n```\nRefrain from mentioning the PDF file or the markdown conversion process in your response.\nDo not say the words "markdown", "PDF", "PDF file" or "file" in your response.\nRefrain from omitting any important information in your response.\nRefrain from omitting quotes or key points in your response.\n',logMessagesToChatHistory:!1,chatHistory:e,onChatHistoryChange:m,onPDFProgressChange:p});l((null==r?void 0:r.message)||""),null==w||null==(i=w.current)||i.focus()}}})}),(0,i.jsxs)(i6.default,{variant:"caption",textAlign:"center",sx:{opacity:.8},children:["By using this site, you agree to our",(0,i.jsx)(i3.default,{onClick:()=>g(!0),color:"primary",sx:{cursor:"pointer"},children:"Terms & Conditions"}),"."]})]}),(0,i.jsx)(iZ.Box,{ref:b,sx:e=>({mt:{xs:2},alignSelf:"center",height:{xs:200,sm:400},overflowY:"auto",width:"100%",backgroundImage:"light"===e.palette.mode?'url("/static/images/templates/templates-images/hero-light.png")':'url("/static/images/templates/templates-images/hero-dark.png")',backgroundSize:"cover",borderRadius:"10px",outline:"1px solid",outlineColor:"light"===e.palette.mode?(0,i9.alpha)("#BFCCD9",.5):(0,i9.alpha)("#9CCCFC",.1),boxShadow:"light"===e.palette.mode?"0 0 12px 8px ".concat((0,i9.alpha)("#9CCCFC",.2)):"0 0 24px 12px ".concat((0,i9.alpha)("#033363",.2)),p:2}),children:e.map((e,t)=>(null==e?void 0:e.message)?(0,i.jsxs)(iZ.Box,{sx:{borderRadius:"10px",p:1,my:1,backgroundColor:(null==e?void 0:e.role)==="user"?(0,i9.alpha)("#BFCCD9",.5):(0,i9.alpha)("#9CCCFC",.5)},children:[(null==e?void 0:e.role)==="assistant"?(0,i.jsxs)(i6.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:[(0,i.jsx)(i6.default,{variant:"h6",component:"span",color:"text.primary",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"says..."]}):(null==e?void 0:e.message)&&(0,i.jsx)(i6.default,{variant:"h6",color:"text.primary",sx:{fontWeight:600},children:"You..."}),(0,i.jsxs)(i6.default,{variant:"body2",component:"div",sx:{whiteSpace:"pre-wrap",color:(null==e?void 0:e.role)==="user"?"text.primary":"text.secondary"},children:[(0,i.jsx)(iQ,{children:null==e?void 0:e.message}),(null==e?void 0:e.message)==="I'm thinking..."&&(null==e?void 0:e.hasMore)?(0,i.jsx)(i$.default,{size:12}):"",(null==e?void 0:e.message)==="Processing PDF..."&&(null==e?void 0:e.hasMore)&&(null!==d?(0,i.jsx)(vO,{value:d,size:18}):(0,i.jsx)(i$.default,{size:18}))]})]},t):null)}),(0,i.jsx)(i4.default,{ref:w,placeholder:"Ask bookworm anything about your PDF...",fullWidth:!0,value:o,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),y()):"ArrowUp"===e.key?x(-1):"ArrowDown"===e.key?x(1):u(null)},multiline:!0,sx:{mt:{xs:2}},endAdornment:(0,i.jsx)(i2.default,{position:"end",children:(0,i.jsxs)(i5.default,{direction:"row",alignSelf:"center",spacing:1,useFlexGap:!0,sx:{width:{xs:"100%",sm:"auto"}},children:[(0,i.jsx)(i1.default,{"aria-label":"submit user question",disabled:!o||!r,onClick:y,edge:"end",children:(0,i.jsx)(ne,{})}),(0,i.jsx)(i1.default,{"aria-label":"clear chat history",disabled:!(null==e?void 0:e.length),onClick:()=>m([]),edge:"end",children:(0,i.jsx)(i7,{})})]})})})]})]})}var bA=e.i(92527),bk=e.i(53174),b_=i5;let bS=(0,i8.default)((0,i.jsx)("path",{d:"m20.45 6 .49-1.06L22 4.45c.39-.18.39-.73 0-.91l-1.06-.49L20.45 2c-.18-.39-.73-.39-.91 0l-.49 1.06-1.05.49c-.39.18-.39.73 0 .91l1.06.49.49 1.05c.17.39.73.39.9 0M8.95 6l.49-1.06 1.06-.49c.39-.18.39-.73 0-.91l-1.06-.48L8.95 2c-.17-.39-.73-.39-.9 0l-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49L8.05 6c.17.39.73.39.9 0m10.6 7.5-.49 1.06-1.06.49c-.39.18-.39.73 0 .91l1.06.49.49 1.06c.18.39.73.39.91 0l.49-1.06 1.05-.5c.39-.18.39-.73 0-.91l-1.06-.49-.49-1.06c-.17-.38-.73-.38-.9.01m-1.84-4.38-2.83-2.83a.996.996 0 0 0-1.41 0L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.39.39 1.02.39 1.41 0L17.7 10.53c.4-.38.4-1.02.01-1.41m-3.5 2.09L12.8 9.8l1.38-1.38 1.41 1.41z"}),"AutoFixHighRounded"),bE=(0,i8.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),bM=(0,i8.default)([(0,i.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,i.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),bC=[{icon:(0,i.jsx)(bE,{}),title:"Efficiency and Time-Saving",description:"Bookworm dramatically reduces the time you spend reading and comprehending long PDF documents. By providing concise summaries, it allows you to grasp the key points quickly, freeing up time for other tasks or deeper study on specific areas of interest."},{icon:(0,i.jsx)(bM,{}),title:"Enhanced Understanding",description:"With the ability to ask specific questions about the PDF content, Bookworm enhances your understanding by clarifying complex information and providing detailed insights. This feature is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."},{icon:(0,i.jsx)(bS,{}),title:"Accessibility and Convenience",description:"Bookworm is designed to be accessible anywhere and anytime. Whether youre on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages. This makes it an invaluable tool for students, professionals, and anyone who needs to process written content efficiently."}];function bT(){return(0,i.jsx)(a.default,{id:"highlights",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},color:"white",bgcolor:"#06090a"},children:(0,i.jsxs)(d.default,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsxs)(a.default,{sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:[(0,i.jsx)(p.default,{component:"h2",variant:"h4",children:"Highlights"}),(0,i.jsxs)(p.default,{variant:"body1",sx:{color:"grey.400"},children:[(0,i.jsx)(p.default,{variant:"body1",component:"span",color:"text.contrastText",sx:{ml:1,fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","stands out with its advanced AI that not only summarizes PDFs but also answers content-specific questions, offering an intuitive, user-friendly interface that improves over time, making it an essential tool for efficient document handling and deeper comprehension."]})]}),(0,i.jsx)(bk.default,{container:!0,spacing:2.5,children:bC.map((e,t)=>(0,i.jsx)(bk.default,{item:!0,xs:12,sm:6,md:4,children:(0,i.jsxs)(b_.default,{direction:"column",color:"inherit",component:bA.default,spacing:1,useFlexGap:!0,sx:{p:3,height:"100%",border:"1px solid",borderColor:"grey.800",background:"transparent",backgroundColor:"grey.900"},children:[(0,i.jsx)(a.default,{sx:{opacity:"50%"},children:e.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)(p.default,{fontWeight:"medium",gutterBottom:!0,children:e.title}),(0,i.jsx)(p.default,{variant:"body2",sx:{color:"grey.400"},children:e.description})]})]})},t))})]})})}var bP=e.i(6586),bR=e.i(52836),bI=e.i(18827),bL=e.i(27001),bD=e.i(66352),bD=bD;function bF(e){return(0,v4.default)("MuiCollapse",e)}(0,v3.default)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let bN=(0,v7.styled)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],"entered"===i.state&&t.entered,"exited"===i.state&&!i.in&&"0px"===i.collapsedSize&&t.hidden]}})((0,bt.default)(e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}})),bO=(0,v7.styled)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bW=(0,v7.styled)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),bj=n.forwardRef(function(e,t){let r=(0,bi.useDefaultProps)({props:e,name:"MuiCollapse"}),{addEndListener:a,children:s,className:l,collapsedSize:o="0px",component:h,easing:c,in:u,onEnter:d,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:b,orientation:w="vertical",style:y,timeout:x=bI.duration.standard,TransitionComponent:A=bP.Transition,...k}=r,_={...r,orientation:w,collapsedSize:o},S=(e=>{let{orientation:t,classes:i}=e;return(0,vJ.default)({root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]},bF,i)})(_),E=(0,be.useTheme)(),M=(0,bR.default)(),C=n.useRef(null),T=n.useRef(),P="number"==typeof o?"".concat(o,"px"):o,R="horizontal"===w,I=R?"width":"height",L=n.useRef(null),D=(0,bD.default)(t,L),F=e=>t=>{if(e){let i=L.current;void 0===t?e(i):e(i,t)}},N=()=>C.current?C.current[R?"clientWidth":"clientHeight"]:0,O=F((e,t)=>{C.current&&R&&(C.current.style.position="absolute"),e.style[I]=P,d&&d(e,t)}),W=F((e,t)=>{let i=N();C.current&&R&&(C.current.style.position="");let{duration:n,easing:r}=(0,bL.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"enter"});if("auto"===x){let t=E.transitions.getAutoHeightDuration(i);e.style.transitionDuration="".concat(t,"ms"),T.current=t}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style[I]="".concat(i,"px"),e.style.transitionTimingFunction=r,f&&f(e,t)}),j=F((e,t)=>{e.style[I]="auto",p&&p(e,t)}),B=F(e=>{e.style[I]="".concat(N(),"px"),g&&g(e)}),z=F(m),H=F(e=>{let t=N(),{duration:i,easing:n}=(0,bL.getTransitionProps)({style:y,timeout:x,easing:c},{mode:"exit"});if("auto"===x){let i=E.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(i,"ms"),T.current=i}else e.style.transitionDuration="string"==typeof i?i:"".concat(i,"ms");e.style[I]=P,e.style.transitionTimingFunction=n,b&&b(e)});return(0,i.jsx)(A,{in:u,onEnter:O,onEntered:j,onEntering:W,onExit:B,onExited:z,onExiting:H,addEndListener:e=>{"auto"===x&&M.start(T.current||0,e),a&&a(L.current,e)},nodeRef:L,timeout:"auto"===x?null:x,...k,children:(e,t)=>{let{ownerState:n,...r}=t;return(0,i.jsx)(bN,{as:h,className:(0,vQ.default)(S.root,l,{entered:S.entered,exited:!u&&"0px"===P&&S.hidden}[e]),style:{[R?"minWidth":"minHeight"]:P,...y},ref:D,ownerState:{..._,state:e},...r,children:(0,i.jsx)(bO,{ownerState:{..._,state:e},className:S.wrapper,ref:C,children:(0,i.jsx)(bW,{ownerState:{..._,state:e},className:S.wrapperInner,children:s})})})}})});bj&&(bj.muiSupportAuto=!0);let bB=n.createContext({});var bz=e.i(16e3);function bH(e){return(0,v4.default)("MuiAccordion",e)}let bU=(0,v3.default)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),bG=(0,v7.styled)(v2.default,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{["& .".concat(bU.region)]:t.region},t.root,!i.square&&t.rounded,!i.disableGutters&&t.gutters]}})((0,bt.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],i),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],i)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(bU.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(bU.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),(0,bt.default)(e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(bU.expanded)]:{margin:"16px 0"}}}]}})),bV=(0,v7.styled)("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),bq=n.forwardRef(function(e,t){let r=(0,bi.useDefaultProps)({props:e,name:"MuiAccordion"}),{children:a,className:s,defaultExpanded:l=!1,disabled:o=!1,disableGutters:h=!1,expanded:c,onChange:u,square:d=!1,slots:p={},slotProps:f={},TransitionComponent:g,TransitionProps:m,...b}=r,[w,y]=(0,bz.default)({controlled:c,default:l,name:"Accordion",state:"expanded"}),x=n.useCallback(e=>{y(!w),u&&u(e,!w)},[w,u,y]),[A,...k]=n.Children.toArray(a),_=n.useMemo(()=>({expanded:w,disabled:o,disableGutters:h,toggle:x}),[w,o,h,x]),S={...r,square:d,disabled:o,disableGutters:h,expanded:w},E=(e=>{let{classes:t,square:i,expanded:n,disabled:r,disableGutters:a}=e;return(0,vJ.default)({root:["root",!i&&"rounded",n&&"expanded",r&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},bH,t)})(S),M={slots:{transition:g,...p},slotProps:{transition:m,...f}},[C,T]=(0,bn.default)("root",{elementType:bG,externalForwardedProps:{...M,...b},className:(0,vQ.default)(E.root,s),shouldForwardComponentProp:!0,ownerState:S,ref:t,additionalProps:{square:d}}),[P,R]=(0,bn.default)("heading",{elementType:bV,externalForwardedProps:M,className:E.heading,ownerState:S}),[I,L]=(0,bn.default)("transition",{elementType:bj,externalForwardedProps:M,ownerState:S});return(0,i.jsxs)(C,{...T,children:[(0,i.jsx)(P,{...R,children:(0,i.jsx)(bB.Provider,{value:_,children:A})}),(0,i.jsx)(I,{in:w,timeout:"auto",...L,children:(0,i.jsx)("div",{"aria-labelledby":A.props.id,id:A.props["aria-controls"],role:"region",className:E.region,children:k})})]})});function bX(e){return(0,v4.default)("MuiAccordionDetails",e)}(0,v3.default)("MuiAccordionDetails",["root"]);let bK=(0,v7.styled)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bt.default)(e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}})),bY=n.forwardRef(function(e,t){let n=(0,bi.useDefaultProps)({props:e,name:"MuiAccordionDetails"}),{className:r,...a}=n,s=(e=>{let{classes:t}=e;return(0,vJ.default)({root:["root"]},bX,t)})(n);return(0,i.jsx)(bK,{className:(0,vQ.default)(s.root,r),ref:t,ownerState:n,...a})});var bQ=e.i(20103);function bJ(e){return(0,v4.default)("MuiAccordionSummary",e)}let bZ=(0,v3.default)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),b$=(0,v7.styled)(bQ.default,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,bt.default)(e=>{let{theme:t}=e,i={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],i),["&.".concat(bZ.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(bZ.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(bZ.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(bZ.expanded)]:{minHeight:64}}}]}})),b0=(0,v7.styled)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,bt.default)(e=>{let{theme:t}=e;return{display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(bZ.expanded)]:{margin:"20px 0"}}}]}})),b1=(0,v7.styled)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,bt.default)(e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(bZ.expanded)]:{transform:"rotate(180deg)"}}})),b2=n.forwardRef(function(e,t){let r=(0,bi.useDefaultProps)({props:e,name:"MuiAccordionSummary"}),{children:a,className:s,expandIcon:l,focusVisibleClassName:o,onClick:h,slots:c,slotProps:u,...d}=r,{disabled:p=!1,disableGutters:f,expanded:g,toggle:m}=n.useContext(bB),b={...r,expanded:g,disabled:p,disableGutters:f},w=(e=>{let{classes:t,expanded:i,disabled:n,disableGutters:r}=e;return(0,vJ.default)({root:["root",i&&"expanded",n&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},bJ,t)})(b),y={slots:c,slotProps:u},[x,A]=(0,bn.default)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,vQ.default)(w.root,s),elementType:b$,externalForwardedProps:{...y,...d},ownerState:b,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":g,focusVisibleClassName:(0,vQ.default)(w.focusVisible,o)},getSlotProps:e=>({...e,onClick:t=>{var i;null==(i=e.onClick)||i.call(e,t),m&&m(t),h&&h(t)}})}),[k,_]=(0,bn.default)("content",{className:w.content,elementType:b0,externalForwardedProps:y,ownerState:b}),[S,E]=(0,bn.default)("expandIconWrapper",{className:w.expandIconWrapper,elementType:b1,externalForwardedProps:y,ownerState:b});return(0,i.jsxs)(x,{...A,children:[(0,i.jsx)(k,{..._,children:a}),l&&(0,i.jsx)(S,{...E,children:l})]})});var i6=p;let b3=(0,i8.default)((0,i.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");function b4(){let[e,t]=n.useState(!1),r=e=>(i,n)=>{t(!!n&&e)};return(0,i.jsxs)(i0.Container,{id:"faq",sx:{pt:{xs:4,sm:12},pb:{xs:8,sm:16},position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:3,sm:6}},children:[(0,i.jsx)(i6.default,{component:"h2",variant:"h4",color:"text.primary",sx:{width:{sm:"100%",md:"60%"},textAlign:{sm:"left",md:"center"}},children:"Frequently asked questions"}),(0,i.jsxs)(iZ.Box,{sx:{width:"100%"},children:[(0,i.jsxs)(bq,{expanded:"panel1"===e,onChange:r("panel1"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel1d-content",id:"panel1d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["What is"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is an advanced AI-powered tool designed to summarize PDF documents and answer content-specific questions. It offers a user-friendly interface and continuously improves over time to provide efficient document handling and deeper comprehension."})})]}),(0,i.jsxs)(bq,{expanded:"panel2"===e,onChange:r("panel2"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel2d-content",id:"panel2d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","save time?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm dramatically reduces the time spent reading and comprehending long PDF documents by providing concise summaries. This allows users to quickly grasp key points, freeing up time for other tasks or deeper study on specific areas of interest."})})]}),(0,i.jsxs)(bq,{expanded:"panel3"===e,onChange:r("panel3"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["How does"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","enhance understanding?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm enhances understanding by allowing users to ask specific questions about the PDF content. It clarifies complex information and provides detailed insights, which is particularly valuable for dense academic papers, technical manuals, and detailed reports where nuances matter."})})]}),(0,i.jsxs)(bq,{expanded:"panel4"===e,onChange:r("panel4"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel4d-content",id:"panel4d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","accessible anywhere?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is designed to be accessible anywhere and anytime. Whether you're on the go or at your desk, you can easily upload documents and interact with your material without the need for extensive reading or manual searching through pages."})})]}),(0,i.jsxs)(bq,{expanded:"panel5"===e,onChange:r("panel5"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel5d-content",id:"panel5d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Who can benefit from using"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"}),"?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Bookworm is beneficial for students, professionals, and anyone who deals with large volumes of PDF documents. It helps streamline document handling, improve comprehension, and save time, making it an invaluable tool for various tasks and industries."})})]}),(0,i.jsxs)(bq,{expanded:"panel6"===e,onChange:r("panel6"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel6d-content",id:"panel6d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","handle different types of PDF documents?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm is versatile and can handle various types of PDF documents, including academic papers, technical manuals, reports, and more. Its advanced AI capabilities adapt to different content structures and complexities to provide accurate summaries and insights."})})]}),(0,i.jsxs)(bq,{expanded:"panel7"===e,onChange:r("panel7"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel7d-content",id:"panel7d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","easy to use?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm offers an intuitive, user-friendly interface that is easy to navigate. Its features are designed to be accessible and straightforward, allowing users to upload documents, ask questions, and interact with the content seamlessly."})})]}),(0,i.jsxs)(bq,{expanded:"panel8"===e,onChange:r("panel8"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel8d-content",id:"panel8d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Does"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","require any installation?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"No, Bookworm is a web-based application that does not require any installation. Users can access it directly through their web browsers, making it convenient to use on any device with an internet connection."})})]}),(0,i.jsxs)(bq,{expanded:"panel9"===e,onChange:r("panel9"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel9d-content",id:"panel9d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Is"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","secure?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Yes, Bookworm takes user privacy and data security seriously. It uses encryption and other security measures to protect user data and ensure confidentiality while handling PDF documents. Additionally, Bookworm does not store uploaded documents after processing."})})]}),(0,i.jsxs)(bq,{expanded:"panel10"===e,onChange:r("panel10"),children:[(0,i.jsx)(b2,{expandIcon:(0,i.jsx)(b3,{}),"aria-controls":"panel10d-content",id:"panel10d-header",children:(0,i.jsxs)(i6.default,{component:"h3",variant:"subtitle2",children:["Can"," ",(0,i.jsx)(i6.default,{variant:"subtitle2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})," ","be used for collaborative work?"]})}),(0,i.jsx)(bY,{children:(0,i.jsx)(i6.default,{variant:"body2",gutterBottom:!0,sx:{maxWidth:{sm:"100%",md:"70%"}},children:"Currently, Bookworm is primarily designed for individual use. However, future updates may include collaborative features to facilitate teamwork and document sharing among users."})})]})]})]})}var i1=i1,i3=i3,i5=i5,b5=e.i(15134),b5=b5,i6=p;let b6=(0,i8.default)((0,i.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),b9=(0,i8.default)((0,i.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),b8={width:"140px",height:"auto"};function b7(){return(0,i.jsxs)(i6.default,{variant:"body2",color:"text.secondary",mt:1,children:["Copyright  ",(0,i.jsx)(i3.default,{href:"https://github.com/rfranks/bookworm",children:(0,i.jsx)(i6.default,{variant:"body2",component:"span",sx:{fontFamily:'"Gloria Hallelujah", cursive',fontWeight:400,fontStyle:"normal"},children:"bookworm"})})," ",new Date().getFullYear()]})}function we(){let[e,t]=n.useState(""),r=e=>{let i=document.getElementById(e);if(i){let e=i.offsetTop-128;i.scrollIntoView({behavior:"smooth"}),window.scrollTo({top:e,behavior:"smooth"}),t("")}};return(0,i.jsxs)(i0.Container,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:4,sm:8},py:{xs:8,sm:10},textAlign:{sm:"center",md:"left"}},children:[(0,i.jsx)(by,{open:"terms"===e,onClose:()=>t("")}),(0,i.jsxs)(bo,{open:"aboutUs"===e,onClose:()=>t(""),children:[(0,i.jsx)(bd,{children:"About Us"}),(0,i.jsx)(i1.default,{"aria-label":"close",onClick:()=>t(""),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(bw,{})}),(0,i.jsx)(bg,{children:(0,i.jsx)(iQ,{children:"\nBookworm is an innovative AI-powered tool designed to revolutionize the way we interact with PDF documents. Our mission is to empower users to efficiently handle and comprehend large volumes of textual content with ease.\n\n## Our Vision\n\nAt Bookworm, we envision a future where accessing and understanding complex documents is effortless. By leveraging advanced artificial intelligence technologies, we aim to provide users with intelligent summaries, insightful analysis, and instant answers to content-specific questions.\n\n## Our Mission\n\nOur mission is to simplify the process of document handling and comprehension. We strive to save users time and effort by offering a user-friendly interface that allows for seamless interaction with PDF documents. Whether you're a student, professional, or researcher, Bookworm is your essential companion for unlocking the wealth of knowledge hidden within your documents.\n\n## Key Features\n\n- **Summarization**: Bookworm generates concise summaries of PDF documents, enabling users to grasp key points quickly.\n- **Question-Answering**: With Bookworm's question-answering capability, users can ask specific questions about the content and receive instant answers.\n- **Continuous Improvement**: Bookworm's AI algorithms continuously learn and improve over time, ensuring that users receive the most accurate and relevant information.\n- **Accessibility**: Bookworm is accessible anywhere, anytime, allowing users to upload and interact with documents on the go.\n\n## Meet the Team\n\nOur team consists of passionate individuals dedicated to making document handling and comprehension more efficient and accessible. With expertise in artificial intelligence, natural language processing, and user experience design, we're committed to delivering an exceptional user experience with Bookworm.\n\n## Contact Us\n\nHave questions or feedback? We'd love to hear from you! Feel free to reach out to us at [richardfrankskr@hotmail.com](mailto:richardfranksjr@hotmail.com) and join us on our mission to revolutionize document handling and comprehension with Bookworm.\n"})}),(0,i.jsx)(bb,{children:(0,i.jsx)(vH.Button,{onClick:()=>t(""),children:"OK"})})]}),(0,i.jsxs)(iZ.Box,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},width:"100%",justifyContent:"space-between"},children:[(0,i.jsx)(iZ.Box,{sx:{display:"flex",flexDirection:"column",gap:4,minWidth:{xs:"100%",sm:"60%"}},children:(0,i.jsxs)(iZ.Box,{sx:{width:{xs:"100%",sm:"60%"}},children:[(0,i.jsx)(iZ.Box,{sx:{ml:"-15px"},children:(0,i.jsx)(w.default,{src:"/logo192.png",style:b8,alt:"bookworm logo",width:192,height:194})}),(0,i.jsx)(i6.default,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Newsletter"}),(0,i.jsx)(i6.default,{variant:"body2",color:"text.secondary",mb:2,children:"Subscribe to our newsletter for weekly updates and promotions."}),(0,i.jsxs)(i5.default,{direction:"row",spacing:1,useFlexGap:!0,children:[(0,i.jsx)(b5.default,{id:"outlined-basic",hiddenLabel:!0,size:"small",variant:"outlined",fullWidth:!0,"aria-label":"Enter your email address",placeholder:"Your email address",inputProps:{autoComplete:"off","aria-label":"Enter your email address"}}),(0,i.jsx)(vH.Button,{variant:"contained",color:"primary",sx:{flexShrink:0},children:"Subscribe"})]})]})}),(0,i.jsxs)(iZ.Box,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("highlights"),children:"Highlights"}),(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("pricing"),children:"Pricing"}),(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>r("faq"),children:"FAQs"})]}),(0,i.jsxs)(iZ.Box,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(i6.default,{variant:"body2",fontWeight:600,children:"Company"}),(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("aboutUs"),children:"About us"}),(0,i.jsx)(i3.default,{color:"text.secondary",href:"#",children:"Careers"}),(0,i.jsx)(i3.default,{color:"text.secondary",href:"#",children:"Press"})]}),(0,i.jsxs)(iZ.Box,{sx:{display:{xs:"none",sm:"flex"},flexDirection:"column",gap:1},children:[(0,i.jsx)(i6.default,{variant:"body2",fontWeight:600,children:"Legal"}),(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms"}),(0,i.jsx)(i3.default,{color:"text.secondary",href:"#",children:"Privacy"}),(0,i.jsx)(i3.default,{color:"text.secondary",href:"#",children:"Contact"})]})]}),(0,i.jsxs)(iZ.Box,{sx:{display:"flex",justifyContent:"space-between",pt:{xs:4,sm:8},width:"100%",borderTop:"1px solid",borderColor:"divider"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(i3.default,{color:"text.secondary",href:"#",children:"Privacy Policy"}),(0,i.jsx)(i6.default,{display:"inline",sx:{mx:.5,opacity:.5},children:""}),(0,i.jsx)(i3.default,{color:"text.secondary",sx:{cursor:"pointer"},onClick:()=>t("terms"),children:"Terms of Service"}),(0,i.jsx)(b7,{})]}),(0,i.jsxs)(i5.default,{direction:"row",justifyContent:"left",spacing:1,useFlexGap:!0,sx:{color:"text.secondary"},children:[(0,i.jsx)(i1.default,{color:"inherit",href:"https://github.com/rfranks/bookworm","aria-label":"GitHub",sx:{alignSelf:"center"},children:(0,i.jsx)(b6,{})}),(0,i.jsx)(i1.default,{color:"inherit",href:"https://www.linkedin.com/in/richardfranksjr/","aria-label":"LinkedIn",sx:{alignSelf:"center"},children:(0,i.jsx)(b9,{})})]})]})]})}function wt(){let[e,t]=n.useState("light"),h=(0,o.createTheme)({palette:{mode:e}});return(0,i.jsxs)(l.ThemeProvider,{theme:h,children:[(0,i.jsx)(r.default,{}),(0,i.jsx)(x,{mode:e,toggleColorMode:()=>{t(e=>"dark"===e?"light":"dark")}}),(0,i.jsx)(bx,{}),(0,i.jsxs)(a.default,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(bT,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(b4,{}),(0,i.jsx)(s.default,{}),(0,i.jsx)(we,{})]})]})}}]);